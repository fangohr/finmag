fangohr: Still testing ...
2012-02-12 21:32:46 fangohr: And more testing.
2012-02-12 21:33:40 fangohr: Working on logging this session automatically.
2012-02-12 21:42:44 fangohr: If all goes well, then this note will be auto-committed tonight to the mercurial repository.
2012-02-13 09:19:35 HansFangohr: Morning everybody.
2012-02-13 11:24:25 ww1g11: Hello, this is Weiwei.
2012-02-13 11:24:52 HansFangohr: Yuuhouu, well done Weiwei :)
2012-02-13 12:06:41 HansFangohr: Anybody up for lunch? When? 12:30? 13:00?
2012-02-13 12:46:53 mb8g11: 13:00 is good.
2012-02-13 12:54:14 HansFangohr: Okay, let's make it so.
2012-02-13 12:54:55 andersej: I'll join!
2012-02-13 16:31:45 mb8g11: How can I make sure if I work on a matrix or a vector?
2012-02-13 17:14:43 HansFangohr: If I understand the question correctly, and this is about numpy.arrays, you can use the 'shape' attribute of an array to distingish them.
2012-02-14 09:44:31 andersej: Good morning, Hans!
2012-02-14 09:46:43 HansFangohr: Good morning, Sir :)
2012-02-14 09:54:58 HansFangohr: Hi Anders, I played a little with your code, and added a comment to the story in pivotal -- not sure whether you get email notification for this?
2012-02-14 09:56:31 HansFangohr: Marc-Antonio (mb8g11), as you rightly say, we should make the 'stories' as small as possible. I have thus accepted the 'exchange' story as completed, and added two new ones, each suggesting a test for the exchange interaction. Feel free to add more as you go along.
2012-02-14 09:56:49 HansFangohr: I am busy all morning with Interviews of new PhD students; I hope to have some time in the early afternoon.
2012-02-14 10:00:25 andersej: Yes, I got the notification. Will take a closer look at it. If it is zero initially, it will always be zero in this simple case. Perhaps it changes if there are other contributions to the equation.
2012-02-14 11:44:19 GabrielB: Hi everyone can anyone advise me with mercurial? I have added a "documentation" subdirectory to /demag and am not quite sure how to get HG to see it and push it up into Bitbucket.
2012-02-14 11:52:46 andersej: Think it is just hg add file, hg commit -m 'Message of what is changed', and then hg push.
2012-02-14 11:53:26 andersej: Where file of course is the name of the file you want to add.
2012-02-14 11:58:29 mb8g11: Are there files in that directory?
2012-02-14 12:39:52 andersej: Anyone up for lunch sometime between now and 1?
2012-02-14 12:42:19 mb8g11: 13:00 is good.
2012-02-14 12:51:55 GabrielB: thanks Anders! I will try with -m instead of the normal commit.
2012-02-14 12:52:51 GabrielB: I have just spoken to Anders Logg, he  recommended Nitsche's method in order to get the demag field.
2012-02-14 13:49:50 HansFangohr: Hi Gabriel, that's great. What is Nitsche's method ? ;-) Do you have a reference for it? I haven't heard of the name yet.
2012-02-14 13:54:50 mb8g11:  1ffd48ebd533b81339e58e1f185c32a8ebeedce8
2012-02-14 13:55:01 mb8g11: J.A. Nitsche, Uber ein Variationsprinzip zur Loesung von Dirichlet-Problemen bei Verwendung von Teilraeumen, die keinen Randbedingungen unterworfen sind, Abhandlungen aus
2012-02-14 13:55:04 mb8g11: dem Mathematischen Seminar der Universitaet Hamburg 36 (1970/71), 9â15. MR0341903(49:6649)
2012-02-14 13:55:17 mb8g11: disregard the first message, that was a paste gone wrong
2012-02-14 13:58:32 mb8g11: @GabrielB it is not possible to represent an empty directory in Mercurial. As soon as you put a file in it though, you can simply commit the file and the repository will get added as well.
2012-02-14 13:58:46 mb8g11: *and the directory
2012-02-14 14:00:09 GabrielB: When I commited I think my file was stored locally and not as part of the project attached to the Bitbucket depo.
2012-02-14 14:02:37 GabrielB: my folder "documentation" does not show up in the source when I look at it in bitbucket
2012-02-14 14:03:57 mb8g11: Let's say you have the file doc.tex in there.
2012-02-14 14:04:07 mb8g11: hg add documentation/doc.tex
2012-02-14 14:04:17 mb8g11: hg ci (or hg ci documentation/doc.tex)
2012-02-14 14:04:30 mb8g11: hg push
2012-02-14 14:06:38 GabrielB: thanks this is what i get
2012-02-14 14:06:40 GabrielB: gaba@ubuntu:~/devmag/finmag/devtests/demag/documentation$ hg add truncdemag1.tex
2012-02-14 14:06:40 GabrielB: truncdemag1.tex already tracked!
2012-02-14 14:06:41 GabrielB: gaba@ubuntu:~/devmag/finmag/devtests/demag/documentation$ hg ci
2012-02-14 14:06:41 GabrielB: nothing changed
2012-02-14 14:06:41 GabrielB: gaba@ubuntu:~/devmag/finmag/devtests/demag/documentation$ hg push
2012-02-14 14:06:41 GabrielB: pushing to default-push
2012-02-14 14:06:43 GabrielB: abort: repository default-push not found!
2012-02-14 14:08:37 GabrielB: This description of the method is the closest to what was shown to me by Anders.
2012-02-14 14:08:38 GabrielB: www.ann.jussieu.fr/2007/PDFSeminaires/RolfStenberg071207.pdf
2012-02-14 14:08:57 GabrielB: If it works I will include it in the Docu of course :-)
2012-02-14 14:10:51 mb8g11: In the repository root, open the file .hg/hgrc. You want it to look like that http://www.pastebucket.com/1484
2012-02-14 14:11:09 mb8g11: I assumed you use https and not ssh.
2012-02-14 14:20:15 mb8g11: If all fails, check out a new copy of the repo and copy the files by hand. And while you're at it, set up SSH, there is a nice guide in the bitbucket documentation.
2012-02-14 14:20:31 mb8g11: That way, you won't have to enter your password when pushing.
2012-02-14 14:28:52 GabrielB: ok the repository root already has the pastebucket code. I am guessing I shouldnt try adding it to .hg/hgrc in the new directory
2012-02-14 14:29:10 mb8g11: Correct.
2012-02-14 14:31:05 mb8g11: Try hg push https://gabrielb@bitbucket.org/fangohr/finmag
2012-02-14 14:55:54 GabrielB: implemented a 1-d Nitsche method. The results seem to look similar to that obtained by Fredkin- Koehler.
2012-02-14 14:57:55 GabrielB: the results can be seem in nitschetest.py
2012-02-14 14:59:07 GabrielB: I moved the documentation out of the new folder for now thanks for the help so far mb8g11 (Mark I guess!), I will keep trying later to get the new folder in place and clean up a bit
2012-02-14 14:59:49 Marc-Antonio: Yes, Marc
2012-02-14 15:04:52 GabrielB: lol I am off to pick up my daughter! see everyone tomorrow
2012-02-14 15:18:21 andersej: @Marc-Antonio, can you take a look at my program when you have time?
2012-02-14 15:20:58 Marc-Antonio: 16:00?
2012-02-14 15:21:10 andersej: Great
2012-02-14 15:30:12 HansFangohr: Hi all, what is a good IRC client for Linux (Ubuntu)?
2012-02-14 15:31:51 andersej: I'm happy with xchat now.
2012-02-15 08:54:57 HansFangohr: Morning Anders.
2012-02-15 08:56:00 andersej: Good morning! Just read your email, I'll have it done by the end of the day.
2012-02-15 08:58:21 HansFangohr: No rush -- it may just be fun to do this :) I also had another idea for a good test, and will add this to the tracker in a moment.
2012-02-15 09:01:26 HansFangohr: This is the extra test for the Jacobian: https://www.pivotaltracker.com/story/show/24971625
2012-02-15 09:04:33 HansFangohr: Anders, I added a story for the test I suggested in the email: https://www.pivotaltracker.com/story/show/24971705
2012-02-15 09:06:26 andersej: Okay, i thought you combined it in the first one. Sorry. I don't mean to steal all stories.
2012-02-15 09:16:32 HansFangohr: You steal as many as you like :)
2012-02-15 09:40:22 HansFangohr: Hi Gabriel.
2012-02-15 09:40:45 HansFangohr: Andersej, just to add; I think the reason I didn't see those stories started is that you didn't click on 'save' yet or so -- It is all here now.
2012-02-15 11:19:47 andersej: HansFangohr, do you have time today to explain the two time scales scheme a bit more detailed than in the story description?
2012-02-15 11:48:56 HansFangohr: Not at the moment (but later this afternoon). You don't need to worry about it: Use an exchange interaction strength that is realistic (ask MA, or the Nmag Manual) and an applied field that has the strength of 1 Tesla (that is very roughly 1e6 A/m, the same magnitude as the saturation magnetisation), and you should have the two timescales. I think Marc-Antonio maybe able to explain as well.
2012-02-15 14:36:00 HansFangohr: Andersej, are you okay to come to my office to talk through your code?
2012-02-15 14:36:46 andersej: Yes, I'm there in two minutes. Will just push what I'm doing.
2012-02-15 14:37:47 HansFangohr: Okay, great.
2012-02-15 14:50:25 mb8g11: Hans, I'm afraid that the loading of the C-code works perfectly fine on my machine.
2012-02-15 15:08:22 HansFangohr: Marc-Antonio, I have created an account for you on the machine. It is called 'osiris.sesnet.soton.ac.uk'.
2012-02-15 15:10:00 mb8g11: (by the way, the volume is a vector)
2012-02-16 09:28:37 HansFangohr: Greetings, DokosBot.
2012-02-16 10:31:42 HansFangohr: Hi Andersej, mb8g11, any plans for lunch? If so, what is your preferred time?
2012-02-16 10:32:22 andersej: 12:30?
2012-02-16 10:37:00 HansFangohr: Okay, fine. Dmitri and I have a meeting at 11;00 in physics. We'll come back to the office before lunch then -- probably takes only 30 or 45 minutes.
2012-02-16 10:56:59 mb8g11: Oki.
2012-02-17 09:23:07 HansFangohr: Morning Anders and DokosBot.
2012-02-17 09:23:40 andersej: Good morning, Hans!
2012-02-17 13:18:15 andersej: Which PETSc version are you using? I'm on 3.2-p5 and I get PETSc error when I try to run /examples/exchange_1D/run_visual.py. It is caused by the last line of the first for loop (line 52).
2012-02-20 08:55:38 HansFangohr: Morning DokosBot.
2012-02-20 09:11:44 mb8g11: Good morning!
2012-02-20 09:12:23 HansFangohr: Good Morning. I am just moving the (very handy) DokosBot from eta to summer.kk - a good opportunity to document this here.
2012-02-20 09:28:57 mb8g11: So is summer the newly installed machine?
2012-02-20 09:29:31 HansFangohr: Yes; the machine was around before but I had to upgrade the OS somewhat severly (done now).
2012-02-20 09:34:52 HansFangohr: Hello DokosBot. You have just joined automatically (via a cronjob) because summer.kk rebooted. You are started via fangohr's cronjob, and another cronjob on the same machine will commit all the changes to finmag/logbooks/finmag-irc.log every night at 23:59. Just so we have this recorded.
2012-02-20 10:54:09 mb8g11: Do you know how to disable the demag-field in nmag or point me to the documentation? Can't find how to do so.
2012-02-20 10:54:47 fangohr: Yes, when you create a simulation object, there should be an option like 'demag=False' or so.
2012-02-20 10:55:39 fangohr: Actually, it is 'do_demag=False'. See http://nmag.soton.ac.uk/nmag/0.2/manual/html/command_reference.html#simulation
2012-02-20 10:57:37 mb8g11: thank you!
2012-02-20 14:38:45 GabrielB: 2-d and 3-d demag problems implemented! Tests for solver coming soon.
2012-02-20 15:15:50 HansFangohr: Hi Gabriel, great. I'll try to have a look at this soon.
2012-02-21 08:46:18 andersej: Good morning, Hans and DokosBot!
2012-02-21 09:06:18 HansFangohr: Good Morning Anders and DokosBot.
2012-02-21 09:09:47 HansFangohr: Anders, shall we get together in 20 minutes or so to go through Marie's reply?2012-02-21 09:50:49 andersej: Again I don't get notifications when I get a message... Sorry. But is it okay now? I can come to your office.
2012-02-21 12:03:13 HansFangohr: Hi Anders, am on the phone right now. Lunch in 20 minutes or so?
2012-02-21 12:20:24 andersej: Yes.
2012-02-21 12:27:36 HansFangohr: Fab, I'll come over now.
2012-02-22 08:44:18 HansFangohr: Morning Anders, DokosBot.
2012-02-22 09:03:23 HansFangohr: Hi Gabriel, good to see you.
2012-02-22 09:03:43 HansFangohr: Are you okay to delay our meeting today to 15:30 UK time? Not sure whether you have seen my email already.
2012-02-22 09:04:27 GabrielB: Hi hans I'll read the mail
2012-02-22 09:06:31 GabrielB: Ahh ok Doctoral training centre meeting alles klar. 15: 30 might be pushing it a little do you have any time this morning?
2012-02-22 09:07:39 GabrielB: Ahh I mean it might be bit late and the it would be nicer to meet in the morning with less time pressure :-)
2012-02-22 09:07:40 HansFangohr: No, teaching. How about tomorrow 10am?
2012-02-22 09:07:51 HansFangohr: Yes, I agree ;-)
2012-02-22 09:08:25 HansFangohr: By what time do you need to leave? Maybe we can start today, and continue tomorrow?
2012-02-22 09:08:47 GabrielB: ok sounds good! Just to give you a quick update the Nitsche Solver passes all the tests so far now that the boundary values of phitot have been fixed.
2012-02-22 09:09:18 GabrielB: So for tomorrow I will try to compare to the analytic solution and of course write up a summary of the nitsche method
2012-02-22 09:09:24 HansFangohr: That sounds great. Also in 3d? ;-)
2012-02-22 09:09:27 GabrielB: yes
2012-02-22 09:09:34 GabrielB: 1 to 3 d :-)
2012-02-22 09:09:49 HansFangohr: Fabulous.
2012-02-22 09:10:58 HansFangohr: If you choose M=[1,0,0], you should fine that phi is a linear function of x inside the sphere. In particular, if you compute the negative gradient of phi, you should get a vector field that is [-1/3,0,0] inside the sphere. I guess this is the analytic solution you refer to, and would be nice to see.
2012-02-22 09:32:30 andersej: Sorry, didn't get notified as usual.. Morning! How come you have two users always logged on, Hans?
2012-02-22 10:59:18 HansFangohr: Anders, these are from machines that are never switched off.
2012-02-22 11:45:02 HansFangohr: Anders, Marc-Antonio, just to say that I am not having lunch today.
2012-02-23 09:05:19 HansFangohr: Good Morning Anders and Gabriel.
2012-02-23 09:07:09 andersej: Good morning to both of you, and DokosBot!
2012-02-23 09:22:19 GabrielB: Good morning Anders and Hans
2012-02-23 09:53:13 GabrielB: Hans are we ok to meet in 7 minutes?
2012-02-23 09:53:52 andersej: He'll try. Says it might be 9.
2012-02-23 09:56:10 GabrielB: lol ok
2012-02-23 15:37:34 mb8g11: hello Marijaan
2012-02-23 22:08:56 mb8g11: good night
2012-02-23 22:09:02 mb8g11: oh, weiwei was here
2012-02-24 08:28:41 mb8g11: good morning
2012-02-24 09:02:54 fangohr: Morning folks :)
2012-02-24 09:09:04 fangohr-osiris: Morning Anders, are you out there?
2012-02-24 09:13:23 andersej: Yes, I'm here! Good morning! Just reading your email. What is your queries?
2012-02-24 09:13:37 andersej: Ok, just got it.
2012-02-24 10:52:58 andersej: Hans, great work on the documentation! Just one question: Now it seems one have to add the modules to index.rst in addition to modules.txt. This can easily be solved by a simple script copying the information from modules.txt into index.rst. Do you want such a script? I can add it in ten minutes.
2012-02-24 10:57:07 fangohr: I think in index.rst we want to sort them in a logical order, whereas for the modules.txt the order probably doesn't matter? I would think that it is okay to do this manually in this instance. Maybe a note that one needs to add NEW modules to both files might be useful as reminder (in the thisdocumentation.rst file, say).
2012-02-24 11:03:29 andersej: That's right, the order in modules.txt doesn't matter, as it will be arranged alphabetically in the html file. I guess one will get a warning when building if a new module is just added in one of the files and not both.
2012-02-27 09:01:30 andersej: Good morning, Hans!
2012-02-27 09:01:32 fangohr: Morning Anders and DokosBot!
2012-02-27 09:02:52 fangohr: I have a query for you -- do you mind coming to my office for a moment?
2012-02-27 09:04:47 andersej: I'll be there in a second.
2012-02-27 09:05:27 fangohr: Great, there is no rush.
2012-02-27 09:47:55 fangohr-osiris: Wasn't happy with Empathy as the IRC client on linux. Now trying xchat.
2012-02-27 10:04:36 andersej: Hans, when I try to clone the repository in my home folder on your computer, I get "andersej@osiris:~$ hg clone ssh://hg@bitbucket.org/fangohr/finmag remote: Permission denied (publickey). abort: no suitable response from remote hg!", and when I try running from your repository I get permission denied error because I (ffc) am not allowed to write to your folder (ffc wants to create a compiled cache file).
2012-02-27 10:05:56 fangohr: You get the ssh key error because the new account has a different ssh key then the one your machine. Try to checkout via https -- then you have to enter the bitbucket password, and it should work.
2012-02-27 10:07:01 andersej: Great, it works, thanks!
2012-02-27 10:48:28 andersej: I can confirm that /dynamics/macrospin/test_analytic.py runs without problem on my computer with petsc 3.2-p5. I tried installing the newest petsc locally in my home directory on your computer, Hans, but it doesn't like using the new version as it already has an older version built and installed using sudo. I've tried setting petsci_dir and petsc_arch without any luck. Will try a couple of other approaches before the weekly meeting.
2012-02-27 10:52:29 fangohr: Thank you nice -- I'll try to upgrade PETSC then. Let me do this before you try anything else.
2012-02-27 11:24:48 fangohr: Andersej, thanks -- have upgraded ubuntu, then re-installed fenics (as in the finmag/install/fresh-on-ubuntu/fenics.sh) and now the problem has disappeared.
2012-02-27 11:25:13 andersej: Great!
2012-02-28 14:40:42 fangohr_: Hi MarcAntonio, are you out there?
2012-02-28 14:45:22 mb8g11: Yes I am!
2012-02-28 14:45:40 mb8g11: who
2012-02-28 14:49:23 mb8g11: What can I do?
2012-02-28 14:53:05 fangohr_: Hi, just seen the latest commit with the timings - thank you.
2012-02-28 14:53:06 fangohr_: G
2012-02-28 14:53:18 fangohr_: Good to see how profiling can be done here.
2012-02-28 14:54:51 mb8g11: :) Currently writing the spinwaves finmag script, but will get back to the exchange computation afterwards. It's by far the most expensive thing we currently do.
2012-02-28 14:55:14 fangohr_: Some observations: when I ran this, my (virtual machine) spend a long time after displaying 'ordering nodes' or something. Not sure what this is, but it seems related to the mesh generation.
2012-02-28 14:56:05 mb8g11: I think it's just the last thing it does before running the integrator. Because there is no new output until the end, the message seems to be there for a long time. At least that was my impression.
2012-02-28 14:56:20 mb8g11: Let me check that again quickly.
2012-02-28 14:57:12 fangohr_: Oh that could be right.
2012-02-28 14:57:36 fangohr_: I have in fact just added some print statements to address this, and committed, but need to merge now before pushing back.
2012-02-28 14:58:43 mb8g11: Yes that's the situation.
2012-02-28 14:58:45 mb8g11: Great.
2012-02-28 14:59:50 mb8g11: Doesn't seem to run with the default tolerances anymore. I could have sweared I checked it out before checking it in...
2012-02-28 15:00:41 fangohr_: Okay, same here. I will just push back my changes -- still doesn't run, but doesn't affect my additions I think.
2012-02-28 15:01:12 mb8g11: Or add rtol=1e-3 to the set_integrator arguments. If not, I'll do it, no worries.
2012-02-28 15:02:15 fangohr_: Too late ;-)
2012-02-28 15:02:48 mb8g11: Haha.
2012-02-28 15:04:13 mb8g11: I wonder why it didn't break the build. I guess it works *sometimes*.
2012-02-28 15:04:19 fangohr_: Jenkins says this compiles fine. Indeed.
2012-02-28 15:04:26 fangohr_: Also, do we know why building is now much faster?
2012-02-28 15:04:45 mb8g11: No.
2012-02-28 15:04:54 fangohr_: Thinking of http://summer.kk.soton.ac.uk:8080/job/finmag/buildTimeTrend
2012-02-28 15:07:50 mb8g11: Well, it's still too long. That's mostly the fault of the exchange 3D test.
2012-02-28 15:08:25 fangohr_: This is example is useful documentation how to use the same mesh for nmag and finmag comparison. In general, it should be sufficient to just mesh the same geometry (as in the limit of infinitely fine meshes we expect the answers to be identical, and expect reasonable agreement for reasonable meshes anyway). We can then use teh command dolfin.Box, dolfin.Rectangle etc to create the mesh in dolfin. Nmag is lacking the directly comparab
2012-02-28 15:08:26 fangohr_: command, but there is the 'examesh' executable that does something something similar. Anyway, this is just a generic remark for the future.
2012-02-28 15:11:51 fangohr_: Another idea: instead of checking the value at a particular node, I would check the value at a particular position. In dolfin we can use m((x,y,z)) to get the value of the Function m at (x,y,z), in Nmag we can use sim.probe_subfield_siv('m_Py',(x,y,z)) or equivalent. Both access methods will interpolate the true field, but the results should be comparable. The advantage of this approach is that we are independent of the mesh, and in
2012-02-28 15:11:51 fangohr_: particular the order of nodes in the mesh. Nmag may change the order of the nodes when it starts (in particular when run using MPI on more than 1 node), and I expect dolfin may do this as well. Again, just a general remark before I forget.
2012-02-28 15:12:00 mb8g11: Personally, I think it's much more difficult to compare data with oommf, because the values you get out are the middle of a cell. Is there some nmag code that does that? Would love to see it.
2012-02-28 15:12:39 mb8g11: Oooh, m((x,y,z)) really? Thanks!
2012-02-28 15:14:00 fangohr_: I tink I know why it doesn't fail: the exit status ($? for bash if I remember correctly) suggests that the return value is 0 despite the vode warning. So Jenkins wouldn't know this. As it is just a warning, it is not actually a failure of the integration - it just says that it needed suspiciously many iterations. (and we should of course understand why). I am not sure what the implication for the result is, but as your assert stateme
2012-02-28 15:14:01 fangohr_: are not triggered, it can't have been too bad?
2012-02-28 15:14:47 mb8g11: True.
2012-02-28 15:18:17 mb8g11: I failed at merging again. Aaaah.
2012-02-28 15:18:39 fangohr_: OOMMF: I think the best you can do is to compare with FE data where you probe the FE field at the position of the centre of the cube in OOMMF. On the other hand, for mesh edge length -> 0, we get the same result (or should), so if we just allow a bit more tolerance, this should be fine. I wouldn't worry about this too much.
2012-02-28 15:19:09 fangohr_: Does the mesh generation take a lot of time? This will affect the regression tests as well. Something to consider.
2012-02-28 15:22:29 mb8g11: @oommf, fine, makes sense
2012-02-28 15:23:31 mb8g11: @mesh generation. Not an awful lot in comparison with the actual simulation, but a few seconds here and there add up. What time should we be aiming for? 10s for the unit tests?
2012-02-28 15:24:36 mb8g11: We can't really do true TDD, as our tests consist of solving physical problems and not inserting a row into a database. That takes time.
2012-02-28 15:24:54 mb8g11: Because ideally, tests should run in <1s.
2012-02-28 15:28:25 fangohr_: I agree the mesh generation is relatively fast; although changing to dolfin.Box where possible is desirable (as it will be faster for a cubic geometry than going to an external package for a generic geometry).
2012-02-28 15:28:48 fangohr_: If tests take 10 seconds, I think that's fine. As you say, at some point we need to test  some physics, and that takes time.
2012-02-28 15:31:18 fangohr_: Regarding the run-time of this one (src/finmag/sim/tests/dynamics_3D): the profiler says that more than 50% are spend it 'assemble'. I can only think of the exchange assemble command that is called repeatedlyfor every iteration. Thus we need to check whether we can make this faster by storing the matrix rather than assembling every time. See https://www.pivotaltracker.com/story/show/25041739
2012-02-28 15:32:04 andersej: I'm working on it.
2012-02-28 15:32:17 fangohr_: Great, thanks.
2012-02-28 15:32:53 fangohr_: (I have looked into the UFL manual, following repeated recommendations from Marc-Antonio and later Dmitri. That seems a useful resource indeed.)
2012-02-28 15:34:45 mb8g11: @assembly: Yes, it's in fact significantly more than 50% and what I wanted to say at 14:54. Maybe I can join you Anders, in an hour or so?
2012-02-28 15:35:00 andersej: Yes, the documentation of ufl modules isn't very good, so the manual is the right place to obtain information.
2012-02-28 15:35:19 andersej: That'll be great, MarcAntonio.
2012-02-28 15:36:07 mb8g11: Now that I know how to probe the field in dolfin, I will throw out the mesh generation for dolfin for the periodic spinwaves. Thanks!
2012-02-28 15:36:56 mb8g11: Just need to manage to revert a file to an old version before that. That sure is tricky!
2012-02-28 15:40:10 mb8g11: (meant 3D example btw.)
2012-02-28 23:07:28 16WAAC4L4: Update: bitbucket may be a little unresponsive: I noted that my 'hg fetch' or 'hg pull' requests did time out. I interrupted them. Jenkins now seems to suffer the same fate -- it has been running 'hg pull' sinnce 22:47; and thus it does not build due to the latest changes. I would hope that Jenkins migth kill the pull job at some point, or that bitbucket recovers. Let's see.
2012-02-28 23:07:44 16WAAC4L4: I am Hans, by the way. Sorry about the funny login.
2012-02-29 09:24:21 fangohr: Morning all.
2012-02-29 09:24:39 andersej: Morning!
2012-02-29 10:10:09 GabrielB: Hi everyone
2012-02-29 10:14:27 mb8g11: Hi all.
2012-02-29 10:14:33 GabrielB: Hi Marc
2012-02-29 10:18:32 andersej: Hello, mb8g11 and GabrielB!
2012-02-29 10:19:38 GabrielB: HI anders
2012-02-29 11:52:17 mb8g11: I have a PGR meeting with catering at 1300 and won't go to lunch today.
2012-02-29 12:13:36 andersej: Okay, I know how you love free food, hehe..
2012-02-29 12:25:27 mb8g11: Exactly!
2012-02-29 13:34:36 fangohr_: Hi Anders, I think I know what's wrong with the exchange. A subtle bug, that I have put in earlier.
2012-02-29 13:39:03 andersej: What do you mean? The problem that makes the odeint diverge? Or is there another problem? I know that the project method isn't working very good, is this because of the bug?
2012-02-29 13:39:34 fangohr_: A different issue -- do you want to come over briefly?
2012-02-29 13:44:51 andersej: Yes, just found another bug. Two seconds, pushing now.
2012-02-29 13:45:41 fangohr_: Probably the same as I did :) Let's see. ;-)
2012-02-29 15:05:47 fangohr: Yes, spotted the same missing 'raise'. I was not asked to merge it manually, so I guess we made *exactly* the same change to the same line, and merge can deal with that silently (assuming that if we both agree what it should be, this will be the right way to merge it). Clever.
2012-02-29 15:29:59 andersej: Hehe, good!
2012-02-29 15:30:58 andersej: Someone knows where these "Create layout  End Create layout" - messages are coming from?
2012-02-29 15:31:14 fangohr: No. When do you see them?
2012-02-29 15:31:51 andersej: python explicit_g_matrix.py
2012-02-29 15:32:23 andersej: Seems like they occur in every methods.
2012-02-29 15:33:25 fangohr: I don't think I can see these at all.
2012-02-29 15:34:21 andersej: Interesting. I'll try running the script from your machine.
2012-02-29 15:37:37 andersej: Right, I don't get those messages there...
2012-02-29 15:38:03 fangohr: Maybe you have set some loglevel higher than normal or some other setting in your user account that triggers this behaviour?
2012-02-29 15:41:42 andersej: Probably something like that, yes, but I have never changed any such thing on this machine. It is probably due to different versions of ffc, ufl, etc. Nothing to worry about.
2012-02-29 17:09:17 fangohr: exit
2012-03-01 09:12:17 fangohr_: Morning Anders.
2012-03-01 09:12:50 andersej: Good morning, Hans!
2012-03-01 09:24:31 andersej: I've just changed all my email addresses on Jenkins to the Soton-address and pushed my code. We'll see in a few minutes if it worked.
2012-03-01 09:27:02 andersej: Yey! It worked!
2012-03-01 09:27:12 fangohr_: Great, thanks.
2012-03-01 11:35:16 andersej: Hi all! I think the documentation for Exchange and Anisotropy is a bit strange, since it displays all these functions we only use internally. The user should only use exchange.compute_field(), but this is not mentioned in the documentation. But all the compute_filed_box_assemble, etc, are listed, but cannot be used. I've made a big change and gathered all methods in compute_field(). I've pushed it now, so please have a look and if you don't like i
2012-03-01 11:35:16 andersej: t, we can revert immediately.
2012-03-01 11:35:45 andersej: That is, I've just changed the Exchange for now.
2012-03-01 11:56:38 mb8g11: Why didn't you just prefix these methods with __ ?
2012-03-01 11:57:34 mb8g11: And since the documentation is only for us, it wouldn't hurt to see the different methods. But that is a matter of taste I guess.
2012-03-01 11:57:42 andersej: I could have done that, and added a dummy method compute_field() with only documentation.
2012-03-01 12:05:14 mb8g11: Do you mind if I edit the file a little, or are you currently working on it?
2012-03-01 12:05:33 andersej: No, please do.
2012-03-01 12:05:39 mb8g11: :)
2012-03-01 12:35:28 mb8g11: pushed
2012-03-01 12:40:13 fangohr: Just in time for lunch, I suppose :)
2012-03-01 12:44:21 mb8g11: Yes!
2012-03-01 12:45:21 fangohr: Just noticed that I broke the build before ... hopefully just fixed it with a new commit.
2012-03-01 14:18:31 fangohr: Marc-Antonio, turns out that Marijan is delayed, so I have some time now -- shall we look at your tests now then?
2012-03-01 14:23:24 mb8g11: Yes ofc
2012-03-01 16:44:40 fangohr: Hi MA, I have got 10 minutes left before the end of the day -- have we covered all the issues or is there anything else we should talk about now?
2012-03-01 16:44:58 mb8g11: I think that's it really :)
2012-03-01 16:45:11 fangohr: That's fine - great. ;)
2012-03-02 09:10:50 fangohr: Morning Anders, I like you conclusion that -- due to the various logins in the IRC chat -- I must be very experienced with it.
2012-03-02 09:11:14 fangohr: In any case, I need to do deal with some urgent things but hope that we can get together in 30 minutes or so - is that oka?
2012-03-02 09:11:19 fangohr: (okay)
2012-03-02 09:18:36 andersej: Good morning, Hans! Hehe.. Yes, 30 minutes sounds great. I'll come by then.
2012-03-02 09:45:44 fangohr: Not quite finished yet, I'll give you a shout when I am done.
2012-03-02 09:45:57 andersej: Ok.
2012-03-02 09:58:06 fangohr: Hi Anders, ready to fire now. Do you want to come over?
2012-03-02 09:59:08 andersej: Yes!
2012-03-02 11:03:08 fangohr: Anders, I was wrong. The student comes at 11:30. I'll come over to your office in 5 minutes and we can look at your files for 20 minutes.
2012-03-02 16:11:30 andersej: Hans, are you still there?
2012-03-02 16:13:02 andersej: Never mind, I solved the problem.
2012-03-02 16:15:09 andersej: That is, not THE problem, just another one..
2012-03-02 17:06:39 fangohr: Hi Anders, yes, still there. Too late now I guess. Let's talk Monday.
2012-03-02 17:06:45 fangohr: ; have a good weekend everybody.
2012-03-05 09:48:55 fangohr: Moin Anders.
2012-03-05 10:23:21 andersej: Morning!
2012-03-05 12:57:28 fangohr: Up for lunch?
2012-03-05 12:57:33 andersej: Yes!
2012-03-05 14:42:28 fangohr: Anders, do you know whether we have any Ubuntu installation CDs lying around in the office? Don't worry if not -- just wanted to check before burning a new one.
2012-03-05 14:42:58 andersej: No, I'm not aware of any such CDs. Sorry.
2012-03-05 14:44:50 andersej: By the way, do you have two seconds while the CD is burning?
2012-03-05 14:45:00 fangohr: Yes, sure :)
2012-03-05 14:45:18 andersej: I'll send you an email and come to your office.
2012-03-05 16:39:19 fangohr: Hi Maxim, well done.
2012-03-05 16:41:06 maxim__: the uk layout is confusing me. had troubles with password because of exchanged y and z ;)
2012-03-05 17:10:20 fangohr: Hi Maxim, am about to leave. I see you tomorrow around 11;00 or so. Have a nice evening.
2012-03-05 17:18:39 maxim__: Thanks, you too.
2012-03-06 09:06:59 fangohr: Good Morning, Anders.
2012-03-06 09:07:07 andersej: Morning, Hans!
2012-03-06 09:20:59 fangohr: Morning Anders, are the 'project vs interpolate' results to spectacular that we should file a query on the dolfin team list?
2012-03-06 09:27:20 andersej: Perhaps. I've sent a mail to Anders Logg showing the results and asked why project acts as it does. Either he has a good explanation or he encourages us to file it as a bug. I'll just wait until he wakes up, hehe..
2012-03-06 09:27:40 fangohr: Sure, thanks. Let me know the answer :)
2012-03-06 11:51:12 fangohr: Hi Sebastian, good to see you :)
2012-03-06 11:51:28 SebastianS: hey, jep just managed to set up IRC
2012-03-06 11:51:43 fangohr: I need to make a few phone calls but would hope we can go for lunch around 12:30 maybe?
2012-03-06 11:52:07 SebastianS: sounds good. I have one quick questions though:
2012-03-06 11:52:27 SebastianS: could you invite me again to the dropbox folder? that didn't seem to work
2012-03-06 11:52:47 SebastianS: it's sebastian.schwieger@uni-konstanz.de
2012-03-06 11:54:04 fangohr: Yes, sorry, had a typo in the email address.
2012-03-06 11:54:38 SebastianS: no worries! just got the invite. Thanks a lot
2012-03-06 11:54:49 andersej: 12:30 sounds good!
2012-03-06 12:27:25 andersej: We are leaving for lunch now. We meet up outside my office (next to the exit).
2012-03-06 12:28:11 andersej: 2025 is the number..
2012-03-06 12:31:35 fangohr: Maxim, Sebastian, we can't find you anywhere -- I presume you have gone to the staff club already, so we meet you there.
2012-03-06 13:02:52 maxims: Nilson (or Nelson) asked me whether I go with him for lunch. But then I realized that we were not going to eat in staff club but buy food in this student shop instead. Sebastian is picking up his id card. I hope you met him on your way. Otherwise I can show some where he can have lunch.
2012-03-06 14:12:20 fangohr: Sebastian -- what is your login?
2012-03-06 14:17:46 fangohr: Got it: ss18g11 (thanks).
2012-03-06 14:20:25 fangohr: I created an account for you on eta.kk.soton.ac.uk. Password is 'konstanz', please change asap. You connect using 'ssh ss18g11@eta.kk.soton.ac.uk'.
2012-03-06 14:22:34 SebastianS: oh sorry! i didn't have the sound on and completely forgot to check here.
2012-03-06 14:22:40 SebastianS: thanks a lot!
2012-03-06 14:24:47 fangohr: Hi all, I'll be teaching and offline for the rest of the day.
2012-03-06 14:36:31 SebastianS: clear
2012-03-06 14:36:53 SebastianS: uups... that was supposed to go in terminal
2012-03-06 14:36:58 SebastianS: sorry for that
2012-03-07 10:05:01 andersej: Hans, are you out there?
2012-03-07 11:57:17 andersej: Lunch, anyone? maxims or SebastianS?
2012-03-07 12:08:31 SebastianS: ah we just went to the shops and bought some small snacks there
2012-03-07 12:08:46 SebastianS: we actually thought you guys had already gone there
2012-03-07 12:09:38 andersej: Okay, that's fine. Let's try again tomorrow!
2012-03-07 12:11:27 maxims: Do you eat every day at staff club? For me it would be to expensive. But two or three times a week is ok. So maybe tomorrow?
2012-03-07 12:12:59 andersej: Yes, we usually eat there. Just send a message here when you want to join us.
2012-03-07 12:15:06 maxims: Ok
2012-03-07 12:22:38 maxims: SebastianS: im Ordner /home/benutzername muss die Datei .hgrc angelegt werden und deren Inhalt ist:
2012-03-07 12:23:04 maxims: SebastianS: [ui]
2012-03-07 12:23:04 maxims: username = Maxim Skripnik <maxim.skripnik@yahoo.de>
2012-03-07 12:23:39 SebastianS: ah okay, danke :-)
2012-03-08 09:19:20 fangohr: Good Morning Anders and DokosBot.
2012-03-08 09:22:18 andersej: Good morning, Hans!
2012-03-08 09:22:50 andersej: I have a bunch of questions. Do you have three and a half minute?
2012-03-08 09:23:29 fangohr: Yes, give me 5 minutes to do some email, and then will be good. I'll send a short message here when I am done.
2012-03-08 09:24:01 andersej: Great!
2012-03-08 09:36:49 fangohr: Okay Anders, do you want to come over, or do I need to see your screen?
2012-03-08 09:37:18 andersej: I'm on my way!
2012-03-08 11:06:06 fangohr: Hi Sebastian. Not sure you can afford the food in the staff club (seeing your messages from yesterday), but Anders and I will go at 12:15 today. (One should be able to keep the price below 5.00 generally; the curry is exceptionally expensive.)
2012-03-08 11:09:19 SebastianS: Hi Hans, that message was acutally from Maxim, although I had the same concerns... I think I'll join you today, though and have a second go ;-)
2012-03-08 11:18:08 fangohr: Sadly, the 'student' places are not cheaper ... Actually, when you pay, you should say that you are a student, and you should get a reduction (20% or so). They will want to see your student card for this. The Southampton card you have is a visitor's card; so that is not a student card. But if you have some kind of student card from Konstanz, and explain that you are here as a visiting student, it may work. If I am around, I'll back you up. Worth a try
2012-03-08 11:22:37 SebastianS: I actually did that Monday and the lady at the pay desk told me she'd do it only this time as the curry was quite expensive; I guess she won't remember me, though, so it should be fine
2012-03-08 12:13:31 SebastianS: are you guys going to lunch? Maxim and I would be ready
2012-03-08 12:13:47 fangohr: Yes, let's meet outside Anders office in 2 min or so.
2012-03-08 12:14:00 SebastianS: okay. see you then
2012-03-08 22:35:17 fangohr__: Hi Dmitri -- nice to see you here. (Or probably just your computer being logged in) :)
2012-03-12 10:02:39 fangohr: Morning folks.
2012-03-12 10:19:08 SebastianS: I was just looking through the first couple of NMAG examples and I was wondering whether number 11 (Cubic anisotropy) would be a good point to start.
2012-03-12 10:32:22 fangohr: I would probably start with a system without anisotropy, say
2012-03-12 10:32:22 fangohr: http://nmag.soton.ac.uk/nmag/0.2/manual/html/example2/doc.html
2012-03-12 10:32:22 fangohr: Then, you may want to do something with uniaxial anisotropy (as this is the anisotropy considered in theLLB model), say
2012-03-12 10:32:22 fangohr: http://nmag.soton.ac.uk/nmag/0.2/manual/html/example_uniaxial_anis/doc.html
2012-03-12 10:33:10 fangohr: When you have mastered these, standard problem 3 may be nice to do (http://www.ctcms.nist.gov/~rdm/spec3.html). When you get to that point, let me know and I will dig out the Nmag script which you can use for initial guidance.
2012-03-12 10:35:14 SebastianS: okay. thanks a lot!
2012-03-12 12:08:17 maxim|s: Is anybody going to have lunch at staff club?
2012-03-12 12:26:31 fangohr: Oh, yes!
2012-03-12 12:26:46 fangohr: We are planning to go at 12:30 -- do you want to come over to Dmitri's and Anders' office now?
2012-03-12 16:58:57 SebastianS: Sorry to bother you again, Hans. I just noticed that the second example you recommended is the one, which Dmitri already did. I took a look if there were any other uniaxial ones, but I couldn't find any. Shall I skip that and go straight to the mumag example?
2012-03-12 17:10:23 fangohr: Yes.
2012-03-12 17:11:40 SebastianS: okay. Thanks!
2012-03-13 09:35:38 andersej: Good morning, Hans!
2012-03-13 09:35:55 andersej: Good morning, Hans!
2012-03-13 10:03:48 fangohr__: Good Morning.
2012-03-13 11:48:02 SebastianS: Hey, Maxim and I are in for lunch! We'll come to Anders office at around 12.30 if that's okay
2012-03-13 12:03:47 andersej: Great! I think we will be a large group today!
2012-03-13 12:19:09 fangohr: Okay, nice.
2012-03-14 09:02:00 andersej: Good morning!
2012-03-14 09:37:34 fangohr: Greetings Anders and DokosBot.
2012-03-14 09:40:21 andersej: Hehe.. Good morning!
2012-03-14 11:55:34 fangohr: Hi all, just to remind you that I am not going for lunch today.
2012-03-14 11:56:08 fangohr: I might get some biscutis for coffee, though. Shall we say 15:15 in Anders' and Gabriel's office? (I need to do something at 15:00 -- thus the strange time).
2012-03-14 12:06:30 andersej: 15.15 sounds great. Gabriel and I will go for lunch now, if anyone wants to join.
2012-03-14 12:08:52 SebastianS: Maxim and I are probably going a bit later, because we both didn't have breakfast so long ago...
2012-03-14 14:08:12 fangohr: :)
2012-03-14 17:21:24 fangohr: over and out, see you tomorrow.
2012-03-15 09:12:46 andersej: Good morning, Hans!
2012-03-15 09:13:03 fangohr: Morning Sir.
2012-03-15 09:13:16 fangohr: I'll catch up with you soon. Is Gabriel in already?
2012-03-15 09:13:23 andersej: No, not yet.
2012-03-15 09:13:37 fangohr: Okay, that suits me fine .Need to fix something I broke earlier first :)
2012-03-15 09:13:49 andersej: : )
2012-03-15 12:28:04 andersej: Someone up for lunch?
2012-03-15 12:29:14 SebastianS: yes, sounds good! if it's okay with you we might wait for another 5 minutes or so, since maxim wanted to join in as well, but he's currently in the library
2012-03-15 12:29:36 andersej: Yes, 5 is ok.
2012-03-15 15:33:54 GabrielB:           kwargs = {"R"+str(i):R[i] for i in range(dim)}
2012-03-15 15:33:54 GabrielB:           E = Expression(w,**kwargs)
2012-03-15 15:34:12 andersej: Great!
2012-03-16 09:27:07 fangohr: Good Morning Anders (morning DokosBot).
2012-03-16 09:36:25 fangohr: Anders, are you around so that I can come over and admire your BEM progress bar?
2012-03-16 09:40:20 andersej: Yes! Please come!
2012-03-16 12:07:30 fangohr: Hi all, anybody up for lunch?
2012-03-16 12:07:42 andersej: I'm in.
2012-03-16 12:08:00 SebastianS: hey, I'm in as well
2012-03-16 12:08:01 fangohr: I need to be back by 13:00 for a meeting, so would want to leave at 12:15. Sharp. German punctuality and all that.
2012-03-16 12:08:25 andersej: Great.
2012-03-16 12:08:26 SebastianS: right. I'll be at Anders office :D
2012-03-16 12:09:03 andersej: Hans, can you come 12:14?
2012-03-16 12:09:19 fangohr: Have you something to show me?
2012-03-16 12:11:51 andersej: I (we) have a problem...
2012-03-16 14:14:13 fangohr: ...which you have now reported as https://bugs.launchpad.net/dolfin/+bug/956939. fortunately, it does not affect the 1.0 version.
2012-03-16 14:17:46 andersej: True and correct.
2012-03-16 14:21:52 andersej: The bad thing is that when we first use the CR element and then project onto a discontinous Lagrange space, I think we loose all possibility of telling which vector corresponds to which coordinate.
2012-03-16 14:32:48 andersej: I think perhaps we have to find a way to do this with CG elements. We can talk more about this on Monday.
2012-03-16 14:39:53 fangohr: Not sure I understand the problem with the vectors and coordinates.
2012-03-16 14:46:28 andersej: I'm not sure I understand it myself. But in the nmag example, they printed the demag field for given values of x. In our case that will be difficult, because we don't have the information of which vector corresponds to the x-coordinates of the mesh. Actually, there will be no vector on that exact coordinate, because the nodes on a CR element are between the coordinates.
2012-03-16 15:25:18 fangohr: Anders, the trick is to ask the dolfin field object. If the field object is called Hdem, then Hdem((x,y,z)) will give you the field at position (x,y,z). It will interpolate if required.
2012-03-16 15:26:02 andersej: Ah, I see.
2012-03-16 15:36:01 andersej: Can that interpolation also do something with the following problem? With all the other fields, the length of the gradient is three times the number of nodes. Which makes sense for a continuous Lagrange space. But the demag gradient is much longer since it exists in another space. Are we supposed to add these gradients at some time?
2012-03-16 15:47:01 andersej: We can talk more about this next week. Have a nice weekend everybody!
2012-03-16 16:15:50 fangohr: If we project the final demag field into a CG1 space, all should be fine. I hope.
2012-03-16 16:52:17 SebastianS: I'm off as well. Have a nice weekend!
2012-03-16 16:52:51 fangohr: Me too. Bye DokosBot.
2012-03-19 09:03:08 mb8g11: Hi all.
2012-03-19 09:03:22 andersej: Hi! Welcome back!
2012-03-19 09:18:24 andersej: Morning, Hans!
2012-03-19 09:18:28 fangohr: Morning all.
2012-03-19 09:18:42 fangohr: Marc-Antonio, are you back in Soton already, or logged in from HH?
2012-03-19 09:18:49 fangohr: Or South Africa, in fact ;-)
2012-03-19 09:19:14 mb8g11: No no, sitting in my office :)
2012-03-19 09:19:22 fangohr: Lovely :)
2012-03-19 09:23:35 andersej: Hi Hans, is there a Monday morning meeting today?
2012-03-19 09:36:02 fangohr: Yes, was just about to email.
2012-03-19 11:11:18 mb8g11: Does any of you know if Gabriel is currently working? I have to move some of his files to repair the build.
2012-03-19 11:35:17 fangohr: He is writing emails, at least.
2012-03-19 12:32:10 fangohr__: Are we set for lunch?
2012-03-19 12:32:37 fangohr: Meeting outside Dmitri's office, I suggest.
2012-03-19 12:33:08 andersej: I'm ready!
2012-03-19 12:34:06 SebastianS:   jep we'll be there in a minute as well
2012-03-19 14:49:20 fangohr: Anders, do you know whether Gabriel is fixing the broken built?
2012-03-19 14:50:05 fangohr: I have inserted a few 'finmag.' all over his code in the import statements, and it is running now on my machine.
2012-03-19 14:50:20 fangohr: Tempted to push but don't want to interfer with him ...
2012-03-19 14:50:37 andersej: No, I haven't heard anything.
2012-03-19 14:51:01 fangohr: Okay, I'll drop him an email and if there is no protest, I'll push.
2012-03-19 14:53:04 fangohr: Actually, I am guessing that his PYTHONPATH points to 'hg/finmag/src/finmag' instead of 'hg/finmag/src' -- if so, then all his code would run correctly I think. ;-)
2012-03-19 14:56:27 andersej: I'll wait until you have pushed this to push my tests.
2012-03-19 15:01:40 mb8g11: Anders, have you oommf installed on your machine?
2012-03-19 15:02:01 fangohr: Anders, I have pushed already -- do you get bitbucket email notifications?
2012-03-19 15:02:26 andersej: No to both of you.
2012-03-19 15:03:35 fangohr: :) Then I suggest you (and maybe also Maxim?) set up automatic email notification on pushs to bitbucket. You do this by going to the 'admin' tab when you are on the bitbucket project, then select 'Services' (on the left), then add the 'Email diff'service, and enter the email address that should get the notifications.
2012-03-19 15:06:19 mb8g11: He shouldn't be able to see an admin tab at all.
2012-03-19 15:06:34 fangohr: Eh, yes. Right you are.
2012-03-19 15:07:16 fangohr: So is it not possible to schedule this for ordinary users? Marc-Antonio, have you got email notification?
2012-03-19 15:07:28 fangohr: I can add email addresses for everybody if you like, just say.
2012-03-19 15:08:50 andersej: Yes please, but for A.E.Johansen@soton.ac.uk, so I don't get email notifications to my phone at 07 am Sunday morning, hehe..
2012-03-19 15:10:40 mb8g11: It isn't possible for ordinary users and I haven't got e-mail notifactions. I simply try pulling or have the bitbucket website open.
2012-03-19 15:11:09 fangohr: Marc-Antonio, I can add your email to the email-diff service if you like?
2012-03-19 15:11:10 mb8g11: A normal user could program his e-mail client to read the RSS feed of the repository though,.
2012-03-19 15:12:16 mb8g11: no thanks :)
2012-03-19 15:12:40 andersej: Actually, I always have the website open myself, so I think the e-mail notifications would just be disturbing. So could you perhaps please not add me? I get Pivotaltracker e-mails anyway when somebody pushes to stories I'm working on.
2012-03-19 15:33:34 fangohr: Sure, makes sense.
2012-03-19 15:34:09 fangohr: ... and as Marc-Antonio says, you could also subscribe to the RSS feed if you like to see stuff arriving in your inbox rather than the browser.
2012-03-19 15:45:32 fangohr: Anders, does the xfail-decorator work? If so, could you commit please? I'd like to get a successful built on Jenkins.
2012-03-19 15:46:03 fangohr: If the decorator does not work, just rename the file from test_ to xtest_ or so (or the same with the function names if you just need to disable a few test functions inside a file).
2012-03-19 15:46:04 mb8g11: Anders is busy parametrising his tests :D
2012-03-19 15:46:26 fangohr: Not exactly sure what it means -- but it sounds like work in progress. Good enough for me. Ta.
2012-03-19 15:46:30 andersej: But my tests won't break the build anyway, because all asserts are commented out.
2012-03-19 15:47:07 fangohr: Hm, then something else breaks it. Have a look at: http://summer.kk.soton.ac.uk:8080/job/finmag/lastBuild/console
2012-03-19 15:47:46 mb8g11: progressbar
2012-03-19 15:48:18 andersej: Of course
2012-03-19 15:48:36 andersej: My nice little progressbar
2012-03-19 15:53:07 andersej: Let's see now.
2012-03-19 15:58:44 andersej: Old version of pytest on jenkins breaks the build. MA is on the case.
2012-03-19 15:58:55 fangohr: Fails now at 'import py.test'.
2012-03-19 15:59:02 fangohr: Is it the version or is pytest not installed?
2012-03-19 15:59:11 fangohr: If you tell me what to change, I'll change it ;)
2012-03-19 15:59:27 mb8g11: summer has py.test 1.3.4 instead of the new one... could you update it?
2012-03-19 15:59:44 mb8g11: should be sudo easy_install -U pytest
2012-03-19 15:59:53 fangohr: Can't be done with Ubuntu packages?
2012-03-19 16:00:19 mb8g11: No.
2012-03-19 16:01:44 fangohr: fangohr@summer:~$ dpkg -S `which py.test`
2012-03-19 16:01:44 fangohr: python-py: /usr/bin/py.test
2012-03-19 16:02:03 fangohr: So I uninstall python-py, and run the 'sudo easy_install -U pytest'?
2012-03-19 16:04:47 mb8g11: We didn't uninstall python-py on Anders machine.
2012-03-19 16:05:56 mb8g11: easy_install created a py.test-2.x. We pointed a symbolic link name py.test to it, and backed up the existing py.test as py.test-old
2012-03-19 16:06:42 fangohr__: Can you test whether all his stuff still works if you remove the Ubuntu package?
2012-03-19 16:08:02 andersej: Can you install the progressbar as well? apt-get install python-progressbar. Really nice to have when building the BEM.
2012-03-19 16:14:58 andersej: I just removed the Ubuntu package and everything seems fine.
2012-03-19 16:23:25 fangohr: Both done. fire away.
2012-03-19 16:39:47 andersej: Yey, success.
2012-03-19 16:50:40 fangohr: Phew ...
2012-03-19 17:10:48 fangohr: Over and out for the day.
2012-03-20 09:06:11 fangohr: Morning Gabriel (and Dokosbot)
2012-03-20 09:19:22 andersej: Good morning!
2012-03-20 11:51:34 mb8g11: Who is up for lunch?
2012-03-20 11:51:45 mb8g11: at 12:15 let's say
2012-03-20 11:51:50 fangohr__: I am.
2012-03-20 11:51:55 fangohr__: You are hungry...
2012-03-20 11:52:26 SebastianS: I'm in as well
2012-03-20 11:55:16 mb8g11: A little ;)
2012-03-20 12:12:01 andersej: I'm in!
2012-03-21 12:08:56 SebastianS: hey, anyone up for lunch?
2012-03-21 12:11:20 andersej: Marc-Antonio said he would be ready 12:30. Is it okay if we wait for him?
2012-03-21 12:14:43 SebastianS: yeah sure. I'm not in a rush
2012-03-21 12:15:50 andersej: Great. Let's meet at the usual place, outside my door, in 15 minutes then.
2012-03-21 12:25:48 mb8g11: I met Maxim at the gym, he won't be coming with us today.
2012-03-22 09:00:16 fangohr: Good Morning DokosBot and Marc-Antonio.
2012-03-22 12:06:48 fangohr: Hi all, I have a work meeting over lunch and will not be able to join you today.
2012-03-22 12:07:35 andersej: Okay, is anyone else up for some food?
2012-03-22 12:10:41 SebastianS: jep, I'd be up for lunch
2012-03-22 12:10:54 andersej: In ten minutes, say?
2012-03-22 12:11:07 SebastianS: sounds good
2012-03-22 12:11:15 andersej: Great!
2012-03-22 13:00:09 mb8g11: i.
2012-03-22 14:41:16 fangohr: Marc-Antonio, am just trying to run the compare_exchange.py code. This fails on my machine because I haven't set the path to OOMMF yet. Could you update the code so that it prints what command it will execute before it fails (or catch the failure, and only then print what it was trying to do?). I expect thsi will be useful repeatedly, i.e. whenever somebody tries to do this on a machine where OOMMF has not been setup for this kind of test.
2012-03-22 15:16:03 mb8g11: Yes.
2012-03-22 16:00:26 fangohr: Thank you.
2012-03-22 16:30:31 mb8g11: By the way, it isn't so much a path, as that you need to have "oommf" available as a command.
2012-03-22 16:31:25 fangohr__: Sure, that's actually what I expected. But one doesn't know whether the command is 'oommf' or 'oommf.sh' or 'oommf.tcl' etc.
2012-03-22 16:31:59 mb8g11: I'm on it now.
2012-03-22 16:58:11 mb8g11: Pushed :)
2012-03-22 16:58:19 fangohr: Ta.
2012-03-22 17:02:19 fangohr_: What is your 'oommf' script like? (if that question makes any sense.)
2012-03-22 17:06:50 mb8g11: Of course it does.
2012-03-22 17:07:00 mb8g11: It's an executable file in my path with:
2012-03-22 17:07:04 mb8g11: #! /bin/bash
2012-03-22 17:07:24 mb8g11: tclsh /whereever/your/oommf/is/oommf.tcl "$@"
2012-03-22 17:09:42 fangohr_: That's better; thank you.
2012-03-22 17:10:10 fangohr_: It might be worth including this file into the error message, or creating the file automatically after we compile oommf?
2012-03-22 17:10:56 fangohr_: I get one step further, but then oommf reports an error that it cannot read the mif file. [Need to stop here for today.]
2012-03-22 17:11:34 mb8g11: If it's okay, I'll stop by your office tomorrow morning?
2012-03-22 17:11:59 mb8g11: (will include this file into the installation script)
2012-03-22 17:12:49 fangohr: Yes, let's do that.
2012-03-22 20:33:36 mb8g11: Hi Hans.
2012-03-22 20:34:17 fangohr___: Hi :) am just installing oommf on summer.
2012-03-22 20:34:38 fangohr___: As we know create the oommf file automatically, we could include the TCL path settings into that file, right?
2012-03-22 20:35:18 fangohr___: (Summer is the machine hosting the Jenkins autotesting.)
2012-03-22 20:36:36 fangohr___: Marc-Antonio, by the way, have you ever tried 'Atlassian Sourcetree'? I is a Mac-only application for git and hg repositories and is meant to be great. Might give this a go at some point.
2012-03-22 20:38:42 mb8g11: Do we need the TCL path settings post-installation?
2012-03-22 20:39:46 fangohr___: Ah, good question. I assumed we had to, but never tested. Probably I am just wrong.
2012-03-22 20:40:00 mb8g11: Assuming you mean OOMMF_TCL_INCLUDE_DIR and TK, we don't :)
2012-03-22 20:40:13 mb8g11: It's just that the installation fails if they aren't defined.
2012-03-22 20:40:37 fangohr___: Anders, are you still there as well?
2012-03-22 20:40:44 mb8g11: Yes he is, we are fixing the build ;)
2012-03-22 20:41:03 mb8g11: Well, he is.. I prefer breaking it.
2012-03-22 20:42:34 mb8g11: @atlassian sourcetree: The screencast looks nice, will try it out!
2012-03-22 20:43:18 andersej: Yes, I'm here admiring the fact that we are 7 users on at this hour ;)
2012-03-22 20:44:15 mb8g11: 7? Did you count or shizophrenis as well? :)
2012-03-22 20:44:34 mb8g11: *schizophrenics
2012-03-22 20:44:48 andersej: Hehe...
2012-03-22 20:44:51 andersej: Yes
2012-03-22 20:45:17 fangohr___: The 3 chizophrenis are all here with me. Plus DokosBot, of course. And the two that actually do something useful :)
2012-03-22 20:45:54 fangohr___: (and the fourth I of course)
2012-03-22 20:46:05 andersej: Yes, we are quite busy in breaking Jenkins.
2012-03-22 20:46:37 fangohr___: Nice.
2012-03-22 20:46:54 fangohr___: One recipe for success seems to be to change the name of classes, such as src/finmag/demag/solver_gcr.py:71: in solve_phia
2012-03-22 20:46:54 fangohr___: >        super(GCRFemBemDeMagSolver,self).solve_phia(phia = self.phia,method = method)
2012-03-22 20:46:55 fangohr___: E        NameError: global name 'GCRFemBemDeMagSolver' is not defined
2012-03-22 20:48:44 andersej: I changed that, and then Gabriel pushed, and the merge haven't worked out the way I hoped. And we've had dinner..
2012-03-22 20:55:21 mb8g11: find . -name "*.py" -print | xargs sed -i 's/foo/bar/g'
2012-03-22 20:55:58 andersej: Thanks!
2012-03-22 20:56:23 mb8g11: np
2012-03-22 21:11:33 fangohr___: The merge couldn't figure out the name change because you didn't change the name in the tests? Anyway, it will need manual fixing, and looking at the latest email you have probably done that already?
2012-03-22 21:17:04 fangohr___: The other failure seems to relate to the Nitsche solver, and fail on my virtual machine as well. With a low level Dolfin warning.
2012-03-22 21:17:21 fangohr___: I would recommend to mark them as expected to fail, or comment out for now?
2012-03-22 21:19:07 andersej: I have solved all problems related to the name change now. The Nitsche solver failed before I pushed anything today, so that isn't related to the name change. I can mark them as xfail for now.
2012-03-22 21:19:47 andersej: ... just to get a clean build before we go home.
2012-03-22 21:21:47 mb8g11: They failed since 225, when Gabriel pushed new stuff.
2012-03-22 21:22:20 andersej: Yes, I think he has broken the Nitsche solver.
2012-03-22 21:22:27 mb8g11: Sorry, 225 was me (repaired since), 226 was him.
2012-03-22 21:27:43 fangohr___: Anders, yes, that would be good (to mark them as xfail).
2012-03-22 21:28:17 mb8g11: I think it has to do with the Hdemagspace, it changed in that commit and that's where the error happens.
2012-03-22 21:28:40 fangohr___: Marc-Antonio, just looking at the mlab output of the devtests/oommf/compare_exchage.py file: interesting. Can we easily add a colorer to this that gives a scale for the arrows?
2012-03-22 21:29:53 fangohr___: Another point to consider when we wrap this up as test: the mayavi module is currently not installed on summer (we could change this of course) but this seem best suited for interactive display. I would thus separate the plot from the test, and maybe only show plots when the test file is run via the __name__=="__main__" mechanism or so. Probably what you were planning anyway.
2012-03-22 21:31:50 fangohr___: Oh, I see the colorers are already there in compare_anisotropy, nice. Now I just need to figure out what the two plots show ;-)
2012-03-22 21:32:13 mb8g11: Does the demagspace needs to be a FunctionSpace if the mesh is 1D? Shouldnt it still be a VectorFunctionSpace?
2012-03-22 21:34:04 mb8g11: Disregard that.
2012-03-22 21:35:07 fangohr___: OOMMF on summer (for Jenkins): should now be available and work.
2012-03-22 21:35:42 mb8g11: If it discovers oommf, then the tests will be considered automatically.
2012-03-22 21:35:58 mb8g11: py.test has a nice "skipif" feature
2012-03-22 21:36:33 mb8g11: Good idea, with the plots.
2012-03-22 21:37:39 mb8g11: Just noticed I am plotting the absolute difference. May make more sense to show the relative one. It's easier to interpret 0, 1 or worse, instead of some numbers.
2012-03-22 21:38:05 fangohr___: Yes.
2012-03-22 21:38:42 mb8g11: And a heap map may be nicer than difference vectors.. quite difficult to interpret as well.
2012-03-22 21:38:46 mb8g11: *heat map
2012-03-22 21:39:55 mb8g11: Yay Gabriel!
2012-03-22 21:41:46 fangohr___: Boy, it is busy here. Hi Gabriel ;-)
2012-03-22 21:41:47 mb8g11: Difference vectors have the advantage of showing if the error is parallel to the correct field, or deviates from it.
2012-03-22 21:41:57 fangohr___: What do you mean with 'heap map'?
2012-03-22 21:42:03 GabrielB: hi hi
2012-03-22 21:42:40 andersej: Gabriel, do you know what the problem is with the Nische solver that breaks the build?
2012-03-22 21:42:50 andersej: *Nitsche
2012-03-22 21:43:38 mb8g11: meant "heat" map, sorry. Using colors to represent the differences, instead of vectors. For instance red is a big difference, green is good or so. That would help to localise the errors (boundary or not).
2012-03-22 21:43:58 mb8g11: But it's getting late, and I'm rambling :)
2012-03-22 21:45:10 GabrielB: hey Anders I will try to run py.test
2012-03-22 21:46:16 GabrielB: I have sent around some results from Convergence testing.
2012-03-22 21:46:51 GabrielB: FK is more accurate at the moment, but GCR has the better convergence behaviour
2012-03-22 21:47:04 fangohr___: Okay, understood. Vectors are fine I guess as their colour can be assigned by length. But try spherical glyphs instead, or even a scalar field which could be visualised with isosurafces or so. I'll try to have a look at the actual data tomorrow.
2012-03-22 21:48:57 andersej: ? The FK solver isn't correct at all. I have removed the solid angle because it was implemented based on a wrong assumption.
2012-03-22 21:49:39 mb8g11: The assumption beeing you were computing something else ;)
2012-03-22 21:49:51 GabrielB: haha I like that it gets a good answer :-)
2012-03-22 21:49:54 andersej: Yes, MA. Thanks.
2012-03-22 21:50:01 mb8g11: Sorry ^^
2012-03-22 21:51:17 GabrielB: I can fix the break in Nitsche Solver. I have been trying to standardize things more in order to make comparisons easier, this is a consequence.
2012-03-22 21:51:41 andersej: Okay
2012-03-22 21:53:13 fangohr___: The plots look nice, Gabriel. But when it says error, what does it actually mean? Is 0.6 meaning that we 60% off? Or is this an absolute error? (Magnitude of m is 1?) Or should we not discuss this at all as the FK is definitely wrong (quoting Anders here)? If so, then what has happened to the GCR solver which seems even worse?
2012-03-22 21:53:40 fangohr___: Have you got the plot creation in a file somewhere? (and what mesh have you used -- netgen or dolfin-UnitSphere?)
2012-03-22 21:54:50 GabrielB: The errors are given in norms, at the moment L2 (integrate over the square of the error function) and discrete max (the maximum difference in the DOF vectors)
2012-03-22 21:55:03 GabrielB: So far I have just UnitSphere's
2012-03-22 21:55:48 GabrielB: the plot creation happens in the python file with matplotlib
2012-03-22 21:56:39 GabrielB: as for why the GCR solver is less accurate I am not sure what is going on? But with the solid angle missing from FK I am guessing the comparison is not really meaningful
2012-03-22 21:59:44 fangohr___: Okay, thanks. I shouldn't really bother you with soo many questions at night.
2012-03-22 22:00:39 andersej: Okay, good night!
2012-03-22 22:01:36 mb8g11: Good night!
2012-03-22 22:04:22 fangohr___: Good night folks.
2012-03-22 22:11:40 GabrielB: good night!
2012-03-22 22:13:16 GabrielB: ok the Nitsche solver tests should be fine now.  I am off to get some sleep good night everyone :-)
2012-03-23 09:09:27 fangohr: Good Morning Anders, DokosBot.
2012-03-23 09:23:07 andersej: Morning!
2012-03-23 12:17:09 andersej: It's pretty quiet in my office today.. Anyone else hungry?
2012-03-23 12:17:26 fangohr: Sure thing.
2012-03-23 12:17:37 fangohr: 12:30?
2012-03-23 12:17:51 andersej: Good.
2012-03-23 12:20:20 SebastianS: sounds good
2012-03-23 12:20:34 maxim|s: i'll join as well
2012-03-23 12:20:58 fangohr: I wouldn't be surprised if Marc-Antonio shows up just before lunch .... ;-)
2012-03-23 12:21:27 andersej: Hehe..
2012-03-23 14:02:33 maxim|s: Hans, can you invite me to finmag, please? I need the analytical solution for one spin.
2012-03-23 14:03:54 fangohr: what is your bitbucket username?
2012-03-23 14:04:22 maxim|s: MaximSkripnik
2012-03-23 15:00:39 fangohr: Maxim, you should have access to the finmag rpoject now.
2012-03-23 15:01:46 maxim|s: thanks
2012-03-23 15:16:32 fangohr: Maxim, go to http://summer.kk.soton.ac.uk:8080/ and create an account for you, then let me know. This should allow you to see the documentation (which is all you need), and then you don't need to compile the code and documentation from source.
2012-03-23 15:23:14 maxim|s: it says access denied
2012-03-23 15:23:40 fangohr: Does it somewhere say 'create account'?
2012-03-23 15:25:03 maxim|s: yes, I created one with username MaximSkripnik
2012-03-23 15:25:29 fangohr: Okay, let me try to activate it.
2012-03-23 15:26:03 maxim|s: i have no read permission
2012-03-23 15:31:00 fangohr: Maxim, could you try again?
2012-03-23 15:33:06 maxim|s: still no access
2012-03-23 15:40:42 maxim|s: but this is not urgent ...
2012-03-23 15:42:34 maxim|s: works now, thanks!
2012-03-23 15:42:55 fangohr: Yeah, got it just now :)
2012-03-23 15:43:02 fangohr: If you go to http://summer.kk.soton.ac.uk:8080/job/finmag/FinMag_documentation/?, you should see the latest documentation.
2012-03-23 15:43:22 fangohr: Section 3.1 is the macrospin example I mentioned.
2012-03-23 15:44:19 fangohr: The correction term (for the length of the documentation) seems to be not documented yet. Ask me (or Marc-Antonio or Anders) when you need it, and we'll find the rigth place in the source.
2012-03-23 15:44:35 maxim|s: ok, btw: the problem was in the code. i try to use these opencl vectorial data types now because the cross product is provided by the opencl library and it makes things infinitely less complicated ...
2012-03-23 15:48:59 maxim|s: i get error 404 when trying to access http://summer.kk.soton.ac.uk:8080/job/finmag/FinMag_documentation/?
2012-03-23 15:50:08 fangohr: Can you try again, please?
2012-03-23 15:51:13 maxim|s: yes, now i can see the documentation, thanks!
2012-03-23 15:56:49 mb8g11: Maxim, you can come by our office anytime.
2012-03-23 16:16:01 maxim|s: I'll visit you as soon as my problems get less trivial than they are now ;)
2012-03-23 16:28:45 andersej: Hans, do you know if py.test are run before make html on Jenkins? And is it run from the top directory?
2012-03-23 16:40:15 andersej: I guess we'll see now...
2012-03-23 22:13:56 mb8g11: who
2012-03-23 22:14:36 mb8g11: Wow, you managed to push your changesets right between my merge and me trying to push my changes as well.
2012-03-23 22:25:34 fangohr___: Hi Marc-Antonio, impressive images.
2012-03-23 22:27:09 mb8g11: Glad to hear their creation doesn't only work on my machine. I would have prefered to save .vtk files (perhaps additionally), but I don't know how to do that yet.
2012-03-23 22:27:10 fangohr___: Yeah, sorry about the timing  ;-)
2012-03-23 22:27:17 mb8g11: np ;)
2012-03-23 22:28:10 fangohr___: I think on Monday, we should have a slightly longer meeting with everybody presenting some results. Fortunately, my earlier meeting is cancelled. I'll send an email to all.
2012-03-23 22:28:57 mb8g11: Ok, I'll prepare the same for the anisotropy then.
2012-03-23 22:30:02 fangohr___: I know the filename encodes what is shown in the image. Is it also possible to display this when the interactive mlab window is displayed? This might be nice to look at the data together.
2012-03-23 22:30:48 fangohr___: Also, a colorer would be nice that shows the meaning of the colours. (No need to do it now, of course.)
2012-03-23 22:30:50 mb8g11: You mean to have the interactive windows have titles?
2012-03-23 22:31:05 fangohr___: Yes.
2012-03-23 22:31:59 mb8g11: @colours: It's a TODO. Basically, the images (especially the ones which show the difference) don't tell that much without a legend explaining the colours.
2012-03-23 22:32:32 mb8g11: @window-titles: I'll look into it.
2012-03-23 22:32:56 fangohr___: Okay, great.
2012-03-23 22:33:26 mb8g11: Quick question, I get confused by matplotlib and mayavi.mlab... Are they the same thing underneath?
2012-03-23 22:33:40 fangohr___: Hmmâ¦.not sure. I think not.
2012-03-23 22:35:16 mb8g11: @window-titles: Yes.
2012-03-23 22:35:51 mb8g11: Ok.
2012-03-23 22:38:22 fangohr___: One more suggestion: when you work out the relative deviation of some data, you may get NaN if the true value is 0 (because you divide by zero). If this happens for a vector field for one component, then we could work around this: Imagine dx=(H2x-H1x)/H2x where H1 is the finmag solution, H2 the oommf solution and dx is the relative error. Instead of computing dx this way, we could scale the deviation relative to the total magnitude
2012-03-23 22:38:22 fangohr___: vector H2 rather than just the relevant component. So dx2 = (H2x-H1x)/||H2||. It will need a bit of care when interpreting this, but will avoid the NaNs and should be useful.
2012-03-23 22:39:04 fangohr___: (This is thought for printed data on the screen, as seen in finmag/devtests/oommf/compare_exchange.py at the moment.)
2012-03-23 22:40:02 mb8g11: Didn't think that far. Changed the 1D problem so that m0 wiggles a little in the z-component. 3D shows that problem. Will implement your suggestion.
2012-03-23 22:46:39 mb8g11: Is it difficult to save files that can be opened by mayavi?
2012-03-23 23:09:17 mb8g11: Good night!
2012-03-23 23:10:13 fangohr_____: I can only talk about Mayavi1: there you can save a .mv file (which keeps the configuration of what is seen but not the data) and a vtk file separately.
2012-03-26 12:06:48 SebastianS: anyone up for lunch sometime in the next hour or so?
2012-03-26 12:39:55 fangohr: Going for lunch now.
2012-03-26 12:40:06 SebastianS: okay i'll be up in a minute
2012-03-27 08:59:56 GabrielB: hei Anders
2012-03-27 09:00:02 andersej: Hei!
2012-03-27 09:00:51 GabrielB: Godmorgen. Har du tid til Ã¥ skype litt og prate litt om convert_mesh?
2012-03-27 09:01:13 GabrielB: eller kansje vi kan skrive hvis du vil
2012-03-27 09:01:56 GabrielB: Jeg lagd en problem fil som buker convert mesh.
2012-03-27 09:02:17 GabrielB: Og prÃ¸ve og bruke dem fra en annen fil
2012-03-27 09:02:28 GabrielB: og fÃ¥ feilmelding
2012-03-27 09:02:30 GabrielB: Using netgen to convert sphere10.geo to Gmsh2 format...
2012-03-27 09:02:30 GabrielB: NETGEN-4.9.13
2012-03-27 09:02:30 GabrielB: Developed at RWTH Aachen University, Germany
2012-03-27 09:02:30 GabrielB: and Johannes Kepler University Linz, Austria
2012-03-27 09:02:30 GabrielB: Including OpenCascade geometry kernel
2012-03-27 09:02:31 GabrielB: Parsing ng.tcl
2012-03-27 09:02:33 GabrielB: optfile ./ng.opt does not exist - using default values
2012-03-27 09:02:35 GabrielB: no OpenGL
2012-03-27 09:02:37 GabrielB:  Load geometry file sphere10.geo
2012-03-27 09:02:39 GabrielB: Problem with input file:
2012-03-27 09:02:41 GabrielB: geo-file should start with 'algebraic3d'
2012-03-27 09:02:43 GabrielB: Segmentation fault
2012-03-27 09:02:45 GabrielB: netgen failed with exit code 35584
2012-03-27 09:19:03 fangohr: Hi folks, the netgen segfault seems to be 'normal' on the current Ubuntu. However, the segfault appears (at least in all use cases I have seen) only after Netgen finishes what it needs to finish. So it should work okay, despite the warning.
2012-03-27 09:23:03 andersej: Hi Hans! Yes, I think it's something to do with nvidia graphic cards on Ubuntu 11.10 or something. Gabriel's problem was a relative path, I think it's sorted now.
2012-03-27 12:27:06 andersej: Lunch?
2012-03-27 12:28:34 mb8g11: Yes.
2012-03-27 12:30:32 SebastianS: sounds good
2012-03-27 13:11:50 fangohr: Hi Gabriel, did you notice that your last commit broke the autobuild? (Not sure whether you read the email account that gets those notifications -- that's why I am asking.)
2012-03-27 13:43:15 GabrielB: How can I check the autobild locally before I send a commit?
2012-03-27 13:43:51 fangohr: If you cd into finmag/src, and then run 'py.test' (or 'py.test -v' to get nicer colours), this should tell you.
2012-03-27 13:44:22 fangohr: Jenkins runs more tests (for example for the native C++ code and building the documentation), but as you don't change those, the above should be all you need to check.
2012-03-27 13:44:36 GabrielB: ok Ill check it
2012-03-27 13:46:53 andersej: Hans, all solid angles in my case are close to zero. Is that similar to your results?
2012-03-27 13:50:31 GabrielB: I am getting this
2012-03-27 13:50:31 GabrielB: finmag/sim/tests/test_llg.py:4: in <module>
2012-03-27 13:50:31 GabrielB: >   from finmag.sim.llg import LLG
2012-03-27 13:50:31 GabrielB: finmag/sim/llg.py:9: in <module>
2012-03-27 13:50:32 GabrielB: >   from finmag.native import llg as native_llg
2012-03-27 13:50:32 GabrielB: finmag/native/__init__.py:16: in <module>
2012-03-27 13:50:33 GabrielB: >   _make_modules()
2012-03-27 13:50:33 GabrielB: finmag/util/native_compiler.py:51: in make_modules
2012-03-27 13:50:34 GabrielB: >               run_make(["make"], cwd=NATIVE_DIR)
2012-03-27 13:50:34 GabrielB: finmag/util/native_compiler.py:44: in run_make
2012-03-27 13:50:35 GabrielB: >           raise Exception("make_modules: Make failed")
2012-03-27 13:50:36 GabrielB: E           Exception: make_modules: Make failed
2012-03-27 13:50:38 GabrielB: and I do not know where this comes from
2012-03-27 13:50:40 GabrielB: Any help?
2012-03-27 13:52:37 fangohr: Gabriel, this is the C++ compiler saying that it can't find some boost libraries. Run the script in finmag/install/finmag-libs.sh (or similar name) which will install the required ubuntu packages.
2012-03-27 13:53:18 fangohr: Nearly right: finmag/install/on-fresh-ubuntu-11.10/finmag-libs.sh
2012-03-27 13:53:45 GabrielB: ok thanks
2012-03-27 13:54:13 fangohr: Anders, it seems to depend on the orientation. Have alook at the example committed (or rather renamed) in https://bitbucket.org/fangohr/finmag/changeset/40e348bab1f2
2012-03-27 14:00:59 GabrielB: I am writing python code to automatically generate some meshes. And would like to have them in finmag/src/mesh is this ok?
2012-03-27 14:01:26 fangohr: The code yes, the meshes no.
2012-03-27 14:01:40 GabrielB: I mean the code will do that for you locally
2012-03-27 14:01:47 fangohr: Yes, that's great.
2012-03-27 14:01:59 fangohr: Check with Anders, he has already written a tool for this.
2012-03-27 14:02:03 GabrielB: In which case I need to make sure everyone will be able to import from here locally
2012-03-27 14:02:44 fangohr: Not quite sure what you mean with 'import from here locally'? Can you give an example of code, or explain?
2012-03-27 14:03:23 GabrielB: In finmag/src/mesh there is a module marker.py. Code
2012-03-27 14:03:30 GabrielB: import marker.py
2012-03-27 14:03:54 GabrielB: #when I want to pick up the meshes I can now get the path to this folder with#
2012-03-27 14:04:25 GabrielB: os.path.dirname(marker.__file__)
2012-03-27 14:04:46 GabrielB: so that way when the meshes are picked up later on on other people's machines
2012-03-27 14:04:49 GabrielB: they will be found
2012-03-27 14:05:14 GabrielB: this will work as long as everybody can do the import
2012-03-27 14:07:14 fangohr: I think this would work if you put the marker.py into finmag/src/finmag/mesh, because then you could import it as finmag.mesh.marker. However, this sounds pretty similar to what Anders has done already. Can you check his solution first, please?
2012-03-27 14:08:10 GabrielB: ok I like your solution. I think it would be nice if everyone's meshes are put in the same place,
2012-03-27 14:08:25 GabrielB: for organisation sake
2012-03-27 14:30:14 GabrielB: Another question, if I set up the module prob_fembem_testcases.py  to automatically generate meshes will this be carried out by jenkins online?
2012-03-27 14:30:25 fangohr: Hi all, will be offline for the rest of the afternoon.
2012-03-27 14:31:26 GabrielB: Ok catch up with you later! Anyone else know by any chance?
2012-03-27 14:31:41 fangohr: Gabriel, jenkins will run 'py.test' in the finmag/src folder. So as long as you have a function 'test_generate_meshes' or so before you use them, this should work. Or you have a check before you run a test that a mesh is in place, and it it is not, you create it. Check with Anders how he has done his stuff.
2012-03-27 14:33:02 GabrielB: Anders did everything by hand. I am trying to automate this
2012-03-27 14:33:29 GabrielB: I will try to use py.test and see if it triggers any mesh generation
2012-03-27 14:33:43 fangohr: All good then, thanks. Really leaving now :)
2012-03-27 14:33:53 GabrielB: have a good one :-)
2012-03-27 14:34:08 andersej: Yes, I did something similar last Friday. It totally broke Jenkins. I just reverted to get a clean build before the weekend, and haven't gotten around to debug yet. The problem with auto mesh generation on Jenkins, is that it will take a really long time to build.
2012-03-27 14:34:25 GabrielB: yeah i want to avoid this
2012-03-27 14:34:43 GabrielB: I just want the meshes to be built by people who are interested in them
2012-03-27 14:34:47 GabrielB: and not by jenkins
2012-03-27 14:35:39 GabrielB: I got it! Jenkins will not touch the problem classes depending on the expensive to generate  meshes
2012-03-27 14:36:01 GabrielB: so the problem classes can just check themselves if they need to generate meshes
2012-03-28 09:03:26 fangohr: Good morning DokosBot.
2012-03-28 12:12:49 SebastianS: lunch anyone? ;-)
2012-03-28 12:13:03 andersej: Definitely!
2012-03-28 12:20:20 mb8g11: Yes.
2012-03-29 09:10:59 fangohr: Good Morning Anders, DoksoBot (and all the others).
2012-03-29 09:32:19 andersej: Good morning! Do you have a minute?
2012-03-29 09:32:34 fangohr: Yes, was gonna come and see you anyway.
2012-03-29 09:32:39 fangohr: Shall I come over?
2012-03-29 09:33:27 andersej: Yes, please!
2012-03-29 09:33:48 fangohr: Okay, on my way -- but need to make a coffee on the way out (2 min).
2012-03-29 09:34:23 andersej: Ok
2012-03-29 12:13:25 andersej: I'm not responsible for the build failure. It's because there's not more space on Jenkins. Dmitri is solving it now.
2012-03-29 12:13:54 fangohr: No worries :)
2012-03-29 12:26:36 fangohr: How do people feel about lunch?
2012-03-29 12:26:49 SebastianS: very enthusiastic :D
2012-03-29 12:27:01 andersej: One has to eat..
2012-03-29 12:27:24 fangohr: Fair enough. Shall we go at 12:30? :)
2012-03-29 12:27:39 andersej: 12:35.
2012-03-29 12:29:07 mb8g11: Let's say 12:34, I'm really hungry.
2012-03-29 12:29:15 fangohr: Fine by me.
2012-03-29 12:29:20 fangohr: Hurry up, Anders. :)
2012-03-29 12:29:33 andersej: I'll go when Jenkins finishes.
2012-03-29 12:30:16 andersej: Hurry up, Jenkins!
2012-03-29 14:17:10 andersej: It works..
2012-03-29 14:32:03 andersej: Where is fangohr___ ?
2012-03-29 14:32:16 mb8g11: Oh no, did he leave?
2012-03-29 14:32:32 fangohr: Folks, good to see you are having fun.
2012-03-29 14:32:46 fangohr: I have no idea what's going on.
2012-03-29 14:33:10 fangohr: I know about three logins: 2 on my Imac, one on the linux box.
2012-03-29 14:33:18 fangohr: I don't know who the other fangohr is. WHO ARE YOU?
2012-03-29 14:34:28 fangohr: For information: Colloquy upgraded to a version that didn't run on my Mac OS 10.6. I then install x-chat for Aqua, and then managed to get an old colloquy to work again. Thus the two logins. Anyway, need to think about Weiwei's equations...
2012-03-29 16:13:05 fangohr: Marc-Antonio, are you still there?
2012-03-29 16:18:02 fangohr: Okay, just gone to your office to see you.
2012-03-30 09:05:59 15SABE003: Morning all.
2012-03-30 09:06:09 15SABE003: Hans speaking here -- got a funny name today.
2012-03-30 12:44:43 15SABE003: Hi Sebastian, just to say that I am not going for lunch today (and Anders is in Oslo).
2012-03-30 13:00:04 SebastianS: okay. just went with maxim a couple of minutes ago anyway. But thanks for letting me know
2012-04-02 08:57:56 fangohr_: Good Morning DokosBot.
2012-04-02 09:58:38 mb8g11: Hello.
2012-04-02 10:03:14 maxim|s: hi
2012-04-02 10:25:45 mb8g11_: test
2012-04-02 10:32:49 maxim|s: Hans, do you think it is a good idea to adopt that SI class from nmag? I really like it.
2012-04-02 12:19:51 SebastianS: Hey Marc-Antonio, are you going for lunch? Wanna go to the shops or something like that?
2012-04-02 12:55:11 fangohr_: Maxim, yes, we could do that. However, can I encourage you to check out the Python module 'Scientific', in particular Scientific.Physics.PhysicalQuantities. I think this does the same, only slightly better ;-), and is a somewhat standard library that is easier to install.
2012-04-02 12:55:25 fangohr_: Sorry for the silence on this channel--was in meetings all morning.
2012-04-02 13:02:09 mb8g11: I'll leave IRC (connection keeps dropping) but am still reachable by e-mail.
2012-04-02 13:02:13 mb8g11: See you.
2012-04-02 16:57:19 fangohr_: over and out.
2012-04-04 00:04:29 fangohr___: DokosBot had died - -don't know why. Have restarted it. (Lives in fangohr's account on summer.kk), started via cronjob.)
2012-04-11 08:31:46 mb8g11: test
2012-04-11 08:47:32 mb8g11: Good morning Anders!
2012-04-11 08:47:51 andersej: Hello! Good morning!
2012-04-11 08:53:44 fangohr: Morning all, welcome back after the official Easter break.
2012-04-11 09:07:04 mb8g11: Good morning Hans!
2012-04-11 09:08:18 andersej: Morning Hans, same to you!
2012-04-11 09:42:15 mb8g11: test
2012-04-11 09:43:28 fangohr: Test works.
2012-04-11 09:43:34 mb8g11: Haha, thanks.
2012-04-11 11:33:04 fangohr: Around?
2012-04-11 11:33:10 fangohr: (i.e. online?)
2012-04-11 11:33:21 fangohr: Sorry, need to be more precise: Marc-Antonio, are you out there?
2012-04-11 11:37:21 mb8g11: Hiya!
2012-04-11 11:38:53 fangohr: Are you available for a short Skype session? I need to leave in 10 minutes, but that should be enough.
2012-04-11 11:39:04 mb8g11: Yes.
2012-04-11 13:56:09 fangohr: Anders, did the problem disappear we saw?
2012-04-11 13:58:01 andersej: No.
2012-04-11 13:59:31 andersej: But it's the same thing for the GCR, so it's not directly a mistake to use Weiwei's code as default. It's much faster anyway.
2012-04-11 13:59:59 fangohr: I like you optimism :)
2012-04-11 19:55:58 fangohr: Anders, are you still working on that progress bar ;-) ?
2012-04-12 09:14:38 fangohr-osiris: Good Morning Anders and Marc-Antonio
2012-04-12 09:14:45 mb8g11: Good morning!
2012-04-12 09:19:06 andersej: Morning, Hans and MA!
2012-04-12 10:07:41 mb8g11: That's strange. My computer won't let me push to bitbucket. Name or service not known. Anybody got that before here?
2012-04-12 10:08:38 andersej: I got something similar on my home computer because I didn't have the .hgrc file there.
2012-04-12 10:09:44 mb8g11: brb
2012-04-12 10:34:59 mb8g11: Was an issue with https and the new wireless router I installed yesterday. Put the old one back in for now.
2012-04-12 11:04:40 mb8g11: I'm touched a lot of files, you may consider pulling the changes before going on with your work...
2012-04-12 11:04:45 mb8g11: Sorry for that.
2012-04-12 11:58:43 fangohr: Hi, anybody interested in lunch in 20 minutes?
2012-04-12 11:58:50 andersej: Yes.
2012-04-12 12:40:30 mb8g11: Hi Gabriel!
2012-04-12 13:09:18 fangohr: Hi indeed. :)
2012-04-12 13:42:29 fangohr: Hi MA, didn't manage to track down what goes wrong in the Jacobean tests. It seems not to be as simple as changing the value of K (although that has some effect). Need to do something else for now.
2012-04-12 13:47:07 mb8g11: Thanks for having a look. Maybe I can spot it :)
2012-04-12 13:47:35 fangohr: Ta.
2012-04-12 15:33:46 andersej: Hi all, I want to run netgen in a makefile to create nmag compatible mesh. Is there something I can do to avoid that it aborts after the "standard" netgen error?
2012-04-12 16:01:41 mb8g11: yes
2012-04-12 16:01:48 andersej: Good.
2012-04-12 16:01:52 mb8g11: prepend the command with a -
2012-04-12 16:05:47 andersej: Great! Thanks!
2012-04-12 16:17:57 mb8g11: no problem.
2012-04-12 16:18:07 fangohr: Anders, any news on the nmag2 problem? (Just checking as I now explain this to Weiwei.)
2012-04-12 16:18:12 mb8g11: So you guys are sure the exchange is too weak, and not the demag too strong?
2012-04-12 16:19:57 fangohr: The comparison plot with the Nmag/OOMMF data should tell us this. Have you done that already?
2012-04-12 16:24:01 mb8g11: It's the first thing I did, but I didn't notice any changes... do I have to enable this somewhere?
2012-04-12 16:24:53 mb8g11: Aaah, you changed A in one of your tests. Didn't catch that :)
2012-04-12 16:44:12 mb8g11: How very, very weird.
2012-04-12 16:46:54 fangohr: I think Weiwei and I figured out why the nmag2 example fails. I'll try to write it down somewhere in a moment.
2012-04-12 16:46:56 mb8g11: Do you mind if I copy the nmag example into that directory? Should make comparing easier.
2012-04-12 16:47:09 mb8g11: I'll write the stuff that adds it to the plot as well.
2012-04-12 16:47:40 fangohr__: Do you talk to me, MA?
2012-04-12 16:50:14 mb8g11: To whoever is working on that example thingie.
2012-04-12 16:51:28 fangohr__: We should add the *geo file(s), a makefile to produce the netgen and nmag mesh, and -- exceptionally -- a file that keeps time, mx, my, mz results of nmag so we don't need to run nmag again and again (takes 30 seconds or so). Anders should have all the files and the data file as well.
2012-04-12 16:51:30 fangohr__: Anders, still there?
2012-04-12 16:51:32 fangohr__: ;-)
2012-04-12 16:53:19 mb8g11: Exactly what I planned to do - like with the other nmag comparisons in src/finmag/tests/nmag
2012-04-12 16:53:48 fangohr: Okay, great. I have put the relevant files in /tmp/example2 on osiris.sesnet for Anders to nick, but of course you can get them as well.
2012-04-12 16:54:21 mb8g11: Sorry, what relevant files?
2012-04-12 16:55:05 fangohr: Just the nmag source files.
2012-04-12 16:55:16 fangohr: (in case you don't have them already.)
2012-04-12 16:55:16 mb8g11: Ah... I was copying them from the manual.
2012-04-12 16:55:37 fangohr: yes, the new manual is hiding mostfiles (such as makefile etc) which is a bit annoying.
2012-04-12 16:56:08 mb8g11: I'll copy them from the existing tests.
2012-04-12 17:09:30 fangohr: over and out from me. Back tomorrow morning.
2012-04-12 17:09:59 mb8g11: See you!
2012-04-12 17:10:39 fangohr: BTW, created a new story to explain how to fix the nmag2 example probelm. https://www.pivotaltracker.com/story/show/27923227
2012-04-12 17:11:00 mb8g11: Great. I'll push the comparison in a few minutes, it already compares, just need the plot.
2012-04-12 17:13:20 andersej: I'm sorry, was occupied with the testing..
2012-04-12 17:13:29 andersej: I'm finished now.
2012-04-12 17:13:49 andersej: I'll push in a minute..
2012-04-12 17:16:43 andersej: Okay, I see you did it already, hehe..
2012-04-12 17:16:54 mb8g11: Okay, I just pushed the corresponding nmag code as well as a comparison and a comparative plot... that may be what you were working on...
2012-04-12 17:18:05 mb8g11: and of course I failed the merge.
2012-04-12 17:23:55 andersej: Marc Antonio, what are you working on now? I will try not to work on the same files, hehe.
2012-04-12 17:28:25 mb8g11: I'm working on the anisotropy, just did this because it got me curious and I thought it was safe to do.
2012-04-12 17:28:41 mb8g11: Had I known you were working on it, I would have let you do your thing.
2012-04-12 17:29:45 mb8g11: So.... is it just me, or does the "fix" not fix the problem?
2012-04-12 17:30:05 andersej: Ok, I'll just merge in some of the differences between our codes if you aren't working anymore on the nmag example.
2012-04-12 17:30:16 mb8g11: Okay.
2012-04-12 17:30:22 andersej: Which fix?
2012-04-12 17:32:08 mb8g11: Multiplying the exchange with 1e18.
2012-04-12 17:33:17 andersej: It seems to work pretty good. What are you thinking about?
2012-04-12 17:34:52 mb8g11: It does indeed, I didn't see we were saving m*Ms for the finmag data.
2012-04-12 17:36:06 mb8g11: Just fixing my plot and then I'll let you work in peace :)
2012-04-12 17:36:24 andersej: Okay :)
2012-04-12 17:39:18 mb8g11: Done. It's all yours.
2012-04-12 17:48:58 andersej: Well, it appears that we have done almost exactly the same.. I could just go home, but it's a thunderstorm outside.
2012-04-12 18:10:50 andersej: Seems quiet now, I'll try to go home. Over and out!
2012-04-13 08:20:35 andersej: Good morning!
2012-04-13 09:03:36 fangohr: Good morning, all.
2012-04-13 09:08:43 andersej: Morning, Hans!
2012-04-13 09:12:45 mb8g11: Good morning!
2012-04-13 09:13:00 andersej: Good morning, Marc Antonio!
2012-04-13 09:35:28 andersej: I have cloned new repositories on both my own machine and osiris, but still I get different values in averages.txt from exchange_demag. Is there a logical explanation to this?
2012-04-13 09:44:36 andersej: What results do you get, by the way? On time 1e-10, my x-component is -0.01086 on osiris and -0.01104 on aleph0.
2012-04-13 09:54:20 mb8g11: I love the progressbars, btw.
2012-04-13 09:54:28 andersej: Hehe..
2012-04-13 09:54:59 fangohr: Me too.
2012-04-13 09:55:28 mb8g11: -0.0108648697522
2012-04-13 09:56:33 andersej: Exactly the same as I get on osiris. Why don't I get it here as well?
2012-04-13 09:57:24 fangohr: Different dolfin version (buggy trunk?)
2012-04-13 09:57:59 andersej: No, I have installed the stable build.
2012-04-13 09:57:59 mb8g11: first batch of intel sandy bridge processors (buggy cpu?) ;)
2012-04-13 09:59:00 andersej: That doesn't sound good..
2012-04-13 10:04:12 mb8g11: It was meant to be a joke :-/
2012-04-13 10:11:42 andersej: Hehe.. I have to revisit this later, I'm trying to understand Weiwei's code.
2012-04-13 10:44:44 mb8g11: Wow. My nmag anisotropy fields has non-zero components in all directions. My finmag anisotropy only has a non-zero z-component.
2012-04-13 10:45:50 mb8g11: $ python finmag/src/finmag/tests/nmag/anisotropy_1d/test_nmag_1d_anisotropy.py
2012-04-13 10:45:58 fangohr: Ah, that's nothing to worry about. Nmag is making things unnecessarily complicated. The reason for this is that the term that enters the LLG is H cross M. In the process, only the components of H that are perpendicular to M survive.
2012-04-13 10:46:16 fangohr: So this is fine as long as we do not do LLB physics or use the Baryakhter term for damping.
2012-04-13 10:47:24 fangohr: If it is easily done, you could compare M cross H (or H cross M) for every node. This should give better agreement. Having said that, if the agreement between finmag and magpar is good, then I am happy to keep the odd nmag results with a short note (based on my comments above).
2012-04-13 10:52:51 mb8g11: I'm nearly there, might as well go the whole way.
2012-04-13 11:24:10 andersej: Hello, Sebastian!
2012-04-13 11:24:19 mb8g11: Nice, it works, thanks Hans!
2012-04-13 11:24:21 SebastianS: good morning ;-)
2012-04-13 11:38:43 fangohr: Good Morning Sebastian. :)
2012-04-13 12:07:25 mb8g11: Anyone working on the scaling factor for the mesh coordinates?
2012-04-13 12:07:41 fangohr: No.
2012-04-13 12:07:54 fangohr: I'd love to do this, but I shouldn't ...
2012-04-13 12:09:14 mb8g11: You have a good reason not to, now... just grabbed the task on pivotal tracker :)
2012-04-13 12:11:49 fangohr: Great.
2012-04-13 12:11:55 fangohr: Just added the following idea to the story: Had another thought about this though: we should maybe save the attribute that carries the scaling factor in the dolfin mesh class object (!). Maybe call it something like .finmag_cscale for FINMAG CoordinateSCALE, say. It is a bit risky to just add an attribute to a class (as the dolfin folks may want to use that attribute in the future) but prepending it with 'finmag' should reduce that risk significantly.
2012-04-13 12:11:55 fangohr: plus side is that the scale information is available everywhere (I hope?) where we have (direct) access to the mesh object but may not have access to the LLG class. So this would reduce the number of parameters we need to pass, for example, to the exchange object.
2012-04-13 12:19:10 andersej: I'm in desperat need for some food now.
2012-04-13 12:19:38 fangohr: Okay, then, I give in. I'll pick you up in 3 minutes. Sebastian, are you joining us as well?
2012-04-13 12:19:45 fangohr: What about Dokosbot?
2012-04-13 12:23:15 SebastianS: jep
2012-04-13 12:23:18 SebastianS: on my way
2012-04-13 13:46:37 mb8g11: Lunch, see you later.
2012-04-13 16:16:56 fangohr: Over and out for some hours.
2012-04-16 09:04:05 fangohr: Good Morning, Anders.
2012-04-16 09:04:25 andersej: Good morning, Hans! Had a nice weekend?
2012-04-16 09:04:46 fangohr: Yes, thank you. Yourself?
2012-04-16 09:05:39 andersej: Yes.
2012-04-16 10:18:16 fangohr: Good Morning Neil :)
2012-04-16 10:18:26 fangohr: Nice to see you here.
2012-04-16 10:18:46 nsob: Morning :)
2012-04-16 10:30:44 fangohr: Hi Marc-Antonio.
2012-04-16 10:31:21 fangohr: Just to introduce nsob: he is Neil O'Brien and will help us a little with some aspects of finmag and the DYNAMAG project.
2012-04-16 10:31:32 fangohr: (I am in a meeting now until 11:40 or so).
2012-04-16 11:50:05 fangohr: Hi folks. My office has been vacated now, so we can start.
2012-04-17 09:13:59 andersej: So, you beat me today, Hans.. And so did the entire "cage". Not good..
2012-04-17 09:16:55 fangohr: Good morning Anders, Neil, DokosBot.
2012-04-17 09:24:09 andersej: Good morning all!
2012-04-17 11:03:17 andersej: Hans, do you have a minute?
2012-04-17 11:08:11 andersej: Or perhaps just explain here.. I don't completely understand what you mean with the regression test in the nmag2 example? Do you want to refine the mesh or use smaller time steps, or perhaps something else?
2012-04-17 12:50:46 fangohr: (answer given over lunch ;-))
2012-04-18 08:51:46 fangohr: Good morning DokosBot.
2012-04-18 11:57:08 fangohr: Hi all, I am skipping lunch today.
2012-04-18 12:02:28 maxim|s: Hello. Is somebody else going to have lunch at staff club?
2012-04-18 12:05:43 andersej: Yes, I want to.
2012-04-18 12:07:05 andersej: When do you want to go?
2012-04-18 12:07:56 maxim|s: I'll come to your room at 12:30
2012-04-18 12:08:29 andersej: Great!
2012-04-18 13:42:27 maxim|s: Hans, are you available for a talk right now?
2012-04-18 13:42:53 fangohr: On the phone right now. How about 14:15?
2012-04-18 13:43:24 maxim|s: ok, see you at 14:15
2012-04-19 09:52:35 nsob104: Morning :)
2012-04-19 09:53:43 andersej: Good morning, Neil!
2012-04-19 11:25:51 fangohr: Morning Neil, Anders, Sebastian. I am stuck in all sorts of meetings today.
2012-04-19 11:26:24 SebastianS: but ours in 5 min is still on, isn't it?
2012-04-19 11:26:34 fangohr: Oh yes, that's one of them. :)
2012-04-19 11:26:51 SebastianS: okay ;-) thanks
2012-04-19 11:28:22 fangohr: Neil, would you by chance be available this afternoon between 15 and 16? Don't worry if not ; just checking.
2012-04-19 13:52:38 nsob104: Hi Hans, sorry for the delay (was taking my driving test), I'll be able to make the meeting at 15:00
2012-04-19 13:53:13 fangohr: Great, see you then.
2012-04-20 09:05:44 fangohr: Morning Anders.
2012-04-20 09:05:51 andersej: Good morning!
2012-04-20 12:27:24 andersej: Hi, Maxim! Hans and I are going for lunch in ten minutes. Do you want to join?
2012-04-20 13:16:53 andersej: So, DokosBot.. Looks like it's only you and me now.
2012-04-20 17:11:33 fangohr_: Over and out for today.
2012-04-23 15:49:12 mb8g11: Cake?
2012-04-23 16:13:45 fangohr_: Hi MA, visitors say thank you for cake. They wander is there Banana in there?
2012-04-23 16:58:53 mb8g11: Yes, there is. 3 of them :)
2012-04-24 09:09:23 fangohr_: Good Morning Anders, DokosBot.
2012-04-24 09:09:33 andersej: Good morning, Hans!
2012-04-24 10:09:09 andersej: Hans... I have no idea why I can't run nmeshimport on jenkins via python's commands.getstatusoutput when it runs flawless in every makefile we have.
2012-04-24 11:55:42 fangohr_: Marc-Antonio, are you in the office?
2012-04-24 11:55:47 fangohr_: Good morning, by the way.
2012-04-24 11:56:08 mb8g11: Hi, yes!
2012-04-24 11:56:33 fangohr_: Do you mind coming around to my office? We need your help :)
2012-04-24 12:37:36 mb8g11: Haba haba?
2012-04-24 12:39:16 fangohr_: Yes, absotutely.
2012-04-24 13:27:43 mb8g11: Had the documentation built correctly on jenkins in the last few days?
2012-04-24 13:28:12 fangohr_: Yesterday, yes.
2012-04-24 13:28:41 fangohr_: But it may fail because it can't find nmag and needs that for the documentation. (Not sure exactly what Anders was working on.)
2012-04-24 13:29:02 fangohr_: Am hoping that the current build (http://summer.kk.soton.ac.uk:8080/job/finmag/456/console) will pass.
2012-04-24 13:31:26 fangohr_: wohoo. Looking good, but still running.
2012-04-24 13:33:11 fangohr_: Hm, failed. But not due to Nmag missing -- that is now working I think.
2012-04-24 13:34:02 fangohr_: I think I'll hand this over to Anders at this point.
2012-04-24 13:46:00 fangohr_: Okay, couldn't resist. Have done another change that might fix this.
2012-04-24 13:54:47 fangohr_: Phew. Compiled fine now.
2012-04-24 13:55:10 mb8g11: Good intuition there... but how comes this needs to be set again? Isn't this variable in the environment?
2012-04-24 13:55:43 andersej: Okay, I'm back in the office now. Thanks for fixing it.
2012-04-24 13:56:51 fangohr_: I don't know how the make file is called -- I am guessing from inside a python script. The PYTHONPATH is not set in the jenkins enviroment, but instead jenkins knows what it is, and will pass it via "PYTHONPATH=XXX python something.py" to the execution. If that something.py then internally executes a shell command to call 'make', it will have lost that PYTHONPATH.
2012-04-24 13:56:57 fangohr_: That's my best guess.
2012-04-24 13:57:33 fangohr_: Will try to do some teaching preparations now, but keep me posted if you need any input etc.
2012-04-24 15:42:52 mb8g11: reboot, problem with the graphic drivers
2012-04-24 18:20:30 andersej: To Marc-Antonio: /src/finmag/demag/solver_fk.py
2012-04-25 08:55:36 fangohr_: Good Morning DokosBot.
2012-04-25 11:50:05 mb8g11: I won't be going to lunch today, have a PGR meeting.
2012-04-25 11:50:24 fangohr_: Me neither -- doing sports.
2012-04-25 12:06:14 andersej: Are you sure about the PGR meeting?
2012-04-25 12:06:48 mb8g11: Haha, funny. Yes. 25/04/2012 12:00 Building 5/2017. And yet... nobody there.
2012-04-25 12:20:23 mb8g11: Gotta love this faculty.
2012-04-25 12:21:04 andersej: Hans, are you sure you gave me the right function?  ncol bar E_exch_Py E_demag_Py gives completely different results than ours.
2012-04-25 12:21:41 andersej: Or was this with dividing on volume? Will try..
2012-04-25 12:22:28 maxim|s: Hi all, is anybody going to have lunch soon?
2012-04-25 12:23:08 andersej: Yes, Marc-Antonio and I will go in about ten minutes? Do you want to join?
2012-04-25 12:23:30 maxim|s: yes, see you at 12:30
2012-04-25 12:38:30 andersej: I will fix the jenkins build after lunch..
2012-04-25 13:44:21 andersej: Hello, Weiwei!
2012-04-25 13:44:45 ww1g11_: hello
2012-04-25 13:44:53 fangohr_: Hi Weiwei, good to see you. ;)
2012-04-25 13:45:26 ww1g11: good to see you
2012-04-25 14:23:22 andersej: Dividing by a scalar, the exchange and demag energies are very similar to the corresponding energies from nmag. The problem is that I can't explain the scalar factor.
2012-04-25 14:23:43 fangohr_: Which program do I need to run to see the plot?
2012-04-25 14:24:09 andersej: examples/exchange_demag/test_exchange_demag.py
2012-04-25 16:03:46 mb8g11: Anders, this is your story: #28605277 https://www.pivotaltracker.com/story/show/28605277
2012-04-25 16:03:49 mb8g11: :D
2012-04-25 16:09:43 andersej: Thanks!
2012-04-26 09:31:10 fangohr_: Good Morning Anders and DokosBot.
2012-04-26 09:31:18 andersej: Good morning, Hans!
2012-04-26 11:45:48 fangohr_: Morning folks. I need to interview today at 12:00. I guess you go ahead and have lunch without me.
2012-04-26 11:46:59 andersej: Okay, have fun!
2012-04-26 17:14:59 fangohr_: Over and out.
2012-04-27 13:23:41 andersej: Hi, DokosBot! Do you want to join for lunch?
2012-04-27 15:19:14 andersej: Over and out! Have a nice weekend, DokosBot!
2012-05-01 09:16:27 andersej: Good morning, Hans!
2012-05-01 09:16:31 fangohr_: Good morning Anders, DokosBot.
2012-05-01 10:11:32 andersej: Hans, can you notify me when your visitor has left? I have a problem.
2012-05-01 10:24:34 andersej: replace("can you ", "could you please") - I can see myself that the line was quite "Norwegian", hehe..
2012-05-01 10:51:22 fangohr_: No worries. I am available now.
2012-05-01 12:14:09 SebastianS: someone going for lunch anytime soon?^^
2012-05-01 12:15:03 andersej: Yes, I think so. Just come over, we are ready in a moment.
2012-05-01 12:17:16 SebastianS: kk
2012-05-01 12:17:20 SebastianS: on my way
2012-05-01 14:01:52 fangohr: Anders, this looks good.
2012-05-01 14:02:01 fangohr: (exchange energy density).
2012-05-01 14:02:24 fangohr: The disagreement with Nmag could have two reasons: (i) coarseness of the mesh, (ii) inappropriate simplicifications in Nmag. Or (iii) something else.
2012-05-01 14:02:31 fangohr: Could you run this again with a finer mesh?
2012-05-01 14:03:01 fangohr: The other useful comparison would be with OOMMF.
2012-05-01 14:07:10 andersej: Yes, I'll do it!
2012-05-01 14:10:26 fangohr: I am not sure whether OOMMF provides energy densities in a spatially resolved way, but I would guess it does. I think Nmag might be a bit sloppy in how it computes the volume of the base functions, and this might affect the results exactly as we see them. I trust OOMMF in this respect.
2012-05-01 14:32:58 mb8g11: http://github.enthought.com/mayavi/mayavi/tips.html
2012-05-01 14:52:17 SebastianS: hans, do you have a minute? I have two question regarding the temperature gradient paper.
2012-05-01 15:07:51 fangohr_: Hi Sebastian, no, sorry, fully booked this afternoon. Can you try to find the answer yourself? If you are stuck for longer than today, feel free to put questions in email and I will see what I can do.
2012-05-01 15:16:12 SebastianS: okay thanks. I'll see if I can work something out myself
2012-05-01 17:34:20 mb8g11: Dmitri was here to pick up the book... Nice of him to not come this morning, he definitely looked contagious.
2012-05-02 11:00:09 andersej: Hello, Neil.
2012-05-02 11:00:28 nsob104: Hi Anders, Hans, DokosBot.
2012-05-02 12:03:46 fangohr: @Anders: In tests/tests_dmi_terms:  test_dmi_with_analytical_solution():
2012-05-02 12:05:06 fangohr: Iridis documentation: start from http://cmg.soton.ac.uk/iridis
2012-05-02 12:07:53 fangohr: Request software on https://cmg.soton.ac.uk/community/projects/iridis/boards/show/12
2012-05-02 16:28:25 fangohr_: Marc-Antonio, yes, I forgot to update /etc/shadow. Can you try to login to osiris again, please?
2012-05-02 16:28:49 fangohr_: Anders, same story here. My mistake.
2012-05-02 16:29:17 andersej: Yes, just sent you the email, hehe..
2012-05-02 16:29:58 fangohr_: I see it works for anders now.
2012-05-02 16:30:30 andersej: Yes. sudo apt-get install vim-gnome, please.
2012-05-02 16:31:10 fangohr_: I thought you might say something like this.
2012-05-02 16:31:35 fangohr_: Done. Anything else?
2012-05-02 16:32:01 andersej: Thanks! Not for my part, no..
2012-05-02 16:33:12 mb8g11: vim is good.
2012-05-02 16:33:29 mb8g11: Thank you, all is good :)
2012-05-02 16:38:52 mb8g11: However, summer might be running out of diskspace.
2012-05-02 16:39:51 fangohr_: I have noticed. I have made some space, and am in the process of freeing up another 8GB. That should sort us out for some time.
2012-05-02 16:47:59 andersej: Hans, the DMI class is not ideally constructed wrt computing energy densities, as it computes the energy in different functions depending on mesh dimension. Am I allowed to do small modifications to these functions?
2012-05-02 16:48:13 fangohr_: Yes, please do fix this :)
2012-05-02 17:17:17 fangohr_: Over and out for today.
2012-05-03 11:36:20 MaximS: Hi all! Hans, can I ask you something?
2012-05-03 11:36:51 fangohr_: Hi, sure.
2012-05-03 11:37:00 fangohr_: (Lucky, I just returned to the office ;-))
2012-05-03 11:41:18 MaximS: I have to calculate the distance between two spins for the dipole-dipole-interaction. This is not a problem for non-periodic boundaries. But what should I do if I have periodic boundaries?
2012-05-03 11:42:08 MaximS: E.g. if you assume two spins in the opposite corners, their distance is not only the diagonal but also a very short connection because they are neighbours as well.
2012-05-03 11:56:54 MaximS: Another possibility would be to define a radius for the dipole-dipole-interaction and take all spins inside a sphere with this radius around a particular spin in to account. Just like it's done for the exchange coupling where the sphere contains only the nearest neighbours.
2012-05-03 12:25:15 andersej: Someone up for lunch?
2012-05-03 12:29:35 MaximS: Not today.
2012-05-03 12:30:24 andersej: mb8g11, how about you? SebastianS?
2012-05-03 12:30:47 SebastianS: just came online and missed you conversation; what are you asking me?^^
2012-05-03 12:31:00 andersej: Lunch in 5?
2012-05-03 12:31:17 SebastianS: ah no sorry; i'm not in the uni right now
2012-05-03 12:31:39 SebastianS: thanks for asking, though ;-)
2012-05-03 12:31:50 andersej: Sure, okay..
2012-05-03 12:32:47 mb8g11: In 5.
2012-05-03 14:41:05 mb8g11: Hans, / on summer is full. I told Jenkins to only store the build of the last 14 days but I don't know when it will start deleting the old ones.
2012-05-03 14:41:25 mb8g11: What can we do to get some free space?
2012-05-03 14:41:32 fangohr_: Good point, thanks. let me continue the data clearing I started yesterday.
2012-05-03 14:45:04 mb8g11: No worries though, we know you're busy today.
2012-05-03 14:59:06 fangohr_: Hi MA, I have freed 3GB.
2012-05-03 14:59:21 fangohr_: I have also freed 0.8 GB yesterday (I think), but that seems to have been eaten by today.
2012-05-03 14:59:28 fangohr_: So something is very disk space hungry on the system.
2012-05-03 14:59:38 fangohr_: Have you got root access to summer?
2012-05-03 15:02:54 mb8g11: By default Jenkins stores every new build, ever. That must be space-hungry.
2012-05-03 15:03:16 mb8g11: Limiting that storage to 14 days should keep it in check.
2012-05-03 15:03:19 mb8g11: No root access.
2012-05-03 15:06:33 fangohr_: Does it actually store the object files and temporary data etc? That is a lot!
2012-05-03 15:06:49 fangohr_: Have you set this to 14 days already? So it should kickin soon?
2012-05-03 15:06:52 andersej: Hi Hans and MA.. Regarding the lunch discussion: I noticed that it wasn't a minus sign mistake. It was a minus one mistake (of course my numbers were 0.5 and -0.5 and my K=1...). When I removed the K*1 part of the anisotropy energy I get the same as nmag. Removing this is of course no problem when computing the field, because it vanishes in the dE/dM part anyway. But when computing energy / energy density, we will have a one K  too low result. I h
2012-05-03 15:06:52 andersej: umbly claim that this may be a bug in nmag.
2012-05-03 15:12:59 fangohr_: I would say it is a matter of convention ;-)
2012-05-03 15:13:09 fangohr_: What does OOMMF say on the matter?
2012-05-03 15:14:08 fangohr_: We wrote an extension to OMMF some time ago, which is following the Nmag way (see http://www.southampton.ac.uk/~fangohr/software/oxs_uniaxial4.html), but maybe that is too biased. It computes a particular uniaxial anisotropy.
2012-05-03 16:00:58 mb8g11: I don't know what oommf says, but magpar sides with Anders on this one.
2012-05-03 16:01:07 mb8g11: ;0
2012-05-03 16:11:49 andersej: Yes!
2012-05-03 16:12:19 mb8g11: Well, it's still only a 1 :)
2012-05-03 16:21:01 andersej: Well, I would be happy with only 1 girlfriend : )
2012-05-03 16:35:18 mb8g11: Your girlfriend is like a real number... except her real part is 0.
2012-05-03 16:35:46 mb8g11: *complex number. dammit. ruined it.
2012-05-03 16:39:25 andersej: Haha! When we are already into math/programming humour: http://folk.uio.no/larsstor/
2012-05-03 16:39:44 andersej: No. Sorry..
2012-05-03 16:40:11 andersej: http://folk.uio.no/larsstor/motivationals/godisrealunlessint.jpeg
2012-05-03 16:48:14 mb8g11: Have fun merging btw.
2012-05-03 16:51:35 andersej: Let's see who breaks Jenkins first.
2012-05-04 09:18:57 fangohr_: Good morning, DokosBot. Fancy a coffee?
2012-05-04 09:20:47 nsob104: Morning Hans
2012-05-04 09:21:46 fangohr_: Morning Neil.
2012-05-04 09:21:51 fangohr_: I'll look into permissions now.
2012-05-04 09:23:44 fangohr_: Do you have the path to the repository handy?
2012-05-04 09:23:48 fangohr_: (on eta)
2012-05-04 09:24:46 nsob104: ssh://eta.kk.soton.ac.uk//home/hg/dynamag/talks/2012-05-15-36month-Ferrara is where I cloned from
2012-05-04 09:25:23 nsob104: and I am in the group 'dynamag' on there
2012-05-04 09:25:29 nsob104: Hi, Anders
2012-05-04 09:25:55 fangohr_: Neil, can you try to push again, please?
2012-05-04 09:26:02 fangohr_: (Have given the group more rights.)
2012-05-04 09:26:07 fangohr_: Morning Anders.
2012-05-04 09:27:45 nsob104: Hans, it worked, thanks.  I'll head over once I have some coffee.
2012-05-04 09:27:53 fangohr_: Okay, good. Thank you.
2012-05-04 09:36:15 andersej: Hello, good morning to all three of you
2012-05-04 12:21:02 SebastianS: anyone going for lunch in the next hour or so?
2012-05-04 12:23:48 andersej: Yes! Ten minutes from now! Dmitri's also in.
2012-05-04 12:24:21 SebastianS: okay
2012-05-04 12:24:30 SebastianS: i'll come by your office then, as usual!
2012-05-04 13:36:10 fangohr_: Hi folks, sandwhichs outside my office for collection if you are interested.
2012-05-04 15:40:04 andersej: Hans, still there?
2012-05-04 15:47:39 fangohr_: Hi Anders, yes I am.
2012-05-04 15:47:58 andersej: May I ask you one thing in five minutes from now?
2012-05-04 15:48:06 fangohr_: Sure.
2012-05-04 17:02:22 fangohr_: Over and out -- see you in two weeks :)
2012-05-04 18:01:07 andersej: Yes, see you! Have a nice time!
2012-05-04 18:43:46 andersej: Okay DokosBot, I'm leaving now. Have a nice weekend, see you next week!
2012-05-08 12:12:32 SebastianS: Hey Anders, are you in the office? Or am I the only one up for lunch?^^
2012-05-08 12:15:02 andersej: No, I'm in as well!
2012-05-08 12:16:06 andersej: When do you want to go?
2012-05-08 12:17:24 SebastianS: ah awesome! I really don't mind actually. You name it!
2012-05-08 12:17:34 andersej: As soon as possible!
2012-05-08 12:17:56 SebastianS: right :D just finishing something here. Say at 12.30?
2012-05-08 12:18:18 andersej: Yes, I'll come by your office this time!
2012-05-08 12:18:26 SebastianS: ah okay see you then
2012-05-08 14:47:22 mb8g11: Hi all.
2012-05-08 14:49:14 SebastianS: hey ;-)
2012-05-09 08:26:51 gaba__: Hihi
2012-05-09 12:39:30 mb8g11: Hm.
2012-05-11 09:08:05 fangohr: Good Morning, DokosBot.
2012-05-11 11:01:59 SebastianS: hans, as the anisotropy is not implemented yet, I have some time at my hands. I remembered you suggested to put together a documentation for the simlib code using Sphinx and I was wondering if I should start with that. Do you still think this would be a good idea?
2012-05-14 14:44:53 gabrielbalaban: Hi Anders,
2012-05-14 14:48:57 andersej: Hello!
2012-05-14 14:57:55 gabrielbalaban: Jobber du tilfeldigvis med FK solveren? Jeg har tenkt Ã¥ jobbe med den litt, men jeg kan godt vente med det.
2012-05-14 14:58:47 andersej: Nei, skal gjoere noe annet naa, bare sett i gang.
2012-05-14 15:01:01 gabrielbalaban: ok kult! Jeg skal jobbe omtrent en time med FKsolveren.
2012-05-15 17:15:37 fangohr_laptop: Hello DokosBot and Marc Antonio :)
2012-05-15 17:23:38 mb8g11: Hans, hi!
2012-05-15 17:23:57 mb8g11: All well in Italy?
2012-05-15 17:24:49 fangohr_laptop: Hi -- yes, thank you. A brief break here, so I do some email and stuff before continuing at 20:00 local time with evening programme.
2012-05-15 17:25:06 mb8g11: Cool.
2012-05-15 17:25:06 fangohr_laptop: How are things in Southampton?
2012-05-15 17:26:09 mb8g11: Good good. Anders just left to finally get light bulbs for his dark flat, I'm doing some reading for my report and have just installed Ubuntu 12.04
2012-05-15 17:26:54 mb8g11: (clean install)
2012-05-15 17:27:06 fangohr_laptop: Nice.
2012-05-15 17:27:23 mb8g11: Counting on you to bring fresh ideas back ;)
2012-05-16 10:16:30 gabrielbalaban: Hei Anders!
2012-05-16 10:16:36 andersej: Hei!
2012-05-16 10:16:55 gabrielbalaban: GÃ¥r det bra?
2012-05-16 10:17:16 andersej: Ja, ganske. Enn du?
2012-05-16 10:18:16 gabrielbalaban: ja ogsÃ¥ ganske, jeg glede meg til i morn (17 mai!) og jobbe litt med finmag. Jeg har ut  df.KrylovSolver slik som du bruker i FK
2012-05-16 10:18:28 gabrielbalaban: og lurer pÃ¥ om du vet hvordan man kan sette toleransen?
2012-05-16 10:20:19 gabrielbalaban: I en Unit Test til Dimitri fÃ¥r jeg en L2 feil av stÃ¸rrelse 0.0107519, selv om krylov toleransen er antaglivis omternt 10x -7!
2012-05-16 10:24:50 gabrielbalaban: se her http://fenicsproject.org/pub/femcenter/pub/software/dolfin/doc/KrylovSolver_8h-source.html
2012-05-16 10:25:05 gabrielbalaban: Jeg tror TOL er privat owwwww!
2012-05-16 10:26:46 andersej: Jeg ville tippet at dette kunne endres ved solver.parameters["absolute_tolerance"] = ... eller noe i den stilen.
2012-05-16 10:30:27 gabrielbalaban: hmm god ide!
2012-05-16 10:31:40 andersej: >>> from dolfin import *
2012-05-16 10:31:41 andersej: >>> s = KrylovSolver()
2012-05-16 10:31:41 andersej: >>> print s.parameters["absolute_tolerance"]
2012-05-16 10:31:41 andersej: 1e-15
2012-05-16 10:41:03 gabrielbalaban: takk!
2012-05-16 10:43:20 gabrielbalaban: hmm selv om toleransen er 1e-15 sÃ¥ for jeg en feil av orden -11
2012-05-16 10:45:40 gabrielbalaban: FYI dette hjelper self.phia_solver.parameters["relative_tolerance"] = df.e-12
2012-05-16 10:46:07 andersej: Fint!
2012-05-16 13:13:32 andersej: http://sn0v.wordpress.com/2012/05/11/installing-cuda-on-ubuntu-12-04/
2012-05-16 13:19:12 mb8g11: thanks
2012-05-16 15:16:39 mb8g11: soon it will have compiled, Anders
2012-05-16 15:18:34 andersej: That's when the debugging starts..
2012-05-16 15:21:08 mb8g11: Just remind me, why am I doing this?
2012-05-16 15:21:42 andersej: To use the gpu-solver.
2012-05-16 15:27:26 mb8g11: ... and? :D
2012-05-16 15:31:06 andersej: That's a funny thing to do.
2012-05-16 16:06:35 mb8g11: Yeah, as funny as new ubuntu versions.
2012-05-17 10:25:41 andersej: Heey! Welcome back!
2012-05-17 10:25:50 fangohr: Good Morning, Anders and DokosBot.
2012-05-17 10:26:19 andersej: Good morning! How was Italy?
2012-05-17 10:27:01 fangohr: Mostly warm, not enough sight seeing. Nice coffee.
2012-05-17 12:24:07 fangohr: Hi Marc-Antonio, ready for a biscuit?
2012-05-17 16:33:47 nsob104:  /?
2012-05-18 15:17:09 mb8g11: /usr/local/cuda/bin
2012-05-21 00:14:13 fangohr_laptop: Hello DokosBot.
2012-05-23 13:02:21 MaximS: Hi Anders.
2012-05-23 13:23:31 andersej: Hi! Sorry late answer, just been out buying food.
2012-05-23 13:25:05 MaximS: I could pick you up in 15 Minutes and we'll go to my office.
2012-05-23 13:25:23 andersej: Sounds good! See you then!
2012-05-23 13:25:29 MaximS: See you
2012-05-23 17:41:54 fangohr: Good afternoon, Anders and DokosBot.
2012-05-23 17:42:14 andersej: Hello, Hans!
2012-05-23 17:42:19 fangohr: :)
2012-05-23 17:42:54 fangohr: I have been told it is hot in Southampton?
2012-05-23 17:43:35 andersej: I can confirm this. Not many people in the building..
2012-05-23 17:43:53 fangohr: :) â have you got the aircon activated?
2012-05-23 17:44:39 andersej: No, I just use it in extreme situations. Afraid they'll give me a cold.
2012-05-23 17:46:30 fangohr: That's the right attitude.
2012-05-23 17:48:52 fangohr: I see from the commit that you are using PetscCusp â I think I start to understand now how this works together.
2012-05-23 17:52:09 fangohr_laptop: Hello Anders, Fangohr, DokosBot. (Just struggling with IRC clients hereâ¦)
2012-05-23 18:34:06 andersej: Hehe, fangohr_laptop was new.. Yes, I've started to test out the gpu solver. Just got remote access to Maxim's computer. The problem now is that small sets of equations take longer time to copy to the gpu than we gain by solving them there. Larger sets take forever to build the boundary element matrix as we have to use the python-magpar code. So I haven't seen any speedup in our code yet.
2012-05-23 18:40:57 andersej: How is the conference?
2012-05-25 16:28:33 MaximS: Hi Anders
2012-05-25 17:29:11 andersej: Hello!
2012-05-25 18:08:42 andersej: Have a nice weekend, DokosBot! Over and out!
2012-05-28 13:40:17 MaximS: hi all
2012-05-28 14:24:27 andersej: Ha, Maxim!
2012-05-28 14:24:33 andersej: *Hi
2012-05-28 14:38:46 MaximS: How is it going with your GPU tests?
2012-05-28 14:41:21 MaximS: I have to go now but I'd like to question you something about the demag field. I want to perform a test for my code ...
2012-05-28 14:41:24 MaximS: see you
2012-05-28 14:42:10 andersej: It's going well, you can ask what you want any time.
2012-05-29 12:25:19 fangohr_laptop: Morning, Anders, DokosBot.
2012-05-29 12:25:25 fangohr_laptop: Sorry, this should read Good afternoon.
2012-05-29 12:25:31 andersej: Hello, Hans!
2012-05-29 12:26:40 fangohr_laptop: Anything exciting happening?
2012-05-29 12:31:22 andersej: No, not really. Just testing some things that might increase the speed of the gpu solver, but I really don't think it will give much speedup. I also got an idea on the Fenics on Iridis-project, so I'm testing that as well now. Are you in Hamburg as we speak?
2012-05-29 12:36:11 fangohr_laptop: I am at the moment in Heathrow, waiting for boarding. (Marking some student work but thought it might be more fun to see what you are up to ;))
2012-05-29 12:36:26 fangohr_laptop: Yes, okay [regarding GPU stuff].
2012-05-29 12:36:46 fangohr_laptop: Have dealt with the 'copy()' issue? I suppose that would be good, and then maybe abandon the GPU study.
2012-05-29 12:40:31 andersej: Hehe, sorry that I'm not up to anything more exciting.. I think I have dealt with the copy issue for the zero vector. That is, I just removed the .copy() and ran all the tests.
2012-05-29 12:40:46 fangohr_laptop: Do the timings get any better?
2012-05-29 12:41:12 andersej: No.
2012-05-29 12:41:28 andersej: I'm trying with different methods and preconditioners now.
2012-05-29 12:43:29 fangohr_laptop: Just to check: instead of copying, you keep two matrices in memomy, and assign values of the first to the second where previously we have copied the first to the second? That's the way it should be.
2012-05-29 12:43:58 fangohr_laptop: When you are done with this, and you need another new task, there is a 'smallish' story that you might be able to do in an afternoon which would make Marijan very happy: https://www.pivotaltracker.com/story/show/27283415
2012-05-29 12:45:49 andersej: The thing is that the vector is supposed to be a zero vector for the laplace equation. But when we apply bc to it, it's no longer zero for the next time step. But the bcs are always applied for the same nodes, so I don't think the copy is needed. I guess it's just as code to show our code to the developer when I get back home, and ask why de don't get more speedup on the phi2 solve. For the phi1 I really don't think we could expect more than ~40%
2012-05-29 12:45:50 andersej: speedup, those 4x speedup tests were made on specific hardware and code just to advertise for their solver.
2012-05-29 12:48:52 andersej: Ya, I'll take a look at the DMI story after lunch.
2012-05-29 12:50:30 fangohr_laptop: Okay, great on all accounts. I better find my gate. Over and out.
2012-05-31 15:35:41 andersej: Goodbye, DokosBot!
2012-05-31 17:33:48 fangohr_laptop: Hello MA, Gabriel ;-)
2012-05-31 17:33:55 fangohr_laptop: Has Anders left us already?
2012-05-31 18:18:57 fangohr_laptop: Over and out.
2012-06-06 14:01:27 fangohr: Hello DokosBot. Not unexpectely, this place seems a bit deserted at the moment. I guess we are missing Anders ;-)
2012-06-13 10:33:01 Fangohr1: Hello DokosBot :)
2012-06-19 09:08:03 fangohr: Morning, Neil.
2012-06-19 15:20:59 fangohr-adium: Welcome Marijan. If you want to discuss your next Skyrmion steps, or don't know where to start, feel free to drop in anytime.
2012-06-19 15:54:47 fangohr-adium: Hi Justin, welcome.
2012-06-19 15:55:59 JustinD: Hi Hans, thanks :)
2012-06-19 17:09:32 fangohr-adium: Over and out for today.
2012-06-20 09:08:02 fangohr-adium: Morning Neil, DokosBot.
2012-06-20 09:41:06 fangohr-adium: Morning Justin, Maxim. Are you both in Building 25?
2012-06-20 09:42:14 fangohr-adium: If so, maybe introduce yourself to each other: Justin, Maxim is doing the GPU work with PyOpenCL I mentioned before. Maxim, Justin should be at Sebastian's desk (if he is at uni).
2012-06-20 09:55:51 fangohr-adium: Good morning Marc-Antonio. Your IRC channel proves to be popular.
2012-06-20 10:08:43 mb8g11: Good morning!
2012-06-20 10:09:40 mb8g11: Hi Weiwei ;)
2012-06-20 10:09:53 fangohr-adium: Hi Weiwei, indeed ;-)
2012-06-20 10:10:10 ww1g11: Hi all
2012-06-20 10:10:13 mb8g11: @fangohr-adium: Great! I didn't expect to find that much people.
2012-06-20 10:10:33 fangohr: I know -- it's crazy. But nice.
2012-06-20 10:10:42 fangohr: I won't go for lunch today, by the way (Volleyball).
2012-06-20 10:13:50 JustinD: Morning everyone
2012-06-20 10:14:41 JustinD: @fangohr-adium Yes, I'm in building 25 at the moment
2012-06-20 10:16:31 MaximS: Hi Justin! Will you be at the office tomorrow?
2012-06-20 10:17:48 JustinD: Hi Maxim, no, but I'll be back in the office on Tuesday morning
2012-06-20 10:23:05 MaximS: Ok, then I suggest you email me whenever you'll have questions about OpenCL. When you start working with OpenCL we can have a look at my work as an example.
2012-06-20 10:25:56 MaximS: Good morning Hans, Thank you for your email. I plan to visit you around 10am tomorrow.
2012-06-20 10:26:03 JustinD: Thanks, that would be great. I probably won't look at it for a week or so, but I'll come over and introduce myself anyway if I see you in the office before I begin looking at OpenCL.
2012-06-20 10:27:04 MaximS: What's your native language?
2012-06-20 10:32:41 mb8g11: l337
2012-06-20 10:32:50 JustinD: @MaximS English and Russian both work for me
2012-06-20 10:33:23 MaximS: @mb8g11:  ;)
2012-06-20 10:34:16 mb8g11: ^^
2012-06-20 10:35:15 MaximS: I speak Russian as well but I doubt it will be easy for me to speak about OpenCL in Russian. Well, see you soon!
2012-06-20 10:36:24 JustinD: Cool, yeah I don't know how good my technical language is in Russian to be honest. Would probably beat 1337 though
2012-06-20 14:01:36 fangohr-adium: Weiwei, Marijan, MA, shall we get started with the Dolfin-Boost session?
2012-06-20 14:01:58 marijan: we are coming
2012-06-21 11:54:27 fangohr: Hi Marc-Antonio, Weiwei.
2012-06-21 12:02:11 mb8g11: Hi Hans.
2012-06-21 12:02:28 fangohr: Hello. Anybody feeling a bit hungry?
2012-06-21 12:03:38 fangohr: I'll probably wait another 30 minutes, but then some food will be required.
2012-06-21 12:25:11 ww1g11: Hi Hans, just notice the chat, I am not hungry, it seems in the morning I ate too much
2012-06-21 12:25:25 fangohr: No worries ;-)
2012-06-21 12:25:40 fangohr: I probably just grab a sandwhich.
2012-06-21 12:26:15 mb8g11: I am hungry!
2012-06-21 12:26:49 fangohr: okay, maybe I can be persuaded to eat proper food. Are you around?
2012-06-21 12:30:08 mb8g11: Yes, want to go now?
2012-06-21 12:30:24 fangohr: 5 minutes or so?
2012-06-21 12:30:59 fangohr: Staff club?
2012-06-21 12:32:33 mb8g11: Yes.
2012-06-21 12:32:47 fangohr: Okay. I'll pick you up in 5mins.
2012-06-21 16:12:18 mb8g11: fangohr: remember the bug we talked about during lunch? About the order in which parameters are set?
2012-06-21 16:12:34 mb8g11: Simple typo. https://bitbucket.org/fangohr/finmag/changeset/b398200a0932
2012-06-21 16:19:33 mb8g11: weiwei: df.inner(df.grad(M), df.grad(M))
2012-06-21 16:34:12 fangohr: Nice.
2012-06-21 16:55:08 fangohr: Over and out.
2012-06-29 16:20:13 fangohr_laptop: I was going to suggest xchat.
2012-06-29 16:20:46 JustinD: ye, i tried to get mIRC because it was the one I had before, but couldn't find it for linux
2012-06-29 17:00:40 JustinD: I've pushed those example files you asked for onto the repository
2012-06-29 17:00:59 fangohr_laptop: Nice, thanks.
2012-06-29 18:13:15 fangohr_laptop: Over and out.
2012-07-02 15:43:50 smashdot: Hi all.
2012-07-02 15:44:10 JustinD: Hi
2012-07-02 15:44:15 smashdot: (Marc-Antonio here)
2012-07-02 15:45:11 JustinD: I would introduce myself, but my nickname probably does the trick :)
2012-07-02 15:50:49 smashdot: It does!
2012-07-02 17:24:19 smashdot: There's a problem with the build... there's an example that won't stop running.
2012-07-02 17:26:38 smashdot: Ah, saw it's possible to abort the build.
2012-07-03 10:47:13 fangohr-adium: Hi Marc-antonio, you should find on osiris.sesnet.soton.ac.uk in /tmp a file nmag-meta.tar.gz with the discussed tarball.
2012-07-03 10:48:50 fangohr-adium: The relevant examples are in nmag-meta/test/devtests/nmag/slonczewski.
2012-07-03 10:49:24 fangohr-adium: There is a 'validation' and a 'oscillation' example. One of them has been used in the report I have sent you before, and also has code to compare against oommf.
2012-07-03 10:49:48 fangohr-adium: I don't know off-hand where the actual implementation is hiding, but I think you have enough to info to grep for it. If you are stuck, let me know.
2012-07-03 10:52:36 mb8g11: Downloading as we speak, thank you.
2012-07-03 10:54:00 mb8g11: I should be able to find it with the infos you gave me. The example files likely include the files I need in some way.
2012-07-03 12:39:16 mb8g11: See you later.
2012-07-09 07:58:13 mb8g11: Good morning!
2012-07-16 17:32:26 fangohr: Over and out.
2012-07-18 09:56:40 fangohr: Good morning, DokosBot. You have been offline yesterday.
2012-07-18 17:57:10 JustinD: Hi Hans, Should I throttle down the simulation I sent over to your machine? It looks like it's using up all the cpu power it can get.
2012-07-31 08:48:32 mb8g11: Hey.
2012-08-01 16:10:25 fangohr-adium: Greetings :)
2012-08-01 16:23:41 fangohr-adium: Marc-Antonio, are you still there?
2012-08-01 16:42:29 fangohr-adium: MA, I'll catch up with you later â it's not urgent.
2012-08-01 20:00:54 Fangohr: Hello, connectin from smartphone - lets see how this works out.
2012-08-02 08:16:50 mb8g11: Hello DokosBot!
2012-08-02 08:27:54 mb8g11: exit
2012-08-02 23:47:03 fangohr: Good night, DokosBot.
2012-08-06 09:54:25 mb8g11: Hello Hans!
2012-08-06 11:17:34 mb8g11: fangohr-adium?
2012-08-07 08:37:32 mb8g11: Good morning.
2012-08-28 11:39:18 fangohr-adium: Hello Dokosbot! Long time no see.
2012-08-28 14:37:36 fangohr-adium: Greetings. I have written a few more emails :)
2012-08-28 14:39:36 mb8g11: Great.
2012-08-28 14:45:26 mb8g11: I remember looking into something called mesh functions in dolfin. They are functions that live on particular areas of the mesh. The question remains if we can map netgen's regions to dolfin meshes.
2012-08-28 14:56:54 mb8g11: Max?
2012-08-28 14:58:07 albert: Yes!
2012-08-28 14:58:31 mb8g11: Cool.
2012-08-28 14:58:37 albert: :-)
2012-08-28 14:59:25 albert: How's things in Hamburg?
2012-08-28 15:00:46 mb8g11: Fine :)
2012-08-28 15:01:16 mb8g11: Oh, we didn't instruct you how to join us on IRC, did we?
2012-08-28 15:02:43 albert: Well, I asked Hans a while ago and then did it successully once or twice, but since activity seemed rather low I forgot about it again.
2012-08-28 15:02:46 fangohr-adium1: Greetings, Max. :)
2012-08-28 15:03:08 fangohr-adium1: Adium (Mac OS X only) can autologin, it seems. Very useful. Xchat can do it sometimes.
2012-08-28 15:03:51 albert: Will try to remain connected in the future, and it might be useful to advertise it again to the other team members, just to have another means of communicating quickly.
2012-08-28 15:03:58 albert: Thanks Hans, I'll look into it.
2012-08-28 15:04:18 mb8g11: I you're into command line clients, I can recommend irssi.
2012-08-28 15:04:31 mb8g11: Could send you my config file, it does autologin.
2012-08-28 15:04:39 fangohr-adium1: That sounds interesting. Which OSs are supported?
2012-08-28 15:05:42 fangohr-adium1: More specifically: Mac OS X and Linux I am interested in.
2012-08-28 15:05:51 mb8g11: OS X, Linux, and apparently even windows (haven't tried)
2012-08-28 15:06:09 fangohr-adium1: Ta.
2012-08-28 15:06:15 mb8g11: It's in the ubuntu repositories.
2012-08-28 15:15:16 fangohr-adium1: Could you put the config file somewhere?
2012-08-28 15:19:29 mb8g11: Of course, in a minute.
2012-08-28 15:25:53 mb8g11: http://pastebin.com/DFFCKPZv
2012-08-28 15:28:16 mb8g11: weird issue with the spellchecker, here is the correct one: http://pastebin.com/yVhnmAN5
2012-08-28 15:32:42 albert: Thanks for the tip, Marc-Antonio. And also thanks for the config file. Do you know if irssi can do desktop notifications if you're working on a different workspace than the one where it's running?
2012-08-28 15:33:30 mb8g11: Sorry, no idea.
2012-08-28 15:34:17 albert: No prob. :)
2012-08-28 16:00:06 fangohr-adium1: Ta.
2012-08-28 16:00:30 fangohr-adium1: MA, Where does the irssi config file go (on linux)? In .irssi I presume, but what is the filename?
2012-08-28 16:02:19 mb8g11: ~/.irssi/config      (http://irssi.org/documentation/manual)
2012-08-28 16:05:22 fangohr-adium1: Thanks.
2012-08-28 16:16:53 mb8g11: np
2012-08-28 16:54:39 mb8g11: brb
2012-08-28 16:55:05 mb8g11: re
2012-08-28 16:59:19 albert: I'm off. See you guys tomorrow!
2012-08-28 17:00:55 mb8g11: Bye!
2012-08-29 09:14:35 fangohr-adium1: Morning all.
2012-08-29 09:14:44 fangohr-adium1: Max, are you back already, still there, or not logged out? ;-)
2012-08-29 14:08:45 fangohr-adium1: Hi MA :)
2012-08-29 14:39:47 mb8g11: HI :)
2012-08-29 15:30:31 mb8g11: Haha, running netgen in graphical mode. Managed to bring down my X-Server.
2012-08-29 15:49:54 fangohr-adium1: How did you do that? Should 'just work' shouldn't it?
2012-08-29 16:00:16 mb8g11: Didn't read the docu carefully enough. Thought cylinders were bounded, in fact they are infinitely long.
2012-08-29 16:00:32 mb8g11: Forgot to cut them off with planes.
2012-08-29 16:10:35 mb8g11: 16:59 < mb8g11> Didn't read the docu carefully enough. Thought cylinders were bounded, in fact they are infinitely long.
2012-08-29 16:10:38 mb8g11: 16:59 < mb8g11> Forgot to cut them off with planes.
2012-08-29 16:13:09 fangohr-adium: I see â have done that as well. And then your mesh gets quite big and you run out of memory, or it just crashes? The latter would be silghly disappointing, but then again we shouldn't complain too much about a free tool.
2012-08-29 16:15:08 mb8g11: Crashed. Not really complaining, although it irks me that netgen seldomly exits correctly.
2012-08-29 16:26:32 fangohr-adium: Ah, yes, I agree. I very much dislike the reliable segfault when batch execution 'completes'.
2012-08-29 16:56:12 fangohr-adium: Hi MA,  have just run your 'point_contacts.py' script: the round mesh looks good. The current doesn't quite match the nice mesh in the visualisation. Made some suggestions and committed.
2012-08-29 16:58:27 mb8g11: Thank you!
2012-08-29 16:59:34 mb8g11: Alas, I have run into a bug with our integrator. When running run_until(t) in a loop, the value for t inside that loop may not be what we expect.
2012-08-29 17:00:14 mb8g11: It can even be constant for several iterations of that loop, which will upset the saving of snapshots (duplicate filenames because of that problem).
2012-08-29 17:00:36 mb8g11: That's how I noticed it in the first place. Looking into it.
2012-08-29 17:01:32 fangohr-adium: Where do you interact with this? In the calling of the computation of the right hand side?
2012-08-29 17:03:12 mb8g11: As a user? When we call sim.llg.t. That value is weird. In our integrator self.cur_t is 0 the entire time as well. Weirdness all around.
2012-08-29 17:04:08 fangohr-adium: I recall that cur_t is not updated from C code although it should be. Never managed to look further into this, I think this is a bug.
2012-08-29 17:05:18 fangohr-adium: The other thing that may happen is that sundials can decide which values of t it wants to use when calling the right hand side. It can go forward or backward in time, or use the same value of t repeatedly (part of the iterative process, and part of cvode's cleverness in 'probing' the ODEs to pick the right time step, etc. What you describe sounds a bit like it.
2012-08-29 17:06:25 fangohr-adium: This also means that when sundials returns control to us (i.e. run_until(t) returns), we cannot trust that the values in H_demag is that of the time t. It could be for another t, which sundials decided to explore before deciding that it's current value for t is good enough to return to us.
2012-08-29 17:06:27 fangohr-adium: Do I make any sense?
2012-08-29 17:06:32 mb8g11: It does. Hmm. We'll have to save the "expected" simulation time as well. The one we expect after a call to run_until.
2012-08-29 17:06:51 mb8g11: You do.
2012-08-29 17:20:42 mb8g11: Good thing this channel is logged.
2012-08-29 17:31:11 fangohr-adium: Leaving for today; bye Dokosbot.
2012-08-30 09:08:26 fangohr-adium: Good Morning.
2012-08-30 11:12:05 fangohr-adium: Greetings.
2012-08-30 12:01:22 mb8g11: Hello.
2012-08-30 13:22:42 mb8g11: Thought about what you said yesterday, about the interactions not being in sync with the simulation or m, because of the integrator skipping ahead or resting. In theory, that sounds like a problem. But in practice we haven't caught it in our unit tests. Do you think this is something I should investigate?
2012-08-31 10:25:31 mb8g11: Hello
2012-08-31 10:26:25 fangohr-adium: Hi MA, regarding the time step: in theory (and in the past) the time step issue should not be an issue AS LONG as the only information we use from sundials is the statevector y (i.e. the magnetisation at the moment) and the time t.
2012-08-31 10:26:32 fangohr-adium: More discussion of this:
2012-08-31 10:27:19 fangohr-adium: We ask sundials (take as synonym here for CVODE) to integrate our ODEs for a given starting m0 and t0 up to a new t and to determine m=m(t). It will do that in its own way (and we should not care about it), and when it completes, it returns to us the desired m(t).
2012-08-31 10:28:37 fangohr-adium: What happens internally is that it may well use time steps that do not lead directly to our desired t; for example it may skip ahead to "t+some delta t" because that is the step size it considers appropriate, and then use interpolation from the previous t it has used to our desired t, using the information it has for "t+some delta t".
2012-08-31 10:29:21 fangohr-adium: I think this is the situation we see in the current version of the sandbox/interference_patterns/run.py programm: sundials only computes a new dm/dt for a few times, and providse interpolated results in between.
2012-08-31 10:30:45 fangohr-adium: The one thing we must not do, is to use the information that has been created when sundials has called our code to compute dm/dt, etc. for example we should not use the demag field values â while these will have been updated by sundials when calling the code to compute dm/dt â  we don't know for what time this was. )This problem arises because we share the same data with sundials.)
2012-08-31 10:30:50 fangohr-adium: Does that clarify the situation?
2012-08-31 10:33:36 mb8g11: Yes.
2012-08-31 10:35:50 fangohr-adium: Nice.
2012-08-31 10:36:08 mb8g11: When we ask for field energy values, we do this mostly at equilibrium. So it shouldn't matter much if the integrator (and thus the fields) is a little ahead of our sim.
2012-08-31 10:36:10 fangohr-adium: I start to wander whether we should circulate all the IRC communication every night to everybody; to keep people up-to-date.
2012-08-31 10:37:06 fangohr-adium: Regarding energy: I think when we request this, we do actually compute it at that moment, based on the current m. So that should be absolutely accurate.
2012-08-31 10:37:36 mb8g11: And if we really, really need an accurate reading, we can feed the actual m to the computation.
2012-08-31 10:38:16 mb8g11: Oh, that's right. Even better.
2012-08-31 10:40:48 mb8g11: Same for the fields when we call compute_field()
2012-08-31 10:41:05 mb8g11: So, keepin this in mind, it all becomes a non-issue.
2012-08-31 10:43:49 mb8g11: About the logs: There's the commit message on bitbucket.
2012-08-31 11:00:49 mb8g11: Wait. Actually, when sundials asks us to compute the right hand side for a value of m, we store that m as our magnetisation.
2012-08-31 11:46:17 fangohr-adium: Hey, DokosBot: I just got an email from Anders â he asks me to send his regards to you.
2012-08-31 13:29:10 fangohr-adium: Hi MA, welcome back.
2012-08-31 13:29:30 sMAshdot: Hi Hans!
2012-08-31 13:30:07 fangohr-adium: Regarding logs: most people do not get commits emailed, I think, they need to look them up. So I am not sure this is good enough. On the other hand, I don't want to annoy folks with too much input. Let's wait and see.
2012-08-31 13:30:31 fangohr-adium: Regarding: "Wait. Actually, when sundials asks us to compute the right hand side for a value of m, we store that m as our magnetisation."
2012-08-31 13:31:13 fangohr-adium: Yes, that's right. However, when sundials returns control to us, we take the last m it returns to us, and put this into the dolfin m-Function. That is the point where we put the right data into m. As long as we compute all other fields based on that m, we should be okay.
2012-08-31 13:31:14 sMAshdot: Yes, that was premature.
2012-08-31 13:31:22 sMAshdot: Yes.
2012-08-31 13:45:46 sMAshdot: Thanks for the explanations :)
2012-08-31 18:19:51 mb8g11: Bye!
2012-09-03 08:44:42 fangohr: Good Morning, DokosBot.
2012-09-03 10:23:46 fangohr-adium: Good Morning, MA.
2012-09-03 11:48:48 mb8g11: Hello!
2012-09-03 15:44:24 fangohr-adium: Hello Weiwei, well done ;-)
2012-09-03 15:45:10 ww1g11: Hi Hans, :)
2012-09-03 15:52:28 fangohr-adium: Hi Weiwei. Does Marijan need help?
2012-09-03 16:06:41 ww1g11: just want to test the alerts
2012-09-03 16:08:25 mb8g11: Discussed the critical timestep problem on pivotal tracker.
2012-09-03 16:08:35 fangohr-adium: Hi Marijan, well done.
2012-09-03 16:08:44 fangohr-adium: Weiwei, I have your logbook ready on: https://bitbucket.org/fangohr/logbook-weiwei-wang
2012-09-03 16:08:50 fangohr-adium: Marijan's is next.
2012-09-03 16:09:02 ww1g11: got it, thanks
2012-09-03 16:18:22 fangohr-adium: Marijan, your logbook should be at https://bitbucket.org/fangohr/logbook-marijan-beg
2012-09-03 16:18:26 fangohr-adium: Any problems, let me know.
2012-09-03 16:22:03 marijan: I've got it.
2012-09-03 16:22:06 marijan: Thanks
2012-09-03 16:23:06 fangohr-adium: Great. Try to run the 'make_html.sh' and 'make_pdf.sh' files â this will tell if you have all required tools installed (probably not). Do ask for help.
2012-09-03 16:23:17 fangohr-adium: q
2012-09-03 16:26:52 mb8g11: Are these makefiles for compiling the logbooks to something nice to look at?
2012-09-03 16:27:51 marijan: I do not have this rst2html.py file....
2012-09-03 16:35:44 fangohr-adium: MA: yes, I guess I should have given you the files as well. I'll email you a tarball of the set in a moment.
2012-09-03 16:36:24 fangohr-adium: Marijan: this is part of python's 'docutils' package. You could try 'easy_install docutils' (or Max may suggest something like 'pip docutils'?)
2012-09-03 16:36:52 fangohr-adium: Also check whether maybe you have the file 'rst2html', i.e. without the .py. Both do the same, and if you have the 'rst2html' you can change the command in the 'make_html.sh' file.
2012-09-03 16:37:59 albert: fangohr-adium: I think the command should be "pip install docutils", although the default Ubuntu python-docutils packages should be just fine if you don't need any recent functionality.
2012-09-03 16:38:54 fangohr-adium: I think Marijan is on his Mac. So I don't know which Python he uses (could be enthought).
2012-09-03 16:39:05 fangohr-adium: Or he maybe working on his virtual machine; don't know.
2012-09-03 16:40:01 marijan: I am on my Mac, and I cannot use easy_install command, because access to Python folder is denied. I will try to install it on Ubuntu.
2012-09-03 16:40:33 albert: Ah, if it's on a Mac and you are using Macports (which Hans suggests you don't) then you might need to use pip-2.7 (or whatever your python version is) to install the correct package.
2012-09-03 16:41:02 albert: marijan, have you uses sudo for installing the package?
2012-09-03 16:44:18 marijan: Yes, sudo was the problem. I installed it and everything works fine.
2012-09-03 16:44:20 marijan: Thank
2012-09-03 16:44:31 albert: Cool :)
2012-09-03 16:44:36 fangohr-adium: Great, thanks Max.
2012-09-03 16:44:45 albert: Apologies for a totally unrelated question:
2012-09-03 16:44:55 albert:  I was thinking that it would be handy to pass an exchange coupling constant and anisotropy constant to the  Simulation class (when it's initialised) so that it adds an exchange and anisotropy interaction automatically.
2012-09-03 16:45:08 albert: I.e., without the need to do it manually, e.g. via "sim.add(exchange)" or something similar.
2012-09-03 16:45:42 albert: In nmag this is solved by defining a MagMaterial first, and passing this on to the simulation class.
2012-09-03 16:45:49 fangohr-adium: Sounds good to me. You may also need to pass Ms?
2012-09-03 16:45:52 albert: Is there a reason we don't do this in Finmag?
2012-09-03 16:46:12 fangohr-adium: No, there is no particular reason. I think we just haven't made it to the high-level convenience functions yet.
2012-09-03 16:46:35 albert: And if we want to have this shortcut, would it be better to introduce a Material class (which might be just a simple wrapper for the time being), or would it be better to pass the constants to the Simulation class directly?
2012-09-03 16:46:46 fangohr-adium: It is an opportunity to review design choices though, so I quite like to not blindly copy from Nmag (at least initially).
2012-09-03 16:47:00 fangohr-adium: I don't know what is better. ;-)
2012-09-03 16:48:10 fangohr-adium: It is also not clear that the materials class will survive: we can use material parameters where properties change as a function space. So maybe there is no need to have different materials (at least as long as we want exchange coupling between the different materials).
2012-09-03 16:49:10 albert: Well, I quite like the flexibility in Finmag at the moment, for example that you can add multiple anisotropy terms etc. This should definitely be retained.
2012-09-03 16:49:31 fangohr-adium: Yes.
2012-09-03 16:49:41 albert: So I was thinking to maybe add three optional parameters to the Simulation.__init__() function:
2012-09-03 16:49:51 albert: A -- the exchange coupling constant
2012-09-03 16:50:03 albert: K1 -- the (uniaxial) anisotropy constant
2012-09-03 16:50:27 albert: and a 'demag_solver' argument, which would just be a string
2012-09-03 16:50:54 albert: by default, they are None or something equivalent, which signifies that they shouldn't be initialised
2012-09-03 16:51:32 albert: but if the user provides them then internally an exchange/anisotropy/demag interaction is automatically added
2012-09-03 16:52:21 albert: for example, providing A=13.0e-12 in the sim.__init__() function would be equivalent to saying:
2012-09-03 16:52:33 albert: exchange = Exchange(A)
2012-09-03 16:52:40 albert: sim.add(exchange)
2012-09-03 16:53:30 albert: So it would just be a shortcut, with slightly limited functionality (namely, that you can only initialise a single exchange/anisotropy/demag interaction via the __init__() function).
2012-09-03 16:53:37 albert: But you could of course add more of them later on.
2012-09-03 16:53:49 albert: Does this make sense? Or does anyone have a better suggestion?
2012-09-03 17:05:47 fangohr-adium: Max, sounds certainly appealing, and will be useful for many applications. There is a very small concern about modifying the class as it is now as it will be difficult to change later. Alternatives would be to derive a convenience class for one-material default values from the current class, which then provides the functionality you describe. We could then use other (derived) classes if we wanted to change the userinterface. On the other hand, I d
2012-09-03 17:08:06 albert: I have just given it a bit more thought and I agree that it's probably not a good idea to cram it all into the interface of the Simulation class.
2012-09-03 17:08:34 albert: But having a derived convenience class sounds like a very good idea.
2012-09-03 17:09:20 albert: If I get too fed up with adding interactions manually I might write one soon, thanks for the suggestion.
2012-09-03 17:09:41 albert: (Ideas for names are welcome, I'm quite bad at coming up with good names.)
2012-09-03 17:09:58 fangohr-adium: That would be fine by me: if it is derived, you can do withit what you like (and likely everybody will be using it soon) but cannot ccause any damage. Please proceed if you like :)
2012-09-03 17:10:57 fangohr-adium: Names: don't know: 'SimulationOneMaterial', â too long. May not even be true (as material parameters can vary).
2012-09-03 17:11:14 fangohr-adium: Or maybe just 'sim'? Very convenient, but maybe overconfident.
2012-09-03 17:11:36 albert: Perhaps "SimpleSimulation" or "SimpleSim"?
2012-09-03 17:11:39 fangohr-adium: How about 'sim1' â reading this as the first version of convenience class that we call 'sim' because that is to conveniently short?
2012-09-03 17:12:02 albert: That doesn't sound bad.
2012-09-03 17:12:05 fangohr-adium: SimpleSim is also fine with me.
2012-09-03 17:12:18 fangohr-adium: (or maybe SimpleSim1?)
2012-09-03 17:12:36 fangohr-adium: Could also bring in micromagnetics: SimpleMag1 ?
2012-09-03 17:13:11 fangohr-adium: I need to leave for the day; good catching up with people today - bye for now.
2012-09-03 17:13:29 albert: Thanks, and see you later!
2012-09-03 19:41:55 fangohr: Hi MA, Max, do you get email notifications when commits are pushed to bitbucket? (I do, and I think we should just sent those to everybody â this will deliver the IRC logs, and also keep everybody up to date as to what is happening). Any views?
2012-09-03 19:43:09 albert: Yes, I do get email notifications (but I had to turn them on explicitly last week).
2012-09-03 19:43:10 albert: I personally think it would be useful to email commits to everybody. It's not very high traffic, but it's useful to see what has been going on.
2012-09-03 19:43:42 mb8g11: test
2012-09-03 19:43:59 fangohr: That's my view as well.
2012-09-03 19:44:09 fangohr: Hello MA, testing, one, two. One, two.
2012-09-03 19:44:10 fangohr: ;-)
2012-09-03 19:44:11 mb8g11: I wouldn't mind getting e-mails for commits.
2012-09-03 19:44:39 albert: Have any of the other guys expressed an opinion?
2012-09-03 19:44:47 fangohr: Fine, let's do that. I can switch this on centrally by adding email addresses for diffs.
2012-09-03 19:45:34 fangohr: No, I don't know from Marijan and Weiwei but I expect htey have never had the chance to work with diff notifications, so I am quite happy to let them test it and later ask wether it is useful to them.
2012-09-03 19:45:47 fangohr: We can toggle this on/off individually, so no problem.
2012-09-03 19:45:53 albert: Sounds good.
2012-09-03 19:46:04 fangohr: Shall I add you two as well? (and if so, which email addresses are preferred?)
2012-09-03 19:46:31 albert: Yes please. You can use maximilian.albert@gmail.com for me.
2012-09-03 19:47:52 fangohr: OKay, have added all soton addresses otherwise. Let's see how it goes.
2012-09-03 19:48:16 mb8g11: Thank you.
2012-09-03 19:55:21 mb8g11: @SimpleSim: This doesn't save anything Sim wouldn't, meaning, it has no additional state, does it? So why not simply have a helper function, maybe called add_to_sim(sim, A, (K1, a)) or so.
2012-09-03 19:55:43 mb8g11: or sim = sim_with(A, (K1, a))
2012-09-03 19:55:54 mb8g11: like some kind of factory
2012-09-03 19:57:04 mb8g11: I'm sure we could come up with better ideas, but subclassing is not the way to go IMHO.
2012-09-03 20:00:40 fangohr: Yes, that's the other option that seems sensible: to have a function that generates the simulation object. I find it hard to see what's better; so either is fine with me.
2012-09-03 20:01:35 mb8g11: In fact, I'd like to have Simulation as the convenience class, and will try to move some code from there to lower levels or helpers (but keep the interface in Simulation).
2012-09-03 20:03:48 albert: mb8g11,  you are probably right about using a helper function rather than a subclass. I like the "sim_with(...)" syntax.
2012-09-03 20:05:13 mb8g11: Subclassing was not "wrong", a SimpleSimulation sounds like it has a "is a" relationship to Simulation. But why not make the first class more convenient, instead of inventing a second one.
2012-09-03 20:05:51 mb8g11: To keep it manageable, we will have to take care to push the low-level code to where it belongs, or can be grouped into
2012-09-03 20:06:05 mb8g11: (it being our original Simulation clasS)
2012-09-03 20:07:54 albert: So how are you imagining to make the Simulation class more convenient ? Other than with additional helper functions, that is? (Or was this the route you were suggesting?)
2012-09-03 20:10:29 mb8g11: For this particular problem, with helper functions. Other than that... I may lack the experience/foresight to see what we need. I may be utterly wrong considering new examples you can come up with :)
2012-09-03 20:11:52 mb8g11: I'd like to be able to build a dolfin mesh from a maximum simplex size, instead of telling it the number of simplices I want. That would be nice, but has nothing to do with the Simulation class.
2012-09-03 20:12:45 albert: Ok, I guess we'll see along the way what we need. But yes, I like the idea of making the Simulation class as convenient as possible and move helper stuff somewhere else.
2012-09-03 20:13:13 albert: Oh, how do you specify the number of simplices in a mesh? Is this with Netgen or using the Dolfin built-in functions?
2012-09-03 20:15:25 mb8g11: Dolfin built-in. dolfin.Rectangle(x0, y0, x1, y1, xn, yn), x0,x1 being the coordinates and xn and yn the number of divisions.
2012-09-03 20:16:08 mb8g11: the order of the first four arguments may be wrong.
2012-09-03 20:16:41 albert: Ah, of course, that's obvious. Sorry for the silly question, I was too much thinking in terms of Netgen.
2012-09-03 20:16:49 mb8g11: We all do.
2012-09-03 20:17:40 mb8g11: Who cares about the number of divisions in a particular direction, as long as there is a way to say how fine the mesh has to be (maxh in netgen).
2012-09-03 20:19:32 albert: Well, for this particular kind of mesh it would be easy to compute (and to provide a simple helper function). But for other mesh types provided by Dolfin it may not so obvious.
2012-09-03 20:21:20 mb8g11: Could be.
2012-09-03 20:23:31 albert: Totally different question: have you ever seen an error like this when running Finmag?
2012-09-03 20:23:35 albert: RuntimeError:
2012-09-03 20:23:35 albert: *** -------------------------------------------------------------------------
2012-09-03 20:23:35 albert: *** DOLFIN encountered an error. If you are not able to resolve this issue
2012-09-03 20:23:35 albert: *** using the information listed below, you can ask for help at
2012-09-03 20:23:35 albert: ***
2012-09-03 20:23:35 albert: ***     https://answers.launchpad.net/dolfin
2012-09-03 20:23:37 albert: ***
2012-09-03 20:23:39 albert: *** Remember to include the error message listed below and, if possible,
2012-09-03 20:23:41 albert: *** include a *minimal* running example to reproduce the error.
2012-09-03 20:23:43 albert: ***
2012-09-03 20:23:45 albert: *** -------------------------------------------------------------------------
2012-09-03 20:23:47 albert: *** Error:  Unable to solve linear system using PETSc Krylov solver.
2012-09-03 20:23:49 albert: *** Reason: Solution failed to converge in 0 iterations (PETSc reason DIVERGED_NAN, norm nan).
2012-09-03 20:23:51 albert: *** Where:  This error was encountered inside PETScKrylovSolver.cpp.
2012-09-03 20:23:55 albert: *** -------------------------------------------------------------------------
2012-09-03 20:24:16 albert: I've stumbled upon it a few times recently, but it doesn't seem to be 100% reproducible (sometimes it works with the exact same parameters).
2012-09-03 20:24:28 mb8g11: Yes, when I play with the tolerances of the demag solver too much, or mix up the unit lengths with netgen meshes.
2012-09-03 20:24:57 mb8g11: With the exact same parameters? Weird.
2012-09-03 20:26:02 albert: Yes, I found that weird too.
2012-09-03 20:26:46 albert: Do you have any suggestions what may most likely be causing it (i.e., what to change so that it goes away)?
2012-09-03 20:27:27 albert: Also, is it worth investigating this further, or is it simply a result of badly chosen parameters? (However, the ones I have at the moment don't seem particularly unreasonable...)
2012-09-03 20:29:42 mb8g11: Have you set m?
2012-09-03 20:29:52 mb8g11: if m is still zero, that could cause the norm nan.
2012-09-03 20:30:44 albert: Argh, I think you are right. I guess I haven't...
2012-09-03 20:33:01 mb8g11: Cool.
2012-09-03 20:33:26 albert: Will double-check, but that's most likely the mistake.
2012-09-03 20:33:54 albert: I ran the simulation with the new convenience class SimpleMag1 (which I'll soon change to the sim_with(...) syntax you suggested above), and I think I forgot to add an m_init argument.
2012-09-03 20:35:30 albert: I guess it's time to go home if this is the sort of silly mistake I'm making... ;-)
2012-09-03 20:40:45 mb8g11: Definitively, haha.
2012-09-03 20:40:56 mb8g11: Here's the incentive, I'll stop now too.
2012-09-03 20:41:08 mb8g11: "See" you tomorrow!
2012-09-03 20:41:40 albert: Have a nice evening, and thanks again!
2012-09-03 20:41:49 mb8g11: for what? ;)
2012-09-03 20:41:53 mb8g11: You too.
2012-09-03 20:42:04 albert: For pointing out silly mistakes. ;-)
2012-09-03 20:42:07 albert: See you!
2012-09-04 09:05:07 fangohr-adium: Good morning DokosBot and Max.
2012-09-04 12:40:41 fangohr-adium: Max, are you out there?
2012-09-04 14:46:49 albert: Hi Hans!
2012-09-04 14:47:49 albert: Sorry I didn't reply earlier. I had set my status to "away" last night, but I'm not sure this is communicated anywhere.
2012-09-04 14:48:30 fangohr-adium:  No, it isn't. No problem though ;-). I sent you an email with my query. (Need to go now - see you tomorrow at 10am for moving offices â¦ ;) )
2012-09-05 09:21:32 fangohr-adium: Good morning Marijan.
2012-09-05 14:46:56 fangohr-adium: Marijan, the meeting with Ian Hawke is today, is that right?
2012-09-05 14:47:13 marijan: Yes, at 3pm
2012-09-05 14:47:32 fangohr-adium: Okay, thanks. If you have a pdf to flick through, maybe best to email me before.
2012-09-05 14:47:42 marijan: ok
2012-09-05 14:51:55 marijan: I have just send it to you.
2012-09-05 17:18:20 fangohr-adium: Over and out for today.
2012-09-05 17:22:18 albert: Hi Hans, just out of interest: is there a way to access the Finmag IRC logs somewhere online, e.g. to catch up on what has been happening during the day (without having to wait for the Bitbucket commit message at midnight)?
2012-09-05 18:45:56 albert: Oh, and another question: is there a "single-html" version of the Finmag manual available? This would be handy if one wants to quickly search for something.
2012-09-06 09:02:46 fangohr-adium: Hi Max, access the IRC logs: no, that is available, and I agree that this is also missing. Either we should have the availability to check the current logs somewhere, or consider switching to a different group chat forum, where you can log in and get the past discussions, etc. I'll look into it.
2012-09-06 09:03:16 fangohr-adium: Regarding the single-html finmag manual: no, we don't have this, but it would be useful. I think we can create another target in the documentation make file for this.
2012-09-06 10:10:01 fangohr-adium: Good Morning all.
2012-09-06 10:10:17 mb8g11: Good morning!
2012-09-06 10:11:00 marijan: Good morning.
2012-09-06 10:12:43 marijan: Weiwei and I are discussing something about the conference and we haven't got any answer from them although the decision date was yesterday. Should they inform us even if we are rejected?
2012-09-06 10:14:11 fangohr-adium: Yes, they will inform you either way. I suspect they are running behind schedule. I would not worry and wait a week or so.
2012-09-06 10:14:39 marijan: ok
2012-09-06 10:18:37 fangohr-adium: Hi all, Max did ask yesterday whether the finmag irc logs can be seen anywhere DURING the day. I understand why he is asking as it is a common problem. You log out, or your chat client dies, and when you come back, you don't know what has been discussed before. By midnight, it will be committed, and you can check the whole record at https://bitbucket.org/fangohr/finmag/src (in logbooks/finmag-irc.log)
2012-09-06 10:18:44 fangohr-adium: However, before midnight, that information is not available.
2012-09-06 10:19:50 fangohr-adium: As a quick fix, I have written a (pycherry) script that serves the latest changes at http://summer.kk.soton.ac.uk:8008 . It's not pretty but does the job for now. I will commit the code in a moment, it currently runs under my username on summer.kk.soton.ac.uk.
2012-09-06 10:28:36 fangohr-adium: Max, to answer your question from yesterday: 'make singlehtml' in finmag/doc produces the single html file you asked for ;) Was just going to add it, and it was there already.
2012-09-06 16:16:11 fangohr-adium: Max, interesting: your warning message about the 'spurious error on Anders Johansen's' machine shows up on jenkins. See http://summer.kk.soton.ac.uk:8080/job/finmag/850/console
2012-09-06 16:48:47 albert: Hi Hans! Yes, I've seen it a few times on my own machine as well. No idea what it means, though.
2012-09-06 16:52:54 mb8g11_: Is this the predictable failing of netgen, or something else?
2012-09-06 16:54:04 fangohr-adium: Yes, netgen. You can see the error at http://summer.kk.soton.ac.uk:8080/job/finmag/851/console
2012-09-06 16:54:32 fangohr-adium: Max, the compilation went fine. This means that when you go to http://summer.kk.soton.ac.uk:8080/job/finmag/, you can see on the side
2012-09-06 16:54:38 fangohr-adium: 1. html documentation as before
2012-09-06 16:54:43 fangohr-adium: 2. html documentation in single file
2012-09-06 16:54:50 fangohr-adium: 3. pdf documentation
2012-09-06 16:55:14 fangohr-adium: Very good. It also means we are testing that the pdf file can be built; which I always wanted to add. Thank you for reminding me ;-), and your time earlier today.
2012-09-06 16:55:44 albert: Cool, I just saw it. Glad it works!
2012-09-06 17:08:26 fangohr-adium: Over and out.
2012-09-06 17:08:35 albert: See you!
2012-09-07 11:14:49 fangohr-adium: Good Morning DokosBot, CherryPy and Max.
2012-09-07 17:08:19 fangohr-adium: Have a good weekend, over and out for now.
2012-09-11 09:42:05 fangohr-adium: Good morning, Marc-Antonio.
2012-09-11 09:42:09 fangohr-adium: and DokosBot.
2012-09-11 10:22:25 mb8g11: Hi Hans!
2012-09-11 10:27:50 fangohr-adium: Hi MA, Interested in early lunch today (around 12:00, say)?
2012-09-11 10:46:22 mb8g11: Yes.
2012-09-11 10:46:51 fangohr-adium: Cool, let's do that, and also catch up on things.
2012-09-11 10:47:38 mb8g11: Sounds good.
2012-09-11 11:43:40 fangohr-adium: Hi Justin.
2012-09-11 11:44:25 fangohr-adium: Justin, you may have missed that the log of the discussions on IRC of the day is available at: http://summer.kk.soton.ac.uk:8008
2012-09-11 11:56:44 fangohr-adium: Hi all, a number of people seem keen to join us for lunch (including Gerian who is not on this channel). I come along to pick you up now.
2012-09-11 14:08:51 fangohr-adium: Over and out for the day; back tomorrow morning.
2012-09-12 08:51:37 fangohr-adium: Good Morning.
2012-09-12 11:23:05 mb8g11: Lunch at 12:00?
2012-09-12 11:24:14 JustinD: Sure, that works for me
2012-09-12 15:38:34 fangohr-adium: Hi folks, sorry, missed the message (and didn't do food either today).
2012-09-12 17:22:16 fangohr-adium: Over and out for today.
2012-09-13 09:27:20 fangohr-adium: Good morning all.
2012-09-13 09:27:42 JustinD: Good morning
2012-09-13 14:48:50 mb8g11: Just had a really nice chat with Richard Boardman.
2012-09-13 14:50:44 fangohr-adium: Good â he his done lots of stuff in OOMMF and Magpar in the days before Nmag; approximately 2002-2005. He is also the visualisation guru, and would routinely take VTK-vector scenes and export them to povray or other raytracers.
2012-09-13 14:50:55 mb8g11: Besides some nostalgia about micromagnetics on his part, he seems to be really knowledgeable about parallel computing.
2012-09-13 14:52:19 mb8g11: And he is intrigued by fenics. Definitily some potential to trade a few hints :)
2012-09-13 14:53:09 fangohr-adium: Yes â I had a chat with him about fenics last week and tried to sell it to him (or rather to one of the post-docs in his group).
2012-09-13 14:53:40 fangohr-adium: All good. He also has graphs on OOMMF and Magpar memory consumption in his PhD thesis. We should show these to Weiwei.
2012-09-13 14:54:18 mb8g11: @povray: I'm impressed. @fenics: Told me you had a talk about this.
2012-09-13 14:54:40 mb8g11: Oh, okay, I'll tell Weiwei right now.
2012-09-13 14:55:21 fangohr-adium: Have a look at the nice logo on http://code.enthought.com/projects/mayavi/ . This was part of Richard's PhD on micromagnetics. I think we did this with OOMMF, and the ovf2vtk tool.
2012-09-13 14:56:05 fangohr-adium: Interestingly, the same logo made it to the Enthought Python Distribution Free  (albeit smaller): http://www.enthought.com/products/epd_free.php
2012-09-13 14:56:21 fangohr-adium: Finally, he was part of the Raspberry Pi team ;-)
2012-09-13 14:56:31 fangohr-adium: Anyway, I'll shut up and do some more teaching preparation now.
2012-09-13 14:56:44 fangohr-adium: @talking-to-Weiwei: thanks.
2012-09-13 14:58:12 mb8g11: How very cool!
2012-09-13 14:58:29 mb8g11: We downloaded the thesis, Weiwei is having a look at it now.
2012-09-13 14:58:39 mb8g11: Okay, ttyl.
2012-09-13 15:17:05 fangohr-adium: While we are showing off nice images: Richard also helped me a little in finetuning the povray parameters for the image used as a logo in http://www.cmmp.org.uk/64380
2012-09-13 15:17:52 fangohr-adium: It is a long time ago, but some (then state-of-the-art) visualisations are still available at http://www.southampton.ac.uk/~fangohr/research/vortex1/mbg/mbg2.html
2012-09-13 15:18:25 fangohr-adium: We used a linux cluster (with 8 500MHz alpha machines) to render the frames for this. A bit like Pixar, only less successful.
2012-09-13 15:18:46 fangohr-adium: I should say for completeness that there is also some interesting science in the motion of these objects; but that's a different story.
2012-09-13 15:19:05 mb8g11: I have no idea what I'm looking at, but the DOOM perspective is awesome.
2012-09-13 15:19:39 fangohr-adium: Ah, yes â you mean the camera attached to one of the spheres?
2012-09-13 15:20:00 mb8g11: Yes. Okay, just figured out the marbles are vortices.
2012-09-13 15:20:58 fangohr-adium: So here is your challenge should you wish to accept it: Can you locate a camera on top of a travelling spin wave (maybe moving with the group velocity??) and visualise the motion accordingly? Surely we can something comparable for a magnetic system if we think long enough ...
2012-09-13 15:21:54 mb8g11: Certainly, but what would the camera be looking at?
2012-09-13 15:22:33 mb8g11: Wait. Another spin-wave coming at it. That should be a rough ride.
2012-09-13 15:23:02 fangohr-adium: We could choose the direction perpendicular to the wave front (and within the  film plane) as the direction for the camera to look at. Then look at the magnetisation, and â as you just suggest â other spin waves, or reflections etc.
2012-09-13 15:24:31 mb8g11: Sounds nice, even if I have no idea how I would even start building an animation like that.
2012-09-13 15:24:58 mb8g11: Nevermind, let's do a feature-length movie out of it.
2012-09-13 15:25:12 fangohr-adium: I have some ideas although it is all a bit whacky at this stage. Let's try to push the science a bit further first; then I am quite happy to discuss.
2012-09-13 15:25:38 fangohr-adium: Agree â this will be financially more lucrative than any engineering we can come up. Should get Spielberg involved.
2012-09-13 15:30:49 mb8g11: Spielberg Schmielberg. I want no lesser man that Uwe Boll, hero of the low-budget and direct-to-video productions and the only director alive brave enough to challenge his many critics to a boxing match and indeed beat one of them to a bloody pulp!
2012-09-13 15:31:11 mb8g11: That's the stuff dreams are made of.
2012-09-13 15:31:43 fangohr-adium: Uwe Boll: fine. No boxing for me, please.
2012-09-13 15:31:54 mb8g11: But I agree insofar that some more science can't hurt. I hear it's all the rage.
2012-09-13 15:32:04 fangohr-adium: Bring it on then ;-)
2012-09-13 15:32:20 mb8g11: Working on it!
2012-09-13 17:07:39 fangohr-adium: Over and out for today.
2012-09-13 17:29:59 mb8g11: Bye Hans!
2012-09-14 09:59:41 fangohr-adium: Good Morning.
2012-09-14 10:35:27 mb8g11: Good morning!
2012-09-14 12:07:45 fangohr-adium: What is the lunch situation like - Anybody hungry?
2012-09-14 12:08:52 JustinD: I've already planned to meet a few friends for lunch, sorry
2012-09-14 12:11:30 mb8g11: Yes hungry.
2012-09-14 12:11:50 mb8g11: I'll be with you in a minute.
2012-09-14 12:12:01 fangohr-adium: Okay, sounds good.
2012-09-17 12:18:13 fangohr-adium: Hi all, just so say that I am skipping lunch today.
2012-09-18 09:13:57 fangohr-adium: Mornung Justin.
2012-09-18 09:14:08 JustinD: Good morning Hans
2012-09-18 09:14:11 fangohr-adium: Morning(!) Justin.
2012-09-18 09:15:39 JustinD: I thought you had lapsed into another language for a second
2012-09-18 09:16:02 fangohr-adium: Still have to invent that particular one. ;-)
2012-09-18 09:17:07 JustinD: A language purely for the purpose of confusing people in your office - sounds fun
2012-09-18 09:29:21 fangohr-adium: Ah, yes. Sadly some of my intended English ends up that way already.
2012-09-18 09:34:31 JustinD: Haven't really noticed to be honest
2012-09-18 09:35:23 fangohr-adium: It's probably not that bad. However, I did notice that the odd German word has started to slip into long speeches since I regularly talk German at home with the children. Never mind â¦
2012-09-18 09:36:01 JustinD: I know the feeling, have been stuck for an English word quite a few times
2012-09-20 09:14:16 fangohr-adium: Morning DokosBot. Just to say that I am busy delivering an intense teaching course today, tomorrow, Monday and Tuesday.
2012-09-20 16:33:24 JustinD: Hans, do you mind if I drop by your office in a minute?
2012-09-20 16:56:51 fangohr-adium: Hi Justin, only saw your message now â was coincidence I came past your desk ;-)
2012-09-20 16:57:11 JustinD: Oh, that was lucky then :)
2012-09-20 16:57:54 JustinD: Do you mind if I restrict the benchmark to even numbers of iterations?
2012-09-20 16:58:04 fangohr-adium: No.
2012-09-20 16:58:26 JustinD: Cool, will try and have it running before I leave today then
2012-09-20 16:59:23 fangohr-adium: Fab. Drop me a tar ball with all files, or put them somewhere on a shared dropbox folder. I will try to run them on osiris as well, althought I'd go with your timings (which I also need from you) as you have the GPU card. If you could also add a note on the spec of the GPU and the machine you are using that would be good.
2012-09-20 16:59:47 fangohr-adium: If you do it tomorrow, that would be fine as well, although today would be nice of course.
2012-09-20 17:00:54 JustinD: Well i left for a while to go to the SUSU AGM, so thought I'd stay a bit later today and try and finish this up
2012-09-20 17:01:06 fangohr-adium: Don't let me stop you ;-)
2012-09-20 17:01:20 JustinD: Will do the tarball probably and include a text file or something
2012-09-20 17:01:23 fangohr-adium: (But make sure you leave the building by 11pm.)
2012-09-20 17:01:48 JustinD: Oh, I wasn't planning on being that late, still need to get some food and exercise today :)
2012-09-20 18:06:08 JustinD: I'm actually going to head off now, the code is almost finished, so I'll send it to you in the morning
2012-09-20 18:06:10 JustinD: Bye
2012-09-21 14:24:50 JustinD: @Hans: I've just emailed you the benchmarks
2012-09-21 16:44:16 fangohr-adium: Ta.
2012-09-21 16:44:21 fangohr-adium: Will have a look at them.
2012-09-21 17:05:22 JustinD: No problem, i imagine you'll get similar results on your machine, thought with a bit less of a difference due to the gpu
2012-09-21 17:05:42 fangohr-adium: Very nice.
2012-09-21 17:05:49 fangohr-adium: I am sending some feedback by email.
2012-09-21 17:05:58 JustinD: Thanks
2012-09-21 17:06:04 fangohr-adium: On my machine there is some OpenCL library missing. Let me check the error message ...
2012-09-21 17:07:25 fangohr-adium: Maybe I am just lakcing the right hardware: when trying to run 'python benchmark.py' I get ptxas application ptx input, line â¦. Instructions * requiers SM1.3 or higher, or map_f64_to_f32. So I guess this fails because my card cannot do any 64 bit operations?
2012-09-21 17:11:57 JustinD: Yes, that's what it sounds like
2012-09-21 17:12:12 JustinD: i did everything in double since that is what python was probably doing
2012-09-21 17:12:31 JustinD: anyway, I unfortunately have an appointment in a few minutes and need to leave
2012-09-21 17:12:48 JustinD: would you like me to just drop by your office if you want me to quickly look?
2012-09-21 17:13:14 fangohr-adium: No, don't worry. I accept we can't run it on osiris; that's fine.
2012-09-21 17:13:18 fangohr-adium: I can use the timings you got.
2012-09-21 17:13:20 JustinD: I've just replied to your email
2012-09-21 17:13:26 JustinD: Ok, great
2012-09-21 17:13:49 JustinD: i can make a 32 bit float version over the weekend if it's useful
2012-09-21 17:14:32 JustinD: Anyway, I have to run off now
2012-09-21 17:14:35 JustinD: have a good weekend
2012-09-21 17:14:43 fangohr-adium: And you ...
2012-09-21 17:14:45 fangohr-adium: Thanks again.
2012-09-21 17:14:48 fangohr-adium: over and out.
2012-09-26 09:53:50 fangohr-adium: Aha, good old DokosBot hanging out here ;)
2012-09-28 07:56:52 mb8g11: Hello DokosBot!
2012-10-01 09:18:19 fangohr-adium: Good Morning DokosBot!
2012-10-01 14:36:17 fangohr-adium: Hi Dmitri, well done ;-)
2012-10-01 14:37:57 D_Chernyshenko: Ok, this seems to be working!
2012-10-02 09:28:22 fangohr-adium: â¦ and there DokosBot is again â phew.
2012-10-02 14:48:12 fangohr-adium: Leaving the office for most of the afternoon.
2012-10-03 09:11:03 fangohr-adium: Good morning Max, DokosBot.
2012-10-03 09:24:12 albert_: Good morning Hans, DokosBot.
2012-10-03 13:47:42 fangohr-adium: Greetings all.
2012-10-03 14:11:01 mb8g11: Hi Hans
2012-10-03 17:11:29 fangohr-adium: Hi all,I am  leaving for the day. Over and out.
2012-10-04 09:13:11 fangohr-adium: Morning Guest17629 â who are you? ;)
2012-10-04 11:26:33 Guest17629: Morning Hans, I'm Max. :) For some reason xchat automatically changed my name. No idea why...
2012-10-04 11:27:34 Guest17629: Maybe I should find another client anyway. It seems to behave slightly awkward sometimes...
2012-10-04 11:32:29 albert: Ok, back again as 'albert'... ;-)
2012-10-04 12:13:53 mb8g11: Who is up for lunch?
2012-10-04 12:15:27 Guest20581: Me!
2012-10-04 12:27:31 mb8g11: Who are you anyways.
2012-10-04 12:27:54 Guest20581: Dammit, nickname changed automatically by xchat again. Just a second...
2012-10-04 12:28:20 albert: Ok, here we go again: Me!
2012-10-04 12:28:34 D_Chernyshenko: I'm going to eat a bit later I think...
2012-10-04 12:28:56 D_Chernyshenko: albert is now known as Guest13127
2012-10-04 12:29:32 Guest13127: WTF?!?!
2012-10-04 12:29:42 Guest13127: I got the warning: "You failed to identify in time for the nickname Albert"
2012-10-04 12:29:52 Guest13127: ... but no option to identify? Weird...
2012-10-04 12:30:02 D_Chernyshenko: You probably have a password for your nickname
2012-10-04 12:30:18 D_Chernyshenko: You need to identify with a command /msg nickserv identify your_password
2012-10-04 12:30:38 Guest13127: Hmmm.... It used to work a while ago without password. Also, if I have a password I certainly don't remember it... ;-)
2012-10-04 12:30:57 Guest13127: Also, which server is "nicksrv" anyway? Where would I have registered?
2012-10-04 12:31:14 fangohr-adium: Marc-Antonio is the expert on IRC.
2012-10-04 12:31:39 mb8g11: We'll sort this out.
2012-10-04 12:48:48 fangohr-adium1: Hi all, we are going for lunch in the staff club around 13:30 with Anil Prabhakher and Arti Kashup if you are interested to join.
2012-10-04 12:49:04 fangohr-adium1: (not sure the message came through before)
2012-10-04 12:50:11 mb8g11: Max and I'll join you then.
2012-10-04 12:56:40 fangohr-adium1: Nice. I'll drop a note here when we are about to go.
2012-10-04 13:35:37 fangohr-adium1: Hi Max, Marc-Antonio, we are ready to go â do you want to come by my office?
2012-10-04 13:35:56 mb8g11: On our way.
2012-10-04 13:35:57 albert_: Sure, we'll be there in a minute!
2012-10-04 13:36:52 fangohr-adium1: if we are gone, just follow to staff club.
2012-10-04 15:29:45 mb8g11: Hans, is now still good for you?
2012-10-05 09:22:13 fangohr-adium1: Good morning, team.
2012-10-05 09:56:53 mb8g11: Good morning, Hans!
2012-10-05 10:28:08 fangohr-adium1: Morning all.
2012-10-05 12:40:01 fangohr-adium1: [Hi all, no time for lunch today for me.]
2012-10-05 16:58:45 fangohr-adium1: Hi all, excellent discussion on tidying up the code regarding tests and C++ [just starting to catch up with email].
2012-10-05 17:03:20 mb8g11: It'll only get more difficult to clean up as time progresses and the code-base grows.
2012-10-05 17:11:18 fangohr-adium1: Yes, I agree. I very much like your plans and iniative.
2012-10-05 17:19:49 fangohr-adium1: Need to leave for today. Over and out, Hans
2012-10-05 17:20:58 mb8g11: Have a nice week-end, bye!
2012-10-05 19:08:16 mb8g11: Heya Marijan
2012-10-05 19:08:23 mb8g11: What are you up to?
2012-10-05 19:08:35 marijan: heya
2012-10-05 19:38:55 fangohr: Hi MA, still there?
2012-10-05 19:38:59 mb8g11: Hiya
2012-10-05 19:39:42 fangohr: Question for marvinhg: I have forgotten how bitbucket works, but presumably I either need an email address or marvin (which we don't have?), or a bitbucket account for marvinhg which I can allow to write to finmag?
2012-10-05 19:41:08 mb8g11: In the finmag repository on the bitbucket website, in the Admin tab, Access management menu item.
2012-10-05 19:41:32 mb8g11: The username you want to add is marvinhg, who I have registered earlier this evening.
2012-10-05 19:47:11 fangohr: Very good, done that.
2012-10-05 22:17:41 mb8g11: test
2012-10-06 15:47:09 mb8g11: Hi DokosBot, this is a test.
2012-10-06 16:28:13 mb8g11: Hey Max
2012-10-06 16:28:29 cilix: Heya!
2012-10-06 17:49:16 fangohr: Greetings, busy out here on a Saturday.
2012-10-07 17:45:19 mb8g11: exit
2012-10-08 09:33:02 fangohr-adium1: Good Morning all, I expect most of us to be at the DTC advisory board meeting today. See you there later, and tonight at the cowherds with Mandfred Schabes.
2012-10-09 11:06:56 fangohr-adium1: Good morning folks.
2012-10-10 08:55:36 fangohr-adium1: Good Morning.
2012-10-10 09:52:31 mb8g11: Hello
2012-10-10 13:03:50 fangohr-adium1: Greetings. :)
2012-10-10 14:07:03 mb8g11_: There was a way to start nmag in interactive mode, wasn't there? Can't find it in the doc.
2012-10-10 17:05:50 fangohr-adium1: Hi Marc-Antonio, I guess you are just upgrading summer ;-)?
2012-10-10 17:06:52 fangohr-adium1: I logged on just now, and  found a welcome message for Ubuntu 12.04 and an up-time of 34 days. That's cool â upgraded without reboot â¦ ;-)
2012-10-10 17:08:15 mb8g11_: Hehe, let's see what it says when it's done with upgrading.
2012-10-10 17:09:20 fangohr-adium1: To run nmag interactively, it should be enough to just call 'nsim'.
2012-10-10 17:16:15 fangohr-adium1: Over and out from me for now.
2012-10-11 10:25:14 mb8g11: Hello
2012-10-11 10:25:24 cilix: Good morning!
2012-10-11 12:25:15 mb8g11: Who's up for lunch at one o'clock?
2012-10-11 12:25:55 fangohr-adium1: Nice initiative â I am teaching at 13:00 today (exceptionally), otherwise would have liked that.
2012-10-11 12:26:06 fangohr-adium1: (Could do tomorrow 12:00, by the way.)
2012-10-11 12:26:28 cilix: Sounds good to me!
2012-10-11 12:26:34 cilix: (Lunch, that is, not teaching :-P
2012-10-11 15:39:20 mb8g11: Fixed build, swig was missing from the new install.
2012-10-11 15:40:00 fangohr-adium1: Excellent; well done.
2012-10-11 15:40:17 mb8g11: :)
2012-10-11 15:42:20 mb8g11: Is the console window into summer running by any chance?
2012-10-11 15:43:19 fangohr-adium1: Windows is just waking up from sleeping. How can I help?
2012-10-12 09:19:19 fangohr-adium1: Good Morning.
2012-10-12 09:19:35 cilix: Good morning!
2012-10-12 09:20:00 fangohr-adium1: Hey, didn't really expect any replies yet ;).
2012-10-12 09:20:10 cilix: I guessed so. ;-)
2012-10-12 09:21:11 fangohr-adium1: Shall we chat about your hysteresis loop in the group meeting? I thought this may well be interesting to all.
2012-10-12 09:21:31 cilix: Sure, why not.
2012-10-12 09:22:08 cilix: Don't know if I have many interesting observations yet (other than that it takes long), but we can certainly discuss it.
2012-10-12 09:23:27 fangohr-adium1: It is typical that the first relaxation (for some applied field) takes a long time. Changing the field a little, and waiting for the magnetisation to relax in that new field, would typically take much less time. Once the reversal starts (and we have to move far in phase space â if that makes any sense), it might take a lot of time again. Could it be this pattern?
2012-10-12 09:23:56 cilix: Yes, that seems to be the case indeed.
2012-10-12 09:24:22 fangohr-adium1: You can speed up the initial step by choosing an initial magnetic configuration that is similar to the relaxed state at the first applied field.
2012-10-12 09:25:05 cilix: That's what I did, actually. So I was surprised to see that it still takes very long.
2012-10-12 09:25:25 fangohr-adium1: Okay, that is surprising then.
2012-10-12 09:25:56 cilix: Also, I'm not sure what this means for the 3rd year project linked to the hysteresis loops, as it might be quite a frustrating experience having to wait so long for just a single simulation to finish.
2012-10-12 09:26:19 cilix: (I personally don't mind too much as I can keep myself busy in other ways :-P)
2012-10-12 09:26:36 fangohr-adium1: Another likely problem is how we decide when the system is relaxed: if we are too picky here, it could take a very long time. (We can even be over accurate: if the required dm/dt is soo small that it requires the fields to be more accurate than, say, the demag calculation is, then it may never converge).
2012-10-12 09:26:55 cilix: True.
2012-10-12 09:27:28 cilix: I should start fiddling with the parameters. So far I have only played with toy systems and haven't really bothered with the tolerances, but these may be quite relevant here.
2012-10-12 09:27:42 cilix: I'll have to see how I can develop a feeling for what's reasonable in that respect.
2012-10-12 09:28:11 fangohr-adium1: Having simulations to run for a long time is not necessarily a problem for the UG project: many simulations take a long time. And one can always start from a smaller system initially to figure out the right parameters, way to run the script etc. We may have to think about provision of some computing plat form (osiris, your machine?, lyceum) so that the runs can be done there.
2012-10-12 09:28:53 fangohr-adium1: By the way: Weiwei knows a lot about parameters for demag, and also for time integration. And the Nmag manual also knows a little (there is a section of tolerances for the time integration).
2012-10-12 13:50:52 fangohr-adium1: Max, following on from the discussions over lunch: the tool I refer to is TimeMachine. (http://www.apple.com/support/timemachine/). On 10.8, there is an application in /Applications/TimeMachine. Or try the preferences.
2012-10-12 14:50:17 D_Chernyshenko: Hans, can you try to push the changes again? I've enabled group write access for the repository.
2012-10-12 14:50:32 fangohr-adium1: Done, worked. Thanks.
2012-10-12 14:50:38 D_Chernyshenko: Thanks!
2012-10-15 08:44:00 mb8g11: Hiya
2012-10-15 09:30:27 fangohr-adium1: Hey, good morning!
2012-10-15 09:31:28 fangohr-adium1: Hi all, I have a meeting at 13:00, but would go for lunch at 12:00 if anybody is interested (will be off to teach now and may not check here until just before 12:00).
2012-10-15 11:55:28 cilix: Hi Hans, thanks for the offer. I think I'll eat in the office today, though, as I brought some stuff from home.
2012-10-15 11:57:03 fangohr-adium1: Sure, thanks for letting me know. Might fetch some noodles then.
2012-10-17 11:17:15 mb8g11_: brb
2012-10-18 07:38:01 mb8g11: Hi all.
2012-10-18 11:58:12 fangohr-adium: Hi MA, early start today for you ;-) [just made it to the office after morning teaching]
2012-10-18 12:20:47 mb8g11: Indeed!
2012-10-18 12:20:54 fangohr-adium: :)
2012-10-18 12:21:02 fangohr-adium: Anybody in Southampton keen to have lunch?
2012-10-18 12:21:43 cilix: Yes, I wouldn't mind going for lunch actually.
2012-10-18 12:22:03 fangohr-adium: Nice. Shall I pick you up in 10 minutes?
2012-10-18 12:22:31 cilix: Sounds good. I'll ask Weiwei and Marijan if they would like to join, too.
2012-10-18 12:23:52 fangohr-adium: MA, are you in the German timezone, or did you get up extraordinarily early? Or both??
2012-10-18 12:25:51 mb8g11: Haha, considering the german timezone, it was early, but not extraordinarily so. I can start working right after breakfast, not like I have to go anywhere.
2012-10-18 12:26:50 fangohr-adium: ;-)
2012-10-18 12:26:54 fangohr-adium: Max, will be over in 3.
2012-10-18 12:27:24 mb8g11: (and I want to get distribution working before our meeting tomorrow)
2012-10-18 13:13:22 fangohr-adium: â¦ [back from lunch] â¦ that would be great; thanks.
2012-10-18 13:29:49 cilix: Hi Hans, thanks for the chat during lunch!  I just checked my script and indeed I used a wrong (= much too large) value for stopping_dmdt in my recent simulations with large damping.
2012-10-18 13:29:57 cilix: (Stupid copy & paste oversight.)
2012-10-18 13:30:13 fangohr-adium: That makes me quite happy.
2012-10-18 13:30:30 fangohr-adium: Not that you made a mistake, but that we have identified what caused the symptons ;-)
2012-10-18 13:31:05 fangohr-adium: on the downside, making that value smaller will increase the runtime of your simulations a little, but there is no way around it, and it should not make a big difference.
2012-10-18 13:31:55 cilix: I just ran another simulation with alpha=1.0 and with stopping_dmdt=1*ONE_DEGREE_PER_NS (the default), and the hysteresis loop looks very simular to the one I got previously with low damping (although not exactly the same, but this might be due to a too coarse discretisation of the field values).
2012-10-18 13:34:43 mb8g11: If you use high damping... did you disable the computation of the precession? That will save some time.
2012-10-18 13:35:02 cilix: The running time is indeed longer, but since it was quite short anyway for high damping and this particular system size it's not too bad (it's now around 15 minutes, but that's still with a rather coarse mesh).
2012-10-18 13:35:18 cilix: MA: No, I didn't. How do I do that in Finmag?
2012-10-18 13:38:51 mb8g11: with a Simulation instance called sim: sim.llg.do_precession = False
2012-10-18 13:39:50 cilix: Excellent, will try that (didn't even know this was possible). Thanks!
2012-10-18 13:40:16 fangohr-adium: â¦ which raises the question: have we documented this somewhere? Ideally in an example.
2012-10-18 13:42:25 cilix: A quick search in the Finmag manual shows that it's mentioned in the documentation LLG class, but only as an argument in the class constructor, and the meaning of the argument isn't explained (even though it's quite obvious what it does).
2012-10-18 13:42:27 mb8g11: Just checked. No. Will add a pivotal tracker story. Will have to document the constructor of LLG and write a small example that runs a simulation once with, and once without precession and plots the two curves.
2012-10-18 13:43:33 mb8g11: Might rework the constructor of LLG as well - it takes a FunctionSpace and a VectorFunctionSpace... might as well just take the mesh.
2012-10-18 13:44:47 fangohr-adium: Regarding example: great plan. Check out section 2.25 of N
2012-10-18 13:45:09 fangohr-adium: [pressed return to early. In fact, pressed return instead of backspace]
2012-10-18 13:45:23 fangohr-adium: Regarding example: Check out section 2.2.5 in the Nmag manual (http://nmag.soton.ac.uk/nmag/current/manual/html/example2/doc.html#relaxing-the-system)
2012-10-18 13:46:08 fangohr-adium: which uses the precession term, and then 2.2.6 which switches it of. Feel free to steel freely from here (if you need access to the source) whoever is implementing the ticket.
2012-10-18 13:46:40 mb8g11: Perfect, I will in fact steal freely - a nice todo item for my flight on monday morning.
2012-10-18 13:47:23 fangohr-adium: Regarding the constructor: we could support both: if a mesh is given, then create the spaces. If the spaces are given, then use those. The reason I like it if the constructor accepts function spaces is that this gives finer control over what we are doing. In particular if we do multiphysics simulations, we may only want magnetisation in certain parts of the mesh (but may have the right function space available at that point).
2012-10-18 13:47:59 mb8g11: True.
2012-10-18 15:55:09 mb8g11: Hans, can you give me access to the bitbucket repo with the distribution scripts in it?
2012-10-19 07:48:10 mb8g11: Hi all.
2012-10-19 09:41:18 fangohr-adium: Hi MA, early riser.
2012-10-19 09:43:48 mb8g11: :)
2012-10-19 09:49:48 D_Chernyshenko__:  Hi everyone, I'm at home waiting for a delivery and might not make it for the 11:00 am meeting. The university email server keeps timing out, so I'm not sure if my email to Hans has made it through...
2012-10-19 10:32:36 fangohr-adium: Hi Dmitri, thanks for letting us know.
2012-10-19 10:32:48 fangohr-adium: Max, are you out there?
2012-10-19 14:52:12 mb8g11: Hans, taking care of the e-mails for submissions
2012-10-19 17:00:32 fangohr-adium: Over and out for the weekend - have a good one, everybody.
2012-10-22 12:52:34 D_Chernyshenko_: Any plans for lunch?
2012-10-22 13:16:12 fangohr-adium: Hi, sorry, just been.
2012-10-22 13:16:44 D_Chernyshenko_: Ah, that's fine then
2012-10-22 15:40:38 cilix: Hi Hans, I was just wondering if there is a way in Finmag to probe the stray field of e.g. a magnetic particle in the surrounding space. AFAICS, this doesn't currently exist. However, nmag does provide such a method, right? Do you know what the best way of doing this is, and/or how it is implemented in nmag?
2012-10-22 15:59:17 fangohr-adium: Hm, good question. The best way may be to implement a fake magnetic material (with Ms=0, or Ms=eps if 0 causes divisions by zero) in the area where you want to probe. Note that the field outside the magnetic body can be fairly coarse (depending a little on the resolution you desire). There is in fact the 'air-box-method' of computing demag fields, where you enclose a magnetic object with 'air' (where the main property of the air is that it is non-
2012-10-22 15:59:33 fangohr-adium: Sorry â wanted to edit the text a little, but pressed return to early.
2012-10-22 16:00:12 fangohr-adium: The main point being that the airbox method is used to reduce the size of the BEM. For the problem you are looking at (i.e. determine demag field outside the magnetic parts), you could probe in the airbox.
2012-10-22 16:01:03 mb8g11: Does nmag implement the airbox method?
2012-10-22 16:01:14 fangohr-adium: No.
2012-10-22 16:01:22 fangohr-adium: We also have a ticket for this: https://www.pivotaltracker.com/story/show/27827923
2012-10-22 16:01:29 fangohr-adium: (which contains a little more detail)
2012-10-22 16:01:38 mb8g11: I know about the airbox method, was just wondering.
2012-10-22 16:02:57 cilix: Thanks for the link to the ticket, that's helpful.
2012-10-22 16:07:20 cilix: Do you know of any other good methods offhand, and what the advantages/disadvantages are compared to the airbox method? I guess for a crude visualisation the airbox method may be good enough, but if I'm a little worried that it might not suffice for more advanced visualisations because the discretisation errors are too big.
2012-10-22 16:07:59 fangohr-adium: You get higher accuracy by making the mesh in the airbox finer.
2012-10-22 16:09:24 fangohr-adium: The other method that is available in Nmag is working out the magnetic scalar potential numerically for an point your are interested in, and then gets the demag by numerically differentiating (I think). In any case, I am sure that this is fairly in accurate as it involves subtraction of large numbers of similar size. The airbox method will be more accurate.
2012-10-22 16:09:47 cilix: That's probably true.
2012-10-23 12:43:57 mb8g11: Lunch?
2012-10-23 12:44:10 mb8g11: nevermind
2012-10-23 12:44:19 fangohr-adium: ;-)
2012-10-23 12:44:34 fangohr-adium: MA, were we meant to get together at 13:00 today?
2012-10-23 12:44:46 fangohr-adium: If so, feel free to bring some lunch to eat. Or did I mix up dates?
2012-10-23 12:45:26 mb8g11: You didn't, that's what the "nevermind" is due to. Good idea, will bring something to eat with me.
2012-10-23 14:18:02 mb8g11: Hans, could you install python-gdb on osiris for me please? These are debugging symbols for python to use with the debugger.
2012-10-23 14:44:09 cilix: MA: http://pastebin.com/nV7diaiG
2012-10-23 14:44:27 mb8g11: thanks
2012-10-23 14:51:53 mb8g11: looks like some kind of boost/python compability issue
2012-10-23 14:52:32 mb8g11: Hi Dmitri
2012-10-23 14:52:50 D_Chernyshenko_: Hey
2012-10-23 14:53:06 D_Chernyshenko_: ls
2012-10-24 09:17:45 fangohr-adium: Good morning, all.
2012-10-24 09:17:55 cilix: Good morning!
2012-10-24 09:17:59 fangohr-adium: Hi MA, the python-dbg package is installed now.
2012-10-24 09:19:07 cilix: Speaking of packages, I wanted to try out the Ubuntu PPA for the FEniCS nightly development snapshots yesterday.
2012-10-24 09:19:33 cilix: Unfortunately, Finmag doesn't compile with that version because they removed the "ParallelData" data structure.
2012-10-24 09:19:53 cilix: So I had to downgrade again (which was a bit of a hassle, but has worked now).
2012-10-24 09:20:42 cilix: But I'd really like to try it out because it provides the new XDMF format to save fields.
2012-10-24 09:20:54 cilix: However, I don't want to break the build for everyone else either.
2012-10-24 09:21:35 cilix: So I was wondering whether there is a way I can have a setup to try both and make sure that both versions work with Finmag.
2012-10-24 09:22:21 cilix: Do you know if there is a computer somewhere that can run Finmag but that nobody uses for development or simulations, so that I could install the fenics development snapshots there?
2012-10-24 09:22:31 cilix: Or do I have to resort to a virtual machine on my own computer?
2012-10-24 09:24:24 fangohr-adium: Hi Max, I haven't got a spare machine online, although I do have an old PC in my drawers (1GB RAM, fairly slow). All in all, I think a virtual machine may be easier (and would be my choice). MA has recent disk images for Ubuntu 12.04 virtual machines (virtual box format) which you can start from if you prefer over installing your own. It is a fairly straight forward process.
2012-10-24 09:24:38 fangohr-adium: I like the idea of upgrading our code to be compatible with the most recent version of Fenics.
2012-10-24 09:25:10 fangohr-adium: We should also soon get new computers for Weiwei and Marijan, at which point at least one machine should be come available for such experimental work. If you prefer, we can wait for that.
2012-10-24 09:25:57 cilix: Ok, I guess I'll try VirtualBox then. Might be a good idea to keep my development experiments local to my machine anyway.
2012-10-24 09:28:25 fangohr-adium: Okay. I'll dissappear for teaching and all sort of meetings now. I see Max and MA later with Jeff and Suzanne, I believe (14:00).
2012-10-24 09:28:37 fangohr-adium: Dmitri, can we move our meeting from 15:30 to 16:00?
2012-10-24 09:28:58 cilix: Yep, see you then!
2012-10-24 11:10:28 mb8g11: try http://www.smuxi.org/main/
2012-10-24 14:51:59 mb8g11: just copying some docs to the virtual machine before I zip it up and uplaod it
2012-10-24 14:52:09 fangohr-adium: Cool. No rush.
2012-10-24 15:18:17 mb8g11: The good news: I've issued a license, copied it to the virtual machine and finmag works.
2012-10-24 15:18:27 mb8g11: The bad news: It works without a license as well.
2012-10-24 16:06:16 fangohr-adium: You need to inject the testing code into the source code before building the binary version. This will repcale the ##license place holder string in some files with the testing code that will check for presence of the license file.
2012-10-24 16:06:43 fangohr-adium: Dmitri, the visitors have gone; please drop by when it is convenient.
2012-10-24 16:10:58 mb8g11: It should. Will double check it actually does it.
2012-10-24 16:35:34 mb8g11: Using an energy term which derives from energy_base without a license indeed stops the program. Good call.
2012-10-24 16:35:42 fangohr-adium: Nice. :)
2012-10-24 16:43:24 fangohr-adium: In case we haven't done this yet, we should have things like Paraview, Mayavi, py.test, maybe xmgrace and gnuplot, latex, emacs, on the virtual machine. There are probably other things. Ideally, we just add these packages to a script that installs these 'convenience' tools so that we can re-run it if we create further virtual( (or real!) machines.
2012-10-24 16:56:25 mb8g11: Most of this is covered by our install script. The virtual machine also has sublime text.
2012-10-24 16:56:33 fangohr-adium: Nice touch.
2012-10-24 16:57:23 mb8g11: https://bitbucket.org/fangohr/finmag/src/be527fee23a6f77ba73da43ed45384cd8bb52c40/install/on_ubuntu_12.04.sh?at=default
2012-10-24 16:57:30 mb8g11: will added paraview and mayavi2
2012-10-24 16:58:51 mb8g11: Currently trying to find some common ground beetween our processors. The core2 build runs on Osiris, but not on my virtual machine. Who knows what Jeff's and Luzanne's machine look like.
2012-10-24 16:59:28 fangohr-adium: Hm. Maybe tone down the extended features for the virtual machine then; i.e. accept portability over speed.
2012-10-24 16:59:35 mb8g11: Which is weird, because core2 should be a subset of corei7.
2012-10-24 17:00:37 mb8g11: 1. let gather_info.py also save the CPU info and custom build our binary.
2012-10-24 17:01:01 mb8g11: 2. If we don't lose too much performance, have a version of finmag which is portable enough.
2012-10-24 17:01:31 mb8g11: It's 2 for the virtual machine I'm building, but 1 might be better for future users.
2012-10-24 17:02:10 fangohr-adium: Excellent plan; I like that (1.).
2012-10-24 17:03:34 mb8g11: Swell.
2012-10-24 17:11:07 fangohr-adium: Over and out from me for today. Thanks for help from various people with the binary distribution and the students today.
2012-10-24 17:11:34 mb8g11: :) Bye bye
2012-10-25 11:02:30 max_albert: Hi Hans, we'll be right there. Just testing one thing with the VM.
2012-10-25 11:02:42 fangohr-adium: Cool, no worries. Coffee is brewing.
2012-10-25 11:02:49 fangohr-adium: Only arrived myself just now :)
2012-10-25 14:23:39 mb8g11: Eureka! It works!
2012-10-25 14:40:04 mb8g11: 2 good news: 1) The finmag binary on the virtual machine works on different machines now. 2) Dolfin trunk fixed the mesh regions getting lost a few days ago (according to Anders, he just ignored it in his master thesis because he had already written about the problem).
2012-10-25 15:11:56 fangohr-adium: Aha! Excellent news allround. Thanks for the update.
2012-10-25 17:14:27 fangohr-adium: Over and out from here.
2012-10-29 20:03:22 D_Chernyshenko: Hi Max, I'm writing a reply to your email - there are several options, can you explain the problem you're trying to solve, is it the compiler error?
2012-10-29 20:03:48 max_albert: Hi Dmitri, thanks for getting back to me so quickly. :)
2012-10-29 20:03:58 D_Chernyshenko: Basically
2012-10-29 20:04:42 D_Chernyshenko: 1) Class members (base or own) are not automatically exposed by Boost::Python which is why the OrientedBoundaryMesh does not have the attributes of dolfin's BoundaryMesh
2012-10-29 20:05:20 max_albert: Well, the compiler error was basically just a symptom that triggered me to look into the code, and I realised that it could be "solved" by removing the portion of the code which calls the ParallelData class (which can be done by integrating OrientedBoundaryMesh more tightly with BoundaryMesh).
2012-10-29 20:05:29 D_Chernyshenko: 2) Making compute_bem accept dolfin BoundaryMesh makes no sense since BoundaryMesh has the ordering bug that prevents compute_bem from working (which is why I made OrientedBondaryMesh)
2012-10-29 20:05:43 max_albert: Ah, ok. 1) is what I suspected.
2012-10-29 20:06:01 D_Chernyshenko: It's certainly possible to use BoundaryMesh in C++ code but compute_bem wouldn't work, unless it's an OrientedBoundaryMesh
2012-10-29 20:06:22 max_albert: Well, that's the thing. Regarding 2), yYou are right that it doesn't work with the current version of FEniCS, but I tried to look into using the nightly development snapshots where this issue is fixed.
2012-10-29 20:06:29 D_Chernyshenko: Aha
2012-10-29 20:06:50 D_Chernyshenko: Yeah, I see
2012-10-29 20:07:18 D_Chernyshenko: I think, a good option would be to make a second method that accepts a dolfin BoundaryMesh and checks that the mesh is ordered
2012-10-29 20:07:35 D_Chernyshenko: That way we'll have an exception if someone tries to call that with the wrong version of Fenics
2012-10-29 20:08:34 max_albert: Yes, that would be good indeed. Although I don't know if they provide a way of checking whether a given mesh is actually ordered (they might just provide a way to construct an ordered mesh).
2012-10-29 20:08:58 D_Chernyshenko: Yeah, I'm trying to look it up
2012-10-29 20:09:54 max_albert: But I was going to add a test to Finmag which checks whether the OrientedBoundaryMesh class does what it's expected to do (it's basically your example code in the bug report https://bugs.launchpad.net/dolfin/+bug/992808)
2012-10-29 20:09:57 D_Chernyshenko: In any case, if you want to make a version of compute_bem that accepts a Dolfin mesh, you need to do the following
2012-10-29 20:10:26 max_albert: So at least then we would catch any inconsistencies in the Finmag test suite (if not in the runtime code itself).
2012-10-29 20:10:31 D_Chernyshenko: Yeah
2012-10-29 20:10:39 D_Chernyshenko: The arguments needs to be of type boost::shared_ptr<dolfin::Mesh>
2012-10-29 20:10:51 D_Chernyshenko: or dolfin::BoundaryMesh
2012-10-29 20:11:53 D_Chernyshenko: Also there needs to be a Boost::python converter from the SWIG Mesh/Boundary mesh type to the corresponding shared pointer type
2012-10-29 20:12:34 D_Chernyshenko: The converters are defined in src/util/swig_dolfin.cc; looks like there alread is a converter for BoundaryMesh
2012-10-29 20:12:37 D_Chernyshenko: and Mesh as well
2012-10-29 20:13:30 max_albert: Oh, I see... I guess that's the point that I was missing. I had forgotten that they use SWIG.
2012-10-29 20:13:37 D_Chernyshenko: Looks like your issue was that you were trying to extract a BoundaryMesh directly
2012-10-29 20:13:43 D_Chernyshenko: Instead of extracting a shared_ptr
2012-10-29 20:13:52 D_Chernyshenko: Or rather
2012-10-29 20:14:04 D_Chernyshenko: Just straight define the argument as shared_ptr<BoundaryMesh>
2012-10-29 20:14:18 D_Chernyshenko: It's the same as using extract, but more explicit
2012-10-29 20:14:30 max_albert: Ok.
2012-10-29 20:15:07 D_Chernyshenko: Dolfin uses shared_ptr for most of its internal objects to avoid reallocating memory all the time
2012-10-29 20:15:11 max_albert: But how do I write a SWIG converter for the OrientedBoundaryMesh?
2012-10-29 20:15:33 D_Chernyshenko: OrientedBoundaryMesh is not a SWIG object, it's a Boost::Python object
2012-10-29 20:15:38 D_Chernyshenko: No need for a converter
2012-10-29 20:16:23 D_Chernyshenko: Boost::Python converters are used when you want to convert some Python datatype to an existing C++ type; usually one that you didn't define
2012-10-29 20:17:04 D_Chernyshenko: Does this make sense?
2012-10-29 20:17:07 max_albert: Hmmm....
2012-10-29 20:17:12 max_albert: Kind of :)
2012-10-29 20:17:20 max_albert: I think I need to get my head around all the levels that exist here.
2012-10-29 20:17:42 D_Chernyshenko: Yeah, I think it's best if I explain in person
2012-10-29 20:18:12 max_albert: So the approach you described would work if the OrientedBoundaryMesh class is defined at the C++ level as it is now, right?
2012-10-29 20:18:19 D_Chernyshenko: Yeah
2012-10-29 20:18:24 max_albert: I'll play around with it again.
2012-10-29 20:18:29 D_Chernyshenko: Once the bug is fixed, there would be no need for this class
2012-10-29 20:18:39 max_albert: That's true.
2012-10-29 20:18:42 D_Chernyshenko: Essentially, this is a temporary patch until we can rely on the dolfin BoundaryMesh working
2012-10-29 20:19:04 max_albert: Although I like the fact that it explicitly mentions that the mesh is oriented.
2012-10-29 20:19:12 D_Chernyshenko: When the BEM is created, we would create the dolfin BoundaryMesh with the ordered parameter set
2012-10-29 20:19:32 max_albert: Constructing an oriented boundary mesh by saying "obm = BoundaryMesh(mesh, False)" is a bit obscure imho.
2012-10-29 20:19:58 D_Chernyshenko: Well, to be honest a BoundaryMesh should always be ordered by definition; that's what distinguishes it from a Mesh
2012-10-29 20:20:02 D_Chernyshenko: That's what I assumed :_)
2012-10-29 20:20:14 max_albert: Yes :)
2012-10-29 20:20:21 D_Chernyshenko: A BoundaryMesh is a Mesh with a defined facet ordering
2012-10-29 20:22:08 max_albert: Cool, thanks for the explanations. I'll play around with it a bit more and will get back to you if I still can't solve it.
2012-10-29 20:22:14 max_albert: Many thanks for taking the time!
2012-10-29 20:22:16 D_Chernyshenko: Sure
2012-10-29 20:22:34 max_albert: And now enjoy the evening without work, please. ;-)
2012-10-29 20:22:46 max_albert: Otherwise I'll feel bad.
2012-10-29 20:28:44 D_Chernyshenko: It's fine!
2012-10-29 20:45:39 max_albert: Cool, I'll have to double check but I think your hint about using boost::shared_ptr did the trick.
2012-10-29 20:45:42 max_albert: Thanks a million!
2012-11-05 09:12:49 fangohr-adium: Good morning, all.
2012-11-05 10:23:28 max_albert: Good morning, Hans! Welcome back! :-)
2012-11-05 11:03:08 fangohr-adium: Hi Max, thanks. Anybody up for food today?
2012-11-05 11:03:54 max_albert: I think I would be up for it. Depends a bit on the time, when were you thinking? I don't know about Marijan and Weiwei but I can ask them.
2012-11-05 11:04:35 fangohr-adium: I am easy â have a meeting with Jon and Seth now which probably finishes at 12:00. I could go anytime after that â any preference?
2012-11-05 11:05:44 max_albert: I'm not feeling too hungry at the moment, but guess around 1pm or 12.30pm would be ok. Also depends on when you're getting hungry of course. :) Do you want to check again when the meeting is over?
2012-11-05 11:11:09 fangohr-adium: Sounds good to me; let's chat later.
2012-11-05 12:26:03 fangohr-adium: Hi Max, what's the calorie situation like? I am ready to go, but easy (have biscuits...)
2012-11-05 12:27:14 max_albert: Yep, I wouldn't mind going now. I'll ask around if other people are up for it.
2012-11-05 12:27:30 max_albert: MA said in 5 minutes?
2012-11-05 12:27:43 fangohr-adium: Okay, sounds great. Will you pick me up from my office?
2012-11-05 12:29:48 max_albert: Yes, will do.
2012-11-05 13:56:51 max_albert: Hi Hans, would it be possible to get access to the finmag-dist repository? I had a problem with the VM for Luzanne last week, and it would be nice to be able to fix these things without having to bother Marc-Antonio about it. :)
2012-11-05 13:57:41 fangohr-adium: Sure.
2012-11-05 13:58:19 max_albert: Also, MA: if I'd like to update the Finmag version in a virtual machine (e.g. to fix a bug or something), do I understand correctly that the correct way to do this is to simply roll out a new tarball which can be extracted within the VM (and overwrites the old directory)?
2012-11-05 13:59:03 max_albert: Might be nice to be able to script this too somehow, so that the user only needs to say "upgrade-finmag" or something.
2012-11-05 13:59:12 max_albert: This should of course be coupled to the license somehow.
2012-11-05 13:59:34 max_albert: Just brainstorming here, btw, I'm not asking for this to be implemented any time soon. :)
2012-11-05 13:59:37 fangohr-adium: Max, you should have access now.
2012-11-05 13:59:43 max_albert: Cool, thanks!
2012-11-05 14:01:05 fangohr-adium: I suggest we automise building of the tar-ball, and place it somewhere where we can get to it (a directory on summer, say) with little effort (but not completely freely available on the web). Updating should indeed be untarring of that file.
2012-11-05 14:02:01 fangohr-adium: For now, I don't think we distinguish licenses for different version (we only have one version for starters) but in principle we could add this to the license file. Ignoring this complication, it should be the case that the license file can remain, and the upgraded code should work with the old license file (as long as the license file is still valid).
2012-11-05 14:03:36 mb8g11: If we store the license outside of the finmag binary directory, then installing would be as easy as untarring the tarball.
2012-11-05 14:04:06 mb8g11: Let's say ~/Documents/finmag_license or something similar and I can implement it tomorrow in a few minutes.
2012-11-05 14:05:40 mb8g11: See you later, demonstrating,
2012-11-05 14:46:51 fangohr-adium: Sounds good.
2012-11-05 14:47:33 fangohr-adium: Max and MA, the 'units' program that I mentioned over lunch, is very briefly described at http://www.southampton.ac.uk/~fangohr/computing/units.html
2012-11-07 09:10:15 max_albert: Good morning, Hans!
2012-11-07 09:19:22 fangohr-adium: Good morning, Max ;)
2012-11-07 09:20:15 max_albert: Do you mind if I drop by for a minute? Just a quick question again regarding an account for Luzanne on one of the two computers.
2012-11-07 09:20:23 fangohr-adium: That's fine.
2012-11-07 09:20:35 max_albert: Great, thanks. Will be there in two minutes. :)
2012-11-07 09:37:10 fangohr-adium: Anybody up for lunch today? (Will be back around 12:00)
2012-11-07 09:37:36 max_albert: You mean, anybody amongst me and DokosBot? :-P
2012-11-07 09:37:43 fangohr-adium: Errr, yes. ;-)
2012-11-07 09:37:52 max_albert: But yes, I guess I should be... ;-)
2012-11-07 09:38:19 fangohr-adium: Let's wait for DokosBot's answer...
2012-11-07 12:05:39 mb8g11: portable configuration of the compilation of the finmag binary: in line 59 in finmag/native/Makefile change "-march=native" to "-march=x86_64 -mtune=generic"
2012-11-07 12:06:14 max_albert: Cool, thanks! Should I commit that to the repository?
2012-11-07 12:07:43 max_albert: Or shall we have it as a comment in the Makefile (so that it can be used by anyone who wants to build the binary distribution) but leave it as it is?
2012-11-07 12:10:03 fangohr-adium: Hm, good question. I'd probably go with 'generic'. The only performance relevant part of our code is the BEM calculation; everything else comes from libraries anyway.
2012-11-07 12:10:05 mb8g11: the finmag-dist checks out a new copy of the repository, so including it as a comment doesn't help. Comitting it would hurt performance on most of our machines. Hmm... can we make that an option in the Makefile, depending on how we call it?
2012-11-07 12:10:25 fangohr-adium: MA, does it really hurt performance?
2012-11-07 12:11:29 mb8g11: That's not an easy question to answer without numbers. My guess is it does matter for the BEM and the LLG code.
2012-11-07 12:11:53 max_albert: MA: sure, CFLAGS_OPT is a Makefile variable anyway. If we set it via 'CFLAGS_OPT ?= ...' instead of 'CFLAGS_OPT = ...' then we can simply override it from the script that builds the binary distribution.
2012-11-07 12:12:14 mb8g11: Brilliant.
2012-11-07 12:13:42 fangohr-adium: Hm, okay, I see why computing the Jacobian and the LLG may suffer a little. Having a flag seems the right way forward, and then we can have to different scripts for generic and native.
2012-11-07 12:17:30 mb8g11: IIRC benchmarks are on our plates for the medium term ;)
2012-11-07 12:39:09 fangohr-adium: Hi all, how do we feel about lunch? I need to bring a microphone back that I have nicked from the lecture theatre this morning, but could meet you at the staff club at 13:00, say?
2012-11-07 12:39:58 max_albert: Sounds good to me, count me in. I presume that at least MA would also be going (but he is outside at the moment because he received a phone call, so I can't ask him).
2012-11-07 12:47:52 fangohr-adium: Okay, I'll be off now and see you at 13:00 in the staff club. Do ask around whether anybody else wants to join. I haven't heard back from DokosBot.
2012-11-07 12:48:04 mb8g11: He's not very talkative, might have to patch that.
2012-11-08 09:12:44 max_albert: Good morning Hans!
2012-11-08 09:12:48 max_albert:  I need a quick opinion: is there any harm in including the Finmag version (= hg revision number and hash) in the filename of the tarball that is generated for the binary distribution?
2012-11-08 09:12:59 fangohr-adium: Good morning â are you up again???
2012-11-08 09:13:12 max_albert: Yes... :-S
2012-11-08 09:13:31 fangohr-adium: Impressive ;)
2012-11-08 09:14:00 fangohr-adium: Including the tag is fine with me. WHat is the difference between revision number and hash?
2012-11-08 09:14:15 fangohr-adium: (Do you mean the integer as the revision number?)
2012-11-08 09:16:43 max_albert: Yes, I mean the integer. I think the difference is that the hash is unique, whereas the integer is just a convenience thing to make it easier for humans to identify revisions, but they are not guaranteed to be the same across different checkouts of the repository and there might be clashes.
2012-11-08 09:17:33 max_albert: Ok, I'll go ahead and include the version in the tarball filename then. Much less confusing that way in case one has several tarballs lying around. :)
2012-11-08 09:18:37 fangohr-adium: You are right that  the integer is convenient, but can change if you merge with another copy of the repository. So it might be best to actually inclrude the hash at the end of the tar ball name? We can include the integer as well, which will mostly work and be very convenient, but shouldn't rely on it.
2012-11-08 09:18:57 max_albert: Exactly. :)
2012-11-08 09:19:54 fangohr-adium: Another option would be to include the date in the tar ball. We could do this whenever we bulid a binary distriution from 'trunk'. So maybe have finmag-id-hash-dateIfFromTrunk.tar.gz ?
2012-11-08 09:19:58 fangohr-adium: Just a suggestion.
2012-11-08 09:20:23 max_albert: That's a good idea, too.
2012-11-08 09:20:48 fangohr-adium: Users prefer to talk about dates than hashs and integers, and this will save us one indirection of looking up the date from the id.
2012-11-08 09:21:57 max_albert: Although since last night ;-) it is possible to check out a specific version of the source and roll that out in a tarball. Thus a tarball built at a later date can actually reflect an earlier version of the source. But it can't really lead to confusion if we're including the hash, too (which is the only truly reliable identifier).
2012-11-08 09:22:18 fangohr-adium: Yes, I noticed ;)
2012-11-08 09:22:33 fangohr-adium: How about not including the date in the tarball name if we build for a later version?
2012-11-08 09:22:51 max_albert: later?
2012-11-08 09:22:53 fangohr-adium: Or use the date from the commit for that we create the distribution.
2012-11-08 09:22:56 fangohr-adium: [later->earlier]
2012-11-08 09:24:11 max_albert: Yes, we could do that (use the date of the commit). It would keep things consistent I guess. Do you think the date of the commit or the date of the actual build of the tarball is of more interest?
2012-11-08 09:25:04 fangohr-adium: Date of commit, I would think. If for some reason the date of the build matters, this would be the modification time of the tar ball. But if the aim is to re-create the software as it was at an earlier point in time, we might as well use that time in the name.
2012-11-08 09:25:10 fangohr-adium: I think that is best.
2012-11-08 09:29:37 max_albert: Great. I'll look into it.
2012-11-08 12:58:59 fangohr-adium: Test, one, two.
2012-11-08 12:59:06 fangohr-adium: (Okay, seems to work.)
2012-11-08 12:59:09 max_albert: Three, four.
2012-11-08 12:59:18 fangohr-adium: Thanks ;-)
2012-11-08 13:01:04 max_albert: Anybody up for lunch? I guess I won't hope for an answer from DokosBot...
2012-11-08 13:01:24 max_albert: And since MA isn't here I don't know if anyone else from the office is going.
2012-11-08 13:01:37 fangohr-adium: Not for me today, thank you.
2012-11-08 13:01:45 max_albert: Ok.
2012-11-09 09:24:29 fangohr-adium: Good Morning Max, DokosBot.
2012-11-09 12:16:58 max_albert: Hi Hans, shall we come over to your office? Just checking in case you are waiting for us.
2012-11-09 12:17:20 fangohr-adium: Hi Max, yeah - come over when you are ready.
2012-11-09 12:19:15 max_albert: Coming... :)
2012-11-09 16:01:20 D_Chernyshenko: Hi Max, if you're at work, could you check if my machine is running? I cannot connect to it...
2012-11-09 16:07:48 max_albert: Hi Dmitri! Nope, it's not running, but I just switched it on. The display now shows a locked screen, so I suspect the computer had just gone to sleep. Can you try again to see if it works?
2012-11-09 16:08:04 D_Chernyshenko: It's up, thanks!
2012-11-09 16:08:06 D_Chernyshenko: ssh cmg
2012-11-09 16:08:09 D_Chernyshenko: oops!
2012-11-09 16:08:24 max_albert: :)
2012-11-09 16:35:28 max_albert: Hi Hans, when a commit happens and Jenkins has run the test suite, is there a directory which contains the complete build afterwards (assuming it was successful)?
2012-11-09 16:35:36 max_albert: I'm asking because for the IPython notebook server it would be nice to have access to the latest build automatically.
2012-11-09 16:38:52 D_Chernyshenko: Hi Max, I can answer that. The builds are stored in var/lib/jenkins/jobs/finmag; there are a few symlinks there as well as the actual builds
2012-11-09 16:39:29 D_Chernyshenko: The last successful build is at /var/lib/jenkins/jobs/finmag/lastSuccessful
2012-11-09 16:39:58 D_Chernyshenko: However, depending on what data you need, you might add an artifact to the job config in Jenkins to collect the files
2012-11-09 16:40:57 D_Chernyshenko: I believe Jenkins only stores the files that are explicitly requested in the config for the job, the rest are discarded (kept in the workspace directory). Let me know if you need help with this
2012-11-09 16:42:14 max_albert: Thanks for the info, Dmitri! However, I was looking for a "ready-to-use" Finmag checkout containing the latest version.
2012-11-09 16:42:52 max_albert: So that when I say "import finmag" (with PYTHONPATH pointing to that directory) it would import the latest Finmag version that was just built.
2012-11-09 16:43:04 D_Chernyshenko: Aha, we don't have one yet I believe; actually it would be nontrivial to create this
2012-11-09 16:43:33 max_albert: Ah, ok.
2012-11-09 16:43:50 max_albert: Pity... Why do you think it would be non-trivial?
2012-11-09 16:44:03 D_Chernyshenko: We would have to modify the build file to copy the necessary files to a build directory, for example to build/output or build/dist, and then add that directory (or a .tar.gz file that we create) to the artifacts in Jenkins
2012-11-09 16:44:52 D_Chernyshenko: Well it's fairly straightforward. What I meant is I think we have to add some extra steps to the Makefile, I don't think we can get this just via editing the config in Jenkins
2012-11-09 16:45:26 max_albert: Ok, I understand. Thanks for the info!
2012-11-09 16:45:40 max_albert: Btw, what are "artifacts" in the Jenkins terminology?
2012-11-09 16:47:20 D_Chernyshenko: An artifact is something that is collected/published by Jenkins when a job is successful
2012-11-09 16:47:45 D_Chernyshenko: For example, a .tar.gz with the python files, the HTML documentation files, test results and so on
2012-11-09 16:48:17 D_Chernyshenko: I.e. something that's created by the build process that we want to keep and use
2012-11-09 16:49:14 max_albert: Oh, excellent. Since we now have a well-functioning script to create the binary tarball, do you think it would be easy to tell Jenkins that it should run that script and extract the resulting tarball somewhere after each successful build??
2012-11-09 16:50:25 max_albert: That way we would be able to "test" the creation of the binary distribution, too. (Well, not really, because we're not catching if anything goes wrong, but anyway...)
2012-11-09 16:52:33 max_albert: Hmm, I just saw that in the Jenkins configuration panel there is a text box called "Execute shell" (under the "Build" section). Could I just put the name of a shell script there which does that job for me?
2012-11-09 16:52:48 D_Chernyshenko: Yeah; I guess the proper place to do this would be in the top level Makefile
2012-11-09 16:53:01 D_Chernyshenko: Jenkins invokes the "ci" target there
2012-11-09 16:53:04 max_albert: Ah, good point.
2012-11-09 16:53:23 D_Chernyshenko: Currently, we do not store Jenkins job config in Mercurial so my idea was to put as little as possible in Jenkins
2012-11-09 16:53:43 max_albert: Good idea. The toplevel Makefile looks like the best place.
2012-11-09 16:54:10 max_albert: Cheers! I guess that shouldn't be too hard. :) I'll give it a shot later.
2012-11-09 16:54:23 D_Chernyshenko: And as much config as possible, into the Makefile. Just in case we have to re-create the Jenkins config which is quite an ugly .xml file that we edit via the GUI
2012-11-09 16:54:53 max_albert: Btw, do you know which user executes the build when Jenkins is run? Is it 'root'?
2012-11-09 16:54:58 D_Chernyshenko: I should be around on Monday so I can help with that if needed.
2012-11-09 16:55:08 D_Chernyshenko: The user is 'jenkins' with the home directory /var/lib/jenkins
2012-11-09 16:55:33 max_albert: Great, thanks!
2012-11-09 17:03:49 max_albert: Wow, Dmitri, you have been cloned! :)
2012-11-09 17:04:18 D_Chernyshenko__: Yes indeed. Every time I disconnect or reconnect the VPN, I have to do this :)
2012-11-09 17:05:00 max_albert: But it keeps the old connections active somehow? I can see 3 versions of you here. :)
2012-11-09 17:05:58 D_Chernyshenko__: Yeah, if I don't disconnect my XChat manually before changing the VPN, the server does not realise that I've disconnected until some sort of timeout happens
2012-11-09 17:06:13 max_albert: Oh, I see. That makes sense...
2012-11-12 10:59:21 fangohr-adium: Good morning all.
2012-11-12 10:59:48 fangohr-adium: Dmitri, I have forgotten what time I suggested for our meeting today. Was it 15:00 or 14:30? Or something else?
2012-11-12 11:00:15 max_albert: Good morning!
2012-11-12 11:07:27 D_Chernyshenko: It was 15:00 I think.
2012-11-12 11:07:31 D_Chernyshenko: Morning Max!
2012-11-12 11:07:46 fangohr-adium: Hi Dmitri, good â let's go with 15:00. Thanks.
2012-11-13 11:14:31 fangohr-adium: Morning folks.
2012-11-13 11:27:24 max_albert: Good morning, Hans.
2012-11-13 15:57:30 max_albert: Hi Dmitri, do you know if it is safe to restart jenkins by invoking "/etc/init.d/jenkins restart"?
2012-11-13 15:59:14 max_albert: I changed the value of the environment variable NETGENDIR in /etc/profile.d/netgen.sh (because I installed an updated version which doesn't constantly crash), but the Jenkins build keeps breaking and I suppose this is because it hasn't got the updated value yet.
2012-11-13 16:06:37 D_Chernyshenko: Yeah, that should be safe...
2012-11-13 16:07:10 max_albert: Great, thanks! I have a build running at the moment but will try it out when that's done.
2012-11-14 08:40:30 mb8g11: Hey
2012-11-14 08:40:58 D_Chernyshenko: Morning
2012-11-14 09:02:54 mb8g11: Hi Hans
2012-11-14 09:44:43 fangohr-adium: Morning all. Off to teach now; hope to see you for our meeting at 13:00.
2012-11-14 13:07:20 mb8g11: You are offline now?
2012-11-14 14:16:08 max_albert: Hi Marc-Antonio!
2012-11-14 14:16:15 max_albert:  Quick question: is there a particular reason why we are using the "marvinhg" account as the default in the dist-wrapper.py script?
2012-11-14 14:16:26 max_albert: Currently it is set to "https://marvinhg@bitbucket.org/fangohr/finmag"
2012-11-14 14:16:41 max_albert: Do you mind if I change it to "ssh://hg@bitbucket.org/fangohr/finmag" instead?
2012-11-14 14:17:02 max_albert: This way I could avoid typing the password for marvinhg every time I want to build a tarball.
2012-11-14 14:17:26 max_albert: But I don't mind too much, so I'm happy to keep it the way it is if you'd prefer that.
2012-11-14 14:31:50 fangohr-adium: That's a good point. I think Max' proposal would work for everybody who has an ssh key registered with bitbucket. I agree that for routine production this may be more convenient.
2012-11-14 14:32:30 mb8g11: Absolutely.
2012-11-14 14:32:35 max_albert: @Hans: yes, that was the idea
2012-11-14 14:32:46 max_albert: Ok, great, I'll change it.
2012-11-14 14:32:56 mb8g11: It was set to Neil's account, changed it to something we could share without thinking about better options.
2012-11-14 15:21:46 fangohr-adium: Sure. And of course the benefit of the https connection is that one can enter a password if no ssh keys have been exchanged. However, I would say that we can go with the ssh:// solution as the default. The people using this code are computer-literate enough to look into the script and to see what to change if they need a https login for whatever reason.
2012-11-14 15:22:15 fangohr-adium: I have the ipython notebook conversion going great on osiris now. Am keen to write an example ;-) but will need to do some teaching staff first.
2012-11-14 15:22:39 max_albert: Great! Glad to hear it works. :)
2012-11-15 09:24:08 fangohr-adium: Good morning all.
2012-11-15 10:32:47 fangohr-adium: Max, are you there? Given a dolfin mesh object, are you aware of a matplotlib function we can use to plot this? Or given a dolfin function, have we got a matplotlib function to plot that (both vector and scalar would be useful)? I guess the answer is no. [This would be handy  for the ipython notebook documentation.]
2012-11-15 10:33:36 fangohr-adium: We could write some finmag functions that do the job for us â if necessary we could slice the 3d meshes and only show a 2d cut with matplotlib; that should work in any case.
2012-11-15 12:44:32 max_albert: Hi Hans! Sorry, I was working at home this morning and our internet wasn't working.
2012-11-15 12:45:01 max_albert: I don't know if matplotlib can do this (but will have a look). I'd rather think it can't at the moment.
2012-11-15 12:46:04 max_albert: However, mayavi may have some functions of for this. It looks like the "mayavi.mlab.triangular_mesh" function can do this.
2012-11-15 12:46:10 max_albert: See http://docs.enthought.com/mayavi/mayavi/auto/mlab_helper_functions.html#enthought.mayavi.mlab.triangular_mesh
2012-11-15 12:48:20 max_albert: Also, the "dolfin.plot()" function can of course do this, but it looks like it doesn't inline plots in the ipython notebook and rather opens a new plotting window.
2012-11-15 13:56:17 fangohr-adium: Hi Max, thank you.
2012-11-15 13:56:44 max_albert: No problem.
2012-11-15 13:57:09 max_albert: Haven't had time to look up matplotlib functionality yet, but in any case I presume you are right that it would be nice to have our own tweaked convenience functions in Finmag.
2012-11-15 13:57:23 max_albert: I'll add a reminder to PivotalTracker.
2012-11-15 14:00:18 fangohr-adium: Great, thank you.
2012-11-15 14:00:32 fangohr-adium: Did you say the '%paste' magic is the rigth way to paste stuff?
2012-11-15 14:00:40 max_albert: Yes.
2012-11-15 14:01:57 fangohr-adium: I am getting the odd error "Line magic function `%paste` not found". However, using Ctrl+v seems to work, so that's fine. Was just wandering whether I remembered wrongly.
2012-11-15 14:03:00 max_albert: Well, it might work in some cases. But often ipython gets confused when using Ctrl+v if there are different levels of indentation.
2012-11-15 14:03:25 max_albert: In this case %paste is the recommended way of pasting blocks of code.
2012-11-15 14:03:41 max_albert: I seem to remember that you also said there was a menu item somewhere with the same functionality?
2012-11-15 14:03:52 fangohr-adium: I remember you saying this ;-). I'll see how it goes â the %paste things certainly does not work. Maybe I need to change something with my default settings? Anyway, I am sure we will find out over time what is happening.
2012-11-15 14:04:01 fangohr-adium: regarding the menu item: that has disappeared in 0.13 ;-)
2012-11-15 14:10:45 max_albert: Oh, one question: are you using %paste magic command in the qtconsole or in a "pure" ipython prompt?
2012-11-15 14:11:02 fangohr-adium: In the notebook â is that the issue?
2012-11-15 14:12:19 max_albert: Hmm, it might be. But in the notebook pasting stuff using Ctrl-v should never be a problem. It's only an issue when pasting directly into the ipython prompt in a terminal.
2012-11-15 14:12:51 fangohr-adium: Oh, I see. I have also tried this in the qtconsole (in lectures), and there seemed not to be the %paste command.
2012-11-15 14:13:20 fangohr-adium: Regarding plots: the mayavi works, but doesn't give output that we could readily use in notebooks. I am still looking into matplotlib at the moment.
2012-11-15 14:14:03 max_albert: That's possible. I just found an email thread where they say that Tkinter needs to be installed for the paste to work and that the error message isn't very informative. (This is in Linux, but I guess things under windows are even more tricky.)
2012-11-15 14:16:20 fangohr-adium: Okay, thanks.
2012-11-15 14:16:50 fangohr-adium: Matplot lib has a promising function called Axes3D.plot_trisurf in version 1.2. I think I just need to upgrade my matplotlib ;-)
2012-11-15 14:17:55 max_albert: Oh yes, that looks nice. :)
2012-11-15 14:18:35 max_albert: Nice coincidence that matplotlib 1.2.0 was released just a few days ago. ;-)
2012-11-15 14:19:02 max_albert: Perhaps plot_wireframe() is also useful.
2012-11-15 14:19:58 max_albert: Although actually it looks like it doesn't readily plot triangulated surfaces.
2012-11-15 14:28:42 max_albert: But yes, plot_trisurf looks like it is the right tool for the job.
2012-11-15 16:49:52 max_albert: Hi Hans! Just out of curiousity, have you had any luck with the mesh plotting?
2012-11-15 16:58:51 fangohr-adium: No, was in a meeting the last two hours ;-). We can discuss this a little nevertheless: The plot_trisurf is nice to show the shape of some geometries. We should be able to take a mesh, extract the boundary mesh, and pass this to plot_trisurf â this should be a few lines.
2012-11-15 16:59:12 fangohr-adium: What will not be so easy is to display the data on the mesh as the function expects the data values for the triangles if I understand this correctly.
2012-11-15 16:59:41 fangohr-adium: Could all be done; but maybe having a quick way of showing a mesh (by looking at the surface) is quite nice already.
2012-11-15 17:00:22 max_albert: Regarding your first comment, I was also thinking that it should be quite quick. I had a very brief look but I'm having trouble finding out how to extract the boundary mesh. Do you know how to do this?
2012-11-15 17:00:46 max_albert: I don't understand your other comments, to be honest. :-P What do you mean by "data on the mesh"?
2012-11-15 17:01:34 fangohr-adium: Not exactly â¦ ;-) I think there is a (dolfin) BoundaryMesh class or function that can be given a mesh and returns the Boundary mesh.
2012-11-15 17:03:36 fangohr-adium: Regarding the data: I was thinking of visualising a scalar field, such as anisotropy energy. We would normally evaluate and store that on the nodes. If we had that data available for each surafec triangle, we could pass it to the plotting function so that the colour of the triangles reflects the value of that scalar field. Does that make it clearer? (It was very brief before, I have to agreeâ¦.)
2012-11-15 17:04:06 max_albert: Ah, yes, that makes more sense. :)
2012-11-15 17:04:39 max_albert: So you are still envisioning plotting a "closed" surface (as opposed to a wireframe), and the surface triangles are coloured according to the scalar values?
2012-11-15 17:06:07 fangohr-adium: That is what plot_trisurf does if I read it correctly. A wire frame would be good to â haven't found that function yet (but haven't searched for long either).
2012-11-15 17:13:09 fangohr-adium: Over and out for today.
2012-11-15 17:13:14 max_albert: See you!
2012-11-16 11:09:56 max_albert: Good morning!
2012-11-16 11:10:29 max_albert: Hi Hans, in case you log in later - I just saw your attempt to write mesh visualisation code using plot_trisurf in a sandbox notebook.
2012-11-16 11:12:07 max_albert: I also had a go at it yesterday and ran into exactly the same problem, but managed to resolve it. Will commit it at some point later.
2012-11-16 11:13:39 max_albert: Also, I'm not sure I understand what you mean by your comment about how to get the figure inline. But have you set the following in your ipython_notebook_config.py file?
2012-11-16 11:13:40 max_albert: c.IPKernelApp.pylab = 'inline'
2012-11-16 11:14:05 max_albert: See: http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#running-a-public-notebook-server
2012-11-16 12:53:33 fangohr-adium: Greetings. Some technical difficulties this morning; online now :)
2012-11-16 12:56:26 max_albert: Hi Hans, I just pushed a change with the way .ipynb files are included in our docs. Now if there are any cells in the notebook formatted in heading style (any level from 1-6 should do) these should show up in the table of contents (or at least the hightest-level ones should).
2012-11-16 12:56:49 fangohr-adium: Nice.
2012-11-16 12:56:51 max_albert: So we don't have to avoid level-1 headings any more, and can even use these to generate nice TOC entries.
2012-11-16 12:57:13 fangohr-adium: Does the filename decide the order in which these notebooks are incrluded? This would be quite nice.
2012-11-16 12:57:41 max_albert: I think it probably does at the moment. Or at least it would be a trivial change.
2012-11-16 12:57:52 mb8g11: Just saw the plotting questions on the IRC logs. I once wrote a function that helps plotting a vector field. It's in the finmag.util.helpers module.
2012-11-16 12:58:02 mb8g11: Doesn't do meshes though.
2012-11-16 12:58:10 mb8g11: Hi all.
2012-11-16 12:58:20 max_albert: Hi Marc-Antonio!
2012-11-16 12:59:07 fangohr-adium: (just going into meeting â expect some silence from me now â¦sorry)
2012-11-16 13:00:05 max_albert: MA, is this the quiver function you are talking about?
2012-11-16 13:01:39 mb8g11: Yes. I remember writing it to abstract away the difference between plotting 2D functions and 3D functions on 3D space.
2012-11-16 13:02:12 max_albert: Cool.
2012-11-16 13:02:24 mb8g11: Oh, apparently it plots functions on 1D and 2D meshes as well :)
2012-11-16 13:02:36 max_albert: Nice. :)
2012-11-16 13:03:55 mb8g11: Ok sorry, that was the use case: 3D valued functions on meshes of varying dimensions. Sorry for the confusion.
2012-11-16 13:23:08 mb8g11: How is it going besides?
2012-11-16 13:24:53 max_albert: Yeah, ok-ish I guess. Not really gotten much done in terms of my own work recently as the past couple of weeks have been filled with admin stuff (the virtual machine/binary distribution stuff; Finmag doc works; etc.). But hopefully at least part of that has layed the foundation for successful and productive work starting next week. ;-)
2012-11-16 13:24:56 max_albert: How about you?
2012-11-16 13:30:08 mb8g11: You were definitely thorough in your work and have the commits to show it.
2012-11-16 13:33:24 max_albert: Sure. I just tend to get lost in work like that and then at the end of the week when I think about what has actually come out of it, it feels a bit unsatisfying because none of it has really pushed me anything further towards proceeding with my project. ;-) Which is actually not quite true, but it's less tangible than a nice simulation result, say. ;)
2012-11-16 13:40:40 mb8g11: You recognised the problem, and honestly, I suffer from the same thing. For instance I want to compute some dispersion relation. So I start reading up on stuff, and next thing I know, I implemented a fourier transform for simple audio files but still not a damn line for my simulation :(
2012-11-16 13:41:44 max_albert: :-D
2012-11-16 13:41:44 mb8g11: Definitely have to dive right in next time.
2012-11-16 13:42:15 mb8g11: In a way, we are both procrastinating ;)
2012-11-16 13:42:40 max_albert: Yes, I tend to "waste" a lot of time reading up on things, too, and experimenting with toy problems that are interesting in their own right, but it usually would have been much quicker to tackle the real problem directly.
2012-11-16 13:42:45 max_albert: Yes, indeed. :)
2012-11-16 13:43:53 max_albert: Brb, need to reboot my computer.
2012-11-16 13:55:11 max_albert: MA, have you made any attempts with the Airbox method yet?
2012-11-16 13:57:15 mb8g11: Nope, will do Tueday morning.
2012-11-16 13:59:00 max_albert: Ok. I am planning to look into it a bit this afternoon because I need it myself, too.
2012-11-16 13:59:02 max_albert: I'll have to figure out how to assign different magnetisations to different regions, though. Do you know it that is that straightforward?
2012-11-16 14:00:03 mb8g11: If we could the import the regions from netgen it wouldn't be very difficult.
2012-11-16 14:00:52 mb8g11: What do I need to install for this python-convert stuff to work? Building the documentation tries to even when making the htmlraw version.
2012-11-16 14:01:09 mb8g11: Found a nbconvert.py on github, is this what I need to install?
2012-11-16 14:01:15 max_albert: sorry, git a call, will be back bb
2012-11-16 14:02:05 max_albert: P.S.: You will need this version: https://github.com/maxalbert/nbconvert
2012-11-16 14:02:28 max_albert: And a specific branch in this repo.
2012-11-16 14:02:43 max_albert: Hans has added instructions in the file finmag/install/requirements-for-ipython-notebook-builds-raw.txt
2012-11-16 14:05:06 mb8g11: Ah, thanks. Will rather just deactive it on my machine ;)
2012-11-16 14:05:15 mb8g11: *deactivate
2012-11-16 14:09:39 max_albert: Quick interlude, will probably be gone again for a bit soon: assuming we can import the regions, is it easy to do on the Finmag side?
2012-11-16 14:12:33 mb8g11: Is Ms the same everywhere?
2012-11-16 14:13:14 mb8g11: I mean, is it a traditional simulation just the a special starting magnetisation? If so, then yes. If not... oh hell no.
2012-11-16 16:00:47 max_albert: Hi MA, sorry for the long absence. Was on the phone and then went straight into a meeting with Hans.
2012-11-16 16:01:15 max_albert: Good news is, we managed to briefly explore something related to the airbox method.
2012-11-16 16:01:55 max_albert: To answer your question: no, we would need a spatially varying saturation magnetisation Ms.
2012-11-16 16:02:27 max_albert: I wasn't sure how to do this, but Hans suggested to use a Discontinuous Galerkin function space in dolfin for Ms.
2012-11-16 16:02:59 max_albert: It turns out that Dolfin can deal nicely with functions that live on the same mesh but in different function spaces.
2012-11-16 16:03:51 max_albert: So Hans suggested to let the unit magnetisation be an element in a Continuous Galerkin space (so that the dofs are at the nodes) - this is as it works at the moment.
2012-11-16 16:04:20 max_albert: However, Ms could then be an element of a DG FunctionSpace, so that the dofs would be inside the cells.
2012-11-16 16:04:54 max_albert: Then we can have the true magnetisation M = Ms*m, and Dolfin manages to integrate such a product nicely over the mesh.
2012-11-16 16:05:31 max_albert: So it seems like this *might* "just work", depending on whether our code somewhere assumes that the magnetisation is a CG function or not.
2012-11-16 16:05:53 max_albert: But maybe I/we are overlooking some problems with implementation details.
2012-11-16 16:06:02 max_albert: I hope this makes sense so far...
2012-11-16 16:07:14 D_Chernyshenko: Erm, this might not be an issue but what about the exchange part?
2012-11-16 16:07:25 D_Chernyshenko: When computing the exchange, I think we need to divide by Ms
2012-11-16 16:07:42 max_albert: To be honest, I haven't thought that far yet. :-)
2012-11-16 16:07:52 max_albert: But it's a good point. Will have to look into that.
2012-11-16 16:08:58 D_Chernyshenko: Should still be possible to work around that somehow, since if Ms=0 we don't need to compute the dynamics at all for those degrees of freedom
2012-11-16 16:09:20 D_Chernyshenko: Or are you only interested in the demag?
2012-11-16 16:09:23 max_albert: That's true. And it would save us a lot of computational effort.
2012-11-16 16:09:47 max_albert: Essentially, yes, at the moment I'm mainly interested in the demag (outside a magnetic material).
2012-11-16 16:10:15 max_albert: But to begin with we can simply choose Ms to be very small and see if that already gives us a good approximation.
2012-11-16 16:10:21 D_Chernyshenko: Yeah, well I was thinking along the linest of dividing by (M_s + 1e-300) or something along those lines. Doesn't save any computation but does the job
2012-11-16 16:10:23 D_Chernyshenko: Yeah
2012-11-16 16:41:12 mb8g11: Interesting.
2012-11-16 17:10:07 fangohr-adium: HI folks: Dmitri is right that there are places (at least one) where we need to divide by Ms. That is the reason why we may want to use a small (but finite) value for Ms in vacuum, say 1 A/m or so.
2012-11-16 17:10:18 fangohr-adium: This should *maybe* *just work*.
2012-11-16 17:11:40 fangohr-adium: It would be harder to get rid of the magnetisation degrees of freedom in the air-area, but more elegant, faster, and with a smaller memory footprint. (The only function we need in the air-area is phi and the demag field.) But this would update the code to be able to deal with regions where we have a phi but not M etc. There is no conceptuar barrier (I think), but it needs some work.
2012-11-16 17:12:04 fangohr-adium: Sticking to the Ms=nearly zero model avoids all that (if we accept slower execution for now).
2012-11-16 17:12:08 fangohr-adium: Over and out from me.
2012-11-16 17:12:35 max_albert: Have a good weekend!
2012-11-16 18:38:20 mb8g11: Bye bye
2012-11-19 11:59:04 fangohr-adium: Good Morning folks.
2012-11-19 11:59:10 max_albert: Good morning!
2012-11-19 11:59:44 D_Chernyshenko: Good morning
2012-11-19 12:00:14 fangohr-adium: How do we feel about lunch today?
2012-11-19 12:02:08 max_albert: I guess I'd be up for it but probably a little later (say around 1pm) as I'm not feeling very hungry yet. Do you feel like going now, though? Or is there a time restriction?
2012-11-19 12:02:23 D_Chernyshenko: I'll pass sorry...
2012-11-19 12:04:09 fangohr-adium: No, around 1pm sound great.
2012-11-19 12:04:24 max_albert: Excellent. :)
2012-11-19 12:04:45 fangohr-adium: Can message just before if you like; I should be flexible.
2012-11-19 12:05:11 max_albert: Sure. Same here.
2012-11-19 12:33:56 max_albert: Hi Dmitri, may I tap your brain regarding a (probably quite trivial) Dolfin question?
2012-11-19 12:34:13 D_Chernyshenko: Sure
2012-11-19 12:34:18 max_albert: Suppose I have a domain given by a mesh and two functions defined on that domain. I'd like to compare these two functions, but only on a subdomain (for example, outside a sphere of given radius).
2012-11-19 12:34:30 max_albert: I can imagine that there is a nifty way to do this using Dolfin's clever way of dealing with entire functions, but I'm also happy to only do the comparison on the vertices (via the numpy arrays corresponding to the function values on the vertices).
2012-11-19 12:34:44 max_albert: Do you have any ideas about a good way to do this? I have only spent a bit of time thinking about the 'per-vertex comparison' approach. My idea was do define a VertexFunction which returns True if the vertex is inside the subdomain and False otherwise. However, I'm already a bit lost as to how to iterate over all vertices and get the coordinates for each vertex.
2012-11-19 12:34:57 max_albert: I know I can say something like "for v in df.vertices(mesh): ..." but then there doesn't seem to be a way of extracting the coordinates from 'v'. I'm probably missing something really obvious here.
2012-11-19 12:35:04 max_albert: Any clues, or any better ideas how to proceed? Thanks!
2012-11-19 12:35:21 D_Chernyshenko: Erm, when you say compare, do you want to see if the functions are "close"? And does this have to be fast?
2012-11-19 12:36:17 max_albert: Yes, exactly. I'm essentially looking for something like numpy.allclose() for the function values. And I'm happy to accept a slow solution, too. :)
2012-11-19 12:37:10 max_albert: I guess one could also subtract them from each other and then integrate over the subdomain, dividing by the volume.
2012-11-19 12:37:16 D_Chernyshenko: Ok, I think I know to iterate vertices/coordinates in Python; I'll link the section of the manual where I saw it in a second
2012-11-19 12:37:27 max_albert: But again, I don't know how to do that for a subdomain only.
2012-11-19 12:37:33 max_albert: Great, thanks!
2012-11-19 12:37:42 D_Chernyshenko: Can you define a function that is 1 on a subdomain and 0 elsewhere
2012-11-19 12:37:51 D_Chernyshenko: Since then you will be able to do the comparison
2012-11-19 12:38:10 max_albert: Ah, you mean by multiplying that "indicator function" with the given functions?
2012-11-19 12:38:11 D_Chernyshenko: By multiplying with that function before integrating...
2012-11-19 12:38:13 D_Chernyshenko: Yeah
2012-11-19 12:38:23 max_albert: Nice. Good idea!
2012-11-19 12:38:40 D_Chernyshenko: Yeah, it seems nicer, should be faster (and easier to code) than the vertex approach
2012-11-19 12:38:54 D_Chernyshenko: But it's useful to know how to iterate elements of the mesh, so I'll still show it
2012-11-19 12:39:02 max_albert: :)
2012-11-19 12:39:11 max_albert: Was just going to say the same thing and ask you for a link anyway. ;-)
2012-11-19 12:39:38 D_Chernyshenko: Yeah, it'll be a couple of minutes, since it was a while since I saw that webpage
2012-11-19 12:39:50 max_albert: No problem. Thanks for looking
2012-11-19 12:39:51 max_albert: !
2012-11-19 12:41:15 max_albert: I wonder if I need to access the mesh.geometry() and/or mesh.topology() objects with the vertex indices somehow. I haven't looked into their storage mechanisms in detail, but it seems they separate the geometric (= coordinate) information from the actual topology.
2012-11-19 12:41:40 D_Chernyshenko: Yeah, exactly. The topology has the information about the dimensionality of the mesh and the underlying space,
2012-11-19 12:41:43 max_albert: Which makes it a bit awkward and "un-pythonic" to obtain coordinate information from a vertex, say (or any MeshEntity for that matter)
2012-11-19 12:41:47 D_Chernyshenko: while the geometry object ahs the actual coordinates
2012-11-19 12:41:51 D_Chernyshenko: Yep exactly
2012-11-19 12:42:24 max_albert: I keep expecting that a "Vertex" object in Python should have an attribute "coordinates", but that doesn't seem to be the case. Which is why I keep stumbling about this.
2012-11-19 12:42:25 D_Chernyshenko: It makes slighlty more sense in an object-oriented sense when you look at the underlying C++ objects
2012-11-19 12:42:35 max_albert: Yeah, I guess so.
2012-11-19 12:42:52 max_albert: It's just something I have to constantly remind myself of. ;-)
2012-11-19 12:43:47 D_Chernyshenko: Since in this case the Python interface just exposes the underlying C++ classes.
2012-11-19 12:43:58 max_albert: Yep.
2012-11-19 12:45:07 D_Chernyshenko: Yeah, it's quite un-Pythonic but I guess it's a low priority area since iterating over vertices/elements in Python is so slow anyway
2012-11-19 12:45:33 max_albert: Sure.
2012-11-19 12:45:55 max_albert: Mmh, regarding your suggestion with the indicator function above: I would still need to extract the function vector at the end, right? Say, if f1 and f2 are the functions I want to compare and g is the indicator function for the subdomain, can I just say something like "abs(f1*g-f2*g).vector().array()" and check that the maximum of that array is below a threshold?
2012-11-19 12:46:17 max_albert: In particular, are "symbolic" function operations like that supported?
2012-11-19 12:47:04 D_Chernyshenko: have a look at http://fenicsproject.org/documentation/dolfin/dev/python/programmers-reference/fem/norms/errornorm.html
2012-11-19 12:47:31 D_Chernyshenko: I think that's the recommended function in this case, if you only need 1 number
2012-11-19 12:47:31 max_albert: Oh, nice.
2012-11-19 12:47:36 max_albert: Thank you!
2012-11-19 12:47:56 D_Chernyshenko: It has some clever trick in it to increase accuracy when you calculate the L2 norm, that avoids subtracting numbers that are close to 0
2012-11-19 12:48:39 D_Chernyshenko: I guess you might be equally interested in the L1 norm though
2012-11-19 12:48:51 D_Chernyshenko: Anyway, I'm still looking for the coordinate iteration code
2012-11-19 12:49:00 max_albert: Yes, L1 is probably what I need.
2012-11-19 12:49:13 max_albert: Thanks again! And sorry that this is taking up so much of your time!
2012-11-19 12:50:29 D_Chernyshenko: Do you have a PDF copy of the Fenics book?
2012-11-19 12:50:34 max_albert: Yes, I do.
2012-11-19 12:51:16 D_Chernyshenko: It seems there are some helpers in the Python classes that make iteration easier in C++
2012-11-19 12:51:35 D_Chernyshenko: *than in C++
2012-11-19 12:51:56 D_Chernyshenko: Search for "coordinates" or "iteration" in the book, there are quite a few snippets
2012-11-19 12:52:22 D_Chernyshenko: First there's mesh.coordinates() that has the coordinates, plus I suspect the vortex object itself might have coordinates in Python
2012-11-19 12:53:14 max_albert: Yes, I saw mesh.coordinate(), but unfortunately the vertex object itself doesn't hold them. (That was one of my stumbling blocks.)
2012-11-19 12:53:52 D_Chernyshenko: Section 10.3.2 in particular
2012-11-19 12:54:02 max_albert: And I didn't know how to get the "global index" of a vertex (which I could then hopefully use to extract the coordinates from mesh.coordinates() -- in case the order is consistent).
2012-11-19 12:54:24 D_Chernyshenko: What I normally do in C++, is iterate over the index itself
2012-11-19 12:54:35 D_Chernyshenko: for i in xrange(mesh.num_vertices())
2012-11-19 12:54:50 D_Chernyshenko: Then you grab the vortex object by index, as well as the coordinate by index
2012-11-19 12:54:55 D_Chernyshenko: Seems that's the recommended way in C++
2012-11-19 12:55:10 max_albert: Ah! How do I grab the vertex by index?
2012-11-19 12:55:15 D_Chernyshenko: Apart from the mesh iterators
2012-11-19 12:55:40 D_Chernyshenko: df.entities(mesh, 0) or so I think
2012-11-19 12:55:56 D_Chernyshenko: D = mesh.topology().dim()
2012-11-19 12:55:56 D_Chernyshenko: for c in entities(mesh, D):
2012-11-19 12:55:56 D_Chernyshenko: for v0 in entities(c, 0):
2012-11-19 12:55:56 D_Chernyshenko: for v1 in entities(v0, 0):
2012-11-19 12:55:56 D_Chernyshenko: print v1
2012-11-19 12:56:14 D_Chernyshenko: Sorry, df.entities(mesh, o)[i] shoould do it
2012-11-19 12:56:28 D_Chernyshenko: This is from taht section 10.3.2
2012-11-19 12:56:52 D_Chernyshenko: Chapter 10. DOLFIN: A C++/Python finite element library => 10.3.2 Meshes
2012-11-19 12:57:09 max_albert: Great, I'll experiment with that. I have tried lots of things along similar lines but often there are subtle issues with them.
2012-11-19 12:57:11 D_Chernyshenko: I am pretty sure that there is more than one (more than two, even) ways to access this
2012-11-19 12:57:42 D_Chernyshenko: But this should work, let me know if there are issues as I've successfully used this approach from C++
2012-11-19 12:57:43 max_albert: For example,  "df.entities(mesh, o)[i]" doesn't work because the " df.entities(mesh, o)" doesn't support indexing (it's very similar to a Python iterator or a list, but not quite the same).
2012-11-19 12:57:50 D_Chernyshenko: Gosh
2012-11-19 12:58:00 max_albert: But you can say something like:
2012-11-19 12:58:05 D_Chernyshenko: Anyway, that section of the book is where I learned about this
2012-11-19 12:58:21 max_albert: ee = [e for e in df.entities(mesh, 0)]
2012-11-19 12:58:22 D_Chernyshenko: I will try to now find the reference pages in the manual for this
2012-11-19 12:58:23 max_albert: ee[i]
2012-11-19 12:58:49 max_albert: Don't worry about it, I've taken up enough of your time. I'll try it out and get back to you if I still encounter problems.
2012-11-19 12:58:52 D_Chernyshenko: Well, if you only need the vertex coordinates, I guess you don't need the vertex object itself
2012-11-19 12:59:03 D_Chernyshenko: I would just iterate over the index and look up in mesh.coordinates()?
2012-11-19 12:59:26 max_albert: Hmm, I still need to define a function on the mesh. But if I supply the function values in the same order as the coordinates, hopefully that'll be sufficient?
2012-11-19 13:00:21 D_Chernyshenko: Yeah, that's one way - where does the function come from?
2012-11-19 13:00:43 max_albert: In their example where they define a function on a SubDomain (p. 189 of the FEniCS book) they iterate over all entities of a given dimension (e.g. cell or facets).
2012-11-19 13:01:15 max_albert: I initially wanted to try the same approach with vertices, where I just set the function values to 1 or 0 depending on whether the vertex is inside my desired subdomain or not.
2012-11-19 13:01:41 max_albert: That's why I thought I needed to iterate over the vertices and extract their coordinates along the way.
2012-11-19 13:02:17 max_albert: But I guess with your pointers above I can do this much more elegantly. The "errornorm" function should be particularly helpful, thanks for that!
2012-11-19 13:02:20 D_Chernyshenko: Well for your case this might be the easiest way
2012-11-19 13:02:42 D_Chernyshenko: To iterate over the index and do a test for the coordinates and then put 1 or 0 in the corresponding array
2012-11-19 13:02:53 D_Chernyshenko: You might be even able to do this with a numpy expression without actually iterating :0
2012-11-19 13:03:00 max_albert: Yes. :)
2012-11-19 13:03:27 max_albert: I was also thinking of using dolfin.Expression(), but I don't know if it can deal with conditional expressions.
2012-11-19 13:05:13 D_Chernyshenko: I think UFL can do that, but I've never used it
2012-11-19 13:05:18 max_albert: Hmm, looks like there is some support for conditionals in UFL. I'll take a look.
2012-11-19 13:05:45 D_Chernyshenko: Page 308/ section 17.4.5
2012-11-19 13:06:04 max_albert: Thanks! :-)
2012-11-19 13:06:59 max_albert: And again, thanks very much for all your help and suggestions. Much appreciated!
2012-11-19 13:07:41 D_Chernyshenko: Speaking of the Fenics book, I've found some of the research studies there useful since they often use more advanced features than what's explained in the tutorial
2012-11-19 13:08:07 D_Chernyshenko: I didn't really go deep into the actualy studies but just scanned the Python listings
2012-11-19 13:08:35 max_albert: Yes, I've been meaning to take a closer look at the book for a while. Should maybe bump the priority. :) Good point about the research studies, too.
2012-11-19 13:09:17 fangohr-adium: Hi Max, is now a god time for lunch?
2012-11-19 13:09:31 max_albert: Yes, sure. Do you want me to pick you up?
2012-11-19 13:09:44 fangohr-adium: OKay, will be right there.
2012-11-19 13:09:55 max_albert: Great.
2012-11-19 15:40:47 fangohr-adium: Hi Marc-Antonio, please come over when it is convenient â am back in the office now.
2012-11-20 11:05:44 fangohr-adium: Good Morning.
2012-11-20 11:27:10 max_albert: Good morning.
2012-11-20 11:43:32 max_albert: Hi MA, here is the link which describes the IPython notebook in more detail: http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html
2012-11-20 11:43:54 max_albert: Especially handy is the section "Running a public notebook server".
2012-11-20 11:44:14 mb8g11: Thanks.
2012-11-20 11:44:40 max_albert: They describe how to create a separate profile for running the notebook server, which is useful if you'd like to keep the configuration settings separate from the normal ones.
2012-11-20 11:49:22 max_albert: Just for the record (and because it may be of interest to others), I use this all the time to log into my uni computer from home, for example.
2012-11-20 11:50:32 max_albert: If you have an ipython notebook server running on your machine (I keep mine in a 'screen' session) then you can just steer your web browser to your machine (using the port number and password that you set in the configuration) and then work as if you were working at your computer.
2012-11-20 11:50:44 max_albert: Works like a charm and is really useful. :)
2012-11-20 11:51:44 mb8g11: Interesting!
2012-11-20 11:59:24 max_albert: MA: https://mail.google.com/mail/u/0/#inbox/13b1bd0ab209de3c
2012-11-20 11:59:54 mb8g11: No ;)
2012-11-20 12:00:15 max_albert: Sorry!
2012-11-20 12:00:17 max_albert: https://answers.launchpad.net/dolfin/+question/214692
2012-11-20 12:00:36 max_albert: Only saw it last night and haven't looked at it in detail yet, but it may help with the subdomain-function problem.
2012-11-20 12:05:02 mb8g11: Thanks for the link. I think it solves a different problem - how to get the MeshFunction. We already have it though.
2012-11-20 12:05:18 max_albert: Ah, ok.
2012-11-22 11:58:36 D_Chernyshenko: Hi Max, is Hans in at the office?
2012-11-22 13:39:48 max_albert: Hi Dmitri! Sorry, I only just now read your message as I went to the DTC coffee morning earlier.
2012-11-22 13:39:56 max_albert: I haven't checked if Hans is there yet, but can quickly walk over if you want me to. Shall I do that?
2012-11-22 13:40:09 D_Chernyshenko: It's fine thanks, we got in touch via email
2012-11-22 13:41:08 max_albert: Ok, great! And sorry again for the delay.
2012-11-22 14:17:52 fangohr-adium: Hi all.
2012-11-22 14:17:52 fangohr-adium: Dmitri, to answer your earlier question: I am now in the office, but I guess we have sorted that by email already?
2012-11-22 14:41:40 D_Chernyshenko: Yep!
2012-11-22 15:10:44 ww1g11: Hi I got a problem in compiling finmag in the new machine, src/sundials/numpy_malloc.cc: In function âvoid* finmag::sundials::numpy_malloc(size_t, size_t)â:
2012-11-22 15:10:44 ww1g11: File "/home/ww1g11/Softwares/finmag/native/src/sundials/numpy_malloc.cc", line 93 (33): error: narrowing conversion of âlenâ from âsize_t {aka long unsigned int}â to ânpy_intp {aka long int}â inside { } [-Werror=narrowing]
2012-11-22 15:11:54 ww1g11: any suggestion?
2012-11-22 15:17:01 D_Chernyshenko: Hi Weiwei, what's the OS version and GCC version? And is this 64 bit? I'm checking the code meanwhile
2012-11-22 15:17:44 ww1g11: gcc version 4.7.2 x86_64
2012-11-22 15:17:55 D_Chernyshenko: Aha, what's the OS?
2012-11-22 15:17:57 ww1g11:  (Ubuntu/Linaro 4.7.2-2ubuntu1)
2012-11-22 15:18:14 D_Chernyshenko: I guess it's a new type of warning that gcc 4.7 picks up
2012-11-22 15:18:19 D_Chernyshenko: Interesting
2012-11-22 15:18:48 ww1g11: maybe I can try gcc 4.6 or 4.5
2012-11-22 15:19:10 D_Chernyshenko: We should just fix the warning, a cast to npy_intp should do it
2012-11-22 15:19:17 D_Chernyshenko: Trying to think what's the "proper" way to cast
2012-11-22 15:19:25 D_Chernyshenko:         npy_intp dims[] = { len };
2012-11-22 15:19:48 D_Chernyshenko: Ah well just cast it directly I guess
2012-11-22 15:20:36 max_albert: Is a cast really the correct solution in all cases? Is it possible that the data gets truncated in some ways if the integer is too large? Sorry if this doesn't make any sense, I haven't really looked at the code, just trying to make sense of the warning message.
2012-11-22 15:21:15 D_Chernyshenko: Exactly that's the idea of the warning message, since we're casting from unsigned to signed, in princple this can lead to loss of data if the number is negative
2012-11-22 15:21:37 D_Chernyshenko: However since it's a 64-bit size_t, having an array that large is quite unlikely
2012-11-22 15:22:27 max_albert: Could we make the 'len' variable an unsigned int? Wouldn't that fix it, too?
2012-11-22 15:22:33 D_Chernyshenko: Just do npy_intp dims[] = { npy_intp(len) };
2012-11-22 15:22:39 D_Chernyshenko: len is unsigned since it's size_t
2012-11-22 15:22:46 D_Chernyshenko: npy_intp is signed according to that message
2012-11-22 15:22:59 max_albert: Oh, of course. Sorry.
2012-11-22 15:23:01 D_Chernyshenko: And npy_inpt is defined by numpy so we cannot change its definition
2012-11-22 15:23:46 max_albert: True.
2012-11-22 15:23:56 ww1g11: yeah, it solved the problem
2012-11-22 15:24:04 D_Chernyshenko: What the code is doing it mallocs 'len' bytes then creates a numpy array of length 'len' with the malloc'ed data as the underlying buffer
2012-11-22 15:24:19 D_Chernyshenko: I think a plain cast is fine, we're probably overthinking this
2012-11-22 15:24:45 D_Chernyshenko: Feel free to check it in as well - is it compiling fine on 4.7 otherwise?
2012-11-22 15:25:09 max_albert: Might be worth adding an error check before calling PyArray_SimpleNewFromData in the unlikely case that the data indeed gets too big, but you are probably right that it's hardly worth the hassle.
2012-11-22 15:25:40 D_Chernyshenko: Yeah, this might only come into play if we try to get this working on a 32-bit machine
2012-11-22 15:26:37 max_albert: However, I have encountered cases in the past where I thought this is never gonna be a problem, and six months down the line it hit me hard (and it took me hours to debug it). ;-)
2012-11-22 15:26:45 ww1g11: it works for 4.7, by the way, is any significant difference between sundials 2.4 and 2.5? finmag doesn't work with 2.5
2012-11-22 15:27:07 max_albert: Speaking of that, it would be awesome to get Finmag to work for 32-bit systems, too. Because then I could run it on my old Laptop. :-)
2012-11-22 15:27:37 D_Chernyshenko: Hmm, not sure what changed in 2.5, but some changes might be required in nvector_serial_custom_malloc.c
2012-11-22 15:27:59 D_Chernyshenko: Since it's a copy of the corresponding file from sundials
2012-11-22 15:28:38 ww1g11: thanks, anyway it works for 2.4
2012-11-22 15:29:13 D_Chernyshenko: There were a lot of changes between 2.3 and 2.4 guess we can talk about 2.5 at a group meeting?
2012-11-22 15:30:54 ww1g11: I mentioned 2.5 is because the default version in ubuntu 12.10 is 2.5, but it's not a big problem
2012-11-22 15:31:44 D_Chernyshenko: SUNDIALS 2.5 comes with CVODE 2.7 I think, which fixes quite a few bugs I ran into
2012-11-22 15:31:55 D_Chernyshenko: But I don't think we can rely on 2.5 being present yet...
2012-11-22 16:16:56 fangohr-adium: I didn't realise 12.10 is out. I am clearly out of touch. We should try to upgrade code as necessary to compile on 12.10 with it's default packages (such as sundials 2.5).
2012-11-22 16:17:46 max_albert: Does that mean supporting both sundials 2.4 and 2.5 in parallel for a while? Or is sundials 2.5 available for 12.04, too?
2012-11-22 22:14:32 fangohr: Hi, anybody still out there?
2012-11-22 22:16:48 fangohr: Re: Does that mean supporting both sundials 2.4 and 2.5 in parallel for a while? I haven't thought about this, but yes, that would be the 'best' solution in the sense of portability between different Ubuntu releases. It would also allow us to use the latest sundials that fixes a few bugs that Dmitri discovered if we want to, but not force us to upgrade to 12.10 in a rush.
2012-11-22 22:17:29 fangohr: We could of course install the sundials we need from source etc, but that complicates installation somewhat.
2012-11-22 22:24:44 D_Chernyshenko: Yeah, I think using 2.4 and 2.5 in parallel is possible, but will need some looking into
2012-11-22 22:25:11 D_Chernyshenko: It might just be easier using sundials from source, or at least having that as an option
2012-11-22 22:25:37 D_Chernyshenko: I.e., rather than support 2.4 and 2.5, it might be easier to support 2.5 either from Ubuntu or from source as needed
2012-11-23 09:34:42 mb8g11: Hi Hans
2012-11-23 09:43:37 fangohr: Hi MA.
2012-11-23 09:44:01 fangohr: I can see your changes on the exchange: some of those are inline with what I did, and what I thought we should do next â good.
2012-11-23 09:45:32 fangohr: The changes fail a few tests (16), so not quite perfect but going in the right direction. Are you in the office?
2012-11-23 09:48:55 mb8g11: Yes
2012-11-23 09:49:39 mb8g11: Forgot the DMI, that's for sure
2012-11-23 09:52:46 fangohr: DMI: yes.
2012-11-23 09:54:39 mb8g11: That's what happens when you only run the tests for the things you think has changed :-/
2012-11-23 09:54:47 mb8g11: *have
2012-11-23 09:54:53 fangohr: I think the first step should be to make clear in the source what m and M is. And my understanding is that the 'M' we pass to the exchange class constructor is actually a normalised m (i.e. of magnitude 1.0), even though it was called M until today. You renamed this to m (i.e. lowercase) to address this issue, I think?
2012-11-23 09:55:01 fangohr: The relevant function call in your new revision is https://bitbucket.org/fangohr/finmag/src/2fdfb487c87a7c77a7dccad1a904d0ad30f7310f/src/finmag/energies/exchange.py?at=default#cl-74
2012-11-23 09:55:04 mb8g11: Yes.
2012-11-23 09:55:24 fangohr: Good, that would have been my suggestions as well. Just to clear this up a little.
2012-11-23 10:21:10 mb8g11: Who wrote the DMI code and its tests?
2012-11-23 10:21:20 mb8g11: (nearly done fixing)
2012-11-23 10:36:53 fangohr-adium: Marijan and I, I think. Try 'hg blame -u' ;-)
2012-11-23 10:37:13 fangohr-adium: Going on and offline â technical issues here, sorry.
2012-11-23 10:58:40 D_Chernyshenko: Erm, going to be 10 mins late to the meeting it seems, I'm leaving now...
2012-11-23 11:06:24 fangohr1: No worries. Coffee is on the table. Looking for biscuits now.
2012-11-23 11:06:57 max_albert: Hi Hans, shall we come over in 5 minutes so that we arrive at the same time as Dmitri?
2012-11-23 11:07:08 fangohr1: Good plan.
2012-11-23 14:18:26 fangohr_: Greetings. Max, I get a failure with the test_from_geofile_and_from_csg test:
2012-11-23 14:18:43 fangohr_:  # 'Touch' the .geo file so that it is newer than the .xml.gz
2012-11-23 14:18:43 fangohr_:             # file. Then check that upon reading the mesh the .xml.gz file
2012-11-23 14:18:43 fangohr_:             # is recreated.
2012-11-23 14:18:43 fangohr_:             stream.truncate(0)  # clear stream
2012-11-23 14:18:43 fangohr_:             os.utime(geofile, None)  # update the 'last modified' timestamp
2012-11-23 14:18:46 fangohr_:             mesh4 = from_geofile(geofile, save_result=True)
2012-11-23 14:18:48 fangohr_:             assert(isinstance(mesh4, Mesh))
2012-11-23 14:18:50 fangohr_:             assert(os.path.isfile(xmlfile))
2012-11-23 14:18:52 fangohr_:             handler.flush()
2012-11-23 14:18:54 fangohr_: >           assert(stream.getvalue().startswith("The mesh file '{}' is outdated "
2012-11-23 14:18:56 fangohr_:                    "(since it is older than the .geo file '{}') and will "
2012-11-23 14:18:58 fangohr_:                    "be overwritten.\n".format(xmlfile, geofile)))
2012-11-23 14:19:41 fangohr_: And the detail is
2012-11-23 14:19:44 fangohr_: E           assert <built-in method startswith of str object at 0x790f030>("The mesh file '/tmp/tmpDTNv_M/tmp4rIR8q.xml.gz' is outdated (since it is older than the .geo file '/tmp/tmpDTNv_M/tmp4rIR8q.geo') and will be overwritten.\n")
2012-11-23 14:19:44 fangohr_: E            +  where <built-in method startswith of str object at 0x790f030> = "The mesh '/tmp/tmpDTNv_M/tmp4rIR8q.xml.gz' already exists and is automatically returned.\n".
2012-11-23 14:20:18 fangohr_: I assume you have been involved in writing this? If so, any ideas what is happening (this is on osiris). If not, I'll look into it myself.
2012-11-23 16:14:09 max_albert: Hi Hans, sorry for the late reply!
2012-11-23 16:14:56 max_albert: Hmm, it's weird that the test is failing because it works alright on summer (and the test suite has passed the past few builds).
2012-11-23 16:16:18 max_albert: Indeed, I wrote this yesterday or the day before. The idea is to check that the .xml.gz file of a mesh is recreated even if the associated .geo file already exists but the latter is newer.
2012-11-23 16:17:26 max_albert: Is this at a location on osiris where I can play around with it? I may even run the test on osiris myself to see if it works or not.
2012-11-23 16:19:39 fangohr-adium1: I did run this in my home directory (in hg/finmag). But as it failed, I deleted that directory and started from a clean clone. So I would expect that you should be getting the same error from your user account. Could it have to do with any remaining files in /tmp/? Probably not.
2012-11-23 16:20:34 max_albert: No, I don't think that could be  the reason. I'll have a quick look and see if I can get it to fail, too. Will report back in a few minutes.
2012-11-23 16:20:58 fangohr-adium1: That would be great. There is no rush, of course. I just wanted to pass all the tests before I do anything adventurous ;-)
2012-11-23 16:21:29 max_albert: Sure. But again, it's strange that it's failing on osiris because it passes on my machine and on summer.
2012-11-23 16:21:40 max_albert: You said this is also with a fresh clone?
2012-11-23 16:22:09 max_albert: By the way, if you work on something that's not related to mesh creation, feel free to ignore this test for now and hack away anyway. ;-)
2012-11-23 16:27:16 max_albert: Ok, I managed to reproduce it the error. Will look into it.
2012-11-23 16:45:45 fangohr-adium1: Nice, thank you.
2012-11-23 18:18:08 max_albert: Hi Hans, I just pushed a change which should fix this. The error was due to the fact that osiris seems to use low-precision timestamps for file modification times. So since the test execution is very fast, the .geo file got the same timestamp as the .xml.gz file that was created less than a second before and it wasn't picked up as being newer.
2012-11-23 18:18:30 max_albert: Let me know if you still experience problems.
2012-11-23 20:41:20 fangohr2: Hi Max, all well now â tests pass perfectly. Many thanks!
2012-11-26 08:10:45 mb8g11: Hello
2012-11-26 09:19:56 fangohr-adium: Hello MA (think I just missed you).
2012-11-26 13:30:56 mb8g11: I have sundials 2.5 working with finmag on my fresh Ubuntu 12.10. Will commit the needed changes as soon as I find out how to do an anonymous branch in Mercurial.
2012-11-26 13:31:22 max_albert: Hi MA, that sounds awesome!
2012-11-26 13:32:12 max_albert: Is it a big change? You could consider using #ifdef statements so that we have a closer integration and the code and don't run the risk of leaving one branch unmaintained.
2012-11-26 13:32:26 max_albert: But for a bigger change a separate branch might be more appropriate.
2012-11-26 13:34:30 mb8g11: To be honest, I just had to change a handful of types
2012-11-26 13:34:36 mb8g11: but it runs the tests
2012-11-26 13:34:48 max_albert: That's good news.
2012-11-26 13:35:06 D_Chernyshenko_: Just curious, what were the changes in 2.5 that you had to accomodate for?
2012-11-26 13:35:37 mb8g11: some ints became longs
2012-11-26 13:35:46 D_Chernyshenko_: Uhh.
2012-11-26 13:36:07 D_Chernyshenko_: Nothign beyond that right? The official changelog is short
2012-11-26 13:36:29 mb8g11: Nothing beyond that as far as I see.
2012-11-26 13:36:42 max_albert: Dmitri, you said that sundials 2.5 fixes quite a few bugs you encountered. Is there an easy way of installing version 2.5 on Ubuntu 12.04? Then we might even consider making it a requirement and use it exclusively.
2012-11-26 13:36:50 mb8g11: But I don't know how to commit the changes without breaking the build or introducing a named branch.
2012-11-26 13:37:05 D_Chernyshenko_: If some ints have become longs, then binary compatibility with both 2.4 and 2.5 is out of question
2012-11-26 13:38:21 max_albert: MA, you could do something like in this example from the magpar code base:
2012-11-26 13:38:21 max_albert: http://www.magpar.net/static/magpar-0.9rc2/doc/html/initinfo_8c_source.html
2012-11-26 13:38:23 D_Chernyshenko__: Erm, this is the second time I'm disconnected
2012-11-26 13:39:08 D_Chernyshenko__: Anyway, you can either install it from source, or possibly install the .deb file from 12.10
2012-11-26 13:40:44 max_albert: Yes, I have no problem installing it from source (I use Klaus Aehlig's ports system for that for quite a few other pieces of software, and it work's nicely). I'm just thinking about people who just want to use it without the hassle of having to compile something from source (also think about ppl using the binary distribution).
2012-11-26 13:41:31 D_Chernyshenko__: I think that the best solution is to use the system 2.5 if it's present, or provide our own 2.5 if it's not
2012-11-26 13:41:55 D_Chernyshenko__: I.e. we compile our own 2.5 if we don't detect 2.5 in the system
2012-11-26 13:42:01 D_Chernyshenko__: Does this make sense?
2012-11-26 13:42:09 max_albert: Sure.
2012-11-26 13:42:32 max_albert: This would need a bit more setup/installation code, but it's certainly doable.
2012-11-26 13:42:56 D_Chernyshenko__: Yeah, since we don't distribute any other libraries, this will need some thinking
2012-11-26 13:43:08 max_albert: However, we might end up in a situation similar to nmag, which has to ship the exact versions of the libraries it needs, which is a bit of a nuisance.
2012-11-26 13:43:32 max_albert: That's why I thought it might be nice to have a solution that nicely integrates with Ubuntu's package system.
2012-11-26 13:43:43 D_Chernyshenko__: Oh
2012-11-26 13:43:59 D_Chernyshenko__: Why don't we make a 2.5 sundials DEB for 12.04
2012-11-26 13:44:16 max_albert: However, if we really want to do it using a (probably only very slightly) modified version of Klaus' ports system should be very little work.
2012-11-26 13:44:22 max_albert: Oh, that's a nice idea too.
2012-11-26 13:44:43 mb8g11: @D_Chernyshenko: How much work is this?
2012-11-26 13:44:44 D_Chernyshenko__: I think that can work, in the long run we can keep a ppa repository for such situations
2012-11-26 13:45:01 D_Chernyshenko__: I think it's fairly simple, there's some learning but the process itself is simple
2012-11-26 13:45:24 D_Chernyshenko__: And we can reuse the solution for other libraries and maybe also put finmag into a repository
2012-11-26 13:45:34 D_Chernyshenko__: This will certainly solve our own internal issues since we all use Ubuntu
2012-11-26 13:45:49 mb8g11: Indeed!
2012-11-26 13:46:29 D_Chernyshenko__: Might still need to include our own 2.5 in the binary distribution (or have an option to) for those who use other Linux flavours
2012-11-26 13:48:12 max_albert: Dmitri, how do you estimate the chances that the sundials-2.5 package for Ubuntu 12.10 will work on 12.04?
2012-11-26 13:48:46 D_Chernyshenko__: 99%, but you would have to install it from a .deb file, or temporary switch to 12.10 repositories while installing it
2012-11-26 13:49:04 D_Chernyshenko__: I don't think there are any major dependencies
2012-11-26 13:49:39 D_Chernyshenko__: Just try to install it from a .deb file I guess
2012-11-26 13:49:41 max_albert: Maybe that's worth a shot then. Downloading the .deb file and installing it can be easily added to our installation scripts and should be the easiest solution if it works.
2012-11-26 13:49:50 D_Chernyshenko__: Yep
2012-11-26 13:55:19 max_albert: I'm off to lunch.BB later!
2012-11-26 15:00:21 max_albert: Hi MA, just saw your sundials fixes. That's great news if that's everything needed for v2.5. Just to confirm, Finmag should still work with v2.4 even after these changes, right?
2012-11-26 15:00:46 max_albert: Oh, just saw that you're not online any more. Never mind.
2012-11-26 17:10:11 mb8g11: max_albert?
2012-11-26 17:18:40 mb8g11: The changes I've made Just wanted to say that the changes I've made this afternoon will NOT work with Sundials 2.4. Indeed the whole problem is they've changed some types, so fixes I make for working with one version of Sundials will break compability with the other.
2012-11-26 17:19:11 mb8g11: That's why they are confined to a named branch in our repo until we declare Sundials 2.5 our default.
2012-11-26 17:22:49 fangohr-adium: Hi all, sorry for silence from me today; busy, busy, busy. Good to see everybody is online and communicating busily. Over and out for today.
2012-11-26 17:23:05 mb8g11: Bye Hans
2012-11-27 11:56:21 fangohr-adium1: Hi Max et al. Anybody up for lunch later?
2012-11-27 11:56:42 max_albert: Yes, I might be. What time are you thinking?
2012-11-27 11:56:56 fangohr-adium1: Am easy â can wait a little if you like.
2012-11-27 11:57:21 max_albert: I don't mind. Happy to go whenever it suits you best.
2012-11-27 11:57:51 fangohr-adium1: How about 12:30 approx?
2012-11-27 11:58:06 max_albert: Sounds good to me. I'll pass the information on to Marijan and Weiwei.
2012-11-27 11:58:26 fangohr-adium1: Thanks.
2012-11-27 12:19:51 max_albert: Hi Hans, quick question: is it ok to give the pdf (or html version) of the Finmag documentation to Luzanne, even though it contains some source snippets?
2012-11-27 12:20:11 max_albert: I just wanted to tell her about the sim.relax() method and noticed she doesn't have the documentation yet.
2012-11-27 12:21:10 fangohr-adium1: I think so. What we really need is a user guide â a lot of the documentation is not relevant for her. I am hoping we can add a few ipython notebooks that show exactly these things in due course. But do give her the pdf (or the relevant pages â it may not help her to have all the information).
2012-11-27 12:21:34 max_albert: Ok, will do. Thanks!
2012-11-27 12:21:46 max_albert: And yes, I totally agree about the usage examples.
2012-11-27 12:31:08 max_albert: Hi Hans, just finishing a couple of emails but will be ready to go in a few minutes I guess.
2012-11-27 12:32:40 fangohr-adium1: Okay, same here.
2012-11-27 12:35:53 fangohr-adium1: Do you want to pick me up when you are ready?
2012-11-27 12:36:00 max_albert: Yes, will do.
2012-11-27 15:51:32 mb8g11: Do we have any mercurial experts online?
2012-11-27 15:51:56 max_albert: I'm online, but I wouldn't count myself as a mercurial expert by any means.
2012-11-27 15:53:08 mb8g11: Let's try: I have commited to the wrong named branch. I would like to go to our default branch and merge some commits from the named branch. Is this possible?
2012-11-27 15:54:16 max_albert: I presume those commits are on top of the sundials fix that you committed recently?
2012-11-27 15:54:29 max_albert: And I presume that you would like to only "merge" those commits, but not the sundials change?
2012-11-27 15:55:08 max_albert: If that's true then as far as I can see a merge won't be possible because it will inevitably also merge the sundials change.
2012-11-27 15:55:31 mb8g11: Okay, thank you :) will merge and revert the sundials stuff by hand.
2012-11-27 15:55:34 mb8g11: Need to go, sorry.
2012-11-27 15:55:41 max_albert: I presume the best you can do is revert the changes in the branch (as one or several commits which undo those changes)
2012-11-27 15:55:56 max_albert: And then cherry-pick the changes in the default branch, but keep the branches separate.
2012-11-27 15:55:59 max_albert: No problem, see you!
2012-11-27 16:29:37 max_albert: Hi MA, just to quickly follow up on your previous question. In case you haven't resolved it by other means yet, I guess what you want to do is cherry-pick the commits (so that the branches are kept separate).
2012-11-27 16:29:57 max_albert: I know that git can do this quite easily, but I don't know what mercurial's way of doing this is.
2012-11-27 16:30:26 max_albert: I found something called the "transplant" extension which some posts on StackOverflow indicate does the job, but it doesn't look as intuitive as the git "cherry-pick" command.
2012-11-27 16:31:07 max_albert: Alternatively, I'm sure there is a way to export a bunch of commits as a series of patches which you can then apply to the default branch to re-create your commits.
2012-11-27 16:31:22 max_albert: But again, I don't know what the right hg command is for that.
2012-11-27 16:31:44 max_albert: But as you said, it should also be easy to just resolve the changes by hand because it's only a few lines that were changed.
2012-11-27 16:33:22 D_Chernyshenko_: Yep, compared to git Mercurial isn't really built around changing or rewriting commit history, you have to use extensions which don't work that well
2012-11-27 16:34:29 max_albert: Well, it isn't really changing the history, is it? All he needs to do is get the same changes he applied to the sundials branch into the "default" branch and then revert the commits in the sundials branch.
2012-11-27 16:34:37 D_Chernyshenko_: By the way, I now have 12.10 at home, should I look into compiling for sundials 2.4 and 2.5 via some preprocessor macros?
2012-11-27 16:34:45 max_albert: But yes, mercurial seems to make those things a lot harder than they need to be.
2012-11-27 16:34:59 fangohr-adium: Dmitri, you mean using IFDEFs?
2012-11-27 16:35:24 max_albert: Sounds great, if you want to do that. I would have otherwise looked into it in the next few days.
2012-11-27 16:35:39 D_Chernyshenko_: Well, the manual method of reverting the changes indeed does not rewrite the history, but guess MA was looking for a better way
2012-11-27 16:35:54 fangohr-adium: I would quite like that: we could then use the same code and compile with whatever (well, 2.4 or 2.5) sundials we find. While overtime no doubt we will move to 2.5, it would give us less pressure to do this now (with everybody).
2012-11-27 16:37:03 max_albert: On a totally different note, here is a question for the Python experts which has bugged me for the past hour or so:
2012-11-27 16:37:36 max_albert: I added a new method to the Simulation class, but for some reason it doesn't show up when I try to use it form within ipython.
2012-11-27 16:38:19 max_albert: Neither is it available via tab completion, nor does it show up in the list when I say "dir(Simulation)".
2012-11-27 16:38:28 mb8g11: delete the .pyc
2012-11-27 16:38:38 D_Chernyshenko_: Also, can you actually invoke the method
2012-11-27 16:38:43 max_albert: I also said "make clean" just in case it tried to read it from a .pyc file.
2012-11-27 16:38:54 max_albert: Nope, I can't. It's totally not there.
2012-11-27 16:39:02 max_albert: Or does "make clean" actually delete the .pyc files?
2012-11-27 16:39:16 fangohr-adium: I take it you have done something with ipython (such as 'run' or relead(module)) to get the new code into the interpreter?
2012-11-27 16:40:00 D_Chernyshenko_: Looks like make clean does not remove .pyc files, in fact it does almost nothing outside of the native directory
2012-11-27 16:40:11 mb8g11: max
2012-11-27 16:40:14 max_albert: Hans: By default it uses the finmag installation from my hg repository, so just changing code in the repo and saying "from finmag import Simulation" should do the trick.
2012-11-27 16:40:19 mb8g11: max, thank you for the hints :)
2012-11-27 16:40:36 max_albert: Dmitri: oh dear, I should have checked that... Will try again.
2012-11-27 16:40:42 D_Chernyshenko_: make clean removes test-reports and then calls make clean in the native dir
2012-11-27 16:41:26 D_Chernyshenko_: At this point I should say, initially I made the top level Makefile only to run the Jenkins build
2012-11-27 16:42:01 D_Chernyshenko_: Later we added some testing targets to it but it never was a proper Makefile
2012-11-27 16:42:17 D_Chernyshenko_: Which explains the lack of make clean etc
2012-11-27 16:43:04 max_albert: Ok, I deleted all .pyc files manually but it still can't find it. This is really weird...
2012-11-27 16:43:20 max_albert: When I add it outside the simulation class (e.g. in helpers.py) it can be imported, however.
2012-11-27 16:43:46 D_Chernyshenko_: Hmm, could it be that you have two locations from which the file could be imported somehow? Maybe something in PYTHONPATH?
2012-11-27 16:44:16 D_Chernyshenko_: Maybe you have two copies of the repository and you're not editing the file that's being loaded?
2012-11-27 16:44:27 max_albert: I did check that, but the only Finmag installation in my PYTHONPATH is my usual hg repo.
2012-11-27 16:44:38 D_Chernyshenko_: I guess you can try to print module_name.___file___ to see where it's from
2012-11-27 16:44:47 max_albert: Yes, that's what I did.
2012-11-27 16:45:13 D_Chernyshenko_: Two declarations inside the same file? :) Last resort option
2012-11-27 16:45:18 D_Chernyshenko_: I.e. class declared twice
2012-11-27 16:45:30 mb8g11: restarting python notebook?
2012-11-27 16:46:01 max_albert: Dmitri: good idea, but it's only there once.
2012-11-27 16:46:30 max_albert: MA: It's not in a notebook. It's in a regular ipython prompt, and I have retried it about a gazillion times by now.
2012-11-27 16:46:36 max_albert: I think I'm going mad... ;-)
2012-11-27 16:47:39 mb8g11: typo in the function name?
2012-11-27 16:48:25 max_albert: Well, it doesn't show anything even remotely resembling that name when I say "dir(Simulation)", so I don't think a typo can be the reason. :(
2012-11-27 16:48:32 mb8g11: like, a really bad one, where every letter is wrong
2012-11-27 16:48:42 mb8g11: :D
2012-11-27 16:48:43 max_albert: :-D :-D
2012-11-27 16:49:05 mb8g11: add yet another method to it and look if it shows up
2012-11-27 16:49:13 max_albert: Good idea, will try that.
2012-11-27 16:51:05 mb8g11: touched a lot of files today, hope this doesn't make merging too difficult for you
2012-11-27 16:54:38 mb8g11: bye bye!
2012-11-27 16:55:22 max_albert: Solved it! For the record, the reason was that apart from the sim.pyc file there was also a sim.so file which I hadn't noticed, and which took preference.
2012-11-27 16:55:29 max_albert: Thanks for helping in debugging, folkd!
2012-11-27 16:55:36 max_albert: s/folkd/folks/
2012-11-27 16:55:49 D_Chernyshenko_: Ahh, was that from Cython?
2012-11-27 16:56:04 fangohr-adium: Yes, cython is guilty.
2012-11-27 16:56:17 max_albert: Probably, but I can't remember having compiled anything in my source tree.
2012-11-27 16:56:28 max_albert: Although I probably did while testing the binary distribution stuff.
2012-11-28 10:16:22 mb8g11: Hi all
2012-11-28 10:49:47 mb8g11: Any objections to me installing a new pytest on summer? Our version doesn't know the "fixture" decorator.
2012-11-28 10:53:15 mb8g11: (I'm reading messages I miss on the IRC chat log btw.)
2012-11-28 12:32:50 fangohr-adium: Hi MA, no objections from me.
2012-11-28 13:17:38 D_Chernyshenko_: Hans, my meeting today is at 16:00 and Marijan's is at 14:00, is that correct?
2012-11-28 13:33:21 fangohr-adium: Hi Dmitri, yes 14 Marijan, 15 Weiwei and 16;00 you on my list.
2012-11-28 14:27:25 D_Chernyshenko_: Sigh, sundials library files are not versioned at all, and there's no get_version function in sundials.
2012-11-28 14:27:42 D_Chernyshenko_: So, no way to check if we've actually loaded the version of sundials we compiled against...
2012-11-28 14:28:44 D_Chernyshenko_: libsundials_cvode.so.1.0.0
2012-11-28 15:50:31 mb8g11: How irritating.
2012-11-28 15:53:57 D_Chernyshenko_: Hey guys, I've updated the sundials interface files in the main branch to work with 2.4 and 2.5. I've tested the library on 2.5, and it compiles on both. Let me know if you find any issues
2012-11-28 15:54:50 D_Chernyshenko_: There's still the minor issue that if we compile against say 2.4, and link against 2.5, *bad* things will happen
2012-11-28 15:55:12 D_Chernyshenko_: Link at run time that is (for example, when using a binary distribution)
2012-11-28 17:02:04 fangohr-adium: Hi Dmitri, am only now catching up with IRC â thanks for all that; great stuff.
2012-11-28 17:02:38 fangohr-adium: MA, it was the empty line in the doc string in the end? Quite a mean missing '\n' to find.
2012-11-28 17:14:24 fangohr-adium: Yes, compiles again on osiris.
2012-11-29 09:06:00 mb8g11: Indeed! (the missing newline)
2012-11-29 15:54:58 fangohr-adium: Max, thanks for the disk image.
2012-11-29 16:20:08 max_albert: You are welcome, Hans.
2012-11-29 16:36:06 fangohr-adium: I have downloaded this, but will not have time to start it now. Do I need to know any passwords (need sudo access at some point, I am sure).
2012-11-29 16:36:39 max_albert: If you need it, the user and password are both "finmag".
2012-11-29 16:39:45 fangohr-adium: Excellent, Ta.
2012-11-29 16:40:16 max_albert: I'm passing the thanks on to Marc-Antonio because he set it up. :)
2012-11-29 17:59:41 mb8g11: This was one of those "How could this ever work?" moments. Introduced a bug in our base class for the energies by accidentally deleting the code that multiplied by the unit length in one calculation. And then I noticed we were not doing this consistently...
2012-11-29 18:09:57 mb8g11: We still aren't.
2012-11-30 08:43:31 max_albert: MA (regarding your comment yesterday): Oh dear, that sounds kinda worrying... Looks like we really need to make sure we have a solid uni test suite that covers *all* the important functionality.
2012-11-30 08:45:48 max_albert: I saw that you added quite a few new tests in your recent refactoring/cleanup efforts. Great stuff! And much needed apparently...
2012-11-30 09:23:42 fangohr-adium: Well done, MA>
2012-11-30 09:27:18 max_albert: Hi Hans, I had a quick test of the timings() method in the simulation class.
2012-11-30 09:28:26 max_albert: It seems to work very well for a single simulation. However, when I have multiple Simulation objects simultaneously it always reports the same timing information.
2012-11-30 09:28:57 max_albert: Looking at the code, this is to be expected because it is not tied to the particular simulation instance but only calls timings.report_str().
2012-11-30 09:30:01 max_albert: Is there a way to bind the timing info to the particular simulation? Otherwise it probably makes sense to remove the Simulation.timings() method because it is confusing otherwise.
2012-11-30 09:30:35 max_albert: Also, say I have two simulations sim1 and sim2 and I call first sim1.relax() and then sim2.relax(). Which timing information will get printed?
2012-11-30 09:30:50 max_albert: Or is it the accumulated information of both?
2012-11-30 09:47:00 fangohr_: Hi Max, I expect it will be the accumulated information. If we want multiple simulations supported, we need to refactor (but I can't remember how much work this will be -- probably not too hard, we just need to have an object that stores the data and bind this to the simulation, rather than use a global variable). As always 'just' is easily said.
2012-11-30 09:48:24 fangohr_: There is another problem in interactive use: at the end of the timings report, it shows the total wall time from the start of the simulation to the printing of those timings, and what fraction of this time has been accounted for by the timining of subparts of the code. In interactive runs, this is pretty meaningless (as the total wall time includes the time that the user has been thinking before entering the next command).
2012-11-30 09:49:26 max_albert: Thanks for the explanations. I might add a tracker item for this and will have a casual look/think about it.
2012-11-30 13:43:35 fangohr-adium: Hi Max. Got an error on the rst output from nbconvert. Have you got a minute to look at this? (I could copy and paste but seems more complicated than showing you in person.)
2012-11-30 13:43:54 max_albert: Yes, sure. Will come over in a minute.
2012-11-30 13:44:12 fangohr-adium: Great, no particular rush.
2012-11-30 13:55:18 fangohr-adium: Max, I have found a way to 'fix' it. Still a bit odd; I should show you at some point.
2012-11-30 14:00:45 max_albert: Sorry, was talking to Luzanne because she asked me a question. Coming over now.
2012-12-03 08:04:19 mb8g11: Hi all.
2012-12-03 09:42:11 mb8g11: For the record, I am now using an ipython notebook.
2012-12-03 11:03:56 max_albert: Good morning Marc-Antonio!
2012-12-03 11:04:16 max_albert: You mean, you are accessing IRC via an ipython notebook? That's impressive... :)
2012-12-03 11:13:21 mb8g11: Haha, no, just using it for my development.
2012-12-03 11:13:25 max_albert: :-)
2012-12-03 11:14:44 mb8g11: Although I have used IRC over telnet before. You don't need to know much other than the IRC protocol (parts of it) and remembering to respond to the server pinging you.
2012-12-03 11:15:17 max_albert: Cool. I sometimes wish I knew more about these things...
2012-12-03 11:16:07 mb8g11: https://github.com/sMAshdot/snail an IRC client I started working on, written in the Ruby programming language.
2012-12-03 11:16:44 mb8g11: Last commit 3 years ago, haha.
2012-12-03 11:16:52 max_albert: Nice!
2012-12-03 11:16:54 max_albert: :-)
2012-12-03 11:17:08 max_albert: I like the hidden "MA" in the name. ;-)
2012-12-03 11:17:33 mb8g11: I was reading a lot of slashdot back then.
2012-12-03 11:20:34 mb8g11: Anywas, using the hysteresis_code you have written. It is straightforward and well documented. A joy to use!
2012-12-03 11:20:56 max_albert: Thank you. :)
2012-12-03 11:21:09 max_albert: I can say the same about your code in general though.
2012-12-03 11:21:21 max_albert: I didn't know you were running hysteresis simulations!?
2012-12-03 11:26:25 mb8g11: That's too sweet.
2012-12-03 11:26:47 mb8g11: Just reproducing a paper, they have two.
2012-12-03 11:27:20 mb8g11: I think it's a good way to check if I have done something wrong before I embark on the longer running simulations.
2012-12-03 12:39:13 fangohr-adium: Hi all.
2012-12-03 12:39:19 max_albert: Hi Hans!
2012-12-03 12:50:59 mb8g11: Hi Hans, Dmitri.
2012-12-03 15:12:26 max_albert: Yes, he is.
2012-12-03 15:45:19 max_albert: Hi Dmitri, are you there by any chance?
2012-12-03 16:07:29 D_Chernyshenko: Yeah, I'm here
2012-12-03 16:08:02 max_albert: Awesome!
2012-12-03 16:08:02 max_albert: I have a very quick question regarding building the "native" modules.
2012-12-03 16:08:33 max_albert: As far as I understand they are compiled in the native/src/... directories and then somehow copied to src/finmag/native. Is this correct?
2012-12-03 16:08:57 max_albert: If so, where does the copying happen? I couldn't find any command in native/Makefile which would accomplish this.
2012-12-03 16:09:14 D_Chernyshenko: There is no copying, the output files for the linker are in src/finmag/native directly
2012-12-03 16:09:37 D_Chernyshenko: C++ files are compiled into object files in the source tree (same directory as C++ files)
2012-12-03 16:09:48 D_Chernyshenko: Then the object files are linked with the .so file in src/finmag/native as the target
2012-12-03 16:09:53 D_Chernyshenko: Does this make sense?
2012-12-03 16:09:55 max_albert: *dang*
2012-12-03 16:10:02 max_albert: That was the sound of my head hitting the desk.
2012-12-03 16:10:07 max_albert: Yes, it does. I was confused, sorry.
2012-12-03 16:10:40 D_Chernyshenko: It might be a bit confusing but I guess it was the easiest way of not recompiling or copying anything if the source files are unchanged
2012-12-03 16:10:57 D_Chernyshenko: Since importing finmag.native calls make...
2012-12-03 16:12:01 max_albert: I just added Weiwei's fastdemag files to the main codebase, and some of the files are compiled using cython. At the moment I'm copying the output, but perhaps I should also just specify the target directory in the setup.py file directly (if that's possible).
2012-12-03 16:13:41 D_Chernyshenko: Copying is fine, not copying is marginally faster but as long as the files aren't rebuilt every time make is called, it should be OK :)
2012-12-03 16:14:29 max_albert: Ok, I guess I'll leave it as it is for now.
2012-12-03 16:15:14 D_Chernyshenko: Yeah, my way was the most straightforward way of doing it when I was writing the Makefile (easier to call the linker, than to call the linker then cp), it doesn't really make a difference otherwise...
2012-12-03 16:15:41 max_albert: That's true.
2012-12-03 16:34:10 max_albert: Hi Hans, I just saw your commits about the logging options. Nice! :)
2012-12-03 16:34:30 fangohr-adium: Ta. Done with the Ipython notebook â so much fun!
2012-12-03 16:34:40 max_albert: I know... ;-)
2012-12-03 16:34:58 max_albert: About the colour scheme "none": you mentioned problems with nbconvert in your commit message. Can you elaborate? Are colours a problem when converting notebooks?
2012-12-03 16:36:19 fangohr-adium: Yes, correct. When you run a job via "!python sim.py" rather than "%run sim.py", then escape codes in the output are shown correctly inside the output box of the notebook, but nbconvert chokes when it has to convert them.
2012-12-03 16:37:10 max_albert: Interesting. I'll keep this in mind and maybe submit a pull request for nbconvert if I find the time to fix this.
2012-12-03 16:37:23 fangohr-adium: Running the simulation using '%run sim.py' is fine â coloured output from within Python is respected (or at least does not cause a halt of the conversion). However, using the magic 'run' seems not to be compatible with our input argument parsing: Options such as '-v info' seem to be ignored. That's why I used '!' instead.
2012-12-03 16:38:58 max_albert: It's also interesting that the options are ignored, because the documentation for %run seems to suggest otherwise.
2012-12-03 16:39:14 max_albert: I seem to remember that I had a similar issue once. It should be in the Pivotal tracker.
2012-12-03 16:40:10 max_albert: Oh yes, I found it. The title of the tracker issue is "Using argparse in simulation scripts does not work (arguments get overwritten by Finmag)"
2012-12-03 16:40:19 max_albert: Can I somehow copy a link to that issue directly?
2012-12-04 00:16:09 fangohr: Hi Max, in response to your question regarding direct access to issue URL: within the tracker, there is a paperclick icon. If you click on that, it is meant to copy the URL of the issue, so that you can paste that where you need it.
2012-12-04 00:16:33 fangohr: If you want to chat about logging stuff, come and find me tomorro after 11:00; great progress with the global log file.
2012-12-04 10:59:44 fangohr-adium1: Good Morning (back from teachingâ¦)
2012-12-04 10:59:57 max_albert: Good morning Hans.
2012-12-04 11:03:05 D_Chernyshenko: Morning
2012-12-04 14:12:08 max_albert: Hi Hans, as of the latest commit we now have per-simulation logging enabled. Feel free to test and report any issues.
2012-12-04 14:18:56 fangohr-adium1: Hi Max, just done that â great.
2012-12-04 14:19:27 fangohr-adium1: One suggestion for improvement: certainly for the global log file, and maybe for the others as well: should be replace the time tag at the beginning of each line with a date-time tag?
2012-12-04 14:19:45 max_albert: Yes, I had considered that as well.
2012-12-04 14:20:02 max_albert: I disabled it a while ago because it takes up a lot of space at the beginning of each line.
2012-12-04 14:20:20 max_albert: But I guess it could be useful to have it per default.
2012-12-04 14:20:36 fangohr-adium1: Yes, a common problem. We could chose a denser date format, even something like 20121204-14:10 would be better than 14:10.
2012-12-04 14:20:56 fangohr-adium1: Also, when simulations run multiple days, this is quite convenient.
2012-12-04 14:21:03 max_albert: That would only save two characters, though. :)
2012-12-04 14:21:11 fangohr-adium1: I except the space usage is annoying.
2012-12-04 14:21:26 fangohr-adium1: (Maybe you just need to get a bigger screen â¦?)
2012-12-04 14:21:40 max_albert: Well, we could have the timestamp template string as a configuration option in .finmagrc.
2012-12-04 14:21:51 max_albert: Oh, yes! A bigger screen would be very useful. ;-)
2012-12-04 14:22:26 max_albert: By default the timestamp could include the date, but then a user could remove it if it takes up too much space.
2012-12-04 14:22:30 fangohr-adium1: I'd keep it simple and just put it in the default formatter for all the logs. If it is unbearable, we could use only the time in the Simulation log, and add an extra line at the beginning that states the date.
2012-12-04 14:22:59 fangohr-adium1: Yes, we are thinking along the same lines. I would not introduce a config option here â too much work, and not worth it I think. If we really need it, we will find out soon.
2012-12-04 14:23:45 max_albert: Ok.
2012-12-04 14:24:19 fangohr-adium1: I have happily accept the completed stories on pivotal â very nice to see some green items :)
2012-12-04 14:25:49 max_albert: :)
2012-12-04 14:26:05 max_albert: I just pushed the change for the timestamp so that it now includes the date.
2012-12-04 14:26:56 fangohr-adium1: Ta.
2012-12-04 14:27:34 max_albert: You are right, it looks much more useful that way.
2012-12-05 15:11:31 mb8g11: I'll be on skype for the meeting with the ip students in time.
2012-12-06 09:27:22 fangohr-adium1: Good Morning, Max and DokosBot.
2012-12-06 16:14:50 fangohr: Max, I have run the dist-wrapper script earlier. Fantastic; great job. (Also many thanks to MA and Neil who have helped in the earlier stages of this, of course.)
2012-12-06 16:15:29 max_albert: Great! Has it worked for you? Did you manage to create a functional tarball?
2012-12-06 16:16:07 fangohr: Not quite functional; am just looking at this. Some ImportError "No module named tests.demag.probems".
2012-12-06 16:16:45 max_albert: I have run into a strange bug where one of the tests wouldn't pass even though it passes in our regular distribution.
2012-12-06 16:16:46 fangohr: But this is only after unpacking the tar-ball on a new machine â so I got pretty far.
2012-12-06 16:18:11 fangohr: Your strange bug should show up before the tarball is created, correct?
2012-12-06 16:18:37 max_albert: I tried to debug this and bisect the history. At first it seems like hardly any of the revisions compiled at all with the dist-wrapper script (or it compiled and then the tests failed), but I am currently not sure if there is a problem with wrong environment variables. Am just investigating this.
2012-12-06 16:18:58 max_albert: Yes, it would show up when just running dist-wrapper.py (*including* the test suite, so without --skip-tests).
2012-12-06 16:19:46 fangohr: My error may also be a PYTHONPATH issue. I'll look into this and beep again.
2012-12-06 16:20:00 max_albert: Ok.
2012-12-06 16:20:27 fangohr: Just to add that I had seen a long time ago that some of the Cython-compiled code did fail tests. I could never track this down exacty, and ended up excluding certain files from the compilation to work around tat. (You will have seen the list of excluded files somewhere.)
2012-12-06 16:22:22 max_albert: Oh yes I have... It caused me a lot of headache a while ago when I tried to debug something and attempted to write a test for which files were copied into the tarball. I gave up with that test in the end... ;-)
2012-12-06 16:22:51 max_albert: Just to add that this is not your fault of course. :)
2012-12-06 16:26:56 fangohr: No worries ;-)
2012-12-06 16:27:17 fangohr: Have found a possible problem, am trying the next iteration of the distributed code.
2012-12-06 16:28:26 max_albert: What is the problem?
2012-12-06 16:29:12 fangohr: See the diff in https://bitbucket.org/fangohr/finmag/commits/522275d716eeec58778035c9456b85d6 â I hope that solves the problem.
2012-12-06 16:29:44 fangohr: Looks like a remainder from what Gabriel did. Not sure why this has not caused any problems before. So maybe it is just a symptom of something else going wrong (for me here).
2012-12-06 16:37:25 fangohr: The fact that the date in the tarball is taken from the date of the last commit is very cool.
2012-12-06 16:38:47 max_albert: Yes, it was a good suggestion to make the date in the tarball reflect the date of the revision that it is built from.
2012-12-06 16:39:15 fangohr: But to see in actually working is nice!
2012-12-06 16:47:05 fangohr: Seems to work for me now. Am updating documentation for user installation. Haven't come to the licence check bit yet.
2012-12-06 16:47:47 max_albert: Ok, that's great to hear. I'm still having some troubles over her (seemingly related to environment variables) but am investigating.
2012-12-06 16:48:00 max_albert: And it has worked before, so I'm not too worried.
2012-12-06 16:50:02 max_albert: Ok, looks like a non-issue. I think the problems stemmed from the fact that I was trying to check out older revisions for building the tarball, but the dist-wrapper script assumed a certain setup which was only introduced relatively recently.
2012-12-06 16:51:28 max_albert: Which is a pity, because this means the ability to check out older revisions is not as useful as I thought it would be.
2012-12-06 16:51:41 max_albert: It may become more useful over time, though.
2012-12-06 17:07:22 fangohr: I am sure it will.
2012-12-06 17:10:24 fangohr: Max, there are a few spurious files in the tar ball (at the top level, i.e. even above the finmag directory). Files such as unnamed.log, box-2_0-1â¦
2012-12-06 17:10:33 fangohr: I was just looking where these are included, but I can't find the Makefile.
2012-12-06 17:10:41 fangohr: Should this be in finmag-dist?
2012-12-06 17:10:50 fangohr: I guess I am just blind, really...
2012-12-06 17:11:21 max_albert: Yes, I saw this recently as well and wanted to change it but didn't have time.
2012-12-06 17:11:25 max_albert: The problem is that finmag-dist works by blacklisting files, not whitelisting them.
2012-12-06 17:12:18 max_albert: So in a fresh checkout, only the right files are included. But if some additional files were added and these are not excluded by the rules, they are copied as well.
2012-12-06 17:12:22 fangohr: Okay, I see. No worries. Found the Makefile now: in finmag/src
2012-12-06 17:13:23 max_albert: The rules should be in the file distcp.py (IIRC).
2012-12-06 17:13:49 max_albert: In the regular Finmag repository, that is (not in finmag-dist).
2012-12-06 17:14:03 fangohr: Okay, ta.
2012-12-06 17:14:39 fangohr: Over and out for now, probably back later.
2012-12-07 12:31:28 fangohr-adium1: Max, many thanks for adding the stories from today's discussion to the tracker.
2012-12-07 13:20:01 fangohr-adium1: Hm, good point Max (regarding date stamps).
2012-12-07 14:13:32 mb8g11: :)
2012-12-07 16:13:09 fangohr1: Hi MA :)
2012-12-07 16:34:47 fangohr1: Hi Dmitri.
2012-12-07 17:07:56 fangohr1: Over and out.
2012-12-10 09:11:58 fangohr: Morning Mart-Antonio, Max and DokosBot.
2012-12-10 09:58:24 mb8g11: Good morning Hans!
2012-12-10 10:25:14 mb8g11: exit
2012-12-11 07:51:06 mb8g11: Hi all
2012-12-11 09:07:31 max_albert: Good morning!
2012-12-11 14:18:19 fangohr: Good morning â late response ;-)
2012-12-11 14:19:16 max_albert: I just saw your latest bunch of commits, Hans. Looks awesome!
2012-12-11 14:22:44 fangohr: Ta; you have also been doing stuff :)
2012-12-11 14:23:05 fangohr: Need to disappear for a while and will be back later.
2012-12-11 14:23:12 max_albert: See you!
2012-12-11 14:29:04 fangohr: [Still hereâ¦]: have you changed the ndt file format? You need to update the barmini_test.ndt.ref file as well I think.
2012-12-11 14:29:21 max_albert: Whoops, yes. Thank you.
2012-12-11 14:29:57 max_albert: I added '#' symbols as comment indicators for the two header lines so that we can use numpy.loadtxt() on the file directly.
2012-12-11 14:29:59 fangohr: I would just do it, but the interesting thing is that when I diff the new barmini.ndt and the ref file, the first number for the time has actually changed.
2012-12-11 14:30:03 fangohr: Are you running this on 12.10?
2012-12-11 14:30:37 max_albert: Oh, and good point about the time. That might be related to the buglet I mentioned to you this morning.
2012-12-11 14:30:51 max_albert: But I'll look into it.
2012-12-11 14:31:12 fangohr: Great; thank you. Keep me posted [really going now.]
2012-12-11 14:31:30 max_albert: As an aside, I really like how the versions of dependencies are now reported. If we need to extend this, it might be possible to use the Sumatra API for this (but I haven't looked into it, and it may be overkill; just thought I'd mention it).
2012-12-11 14:32:00 fangohr: Thanks for the feedback. :)
2012-12-11 15:12:08 mb8g11: Max, is Weiwei in the office?
2012-12-11 15:12:26 max_albert: Yes, he is.
2012-12-11 15:44:25 max_albert: Hi Hans, I found out what the reason for the discrepancy from the referenc .ndt file is. The change was introduced in commit 2391:236277b3589e. This might need some disussing (but I need to leave for the time being). Feel free to revert it for now if you'd prefer the old behaviour (not sure if any tests depend on it).
2012-12-11 15:44:31 max_albert: Over and out for now.
2012-12-12 09:04:07 fangohr_: Good Morning all.
------- [ DokosBot crashed at this point, and we didn't notice until 17 Dec ] -------
Wednesday, 12 December 2012
09:03
FANGOHR_
Good Morning all.
09:03
You have connected
13:31
D_Chernyshenko [~chern@host-78-147-189-92.as13285.net] entered the room.
13:45
MAX_ALBERT
Hi Hans, I saw that the Jenkins build is still broken. AFAICS there are two reasons for this. One is trivial (used np instead of numpy to refer to the module), but one might be more serious or at least requires thinking/discussion.
13:58
FANGOHR-ADIUM
Yes, is the other one about the time? I am already looking at our integrator object to try to better understand the roles of the different times.
13:59
D_Chernyshenko left the room (quit: Ping timeout: 240 seconds).
13:59
MAX_ALBERT
Exactly. If you look at the Jenkins output (for example: http://summer.kk.soton.ac.uk:8080/job/finmag/1118/console) then near the bottom you'll see that one of the errors is due to a difference of the barmini_test.ndt output to the reference file.
14:01
The only differences occur in the 'time' field, and they are very small.
14:01
But it looks like we cannot rely on Sundials to always integrate up to exactly the same time.
14:01
Also, I was wondering which of the times that we store (sim.t and sim.llg.t) is actually the correct one to use in this context.
14:02
I seem to remember a discussion about this, and IIRC then someone said that Sundials integrates a bit further, but the returned vector actually corresponds to the precise timestep that we asked for, which is stored in sim.t (I think?).
14:03
FANGOHR-ADIUM
I am somewhat relaxed about not getting the the same numbers from sundials down to the last digit. This might be okay, and change from sundials version to sundials version (are running on Ubuntu 12.10?).
14:04
for the tests, we could compare the numerical values for a tolerance rather than compare the file byte by byte.
14:04
However, I am concerned that we need to understand 'which time' is the right one to use, and to make sure we update this in the right places.
14:05
MAX_ALBERT
Yes, I agree.
14:05
FANGOHR-ADIUM
Yes, you remember right regarding cvode using it's own time steps which are somewhat independent of the times for which the user requests the solution.
14:05
I am trying to put an example together that shows this, but need to see whether we have access to all the relevant bits of information already (at the Python level).
14:05
MAX_ALBERT
Sounds like a good idea.
14:06
I'm wondering what to do with our test in test_writing_data.py, though. Looks like we can't just use a reference file because of the small differences in the times.
14:07
FANGOHR-ADIUM
Yes â may have to rewrite to compare values numerically.
14:11
MAX_ALBERT
A quick fix could be to simply have one digit less of precision for the times. However, that feels like a bit of cheating (and it should definitely be documented somewhere).
14:11
Ah, comparing numerically is a good idea, too. I may try that.
14:12
FANGOHR-ADIUM
MA, are you out there?
14:14
MAX_ALBERT
For the record, I just pushed a change with the numerical comparison of the output. In doing this I also saw that one needs to be a bit careful when using numpy.allclose() to compare very small float values (such as the integration times, which are on the order of 1e-12). I added a tracker issue for this because there is a small chance that one or two of our tests suffer from a problem in this regard (they might not, but just to be on the safe s
15:45
ide).
15:45
MAX_ALBERT
Also, I wonder why it is that Sundials returns slightly different integration times for each run. I'm not sure if this is only due to different Sundials versions (but will have to investigate a bit further).
15:54
As an aside, Weiwei just pointed out that we may have another (unrelated) small bug in the code, which is apparently due to the fact that the data returned from Sundials might not be copied into our python-level array straight away.
15:55
He has a nice example in a short ipython notebook illustrating this, and I think he is going to submit it as a test soon (hopefully along with the proper fix ).
15:58
FANGOHR-ADIUM
Hi â back now; was in meeting with Dmitri and something else. I have made some progress with the cvode object, and will hopefully commit that soon (even if prelimenary). This will be a good basis to sort out any cvode time confusion.
16:38
Thanks for the allclose study; very useful to know.
16:39
(Need to pick some reports now.)
16:39
FANGOHR-ADIUM
pick -> pick up
16:50
FANGOHR-ADIUM
Over and out.
17:19
fangohr left the room (quit: Quit: Leaving.).
17:21
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
21:15
FANGOHR
Greetings.
21:15
Thursday, 13 December 2012
01:07
fangohr left the room (quit: Quit: Leaving.).
01:07
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
01:38
fangohr left the room (quit: Ping timeout: 244 seconds).
01:47
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
02:14
fangohr left the room (quit: Ping timeout: 244 seconds).
02:18
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
02:44
fangohr left the room (quit: Quit: Leaving.).
08:25
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
08:55
fangohr left the room (quit: Ping timeout: 245 seconds).
09:04
mb8g11_ [~smashdot@e176022084.adsl.alicedsl.de] entered the room.
09:21
mb8g11_ left the room (quit: Client Quit).
09:21
mb8g11 left the room (quit: Quit: leaving).
09:23
mb8g11 [~smashdot@ip-038-169.vpn.soton.ac.uk] entered the room.
09:40
fangohr [~fangohr@ip-096-214.net-096.dhcp.soton.ac.uk] entered the room.
11:35
FANGOHR-ADIUM
Good morning all.
11:39
MAX_ALBERT
Good morning Hans.
11:39
FANGOHR-ADIUM
MA, thanks for moving the helpers tests around. I am not sure the name helpers_test.py will be autotested (it may be). Maybe test_helpers.py would be more inline with most (!) of the other tests?
11:40
MAX_ALBERT
It does seem to be picked up (you can run "py.test --collectonly" to find out which tests are being collected). However, I agree that it would be good to stick to a convention so that we know just from the filenames which files are test files and which aren't. (Perhaps it's even worth giving the test files a more distinguished prefix, such as finmagtest_... or something else?)
11:52
fangohr1 [~Adium@ip-205-013.eduroam.soton.ac.uk] entered the room.
11:52
MAX_ALBERT
Btw, Hans, do you have the Paraview guide lying around by any chance?
11:52
FANGOHR-ADIUM
I think test_ should be fine. The reason it picks up the *_test is that I added this to pytest.ini (https://bitbucket.org/fangohr/finmag/src/tip/pytest.ini?at=default) when I noticed that Dmitri's older Unittest-framework tests were named like that. Still, moving towards one convention would be good.
11:55
Max, yes, the guide is here. Feel free to pick it up.
11:56
SCHTOPP
11:56
I have the VTK book, not the paraview one.
11:56
fangohr1 left the room (quit: Ping timeout: 256 seconds).
11:56
ww1g11 [~Thunderbi@ip-097-039.net-097.dhcp.soton.ac.uk] entered the room.
12:07
fangohr1 [~Adium@ip-205-013.eduroam.soton.ac.uk] entered the room.
12:16
FANGOHR-ADIUM
Hei Weiwei 
12:23
Thanks for the timing work yesterday.
12:23
MAX_ALBERT
Hans, for your information I couldn't find the Paraview book in our office space either. Not a problem at all, would just be good to know where it has ended up.
12:33
WW1G11
, I am configuring the Thunderbird -- still fail to send email, but succeed in receiving emails
12:34
FANGOHR-ADIUM
Weiwei, best to use the imap.exchange.soton.ac.uk interface if you don't do so already.
12:35
WW1G11
yes, that's what I am using to receive emails
12:37
MB8G11
Standard test discovery rules include test_*.py and *_test.py files. I prefer the latter for unit tests which belong to exactly one implementation file, because that shows them next to each other in directory listings.
12:44
However, I named a few files *_tests.py with an additional s, that's wrong and I will fix it soon.
12:44
Thank you for including them in the pytest.ini.
12:44
MAX_ALBERT
MA, that's a good point about the files being listed together.
12:44
FANGOHR-ADIUM
Hi MA, okay - good point about being next to each other in directory listing.
12:44
I think Dmitri's tests may be called *_tests.py (with the plural 's') and that's why I have the extra s in the pytest.ini. Maybe we should rename dmitri's test files, and then stick to test_* for regression/system tests and *_test for unit tests?
12:46
MB8G11
I like that.
12:46
Will rename now.
12:47
FANGOHR-ADIUM
Thanks. Can you also update pytest.ini while you are at this?
12:48
MB8G11
Of course.
12:49
fangohr left the room (quit: Quit: Leaving.).
13:42
MAX_ALBERT
Hi Hans, I just had a quick look at your latest tailored-tutorial work. Looks nice!
13:57
FANGOHR-ADIUM
Ta 
13:57
MAX_ALBERT
The style file is cool. 
13:58
FANGOHR-ADIUM
Next, I'll have to do some work on the content .
13:58
Before that, I'll go into a couple of meetings though ...
13:58
MAX_ALBERT
I saw that you had to make some adaptations, though, due to the way the rst2html conversion works
13:58
I still think this might not be necessary if we use nbconvert directly to convert from .ipynb to html.
13:59
Should be easy to add (although not sure if I can look into it today).
13:59
FANGOHR1
Hi Max, adaptions are minimal (other than adding newlines between separate rst files that I concatenate I can't think of any?), but if putting together a straight conversion to html is easy, please do. Not urgent though.
14:32
MAX_ALBERT
Ok, might look into it if I have time (but no promise).
14:32
FANGOHR1
Max, getting the 2d plotting of the magnetisation to work (as a library function using matplotlib as discussed earlier today) is probably more useful (in my view) as we get new functionality out of that.
14:39
MAX_ALBERT
I agree. That's what I'm working on at the moment. 
14:39
D_Chernyshenko [~chern@host-78-147-183-109.as13285.net] entered the room.
15:01
FANGOHR_
Max, regarding the Paraview book: have you checked the drawers and the book shelf? I had another look around here and can't find it. (Which doesn't mean it is not actually here, of course, ...)
15:04
MAX_ALBERT
Yes, I have checked them (although not the drawers in other people's desks, only the 'public' ones).
15:05
Which also doesn't mean that it isn't here, of course... 
15:05
FANGOHR1
Okay, thanks. It will surface again when we expect it the least â¦.
15:05
MAX_ALBERT
Yes, I guess so...
15:06
D_CHERNYSHENKO
Sigh.
15:32
FANGOHR1
Dmitri, do you want to join me for a coffee?
15:33
D_CHERNYSHENKO
Hans, doesn't seem like I have enough material to show you yet.. However I've finally started to make some progress, would you mind looking at the PDF draft a bit later today?
15:33
Erm
15:33
FANGOHR1
Okay, can do.
15:33
If you get something to me by 18:00, I can have a look at it. If you are around 18:00 to 18:15 or so (when I shoud be back in the office)  we could have a short chat about it.
15:34
D_CHERNYSHENKO
Ok!
15:35
FANGOHR1
Deal.
15:35
MB8G11
Of course.n.H print solution.H.reshape((3, -1)).mean(1) assert False
15:53
sorry
15:54
FANGOHR1
Impressive series of commits going on everywhere! I like it.
15:54
mb8g11 left the room (quit: Quit: leaving).
15:58
mb8g11 [~smashdot@e176022084.adsl.alicedsl.de] entered the room.
15:59
mb8g11_ [~smashdot@e176018229.adsl.alicedsl.de] entered the room.
16:12
mb8g11 left the room (quit: Ping timeout: 260 seconds).
16:15
fangohr1 left the room (quit: Quit: Leaving.).
16:40
fangohr [~Adium@ip-162-244.eduroam.soton.ac.uk] entered the room.
17:09
fangohr left the room (quit: Quit: Leaving.).
17:38
D_Chernyshenko left the room (quit: Quit: Ex-Chat).
17:45
D_Chernyshenko [~D_Chernys@host-78-147-183-109.as13285.net] entered the room.
17:49
D_Chernyshenko left the room (quit: Ping timeout: 255 seconds).
17:54
D_Chernyshenko [~chern@mu.kk.soton.ac.uk] entered the room.
18:13
mb8g11_ left the room (quit: Quit: leaving).
18:25
D_Chernyshenko_ [~D_Chernys@host-92-24-213-150.ppp.as43234.net] entered the room.
18:40
FANGOHR-ADIUM
Over and out.
18:40
D_Chernyshenko__ [~D_Chernys@host-92-24-213-150.ppp.as43234.net] entered the room.
20:25
D_Chernyshenko_ left the room (quit: *.net *.split).
20:34
D_Chernyshenko left the room (quit: *.net *.split).
20:34
D_Chernyshenko [~chern@mu.kk.soton.ac.uk] entered the room.
20:42
ww1g11 left the room (quit: Quit: ww1g11).
20:54
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
21:14
FANGOHR
Nice work, Max.
21:47
MAX_ALBERT
? 
21:47
FANGOHR
(Seeing commits and comments in my inbox.)
21:49
MAX_ALBERT
Ah... I thought you were referring to my last commit, which wasn't *that* spectacular. 
21:50
Btw, I just had another quick look at your tailored tutorials and there seems to be some interference between the regular documentation and the build of the tailored ones.
21:52
More precisely, if I try to build the normal docs after a tutorial then sphinx picks up the file /doc/tailored_tutorials/_build/finmag-tutorial-Hesjedahl/index.rst and complains that it isn't contained in any toctree.
21:54
I presume we need to exclude /doc/tailored_tutorials/ from being searched. How can we do that with sphinx?
21:54
FANGOHR
You are right, I had noticed that as well. An easy solution is to delete the directory _build/finmag-tutorial/hesjedahl. This should be done automatically by the make-tailored-tutorial-tarball.py script now. Are you using the latest code (or did I forget to push this)?
21:56
MAX_ALBERT
No, you did push it, but I had an error because the notebook files weren't present in ipython_notebooks_dest/ yet (because I hadn't built the regular documentation), so I guess the script exited prematurely and didn't delete the _build directory.
21:56
FANGOHR
Ah, yes. This dependency is not checked yet, and no useful error message is produced when there is nothing in the ipython_notebooks_dest folder - sorry.
22:30
MAX_ALBERT
No problem.  It's obvious where the error comes from and thus easy to fix. But I guess it can't hurt to exclude /doc/tailored_tutorials/ from the sphinx build anyway.
22:31
FANGOHR
Yes, and it 'should' be relatively easy to exclude these from the sphinx build. If not, we could move the tailored tutorial scripts somewhere else.
22:32
Over and out for today â have a good night.
22:32
MAX_ALBERT
Good night!
22:32
(P.S.: Do you know how to exclude them?)
22:32
FANGOHR
No, don't know 
22:34
MAX_ALBERT
Ok. Have a good night!
22:34
(P.P.S.: Never mind, found it. )
22:37
fangohr left the room (quit: Quit: Leaving.).
22:39
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
23:10
fangohr left the room (quit: Ping timeout: 252 seconds).
23:58
Friday, 14 December 2012
03:41
D_Chernyshenko__ left the room (quit: Quit: Leaving).
03:41
fangohr [~Adium@ip-207-088.eduroam.soton.ac.uk] entered the room.
09:24
fangohr left the room (quit: Read error: Connection reset by peer).
09:24
fangohr [~Adium@ip-207-088.eduroam.soton.ac.uk] entered the room.
09:24
FANGOHR-ADIUM
Morning DokosBot and Max.
09:24
mb8g11 [~smashdot@e176018229.adsl.alicedsl.de] entered the room.
09:32
FANGOHR-ADIUM
Good Morning, Marc-Antonio.
09:32
MB8G11
Good morning, Hans!
09:44
FANGOHR-ADIUM
Not that I know about, MA.
09:48

09:48
I thought being awake and online on a (at least here) grey and rainy (and somewhat dark) Friday morning, deserves some credit . 
09:48
MB8G11
Haha. The sky is grey here as well, but everything below is white, and has been for a week 
09:53
I'm starting with benchmarking stuff. Weiwei's dispersion relation ran for 3 days on my Southampton machine, integrating for 2 ns. I can't even imagine what the proposed standard problem would take (integrating for 5 ns).
09:54
Has Anil ever mentioned how long the simulations ran with nmag?
09:55
FANGOHR-ADIUM
No. But it is not unusual for micromagnetic simulations to run weeks, so they would probably not mention that something takes 10 days or so to run.
09:55
The art is to make sure everything works okay on a small system, then to run the big one.
09:55
And ideally never having to repeat running the big one 
09:56
That's why data saving as the simulation runs is important, so that all the post-processing can be done later. Looking into systematic data saving is on my list, although for your problem just probing the field at particular points regularly in time and space should be fine.
09:56
MB8G11
I see.
09:59
Thanks for the info, that'll change my todo for today slightly.
10:00
mb8g11 left the room (quit: Quit: leaving).
10:41
mb8g11 [~smashdot@e176018229.adsl.alicedsl.de] entered the room.
11:17
mb8g11 left the room (quit: Quit: Lost terminal).
11:26
mb8g11 [~smashdot@e176018229.adsl.alicedsl.de] entered the room.
11:48
fangohr left the room (quit: Quit: Leaving.).
12:01
fangohr [~Adium@ip-205-225.eduroam.soton.ac.uk] entered the room.
13:54
MB8G11
Is the meeting soon?
14:57
FANGOHR
Should be. Will you join online?
14:57
MB8G11
Yes.
14:58
fangohr1 [~fangohr@ip-097-169.net-097.dhcp.soton.ac.uk] entered the room.
14:58
FANGOHR
Okay, I am booting up a skype-enabled computer...
14:58
MB8G11
Great.
15:01
mb8g11 left the room (quit: Ping timeout: 264 seconds).
16:15
MAX_ALBERT
Hi Hans, I have just pushed a change which adds a simple sphinx extension that allows us to reference .ipynb files directly from .rst.
17:26
The syntax is like this:
17:26
   :ipynb:`path/to/notebook.ipynb`
17:26
This copies the .ipynb file into the subdirectory _build/html/ipynb/, converts it to .html (using nbconvert) and stores the result in _build/html/ipynb_html/
17:27
It also creates a link in the documentation to the .html file (and we could optionally add a link to the original .ipynb file, too).
17:27
It still needs some polishing, but it will eventually give us a much cleaner way of including notebooks in the documentation, and also to build targeted documentation for collaborators.
17:28
At the moment, it only works for the 'html' builder (not 'singlehtml' or others), and it doesn't create TOC entries, so it's a bit limited.
17:28
Also, the :ipynb: syntax only accepts a single file as argument.
17:29
However, it should be easy to make it work with a directory, so that that directory is searched for .ipynb files and they are all included in the documentation.
17:29
Anyway, feel free to play with it if you want, otherwise I'll get back to it when I find the time.
17:29
Need to go home packing now, and will be off early tomorrow. My internet access is likely to be limited, just so you know.
17:30
Have a good Christmas, everybody!
17:30
Over and out from me for now.
17:30
fangohr1 left the room (quit: Quit: Leaving.).
17:30
fangohr left the room (quit: Quit: Leaving.).
17:31
FANGOHR-ADIUM
Nice, many thanks. Have good Christmas, too! Over and out here, too.
17:33
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
17:59
fangohr left the room (quit: Client Quit).
17:59
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
18:00
mb8g11 [~smashdot@e176020163.adsl.alicedsl.de] entered the room.
18:09
MB8G11
This settles it: https://bitbucket.org/fangohr/finmag/src/6789a79d38149373b61583adfd9a24cf65700ba3/sandbox/benchmarks/updating_expression.png
18:09
no need to write to the dolfin mailing list then. Dashed line - function depends only on one variable (time), solid line - function depends on space too
18:10
mb8g11 left the room (quit: Client Quit).
18:12
fangohr left the room (quit: Quit: Leaving.).
18:40
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
19:11
fangohr left the room (quit: Ping timeout: 265 seconds).
19:16
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
19:42
fangohr1 [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
21:24
fangohr left the room (quit: Read error: Connection reset by peer).
21:24
fangohr1 left the room (quit: Quit: Leaving.).
23:11
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
23:41
Saturday, 15 December 2012
00:09
fangohr left the room (quit: Ping timeout: 248 seconds).
00:09
fangohr_ left the room (quit: *.net *.split).
01:38
max_albert left the room (quit: *.net *.split).
01:38
fangohr_ [~fangohr@152.78.96.2] entered the room.
01:59
max_albert [~albert@hathor.kk.soton.ac.uk] entered the room.
02:03
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
08:22
fangohr left the room (quit: Quit: Leaving.).
08:36
fangohr [~Adium@ip-036-149.vpn.soton.ac.uk] entered the room.
08:36
fangohr left the room (quit: Quit: Leaving.).
08:44
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
09:06
fangohr left the room (quit: Quit: Leaving.).
09:20
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
09:50
fangohr left the room (quit: Ping timeout: 265 seconds).
09:55
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
10:21
fangohr left the room (quit: Ping timeout: 250 seconds).
10:26
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
10:42
fangohr left the room (quit: Client Quit).
10:46
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
21:11
fangohr left the room (quit: Quit: Leaving.).
22:52
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
23:23
fangohr left the room (quit: Ping timeout: 252 seconds).
23:27
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
23:53
fangohr left the room (quit: Read error: Connection reset by peer).
23:56
fangohr1 [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
23:56
Sunday, 16 December 2012
00:01
fangohr1 left the room (quit: Quit: Leaving.).
00:01
You have disconnected
06:25
You have connected
06:25
fangohr-adium left the room (quit: Read error: Connection reset by peer).
06:25
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
09:25
fangohr left the room (quit: Client Quit).
09:28
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
09:58
fangohr left the room (quit: Ping timeout: 260 seconds).
10:07
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
10:15
fangohr left the room (quit: Quit: Leaving.).
10:22
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
10:22
fangohr left the room (quit: Quit: Leaving.).
10:52
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
10:54
fangohr left the room (quit: Quit: Leaving.).
11:02
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
11:17
fangohr left the room (quit: Quit: Leaving.).
11:32
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
11:51
fangohr left the room (quit: Quit: Leaving.).
11:56
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
12:57
fangohr left the room (quit: Ping timeout: 256 seconds).
13:01
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
13:28
fangohr left the room (quit: Ping timeout: 245 seconds).
13:32
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
13:59
fangohr left the room (quit: Ping timeout: 244 seconds).
14:03
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
14:29
You have disconnected
14:36
You have connected
14:37
fangohr-adium1 left the room (quit: Ping timeout: 245 seconds).
14:37
max_albert left the room (quit: Ping timeout: 276 seconds).
14:38
max_albert [~albert@hathor.kk.soton.ac.uk] entered the room.
14:38
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
15:00
fangohr left the room (quit: Quit: Leaving.).
18:55
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
19:54
fangohr left the room (quit: Ping timeout: 264 seconds).
19:59
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
20:27
fangohr left the room (quit: Quit: Leaving.).
21:51
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
21:51
fangohr left the room (quit: Quit: Leaving.).
22:12
fangohr [~Adium@93-97-71-176.zone5.bethere.co.uk] entered the room.
22:12
fangohr left the room (quit: Quit: Leaving.).
23:05
Monday, 17 December 2012
08:56
mb8g11 [~smashdot@e176001120.adsl.alicedsl.de] entered the room.
08:56
MB8G11
Good morning.
08:57
fangohr [~fangohr@ip-097-169.net-097.dhcp.soton.ac.uk] entered the room.
09:15
FANGOHR-ADIUM
Good Morning 
09:15
MA, I need to do some admin/teaching stuff before I can embark on the more interesting debugging/coding today.
09:16
MB8G11
I'll have a go at it.
09:17
FANGOHR-ADIUM
I didn't mean to suggest you should â just wanted to explain why I can't get to this immediately. 
09:20
fangohr left the room (quit: Quit: Leaving.).
09:29
MB8G11
Be back later.
13:53
mb8g11 left the room (quit: Quit: leaving).
13:53
FANGOHR-ADIUM
Righteho.
13:53
fangohr_ left the room (quit: Quit: Leaving).
15:03
fangohr [~fangohr@152.78.96.2] entered the room.
15:46
FANGOHR-ADIUM
Hi MA, I think the key change was line 203 in https://bitbucket.org/fangohr/finmag/changeset/359efbeccdb2/ - well done. I also see, inspecting the code for the integrators, that we need the cur_t: (i) sundials is unhappy if we initialise it for integration from t=0 with a given y0, and then ask for the solution at t=0. So we catch this in the run_until method. I have added an extra safety exception there (https://bitbucket.org/fangohr/finmag/commits/05111d2435c77c0b294ea8f7e86b12baa67fa41b#Lsrc/finmag/sim/integrator/init.pyF198T201)
16:12
(ii) the other use of cur_t is for the snapshot methods.
16:12
I have set the state for this story to 'finish'. MA, do you want to accept this?
16:13
mb8g11 [~smashdot@e176000019.adsl.alicedsl.de] entered the room.
16:15
MB8G11
Hi
16:18
FANGOHR-ADIUM
Hi . You have just about missed my comments on your nice commits. Can you see them on the jenkins:8008 port?
16:19
MB8G11
Will do. Saw your commits on bitbucket though.
16:28
DokosBot needs a "last 5 messages" feature.
16:28
mb8g11 left the room (quit: Quit: leaving).
16:28
mb8g11 [~smashdot@ip-036-209.vpn.soton.ac.uk] entered the room.
16:29
MB8G11
Oooh... DokosBot isn't even online!?
16:30
FANGOHR
Oops!
16:30
MB8G11
Looking into it.
16:30
FANGOHR-ADIUM
DokosBot crashes sometimes â don't know why.
16:31
I have an open session here â from when is the last message DokosBot recorded? Maybe I can save some history from here.
16:31
MB8G11
12 Dec
16:31
FANGOHR-ADIUM
Oops indeed.
16:32
Need a regression test for DokosBot being present ...
16:32
MB8G11
DokosBot logs are empty. Hard to say why it crashes.
16:32
DokosBot [~DokosBot@uos-app00297-vs.soton.ac.uk] entered the room.
16:34
----- [ end of inserted log, stolen from Adium window that happened to be online ] -----
2012-12-17 16:48:20 mb8g11: Ok.
2012-12-17 16:51:17 mb8g11: Yes, line 203 was the crucial one, but luckily it was obvious was the error was from the plots.
2012-12-17 16:51:23 mb8g11: *what the error was
2012-12-17 16:52:27 mb8g11: I don't understand the purpose of the additional checks of t <= cur_t. Are they meant to give an error message that wasn't there before?
2012-12-17 16:52:30 fangohr-adium: By the way, am just testing xfce4 as a window manager. Turns out that xchat shows nice buble notifications in that environment for IRC messages. Even on top of a running xscreensaver. (Actually, I have only seen this on the screen saver so far, but am assuming that it does the same otherwise.)
2012-12-17 16:52:54 fangohr-adium: Yes, they do:
2012-12-17 16:53:26 mb8g11: That's neat. It's a nice environment, which is why it fuels our virtual machine as well.
2012-12-17 16:53:57 fangohr-adium: if you are asking for integration up-to a value long in the past, and this request has no action resulting from it, and no updating of the current m, then that is a probably a mistake on the user side (or at least unintentional). So we should let them know.
2012-12-17 16:54:12 fangohr-adium: [Yes, also works in the normal xfce environment without screen saver.]
2012-12-17 16:54:42 mb8g11: True.
2012-12-17 16:57:32 fangohr-adium: THis if-statement in the run_until method is (as far as I can see) only there because cvode does not like to have to integrate up to t=0, when it was initialised with t=0.
2012-12-17 17:00:28 mb8g11: Yes. Also, because sundials might have integrated to further then we ask it to already on the last call, if our time steps are very small.
2012-12-17 17:01:11 fangohr-adium: Sorry, that sentence seems broken. Can you rephrase (or add the missing words ;-))?
2012-12-17 17:04:51 mb8g11: Hehe.
2012-12-17 17:05:53 fangohr-adium: Maybe I can guess the question though: Example: we request integration up to t=10. Sundials work up to t_internal=15, because it has a large step size. We then ask for the solution at t=11. In that case, sundials will work out the right answer (using interpolation between 10 and 15) and all works well.
2012-12-17 17:06:33 mb8g11: Usually, sundials will integrate to a value of t that is larger than the one we asked for. That is because it choses its' time steps internally by mathematical considerations and stops integrating as soon as its' internal t is larger than we asked for.
2012-12-17 17:07:19 mb8g11: If we now ask it to integrate up to a value of t which is smaller than the value of t it ended up with, it will complain with CVODE_TOO_CLOSE or something similar. That's why the error check is there.
2012-12-17 17:08:22 mb8g11: As usual, you explain it more succinctly.
2012-12-17 17:09:57 fangohr-adium: Hm, interesting. Not sure this is true. Can you find an example where this happens? At least non of our tests fail, although they should based on what you say? In any case, I would suggest to have the run_until if statement as conservative as possible (as it is now) until we have evidence that this is too cautious.
2012-12-17 17:11:49 mb8g11: Why would our tests fail? The if-test has been there since the beginning.
2012-12-17 17:13:47 fangohr-adium: My concern was that the if-test should not have been there, or may be hiding user problems of passing in the wrong t (one that is way to small). [Need to go know, so can't expand to much.] Are you happy with the current version? (I am.)
2012-12-17 17:14:18 mb8g11: Simply remove the if test completely and try running test_sim_ode.py, then you'll see what I mean.
2012-12-17 17:14:31 mb8g11: I am too!
2012-12-17 17:15:13 mb8g11: Everything is fine, just a misunderstand I guess.
2012-12-17 17:15:54 fangohr-adium: Done the removal, and found the error message. Okay, we mean the same thing then. Although I believe this is only so for the the value of t with which cvode has been initialised.
2012-12-17 17:16:14 fangohr-adium: I have played a little with your performance test (next push just now). Interesting â Idon't know what's going on.
2012-12-17 17:16:16 fangohr-adium: Over and out.
2012-12-17 17:17:25 mb8g11: Bye!
2012-12-17 17:23:51 mb8g11:  /quit
2012-12-18 09:19:38 fangohr-adium: Good Morning, DokosBot. Glad to see you here.
2012-12-18 11:17:33 ww1g11_: hello
2012-12-19 08:43:04 mb8g11: Good morning.
2012-12-19 09:25:08 fangohr-adium: Good Morning.
2012-12-19 14:01:54 fangohr: Greetings.
2012-12-19 15:04:52 fangohr-adium: Hi MA, we are online now on Skype.
2012-12-20 08:16:49 mb8g11: Hi all. Sorry for breaking the build, will fix it in the next hour.
2012-12-20 11:05:23 fangohr-adium: No worries. Are you around for a quick chat on Skype?
2012-12-20 17:05:51 fangohr-adium: Hi all, I am going now officially into Christmas Hibernation. Over and out.
2013-01-08 16:08:38 mb8g11:  /quit
2013-01-08 16:08:40 mb8g11: exit
2013-01-09 09:27:14 fangohr-adium: Hi Weiwei ;)
2013-01-11 17:01:31 fangohr-adium: Hi MA, very cool commit, with two nice scheduling examples.
2013-01-11 17:02:22 fangohr-adium: Also: when I start an ipython notebook in the right place, and use
2013-01-11 17:02:29 fangohr-adium: %loadpy sim_with_scheduling.py
2013-01-11 17:02:48 fangohr-adium: then this runs fine, and output is displayed nicely in notebook; as we would expect. So that seems to work.
2013-01-11 17:02:50 fangohr-adium: Over and out for now.
2013-01-14 09:24:27 fangohr-adium: Good morning, folks.
2013-01-14 11:55:51 fangohr-adium: Hm, Adium must have died. Here I am again.
2013-01-14 11:56:38 mb8g11: hi.
2013-01-14 12:12:56 mb8g11: When would lunch be best for you?
2013-01-14 12:14:05 fangohr-adium: Yeah, relatively soon I would say. How about you?
2013-01-14 12:14:24 mb8g11: Good, I'll be over in 5.
2013-01-14 12:16:31 fangohr-adium: Okay.
2013-01-14 13:57:07 mb8g11: Couldn't help but take a bite of the bread... Tasty! Thanks!
2013-01-14 15:13:01 fangohr-adium: :)
2013-01-15 09:39:14 fangohr: Morning, all.
2013-01-15 12:59:17 fangohr: Hi MA
2013-01-15 12:59:22 mb8g11: Hi!
2013-01-15 13:12:48 mb8g11: Home office today?
2013-01-15 13:13:04 fangohr: Yes.
2013-01-16 11:28:55 fangohr-adium: Hi Max, ready to meet when you are ;)
2013-01-16 11:29:21 max_albert: Awesome! Will pop over in a couple of minutes.
2013-01-16 11:29:42 fangohr-adium: Best to go around the building on the outside â exams taking place in the workstation area under the gallery.
2013-01-16 11:29:57 max_albert: Yes, I noticed that earlier. ;-)
2013-01-16 12:51:53 fangohr-adium: MA, out there and interested in lunch?
2013-01-17 09:19:16 mb8g11: Hi.
2013-01-17 10:31:56 fangohr-adium: Hi :)
2013-01-17 11:15:49 fangohr-adium: No lunch for me â have a work meeting from 11:30 to 14:00 or so.
2013-01-17 18:03:37 mb8g11: dolfin 1.1.0 release notes https://lists.launchpad.net/dolfin/msg26258.html
2013-01-17 18:07:10 mb8g11: A few nice things in there. HDF5, bugfix in expression so one can use min, max; major speed-up or assembly of functions and expressions
2013-01-17 18:07:27 mb8g11: meshes based on NETGEN csg format
2013-01-17 18:07:50 max_albert: Yep, would be nice to give it a try. :)
2013-01-17 18:08:56 max_albert: Not sure how much work it would be, though. A couple of months ago I tried to use Finmag with the development version (on which this release is based I guess) but it wasn't straightforward to get it to work at the time.
2013-01-17 18:09:17 max_albert: But this may be different in case some of the commits in the meantime cleaned the interface up.
2013-01-17 18:09:37 mb8g11: As soon as they update their PPA, we should get the new version by normal system update, shouldn't we?
2013-01-17 18:09:46 max_albert: Yes.
2013-01-17 18:10:43 max_albert: Actually, that happened to me earlier today but I downgraded again because I got some weird segfaults (which may have been unrelated, though, or maybe were caused because I didn't recompile finmag, but I was in the middle of trying something out so didn't want to interrup the workflow).
2013-01-17 18:12:26 mb8g11: Of course.
2013-01-17 18:12:44 mb8g11: By the way, they use NETGEN in the background now. It's hilarious, because they ran into the same issues we do.
2013-01-17 18:12:48 mb8g11: http://fossies.org/dox/dolfin-1.1.0/netgen_8py_source.html
2013-01-17 18:13:01 mb8g11: line 155 and following.
2013-01-17 18:13:39 max_albert: :-)
2013-01-17 18:13:46 mb8g11:   cpp.info("Note that NETGEN may crash after the mesh generation has "
2013-01-17 18:13:48 mb8g11: 158  "completed but may still succeed in generating the mesh.")
2013-01-17 18:14:17 max_albert: It's strange that Ubuntu hasn't upgraded its Netgen package yet, since that crash is gone in the latest version.
2013-01-17 18:17:12 mb8g11: True. http://packages.ubuntu.com/quantal/netgen
2013-01-17 18:18:47 mb8g11: Netgen 5.0.0 is out, hopefully get included in Ubuntu 13.04
2013-01-17 18:19:39 mb8g11: It was released 13 Nov 2012, so after Ubuntu 12.10 came out.
2013-01-17 18:19:56 mb8g11: The one before is from May 2010, which is the one we have in Ubuntu. That explains it.
2013-01-17 18:20:04 max_albert: Ah, ok. Yes, hopefully they will upgrade it.
2013-01-17 18:23:49 mb8g11: Apparently not http://packages.ubuntu.com/raring/netgen
2013-01-17 18:24:15 max_albert: :(
2013-01-17 18:33:56 mb8g11: Well, we wanted to create a PPA soon anyways, might as well package netgen ourselves.
2013-01-17 18:34:50 mb8g11: Our contact the original (debian) package maintainers.
2013-01-18 09:17:04 fangohr-adium: Good morning folks.
2013-01-18 10:08:57 fangohr-adium: Hi Marc-Antonio, will you join us for the group meeting? I think we'll make a start now.
2013-01-18 10:09:21 fangohr-adium: I'll stay online on Skype just in case that is better.
2013-01-18 11:30:52 fangohr-adium: Hi Weiwei.
2013-01-18 11:31:01 ww1g11: Hi Hans
2013-01-18 11:42:35 fangohr-adium: Weiwei, is the cable enough to connect the machine, or do we need the switch?
2013-01-18 11:50:12 max_albert: Hi Hans, what time would you be going for lunch (roughly)?
2013-01-18 11:50:25 fangohr-adium: Am fairly easy. Haven't even made the coffee yet ;-)
2013-01-18 11:50:28 fangohr-adium: What would suit you?
2013-01-18 11:50:41 fangohr-adium: But I can also grab a sandwich, so don't worry if you have other plans.
2013-01-18 11:57:51 ww1g11: just noticed your message, yes, a cable is enough, the ip is :152.78.96.51
2013-01-18 11:58:01 fangohr-adium: Great, thank you.
2013-01-18 11:58:17 max_albert: Well, I'll need something to eat anyway and plans are flexible. So would lunch some time between 12.30 and 13.00 suit you?
2013-01-18 11:58:49 max_albert: Yay! I can log in. :) Thanks for setting it up, Weiwei.
2013-01-18 11:59:20 max_albert: For the reconrd, looks like the machine is registered as "aleph0.kk.soton.ac.uk".
2013-01-18 12:00:13 max_albert: Since it's registered, I presume the IP is also static.
2013-01-18 12:00:40 max_albert: (Although that needn't be the case, but if it used to belong to Matteo I guess he will have requested a static IP).
2013-01-18 12:00:52 ww1g11: yeah, I tried aleph0 and it does work
2013-01-18 12:01:23 fangohr-adium: Yes, I remember that this was the name that Matteo used. As the DNS server knows it, it will be static.
2013-01-18 12:01:39 fangohr-adium: Weiwei, can you create an account for me on there as well, please? Preferred username is 'fangohr'.
2013-01-18 12:02:10 ww1g11: Hans, you already have an account
2013-01-18 12:02:27 fangohr-adium: I thought I might.
2013-01-18 12:02:51 fangohr-adium: Okay, works ;)
2013-01-18 12:03:15 fangohr-adium: and I can see dolfin 1.1 is installed. Fab.
2013-01-18 12:13:45 fangohr-adium: Max, let's go with 12:30 if that is okay.
2013-01-18 12:14:35 max_albert: Sure. (But only if it fits in your schedule and you don't have important other things to do.)
2013-01-18 12:18:39 fangohr-adium: I heard rumours the university may close at 13:00. Best to get lunch in by then ;-).
2013-01-18 12:29:18 fangohr-adium: Max, ready to go?
2013-01-18 12:29:29 max_albert: Yes, sure.
2013-01-18 12:29:51 max_albert: Shall I pick you up?
2013-01-18 12:30:07 fangohr-adium: Yes, please.
2013-01-18 13:03:20 fangohr-adium: Weiwei, can you see whether Dmitri has an account on aleph0?
2013-01-18 13:08:27 ww1g11: Dmitri don't have an account, I am going to create one for him
2013-01-18 13:11:14 fangohr-adium: Yes, please.
2013-01-18 13:31:31 fangohr-adium: Over and out. Have a good weekend. [University closure]
2013-01-18 13:31:49 max_albert: See you!
2013-01-21 11:25:28 mb8g11: Hej.
2013-01-21 11:30:55 max_albert: Hiya!
2013-01-21 12:16:44 mb8g11: Lunch?
2013-01-21 13:01:46 fangohr-adium: Hi all, sorry no lunch for me. Busy with exams...
2013-01-21 13:01:52 fangohr-adium: Max, I have installed the package you asked for.
2013-01-21 13:01:54 mb8g11: Oki.
2013-01-21 13:02:36 max_albert: Hi all, I'm just investigating the failing tests.
2013-01-21 13:03:00 max_albert: (Btw, apologies for breaking the test suite last week and not fixing it in the meantime - I didn't have much time over the weekend and also couldn't run py.test locally on my machine for some reason).
2013-01-21 13:03:30 fangohr-adium: I couldn't run py.test because the segfault (from paraview import) also crashes py.test.
2013-01-21 13:03:37 mb8g11: I fixed one just a few minutes ago, the remaining one is a path issue I think.
2013-01-21 13:03:55 max_albert: One question: I get a failing test in src/finmag/energies/anisotropy_test.py (with test_anisotropy_field_supported_methods).
2013-01-21 13:04:33 max_albert: Hans: yes, I just commited a change which removes the paraview import by default (but it can be switched on in .finmagrc).
2013-01-21 13:05:09 max_albert: The anisotropy test fails because the following assertion for the tolerance is False:
2013-01-21 13:05:10 max_albert: assert 1.0943040251731873e-08 < 5e-09
2013-01-21 13:05:59 max_albert: Two things are strange about this. First, it obviously used to work before.
2013-01-21 13:06:36 max_albert: Second, we are comparing values on the order of 10^6, so this seems like such a small difference should not be regarded as a test failure, right?
2013-01-21 13:07:06 max_albert: Is there a reason we are not checking the relative error with numpy.allclose?
2013-01-21 13:07:25 mb8g11: No.
2013-01-21 13:07:50 fangohr-adium: (i) yes it is strange. However, could be because we changed the relaxation procedure so that the final state is slightly different (I am guessing here).
2013-01-21 13:07:53 max_albert: I also wonder which recent commit broke this, or whether it passes on summer but fails on my machine, or something like that. I'll try to investigate that.
2013-01-21 13:08:27 max_albert: Hans: interesting. When did the relaxation change happen?
2013-01-21 13:08:58 fangohr-adium: (ii) Yes, the new difference is probably fine as well. If I add pass tolerances, I usually choose them very close to the actual error to make us aware of changes. Often that will be more accurate then could reasonably be expected. So yes, we could just make that value larger by a factor 2 and the test will pass (although still interesting as to what triggered that)>
2013-01-21 13:09:16 fangohr-adium: (iii) numpy.allclose: mostly we were not aware of it I think.
2013-01-21 13:10:10 max_albert: Ok, thanks for the feedback guys. I'll change the test to use numpy.allclose with a suitable tolerance then (to make the test pass for now) and will see if I can find out what triggered the change.
2013-01-21 13:10:12 fangohr-adium: relaxation change: I don't actually know, I just noticed that one of my examples produced 'wrong' results because the relaxation had changed. I was just trying to point out what indirect effects some changes may have. (If you try to understand why the tolerance change is necessary).
2013-01-21 13:31:46 mb8g11: There is no single point in simulation time where you can say "The magnetisation has relaxed NOW". So depending on which steps we chose (and this code has changed with the scheduling) we will end up with a slightly changed magnetisation.
2013-01-21 13:49:18 fangohr-adium: That's right.
2013-01-21 13:52:38 max_albert: Ah, that makes sense. Although I wonder why the test only started to fail recently, long after the scheduler changes were finished. Nothing to worry about I presume, just curious.
2013-01-21 13:54:18 mb8g11: Are you speaking of the anisotropy test? That just seems to fail on your machine and shouldn't be related to the relax mechanis,
2013-01-21 13:54:41 max_albert: Hmm, so it works for you? That's strange...
2013-01-21 13:58:04 fangohr-adium: Different versions of Nmag?? (Assuming we compare anisotropy to Nmag.)
2013-01-21 14:03:15 mb8g11: It compares the alternative methods with the default one.
2013-01-21 14:04:34 mb8g11: ~~
2013-01-21 14:05:54 fangohr-adium: While this should not be so significant, it could also relate to upgrades in third party libraries (sundials, Petsc, lapack, blas, â¦).
2013-01-21 14:14:47 mb8g11: True.
2013-01-21 15:01:20 fangohr-adium: An orthogonal query: If I wanted something like a file explorer or Finder (Mac) on Linux, what applications might I try? I am thinking of 'standard' gnome or kde tools here, but don't know the application name to start.
2013-01-21 15:01:47 mb8g11: Nautilus is for Ubuntu, thunar for Xubuntu
2013-01-21 15:02:33 mb8g11: Was the KDE file explorer Konqueror or something like that? Can't remember.
2013-01-21 15:02:57 fangohr-adium: Ta.
2013-01-21 15:03:00 mb8g11: Why are you asking? Trying to start it from the commandline?
2013-01-21 15:03:29 fangohr-adium: Yes.
2013-01-21 15:03:34 fangohr-adium: Nautilus looks right; thank you.
2013-01-21 15:03:35 max_albert: There is also a tool called 'gnome-open', which automatically tries to detect the file type and opens the corresponding application. If you say 'gnome-open .', it will open the file manager for you with the current directory.
2013-01-21 15:03:43 max_albert: Not sure if there is something similar for KDE.
2013-01-21 15:03:56 fangohr-adium: Thanks.
2013-01-21 15:19:44 max_albert: Side question: to restart jenkins, is the following command the correct one: 'sudo service jenkins restart' ? And is it safe to do that?
2013-01-21 15:20:13 max_albert: The reason I'm asking is because I just found a bug report on the web in which it was mentioned that the problem with wrong email addresses went away for someone after doing that.
2013-01-21 16:37:34 fangohr-adium: I'd say it is safe to try that. Or at least it should be. We could also reboot the whole  machine for fun. ;-)
2013-01-21 16:37:56 fangohr-adium: (I suppose we could also upgrade software, including Jenkins if necessary, but that should be a separate activity.)
2013-01-21 16:38:24 max_albert: Ok, I may just restart Jenkins then with the command above and see how that goes. Thanks for the feedback.
2013-01-21 16:42:15 max_albert: Hmm, that command failed with an error:
2013-01-21 16:42:25 max_albert: stop: Unknown instance:
2013-01-21 16:42:27 max_albert: start: Job failed to start
2013-01-21 16:43:02 max_albert: I also found a StackOverflow comment which said that it should be possible to restart jenkins by simply pointing the browser to the following URL:
2013-01-21 16:43:05 max_albert: http://summer.kk.soton.ac.uk:8080/safeRestart
2013-01-21 16:43:33 max_albert: This does indeed ask me if I want to restart jenkins, but I get a "Status Code: 500" error, too.
2013-01-21 16:44:01 fangohr-adium: Let me try â to see whether it could be permissions.
2013-01-21 16:44:10 max_albert: Ok, thanks.
2013-01-21 16:44:43 fangohr-adium: Same here.
2013-01-21 16:45:15 max_albert: I seem to remember that we had some documentation which said how to restart Jenkins (or at least there was an email about it), but I can't find it right now.
2013-01-21 16:45:27 fangohr-adium: I have clicked on 'Prepare for shutdown' in Manage Jenkins.
2013-01-21 16:45:43 fangohr-adium: It has responded with 'Jenkins is going to shut down'. I would have expected another question to confirm ...
2013-01-21 16:46:00 max_albert: Whoops... :-)
2013-01-21 16:46:23 fangohr-adium: It says "Jenkins is going to shut down. No further builds will be performed"
2013-01-21 16:46:31 fangohr-adium: I guess I'll wait for a moment to see what happens...
2013-01-21 16:48:00 max_albert: Yes, I'm seeing the same message. I wonder how long it takes to shut down...
2013-01-21 16:48:15 fangohr-adium: Not sure we have to do anything else now ...
2013-01-21 16:48:59 fangohr-adium: top says that jenkins is using 6% CPU time. Or so. Probably normal for a big java beast?
2013-01-21 16:49:48 fangohr-adium: Some stuff here: http://stackoverflow.com/questions/10238604/how-to-shutdown-my-jenkins-safely
2013-01-21 16:49:53 fangohr-adium: Seems safe to kill the process if required.
2013-01-21 16:51:01 fangohr-adium: I'll go the http://summer.kk.soton.ac.uk:8080/restart way now. Let's see.
2013-01-21 16:51:11 fangohr-adium: ah, still Error 500
2013-01-21 16:53:23 fangohr-adium: Right. Have now tried http://summer.kk.soton.ac.uk:8080/exit and it says 'Shutting Down'.
2013-01-21 16:54:03 max_albert: Hmm, 'ps aux | grep jenkins' reported the following command (which was probably the one used to start jenkins):
2013-01-21 16:54:05 max_albert: /usr/bin/java -jar /usr/share/jenkins/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=-1
2013-01-21 16:54:26 max_albert: (This doesn't appear now any more because jenkins presumably shut down.)
2013-01-21 16:54:35 fangohr-adium: Well, one step forward.
2013-01-21 16:54:39 fangohr-adium: We just need to start it again :)
2013-01-21 16:55:02 max_albert: Is it worth trying the command I just pasted?
2013-01-21 16:55:25 fangohr-adium: I'd rather try something like "sudo /etc/init.d/jenkins start" first.
2013-01-21 16:55:31 max_albert: True.
2013-01-21 16:55:36 fangohr-adium: Any objections?
2013-01-21 16:55:46 max_albert: Nope.
2013-01-21 16:56:00 fangohr-adium: Done. Looks good. Is it running?
2013-01-21 16:56:18 fangohr-adium: Yes, â¦ booting.
2013-01-21 16:56:30 fangohr-adium: Ttry: http://summer.kk.soton.ac.uk:8080
2013-01-21 16:56:32 max_albert: Yes, I think so.
2013-01-21 16:57:03 max_albert: Cool, so I probably could have restarted it using  "sudo /etc/init.d/jenkins restart" instead of the "sudo service jenkins restart" that the website recommended.
2013-01-21 17:00:32 fangohr-adium: Maybe our jenkins is a bit older.
2013-01-21 17:01:22 max_albert: Yes, or the website is outdated...
2013-01-21 17:02:01 fangohr-adium: Yes â although I think the 'service' way is seen as slightly more modern. I think MA knows more (as he set up a service for DokosBot).
2013-01-21 17:03:05 max_albert: Perhaps it would have worked if we had started jenkins via "sudo service jenkins restart" instead of going via /etc/init.d/jenkins (but that's a guess, and it's not wise to try that now that Jenkins is running again).
2013-01-21 17:15:27 fangohr-adium: Over and out for today (at least from the office).
2013-01-21 17:15:41 max_albert: Bye!
2013-01-22 10:16:37 fangohr-adium: Morning folks, anybody out there?
2013-01-22 10:16:46 fangohr-adium: Plans for lunch? I am available today.
2013-01-22 10:49:30 max_albert: Good morning, Hans!
2013-01-22 10:49:31 max_albert: Apologies for the late reply (was working from home this morning).
2013-01-22 10:49:31 max_albert: I think I'd be up for lunch. What time were you thinking?
2013-01-22 12:09:37 fangohr-adium: Hm, have accidentally upgraded dolfin to 1.1 on osiris. Does anybody need finmag on osiris??
2013-01-22 12:09:44 mb8g11: Haha.
2013-01-22 12:09:58 max_albert: Yes, I use it occasionally.
2013-01-22 12:10:14 fangohr-adium: Arr, I guess I can run your magic command in the install script to fix this.
2013-01-22 12:10:31 max_albert: Can you run the on_ubuntu_12.04.sh script to see if that downgrades it?
2013-01-22 12:10:45 max_albert: I added a change to this effect yesterday, would be good to see if it works. :)
2013-01-22 12:11:34 max_albert: Btw, I don't think I have root access on osiris so wouldn't be able to run the command myself.
2013-01-22 12:13:54 fangohr-adium: No, looks like I need to remove the dolfin installation first, then try to install again.
2013-01-22 12:15:40 max_albert: Hmm, can you try this:
2013-01-22 12:16:16 max_albert: sudo apt-get install dolfin-bin=1.0.0-1
2013-01-22 12:16:30 max_albert: That may (or may not) work.
2013-01-22 12:17:02 fangohr-adium: That looks very promising!
2013-01-22 12:19:48 fangohr-adium: Hm, I think this installed theright version of dolfin-bin, but all the other packages seem 1.1.
2013-01-22 12:20:07 max_albert: Which other ones, for example?
2013-01-22 12:20:55 fangohr-adium: python-fiat, python-ffc, python-dolfin, python-instant, libdolfin. I think that's all.
2013-01-22 12:21:06 fangohr-adium: So I could install those with the 1.0.0-1 tag explicitly.
2013-01-22 12:21:10 max_albert: Hmm, you are right. The dolfin python package is still version 1.1.0 (just tried it from inside ipython).
2013-01-22 12:22:00 max_albert: Yes, you could. It's a bit strange that they don't conflict the dolfin-bin package and so get downgraded automatically.
2013-01-22 12:25:24 fangohr-adium: downgrading python-dolfin has more of an effect, but still issues compiling. I think I have to park tihs here for now. Max, if you need osiris, you are welcome to sit in my office and fiddle with it (or I can give you su right). Say if you need to.
2013-01-22 12:27:02 max_albert: Ok, no problem for now. I may get back to you when/if I need it (or may have a quick look later).
2013-01-22 12:27:38 max_albert: Actually, "import finmag" works for me on osiris at the moment (after 'make clean' in the finmag directory). Maybe you saw the remnants of old failed compiles?
2013-01-22 12:28:28 max_albert: Also, the barmini example relaxes successfully. So I guess all is fine.
2013-01-22 12:28:44 fangohr-adium: interesting. Thought I had cleaned all old files. Will try again.
2013-01-22 12:29:04 max_albert: Don't worry if you are busy with marking etc., though.
2013-01-22 12:33:15 fangohr-adium: Looks like you were right. Am just running tests.
2013-01-22 12:51:33 fangohr-adium: How do we feel about lunch?
2013-01-22 12:52:44 max_albert: Happy to go whenever.
2013-01-22 12:53:23 mb8g11: in 5?
2013-01-22 12:53:43 fangohr-adium: Yeah. Will you come along here?
2013-01-22 12:53:49 fangohr-adium: (No exam at the moment I think.)
2013-01-22 12:53:56 max_albert: Yup, will do.
2013-01-22 12:54:13 fangohr-adium: Okay, see you in a mo.
2013-01-22 14:06:07 mb8g11: (!) the ordering of mesh.coordinates() does not relate to the order of values in dolfin functions anymore.
2013-01-22 14:06:40 fangohr-adium: Oops. But there must be a way of finding out which one goes with which one?!?
2013-01-22 14:07:07 mb8g11: dopmaps
2013-01-22 14:07:14 max_albert: There are some related Launchpad Answers
2013-01-22 14:07:17 mb8g11: *dofmaps, an attribute of the Functionspace
2013-01-22 14:07:23 max_albert: Here are a couple of relevant ones:
2013-01-22 14:07:25 max_albert: https://answers.launchpad.net/dolfin/+question/219220
2013-01-22 14:07:31 mb8g11: Nice Max, thanks.
2013-01-22 14:07:49 max_albert: And this contains an example of using a dofmap: https://answers.launchpad.net/dolfin/+question/210000
2013-01-22 14:08:10 max_albert: Generally, searching for "dofmap" in the Launchpad Questions site will give an overview of people having encountered similar problems.
2013-01-22 14:09:10 max_albert: In the first link I posted (https://answers.launchpad.net/dolfin/+question/219220) Johan Hake says that there is a flag which can be set to avoid the automatic re-ordering of dofs.
2013-01-22 14:09:29 max_albert: from dolfin import *
2013-01-22 14:09:29 max_albert: parameters.reorder_dofs_serial = False
2013-01-22 14:09:46 max_albert: This might be a stopgap solution just to get it to work, until we have the time to fix it properly.
2013-01-22 14:10:15 max_albert: Although using the recommended syntax would of course be very nice because it brings us one step closer to running Finmag in parallel.
2013-01-22 14:41:46 mb8g11: https://answers.launchpad.net/dolfin/+question/211368
2013-01-22 14:51:39 mb8g11: xyz = interpolate(Expression(("x[0]", "x[1]", "x[2]"), value_shape=3), MixedFunctionSpace([V, V, V]))
2013-01-22 15:04:03 mb8g11: Just this: interpolating dolfin expressions is now half as slow, and is now within 10% of a brute numpy loop.
2013-01-22 15:05:31 max_albert: But as you just said, if we know something about the function and can optimise setting its values then it is still 2-3 orders of magnitude slower than setting the values directly using a numpy.array, right?
2013-01-22 15:06:49 mb8g11: If you can use vectorised numpy operations, or have knowledge about the function the computer can't have (separation of space-dependent of time-dependent parts) then yes indeed, you can beat dolfin by 2-3 orders of magnitude.
2013-01-22 15:08:35 mb8g11: I will update sandbox/benchmarks/updating_expression.py in a few minutes.
2013-01-23 11:39:26 mb8g11: Using mercurial bookmarks for dolfin 1.1.0. Let's see how it goes.
2013-01-23 11:47:30 fangohr-adium: Interesting. Good luck. :) [never heard of bookmarks]
2013-01-23 11:48:27 max_albert: They seem to be a bit more like git's branches, i.e. more lightweight than named branches (which are persistent in history and never go away again).
2013-01-23 11:48:47 max_albert: Haven't tried them yet though, will be interesting to see how MAB gets on with them.
2013-01-23 11:49:52 fangohr-adium: Thanks for update. I never liked the branches in mercurial â maybe bookmarks are the answer.
2013-01-23 13:44:28 mb8g11: Back from the PGR meeting. Let's see if I can get finmag to compile on aleph.
2013-01-23 13:44:46 mb8g11: OrientedBoundaryMesh is gone, but they changed a few signatures as well.
2013-01-23 14:41:35 fangohr-adium: Nice.
2013-01-23 15:46:37 mb8g11: Have run into an issue with the C++ code I don't understand. Will push my progress.
2013-01-23 15:47:16 fangohr-adium: Hi MA, thanks for getting that far. I spoke with Dmitri earlier, he said he might come to the office around 17:00, or certainly tomorrow.
2013-01-23 15:48:43 mb8g11: Great. I have a df.BoundaryMesh on the Python side, and expect the same class on the C++ side, but I don't know how to register the conversion beetween the Python type and the C++ one.
2013-01-23 15:48:55 mb8g11: At least, I think that that's the issue.
2013-01-23 15:49:01 mb8g11: Dmitri will probably know.
2013-01-23 16:00:42 mb8g11: There are now to bookmarks on the repository: main and dolfin_1_1_0. You may have to "hg update main" after the pull.
2013-01-23 16:06:56 max_albert: A word of caution:
2013-01-23 16:08:20 max_albert: "hg update main" works indeed, but a plain "hg update" afterwards will fast-forward the 'main' bookmark to the dolfin one.
2013-01-23 16:08:55 max_albert: I guess this is because bookmarks are lightweight branches and simply follow the commits.
2013-01-23 16:09:28 max_albert: As MAB just said, this might be different once we have another commit on the 'main' branch so that it has diverged from the dolfin one.
2013-01-23 16:09:59 max_albert: But to be on the safe side, I guess we should not use the simple "hg update" for a while.
2013-01-23 16:10:31 max_albert: Also, make sure you use "hgview" or a similar GUI to check which branch/commit you are on before committing anything (and especially before pushing).
2013-01-23 16:31:02 max_albert: Actually, it turns out that hgview doesn't display the bookmark names. The mercurial built-in viewer which can be called via "hg view" (note the space) does display them, but it seems to be a hassle to get it to work sometimes.
2013-01-23 16:32:00 fangohr-adium: If we don't like the bookmarks, we could always fork from the main repository (bitbucket has a button for this â¦.) and merge back into the usual repository when we are done?
2013-01-23 16:32:25 mb8g11: That's actually a sensible way to branch.
2013-01-23 16:32:38 fangohr-adium: Dmitri and i
2013-01-23 16:33:05 fangohr-adium: discussed that it is probably not worth the effort to maintain a 1.0 compatible version. So we could move to 1.1 completely, once this is working.
2013-01-23 16:33:30 mb8g11: TBH that's what I assumed, but good to get this confirmed.
2013-01-23 16:42:34 max_albert: I like the fork-merge approach. Seems cleaner than working with these pseudo-branches in Mercurial.
2013-01-23 16:43:04 max_albert: I know why I like git... ;-)
2013-01-23 16:43:09 mb8g11: +1
2013-01-23 16:43:26 max_albert: Anyway, MAb seems to be making good progress so that we may be able to get rid of the dolfin bookmark soon anyway.
2013-01-24 10:28:48 max_albert: Good morning!
2013-01-24 10:29:49 max_albert: Just a quick heads-up (as a follow-up to the bookmarks yesterday): it seems that  Marvin ran into the same issue as I did yesterday, and committed the Finmag IRC log on top of the dolfin branch, not the main branch.
2013-01-24 10:30:17 max_albert: I don't know how he works internally, but we maybe need to replace a "hg update" with "hg update main" in his code somewhere.
2013-01-24 10:44:13 max_albert: I think I found the right file (it's in /home/marvin/bin/push-irc-log.sh on summer). I changed it there. I'm also going to re-commit the IRC logs so that the two branches diverge. This should hopefully solve the issue.
2013-01-24 16:14:57 fangohr-adium: Hi all. [Stuck in marking here.] Are you having any fun?
2013-01-24 16:16:33 max_albert: Grmpf.
2013-01-24 16:16:36 max_albert: ;-)
2013-01-24 16:16:47 max_albert: Spending the entire day hunting stupid bugs.
2013-01-24 16:16:53 max_albert: Hope marking is more fun...
2013-01-24 16:17:27 fangohr-adium: ;-)
2013-01-24 16:45:57 max_albert: Hi folks, I just noticed that Jenkins keeps building Finmag continuously, even though there haven't been any commits today. Does anybody have an idea why?
2013-01-24 16:46:17 mb8g11: It's bored.
2013-01-24 16:46:31 max_albert: :)
2013-01-25 12:52:41 max_albert: Hi folks! I just tried to debug the latest Jenkins failures, and it looks like it had to do with the fact that Hans and I changed the branch which it uses for building from 'default' to 'main', but that introduced some internal confusion.
2013-01-25 12:53:09 max_albert: Just to let you know I have now deleted the 'main' bookmark in the repository so that the only existing bookmark is 'dolfin_1_1_0'.
2013-01-25 12:54:18 max_albert: There is still the 'default' branch, however, so that's what should be used for regular development.
2013-01-25 12:55:55 max_albert: Jenkins seems to be running the tests now, so that's good too.
2013-01-25 13:20:27 max_albert: Yay! The Jenkins build succeeded, so that's good news.
2013-01-25 13:20:48 max_albert: The only problem is that it has started to build continuously again...
2013-01-25 13:21:13 max_albert: Which is good for our statistics in terms of successful builds, but it would be nice to get this sorted. ;-)
2013-01-25 13:25:23 fangohr-adium: â¦ could try restarting it ?
2013-01-25 13:25:48 max_albert: Maybe worth a try. But didn't we attempt that before?
2013-01-25 13:26:32 max_albert: And how did that work again?
2013-01-25 13:26:34 fangohr-adium: But that was to sort your email problem. This issue is new and started after the reboot.
2013-01-25 13:26:45 max_albert: Hmm, true.
2013-01-25 13:28:10 max_albert: Can I try restarting it using "sudo /etc/init.d/jenkins restart"?
2013-01-25 13:30:32 fangohr-adium: I think so.
2013-01-25 13:30:45 max_albert: Ok, will try that.
2013-01-25 13:32:01 max_albert: Looking good so far. It said: "* Restarting Jenkins Continuous Integration Server jenkins              [ OK ]"
2013-01-25 13:32:17 max_albert: And Jenkins is restarting in the browser, too.
2013-01-25 13:32:28 max_albert: Let's see if this solves the issue with non-stop builds.
2013-01-25 13:38:39 D_Chernyshenko_: Yeah, using init.d jenkins is the right way to restart I think
2013-01-25 13:38:54 D_Chernyshenko_: There is also an option in the admin GUI somewhere, but the commandline definitely works
2013-01-25 13:40:14 max_albert: We tried it with "sudo service jenkins restart" the other day instead of the command mentioned above, but that failed.
2013-01-25 13:40:18 max_albert: But this one seems to work.
2013-01-25 13:41:48 D_Chernyshenko_: Guess the jenkins package maintainers aren't that keen to update their scripts to whatever init.d/service system Ubuntu is using
2013-01-25 13:42:05 D_Chernyshenko_: I think in 12.10 there is an even newer way and service X restart is outdated, too
2013-01-25 13:42:05 mb8g11: "upstart"
2013-01-25 13:42:38 max_albert: Hmm, I have no idea what the difference is between those. But so long as we know which command to use for Jenkins then that's fine.
2013-01-25 14:57:34 max_albert: For the record, restarting Jenkins worked but it still builds continuously.
2013-01-25 14:58:14 max_albert: Not sure what exactly is causing this. If it's related to the dolfin_1_1_0 branch, it might go away once we merge it.
2013-01-25 15:58:24 fangohr-adium: Okay. Thanks for trying.
2013-01-25 17:04:37 fangohr-adium: Over and out from the office. Probably online later; still lots of marking to be done.
2013-01-25 17:04:57 max_albert: Oh dear, that sounds painful. Good luck! And have a nice weekend anyway...
2013-01-25 17:05:57 mb8g11: See you!
2013-01-25 17:06:39 fangohr-adium: Thanks. It is actually a very nice task so far as I need to write lots of code to automise the curation of submissions, and make the marking as easy as possible. So I haven't even got to the marking itself â it is just the writing of scripts to get there. However, it would be good if the deadline for delivery of everything was much later than it is ;-)
2013-01-25 17:06:43 fangohr-adium: Have good week end, too.
2013-01-25 17:44:27 max_albert: Just for everyone's information, because of all this hassle with Mercurial bookmarks, Dmitri has now created a named branch called "dolfin-1.0.0" and I have just deleted the "dolfin_1_0_0" bookmark (it might still stick around in your local checkouts, but it's gone from the server).
2013-01-25 17:44:59 max_albert: Hopefully that will stop the confusion for a while.
2013-01-28 09:13:33 fangohr-adium: Morning all.
2013-01-28 12:27:31 fangohr-adium: Anybody interested in lunch at some point?
2013-01-28 12:27:46 ww1g11: Does anyone knows what indeed change in dolfin 1.1.0? why the assemble does not work any more for netgen meshes?
2013-01-28 12:28:52 ww1g11: I bring a sandwich so I am not
2013-01-28 12:29:03 fangohr-adium: Thanks, Weiwei ;-)
2013-01-28 12:29:18 fangohr-adium: I don't know about the netgen meshes.
2013-01-28 12:29:39 ww1g11: oh , I mean the meshes generated by netgen
2013-01-28 12:29:57 ww1g11: such as box class
2013-01-28 12:31:28 ww1g11: I found some codes give totally wrong results if I use netgen meshes, such as box
2013-01-28 12:32:25 fangohr-adium: Could this relate to the order of degrees of freedom in a Dolfin Function not being the same as that of the nodes in the mesh? Marc-Antonio said that he had switched off the re-ordering, so this should not matter. Not sure.
2013-01-28 12:33:54 ww1g11: I don't know, here is a simple piece of code to show my problem, volumes = df.assemble(df.TestFunction(S1) * df.dx)
2013-01-28 12:34:55 ww1g11: if I use box rather than Unitcube to generate mesh, the volumes will gives all zeros
2013-01-28 12:50:20 fangohr-adium: Hm, interesting. If you are stuck on this,  can you produce a minimalistic example that demonstrates this (Ipython notebook?) so we can all have a look at it, or use it as baseline to email the dolfin people?
2013-01-28 12:55:37 ww1g11: I will write a simple notebook to demonstrate this problem
2013-01-28 13:49:07 max_albert: Hi Weiwei! I had the same problem a while ago and asked about it on Launchpad. See here: https://answers.launchpad.net/dolfin/+question/212697
2013-01-28 13:50:26 max_albert: That's why we also had to change the helper function which computes the volume of a mesh.
2013-01-28 13:50:33 max_albert: See the fix in this commit: https://bitbucket.org/fangohr/finmag/commits/be665350b5aef95ff09c8d16a596e7379eca072f
2013-01-28 13:51:45 max_albert: Basically, the root of the problem is that Netgen internally marks the mesh cells with maker '1', but df.dx by default only operates on the region marked with '0'.
2013-01-28 14:17:41 max_albert: I just had a quick discussion with Weiwei about this and we came to the conclusion that the way Dolfin handles things with df.dx is simply wrong...
2013-01-28 14:17:56 max_albert: By default, df.dx should apply to the *whole* mesh, not just to the region marked with 0.
2013-01-28 14:19:08 max_albert: So anyone reading this is strongly encouraged to comment on the Launchpad thread (https://answers.launchpad.net/dolfin/+question/212697) and tell them that they either need to change the default behaviour of df.dx, or at the very least introduce a shortcut for "operate on the entire mesh".
2013-01-28 14:19:15 max_albert: This keeps biting us hard. :-S
2013-01-29 11:24:25 max_albert: Good morning everyone!
2013-01-29 11:25:47 max_albert: As a little treat for the morning I thought I'd share this little gem (which some of you may know already?): http://numba.pydata.org/
2013-01-29 11:40:44 fangohr-adium: Hi Max, nice one. I had seen this before, but never tried it.
2013-01-29 11:41:15 max_albert: I just used it for a little toy computation this morning, and was totally blown away by the speedup given by only adding two lines. :)
2013-01-29 11:51:55 max_albert: They main limitation a while ago was that they didn't have support for numpy arrays. But this seems to have changed now, so I'm really excited about this project.
2013-01-29 11:52:27 max_albert: It's still somewhat in its infancy and many things are not supported yet, but I'm expecting big things of it in the near future. :)
2013-01-29 12:40:10 fangohr-adium: Lunch, folks?
2013-01-29 12:40:18 max_albert: Sounds good!
2013-01-29 12:40:37 fangohr-adium: Can meet outside B25 (front door), or you can pick me up. As you like. Just say when you leave ;-)
2013-01-29 12:40:50 max_albert: Coming over now, we'll pick you up.
2013-01-29 20:11:41 mb8g11: quit
2013-01-30 10:55:39 mb8g11_: I've made a cake.
2013-01-30 10:57:29 ww1g11: ;-)
2013-01-30 12:35:38 fangohr-adium: A cake?? Sounds intriguing.
2013-01-30 12:50:22 mb8g11_: You're invited anytime to have some.
2013-01-30 12:50:30 mb8g11_: We haven't started ;)
2013-01-30 12:51:49 fangohr-adium: Nice ;-). Don't wait for me though. I'll be off to play some  volleyball at 13:00, and a little food afterwards. I could drop in around 15:00 for a piece maybe?
2013-01-30 12:52:02 mb8g11_: Swell.
2013-01-30 14:32:07 max_albert: Yes!!!!!!!!!
2013-01-30 14:32:27 max_albert: I have found the magic commands to downgrade to Dolfin 1.0.0 :-)
2013-01-30 14:34:52 fangohr-adium: What is it :)
2013-01-30 14:34:53 fangohr-adium: ?
2013-01-30 14:35:38 fangohr-adium: (no rush. It might be better to document thsi in a little script in the repository than to past them here.)
2013-01-30 15:02:54 mb8g11_: Cake?
2013-01-30 15:02:57 max_albert: Will post them in a second.
2013-01-30 15:03:22 fangohr-adium: Yes, will be over with you in 3 minutes.
2013-01-30 15:03:33 mb8g11_: Don't hurry, it's not very good ;)
2013-01-30 15:09:01 max_albert: Basically, the answer is hidden in a question I asked on Launchpad this morning, and where I just added a summary: https://answers.launchpad.net/fenics/+question/220534
2013-01-31 16:02:54 fangohr-adium1: Hi, got some urgent stuff out of the way, phew. Time for some dolfin fun.
2013-01-31 16:02:57 fangohr-adium1: [just a little]
2013-01-31 16:08:11 ww1g11_: ;-)  anything exciting?
2013-01-31 16:08:50 fangohr: What I have done is marking of exams (and there will be a littlemore to come).
2013-01-31 16:09:30 fangohr: Now I first need to downgrade my dolfin.
2013-01-31 16:58:13 fangohr_: Wohoo -- back to a working finmag installation. Down grade to dolfin 1.0 worked. Will add script for this to repository in a moment.
2013-02-02 15:24:03 fangohr: Greetings all.
2013-02-04 08:36:47 max_albert: Good morning all!
2013-02-04 09:21:55 fangohr: Hey, good morning!
2013-02-04 11:50:28 fangohr-adium: Hi MA, good to see you.
2013-02-04 11:50:40 max_albert: Hello!
2013-02-04 11:50:42 fangohr-adium: Have started using the i3 window manager, and I love it. Very nice!
2013-02-04 11:51:12 max_albert: Sounds great! I'll definitely give it a try some time very soon.
2013-02-04 11:51:40 max_albert: Oh, I guess you meant Marc-Antonio when you said "MA"? ;-)
2013-02-04 11:52:30 fangohr-adium: I did. But it is also good to see you :)
2013-02-04 11:52:53 fangohr-adium: (I think MA was not online yet when we exchanged greetings earlier todayâ¦)
2013-02-04 12:28:03 mb8g11: Hi guys!
2013-02-04 12:29:35 ww1g11: Hi MA
2013-02-04 13:20:34 max_albert: Hi Marijan!
2013-02-04 13:20:47 max_albert: And another message (for testing)...
2013-02-04 13:23:25 Marijan-Beg: Test message
2013-02-04 13:24:15 Marijan-Beg: Another test.
2013-02-04 13:32:42 fangohr-adium1: Hi Marijan, Weiwei and I just noticed that Matteo Franchin's PhD thesis in our shared Dropbox folder: Group/theses/Matteo_Franchin.pdf
2013-02-04 13:34:24 mb4e10: Yes, I have it
2013-02-04 13:36:32 mb4e10: I have checked the equation and it looks like there is a typo in Munchen slides (cross product is missing)
2013-02-04 13:40:34 mb8g11: Hans, glad to hear you like i3.
2013-02-04 14:06:29 fangohr: Hi all, am just having a meeting with Weiwei.
2013-02-04 14:06:41 fangohr: He has been busily working on the dolfin-1.1.0 branch for the last week or so.
2013-02-04 14:06:56 fangohr: And he says apart from the GCR tests, all seems to work for him with dolfin 1.1.
2013-02-04 14:07:07 fangohr: Am I the only one not to realise this?
2013-02-04 14:07:12 fangohr: Sounds like good news to me.
2013-02-04 14:08:12 max_albert: I had seen his commits to the dolfin-1.1 branch, and was aware that he was using it. But I wasn't sure how many tests were actually failing and how significant the untested functionality is.
2013-02-04 14:08:39 max_albert: Good to hear that it seems to be more or less stable.
2013-02-04 14:47:32 mb8g11: Since we disabled the re-ordering of the nodes and renamed the mesh classes, the GCR problem was the last one.
2013-02-04 14:47:49 mb8g11: Still good to hear the rest works in practice as well ;)
2013-02-04 14:48:06 mb8g11: Has Dmitri posted to the mailing list?
2013-02-04 14:48:33 max_albert: Are we using the GCR solvers anywhere at the moment, or are they just provided as a potential alternative?
2013-02-04 14:48:50 mb8g11: Alternative to FK.
2013-02-04 14:50:21 max_albert: So this is mainly an issue for the tests, but not for daily simulations in case we don't actively change the defaults?
2013-02-04 14:54:59 ww1g11: I am still do the tests, examples/time-dependent-applied-field/test_appfield.py also fails
2013-02-04 15:01:45 ww1g11: Hi MA, where have you changed in finmag about re-ordering stuff? I just wondering what it is ...
2013-02-04 15:27:50 fangohr: I don't think Dmitri has reported anything.
2013-02-04 15:28:21 fangohr: The GCR solver is not used anywhere. Of course it would be good to keep it running, but for now we might as well disabled the test if that is all that prevents us from moving to 1.1
2013-02-04 16:22:54 fangohr: Hello fangohr1.
2013-02-04 16:23:08 fangohr: [Sorry, still testing notifications and stuff on i3 window manager.]
2013-02-04 16:23:55 fangohr: So for Thunderbird chat, the extension 'FireTray' does a good job with i3wm. If a chat message arrives, a green speech bubble in the status line starts to blink. That seems quite reasonable.
2013-02-04 16:54:08 fangohr-adium: Max, I note you are working on the automatic testing of the ipython notebooks. That's great.
2013-02-04 16:54:57 max_albert: Yes, I'd like to push this forward a bit.
2013-02-04 16:55:33 fangohr-adium: It would be rather useful, I agree.
2013-02-04 16:55:45 max_albert: We're still a bit away from automated testing/reproducing the notebooks, but it should not be too hard.
2013-02-04 16:56:25 max_albert: I've noticed that some of the notebooks are already a little "outdated" in the sense that some of the logging messages have changed since they were first committed.
2013-02-04 16:56:52 fangohr-adium: Hm, yes.
2013-02-04 16:57:04 max_albert: So it's mainly a matter of going through the notebooks one by one, re-executing them and saving them in an up-to-date state.
2013-02-04 16:57:49 max_albert: Then the script needs to be run and we need to catch cases where we simply forgot to "sanitize" the output (e.g. remove timestamps, etc.) and identify cases  where there really is a bug/difference in behaviour.
2013-02-04 16:58:21 max_albert: But so far the script seems to work reasonably well (with a few tweaks that I added).
2013-02-04 16:58:30 fangohr-adium: Whoohoo, very good.
2013-02-04 16:59:20 max_albert: And while executing the scheduling tutorial it has reminded me that realtime scheduling is broken at the moment (which I already noticed last week, but which isn't caught by any tests because we don't have any at the moment).
2013-02-04 17:01:09 max_albert: If people want to help with this, a relatively simple task would be to simply re-execute each notebook and see if the behaviour is as expected (i.e. as described in the notebook).
2013-02-04 17:01:41 fangohr1: Yes, we didn't write any. We are also not sure what use they are. One I can think of is to periodically measure RAM that the process takes (if we can get that information in the multi-process environment). Or to tweet about the state of your simulation every hour. Not so practical, maybe.
2013-02-04 17:02:47 max_albert: Well, I've used it successfully to just keep myself notified about the progress of the simulation - i.e., that it's still running (if it's taking long) - and found it quite useful for this purpose.
2013-02-04 17:03:23 fangohr-adium: Okay, that's good then. Let's add a test if we can. Ideally one that is not soo time consuming. I can add this to pivotal tracker.
2013-02-04 17:04:02 fangohr-adium: Which notebooks do still need doing? I guess you want them re-run, and if correct, saved and committed, right?
2013-02-04 17:05:13 max_albert: I think a good way to test realtime scheduling is to "monkey-patch" one of the methods of the Simulation class.
2013-02-04 17:05:24 max_albert: For example, inside the test we could replace the "run_until" method with a dummy method that simply sleeps for a second.
2013-02-04 17:05:56 max_albert: When we schedule a realtime-function that prints something every 0.3 seconds or so then we should see three messages on the screen, and we can check for that.
2013-02-04 17:06:01 max_albert: (Or something along those lines.)
2013-02-04 17:06:10 fangohr-adium: Sure. Might still be interesting due to the multi-process nature ;-) I guess one just needs to try this and see how it goes.
2013-02-04 17:06:52 max_albert: Regarding the notebooks, pretty much all of them still need doing.
2013-02-04 17:07:03 max_albert: I've only touched two so far:
2013-02-04 17:07:12 max_albert: 1) ref-restarting-simulations.ipynb
2013-02-04 17:07:24 max_albert: 2) tutorial-scheduling-events.ipynb
2013-02-04 17:07:28 fangohr-adium: Have added pivotal tracker item for testing real-time scheduling.
2013-02-04 17:07:39 max_albert: Great, thanks.
2013-02-04 17:11:11 max_albert: The best way to check a notebook is probably to re-execute it and see if the output makes sense, and also to run the script "bin/ipnbdoctest.py" on it (possibly on the re-executed version) to see where the output differs.
2013-02-04 17:11:36 max_albert: If all is fine (i.e., no differences) then the updated notebook can simply be committed.
2013-02-04 17:12:13 fangohr1: If not, it might need revising of the testing script?
2013-02-04 17:12:47 max_albert: Otherwise we either need to add an additional sanitising rule to ipnbdoctest.py (if the difference is due to something outside our control, such as the time of execution) or there is something that needs further investigation.
2013-02-04 17:14:25 fangohr-adium: I have created a story for this
2013-02-04 17:14:26 fangohr-adium: https://www.pivotaltracker.com/story/show/43779257
2013-02-04 17:14:34 max_albert: Excellent, thanks!
2013-02-04 17:14:38 fangohr-adium: to which we can all contribute and tick notebooks off when done.
2013-02-04 17:14:58 fangohr-adium: The testing check is maybe for the more adventurous, but running a notebook to see whether it still works can be done by most of us.
2013-02-04 17:15:20 fangohr-adium: About to leave, and my finmag doesn't compile either, so no testing from here for today.
2013-02-04 17:16:03 fangohr-adium: I will also try to teach Dokosbot to commit to the default branch (and not the 1.1 bookmark or whatever it is doing). MAybe tomorrow morning. In the process, I need to rescue the IRC log of the past week or so from there and put in the main branch.
2013-02-04 17:16:34 max_albert: Yes, running a notebook is pretty simple (although one should double-check that the results still make sense and not just blindly execute it, which I nearly did earlier :)).
2013-02-04 17:17:08 max_albert: Also, it may make sense to run ipnbdoctest.py on all of the notebooks just to see what the changes actually involve.
2013-02-04 17:17:15 fangohr-adium: Actually a nice opportunity to learn what finmag can do at this stage ;-)
2013-02-04 17:17:28 max_albert: But this doesn't have to be done by the same person who runs the notebook.
2013-02-04 17:21:55 max_albert: I've just added all the notebooks to the Pivotal tracker task so that it's easier to see the progress and more of an incentive. :)
2013-02-04 17:25:54 fangohr-adium: Thanks.
2013-02-04 17:34:53 fangohr: @mb8g11, I very much like how fast py.test is now gathering tests; well done.
2013-02-04 17:35:25 max_albert: What did he change?
2013-02-04 17:35:51 fangohr: Removed code that was executed during import of libraries, I think.
2013-02-05 08:53:45 mb8g11: Good morning!
2013-02-05 09:14:51 fangohr: Good morning!
2013-02-05 09:53:45 fangohr: Good Morning Marijan.
2013-02-05 09:54:05 mb4e10: Good morning
2013-02-05 10:38:02 mb8g11: Hi Marijan
2013-02-05 10:42:03 mb4e10: Hi MA.
2013-02-05 12:30:46 fangohr_:  Marijan, are you still there? Maybe we'll have a Skype chat with Bob in 5 minutes. Would you be available?
2013-02-05 12:37:01 fangohr_: Maybe not, he seems gone now.
2013-02-05 12:37:54 mb4e10: I am here
2013-02-05 12:38:03 mb4e10: I have just seen the message
2013-02-05 12:39:00 fangohr_: Okay -- Bob did email back straight after I emailed him to ask whether now was good, but I only saw it now. He seems to have disappeared. I'll ask him whether 13:30 would be convenient for him - maybe he is for lunch.
2013-02-05 12:39:19 mb4e10: ok
2013-02-05 13:28:59 fangohr_: Hi Marijan, we are on. Will you come over?
2013-02-05 13:31:11 mb4e10: I am coming
2013-02-05 14:44:02 fangohr_: Hi Weiwei, Max, Marc-Antonio. It turns out that Marijan needs to compute the normal modes of his Skyrmion system -- we talked about this before with most of your for other systems. Can somebody show him the paper by McMichael and Stiles for the normal modes in the ellipsoid?
2013-02-05 14:44:20 fangohr_: If anybody has Greg's paper handy, or some code for fourier transforms, this would help him as well (Weiwei?)
2013-02-05 14:44:25 fangohr_: Thanks all.
2013-02-05 14:44:37 fangohr_: Over and out for a few hours, back online tonight I expect.
2013-02-05 14:45:19 max_albert: I'll have a look. I should definitely have Greg's paper somewhere, and am about to look into this stuff anyway. So probably a good idea to join forces. :)
2013-02-05 14:45:35 mb4e10: Yes, it would be helpful if you can send me these papers by email.
2013-02-05 14:46:03 fangohr-adium: Thanks, Max.
2013-02-05 14:48:47 max_albert: What's the title of the paper by McMichale and Stiles? Is it "Magnetic normal modes of nanoelements"?
2013-02-05 14:51:52 max_albert: Ok, that seems to be the one.
2013-02-05 21:21:34 fangohr__: Hello again.
2013-02-06 08:36:09 max_albert: Good morning.
2013-02-06 09:04:20 mb8g11: Good morning!
2013-02-06 09:14:26 fangohr: Hey, good morning!
2013-02-06 09:15:50 fangohr: Hi Marc-Antonio. I am still liking i3wm a lot. Have you tried this at the prompt:
2013-02-06 09:15:50 fangohr: i3-msg border none
2013-02-06 09:15:50 fangohr: ?
2013-02-06 09:15:59 fangohr: To switch back, you can do
2013-02-06 09:15:59 fangohr: i3-msg border normal
2013-02-06 09:16:27 fangohr: Or I also like the minimalistic version of
2013-02-06 09:16:27 fangohr: i3-msg border 1pixel
2013-02-06 09:25:18 fangohr: Hi Max, have just tested a notebook (dev-cvode) -- and it worked out of the box (to pass the ipynb test).
2013-02-06 09:25:32 fangohr: No surprise, you had reviewed this before ;-)
2013-02-06 09:26:02 max_albert: Still, it's good to hear that it passes on two different machines. :)
2013-02-06 09:26:53 fangohr: I think it is excellent you pushed this forward -- this should make a real difference in maintaining documentation/system tests working automatically. (I haven't even looked at the code yet, although I am looking forward to doing so.)
2013-02-06 09:27:20 max_albert: I just realised that the script ignores images in the comparison, which is slightly unfortunate because comparing graphs would be quite valuable.
2013-02-06 09:27:41 max_albert: It's no problem to turn image comparison on, but I don't know how well it would work.
2013-02-06 09:28:11 max_albert: I would hope that matplotlib produces binary-identical images on different passes (although I'd need to double-check this).
2013-02-06 09:28:31 max_albert: But there might be problems with images produced by other packages (such as Paraview).
2013-02-06 09:28:47 max_albert: Still, the notebook comparison should be quite valuable even without image comparison.
2013-02-06 09:29:04 max_albert: And there is also a tool called "Perceptual Image Diff" which might come in handy: http://pdiff.sourceforge.net/
2013-02-06 09:29:20 max_albert: So all in all nothing to worry about, just something to keep in mind.
2013-02-06 09:29:29 fangohr: Could also be that the images contain the creation date, matplotlib version etc. One may be able to switch that off. But I agree that even without image comparison, this is pretty good. If we get used to scatter assert statements every now and then, that should cover it.
2013-02-06 09:29:41 fangohr: Nice idea (pdiff). I agree - just something to keep in mind for now.
2013-02-06 09:38:49 mb8g11: Wow! thanks!
2013-02-06 09:41:55 mb8g11: 1 pixel is nice, so you can still see the highlights for horizontal/vertical splitting
2013-02-06 09:43:41 fangohr: That's right. Also useful when you move the window around (so you know which one you move). (If the window contains something special, it is easy to see as well, of course.)
2013-02-06 09:44:28 mb8g11: Indeed.
2013-02-06 10:32:35 max_albert: Hi Marc-Antonio!
2013-02-06 10:32:39 max_albert: I just remembered that you were interested in the interactive slider demo in Matplotlib.
2013-02-06 10:32:43 max_albert: Here it is: http://matplotlib.org/users/screenshots.html#slider-demo
2013-02-06 11:00:21 mb8g11: How cool is that, thanks.
2013-02-06 12:11:02 fangohr: Very nice indeed, thank you. (slider_demo.py).
2013-02-06 12:11:29 max_albert: Hans, I'll show you an adapted example (based on Pete's notebook) tomorrow. ;-)
2013-02-06 12:11:39 fangohr: Great :)
2013-02-06 12:12:44 max_albert: Btw, do you which piece of code is responsible for parsing the "--logcol=none" option in the tutorial notebook?
2013-02-06 12:13:07 max_albert: Unfortunately, it seems the LaTeX conversion of the docs is not capable of dealing with the colour escape sequences that it produces.
2013-02-06 12:15:31 max_albert: Anyway, I need to rush home now to get ready for the DTC Open Day. See you later!
2013-02-06 12:16:22 fangohr_: The --locol=none is dealt with in the ansiterminal file: src/finmag/util/ansistrm.py
2013-02-06 12:16:42 max_albert: Thanks! Will have a look at it later.
2013-02-06 12:16:50 fangohr_: It is something I hacked in there, because the notebook (at that point!) had trouble dealing with the colours.  Maybe we don't even need it anymore?
2013-02-06 12:20:08 fangohr_: Hi Max, the logging notebook does not need the logcol=None switch anymore; so we can remove that.
2013-02-06 12:20:27 fangohr_: ipnbtest still fails, though. I do not commit anything here to avoid a conflict wiht your changes, Max.
2013-02-06 12:28:53 fangohr_: Hi Weiwei.
2013-02-06 12:29:05 fangohr_: Marc-Antonio, have we abandoned the 'main' bookmark now?
2013-02-06 12:29:34 ww1g11: Hi Hans, Max just left before you sent message
2013-02-06 12:29:51 fangohr_: No worries, thanks.
2013-02-06 12:33:31 ww1g11: by the way, our MFA expressions to compute the sussceptibility are correct, since I found the exact same expressions in  Unai's thesis
2013-02-06 12:45:28 fangohr_: Back to the --logcol=None switch: maybe I have spoken to early: the failure comes when we run nbconvert on that ipynb which has output from a external process (run like "!python run_my_simulation.py" within the notebook. If that output contains colour, then nbconvert chokes at that point.) This maybe why Jenkins is stuck at the moment; although I fail to reproduce this locally.
2013-02-06 12:45:53 fangohr_: Weiwei: that's good news. Who is Unai? Could you add that to the thesis folder in the dropbox, please?
2013-02-06 12:47:16 mb8g11: We are working on main without noticing I think, the last commit on the 1.1.0 branch was b27d380 three days ago.
2013-02-06 12:48:13 mb8g11: Confirmed.
2013-02-06 12:48:46 fangohr_: The branch that we use most is 'default' correct?
2013-02-06 12:48:53 fangohr_: Weiwei is busy on the 1.1 branch ....
2013-02-06 12:49:08 fangohr_: And DokosBot sits (and is a little confused as to what that means) on the 'main' bookmark.
2013-02-06 12:49:59 mb8g11: Weiwei is indeed the only one continuing his work on the 1.1.0 branch.
2013-02-06 12:50:25 fangohr_: We should certainsly move Dokosbot back onto the default branch, so that additions to the logbook are done there, rather than in the 'main' bookmark. This needs a little care, as we need to move (or copy) the logging of the past few weeks or so  from the main branch into the default branch.
2013-02-06 12:51:20 mb8g11: The bookmark 'main' tracks our default branch. Let me rename it to get rid of the confusion.
2013-02-06 12:51:33 mb8g11: And then I'll sort out DokosBot.
2013-02-06 12:51:59 fangohr_: My normal use of 'hg fetch' to automise pull, update and - if necessary - merge and commit, seems a little upset by too many branches / bookmarks. So if we don't use the bookmark, we should remove it. This can only help when we try to merge the 1.1 branch with default ...?
2013-02-06 12:52:02 fangohr_: Thanks, MA.
2013-02-06 12:52:08 fangohr_: MA=Marc-Antonio.
2013-02-06 12:52:31 fangohr_: [I'll stop tweeting here now and move to the DTC open day.]
2013-02-06 12:55:50 mb8g11: Oooooh.
2013-02-06 13:07:29 mb8g11: I deleted the bookmarks from Dokosbot's machine and commited the log by hand. Should be fine now.
2013-02-06 13:08:49 mb8g11: Overall, the bookmarks experiment was not very succesful.
2013-02-06 13:28:37 mb8g11: Test.
2013-02-06 13:29:58 mb8g11: Marvin and MarvinBot were already taken, sadly.
2013-02-06 16:16:03 ww1g11: Hans: I already put it into dropbox, the thesis is downloaded from http://www3.icmm.csic.es/magsim/?page_id=220
2013-02-07 07:47:25 mb8g11_: Hiya
2013-02-07 10:42:29 mb8g11_: Hi Hans
2013-02-07 10:42:42 fangohr_: Hi ;)
2013-02-07 10:43:16 mb8g11_: Got around to writing the report for January in preparation for our meeting later.
2013-02-07 10:43:27 fangohr_: Yes, just saw it. Looks good.
2013-02-07 10:48:30 fangohr_: Thanks also for fixing the Marvin commits -- it is re-assuring to get the chat logs at midnight.
2013-02-07 12:09:55 fangohr-adium: Max, or anybody, interested in food in 5 minutes? (No worries if not.)
2013-02-07 12:10:19 max_albert: Sure, why not.
2013-02-07 12:10:25 mb4e10: Not hungry. Thanks.
2013-02-07 12:10:36 max_albert: Hi Marc-Antonio!
2013-02-07 12:11:11 max_albert: I just had a quick look at the scheduler logic again. (Because I wanted to see if it makes sense to allow passing a list of time steps to At().)
2013-02-07 12:12:17 max_albert: I was wondering, in the At.fire() method, does the 'time' argument have any relation to the target time at which the At object is supposed to fire?
2013-02-07 12:12:42 fangohr-adium: Okay, Max. I'll come and pick you up.
2013-02-07 12:12:56 mb8g11__: Yes. It's supposed to be equal with EPSILON precision.
2013-02-07 12:13:14 mb8g11__: This is just done to ensure there is no corruption in the system.
2013-02-07 12:13:43 mb8g11__: Additionally, it allows us to check if we haven't fired at this time already.
2013-02-07 12:14:04 max_albert: Hmm, but this isn't actually checked in the code, is it?
2013-02-07 12:14:21 mb8g11__: Should be, let me check quickly.
2013-02-07 12:14:40 max_albert: Also, in the test in scheduler_test.py, an At object is created with target 100, but it is called with a.fire(0).
2013-02-07 12:15:01 max_albert: Let me just quickly push a change I did a minute ago.
2013-02-07 12:15:09 mb8g11__: l. 273             if (item.next_step != None) and abs(item.next_step - time) < EPSILON:
2013-02-07 12:16:19 max_albert: Ah, it happens in the Scheduler class, not the At class?! I'll have to check that again.
2013-02-07 12:17:27 max_albert: Ok, so the scheduler logic should work, but the test for At is still wrong, isn't it?
2013-02-07 12:17:28 mb8g11__: The At class checks it differently, to avoid double firing at the same time (possible when simulation stops exactly at the next appointment of At, and at_End==True)
2013-02-07 12:17:49 mb8g11__: The scheduler is the one who checks for internal consitency
2013-02-07 12:18:05 mb8g11__: Sounds like it, which line?
2013-02-07 12:18:21 max_albert: Line 58 ff. (after my latest commit).
2013-02-07 12:19:07 max_albert: I haven't checked the logic yet, but it sounds like it might make sense to do the consistency check inside the item classes (At, Every, ExitAt) instead of the scheduler itself?
2013-02-07 12:19:28 mb8g11__: If the test you showed me passes, then this is a bug.
2013-02-07 12:19:42 max_albert: Yes, it does pass.
2013-02-07 12:20:02 mb8g11__: Ah wait, you call fire on At directly.
2013-02-07 12:20:11 mb8g11__: Instead of telling the Scheduler it reached 100.
2013-02-07 12:20:39 max_albert: I don't. Whoever wrote the test did. ;-)
2013-02-07 12:20:41 max_albert: Feel free to have a look at this if you have time or fancy it. I'll do it too after lunch (Hans just came over).
2013-02-07 12:20:44 mb8g11__: Will add the test to the events themselves as well and maybe refactor a little.
2013-02-07 12:20:51 max_albert: Great, thanks!
2013-02-07 12:20:53 mb8g11__: Can you ask Hans when our Skype is?
2013-02-07 12:21:25 max_albert: He is "still aiming for 1pm" (maybe a little after), if that suits you.
2013-02-07 12:21:32 mb8g11__: Just checking, perfect.
2013-02-07 12:21:39 mb8g11__: Have a nice meal.
2013-02-07 12:21:45 max_albert: Cool, see you later!
2013-02-07 15:09:43 mb8g11_: Just checked why we have GCR at all. Seems slightly slower, but gives better results for coarser meshes.
2013-02-07 15:10:01 mb8g11_: plots in last commit
2013-02-07 15:10:34 mb8g11_: I doubt this is new information, but maybe a good reminder.
2013-02-08 09:34:26 fangohr-adium: Good morning all.
2013-02-08 10:01:14 mb8g11: Good morning.
2013-02-08 10:02:44 fangohr-adium: Hi MA, will take Skype online now.
2013-02-08 11:28:47 mb8g11_: Off to hear the newest gossip from Guido's group ;)
2013-02-08 12:41:49 fangohr: Good to see activity on aleph0!
2013-02-08 13:06:14 max_albert: Hi Hans, do you know the password for the jenkins user on Bitbucket?
2013-02-08 13:06:25 max_albert: We need to upload the ssh keys for jenkins on aleph0.
2013-02-08 13:06:35 max_albert: Happy to come over if you don't want to paste it in IRC.
2013-02-08 13:07:55 fangohr: Hm, hang on.
2013-02-08 13:10:31 fangohr: Don't know it.
2013-02-08 13:10:35 fangohr: Marc-Antonio?
2013-02-08 13:10:53 fangohr: I can put the keys on aleph0 -- would that help?
2013-02-08 13:12:42 mb8g11: Sorry, don't know.
2013-02-08 13:18:11 max_albert: Actually, Weiwei just said that it should be enough to put the new key from aleph0 into any of our accounts.
2013-02-08 13:18:24 max_albert: So not sure if a Jenkins account on Bitbucket even exists (or needs to exist).
2013-02-08 13:18:38 max_albert: I'll test it with my account first and then maybe Hans can put it into his once things work?
2013-02-08 13:18:39 fangohr: There is one with username 'marvinhg'.
2013-02-08 13:19:18 fangohr: I think we could take the ssh key from marvinhg on summer and put it into aleph0 in the end. But do go aheadwith yours for now, Max, this may make it a bit easier.
2013-02-08 13:37:47 max_albert: Hans, we need it the other way around: we need to take the key that already is on aleph0 (which I just created for the Jenkins user) and upload it to Bitbucket.
2013-02-08 13:38:03 max_albert: But I managed to get that to work just now (following Weiwei's suggestion of just adding it to my own account).
2013-02-08 13:38:13 fangohr: That would have been my suggestion as well.
2013-02-08 13:38:23 max_albert: Different question though: what's the easiest way to set up SMTP on that machine so that we can send email notifications?
2013-02-08 13:38:34 mb8g11: Which bitbucket user will be connecting on jenkins behalf in the end?
2013-02-08 13:38:49 fangohr: Ah, good point. Let me test whether the machine is allowed to send email ...
2013-02-08 13:39:01 max_albert: mb8g11: Well, I guess it'll be Hans in the end?
2013-02-08 13:40:05 mb8g11: then why not make marvin the new user account, so there is one for all the automated tasks (jenkins, ircbot, serving irc logs)
2013-02-08 13:40:15 fangohr: Yes, it should be marvinhg.
2013-02-08 13:40:24 fangohr: Only we have lost marvinhg's password for bitbucket. ;)
2013-02-08 13:40:28 mb8g11: his ssh keys are on summer
2013-02-08 13:40:44 fangohr: But I guess because MA created an account for him, we may get an email if we request to get thelost password back?
2013-02-08 13:40:47 mb8g11: same one than for the user IIRC
2013-02-08 13:41:03 fangohr: That's what I thought and thought I had tried, but ran into an error.
2013-02-08 13:41:09 fangohr: Maybe somebody else needs to try.
2013-02-08 13:41:11 mb8g11: Oh, let me check.
2013-02-08 13:41:19 fangohr: I think the username on bitbucket was 'marvinhg'. Was it?
2013-02-08 13:41:29 max_albert: Hmm, marvinhg sounds like a good idea in principle. However, the entire configuration is set up under the user "jenkins" for now, so it may be a bit of hassle to change it.
2013-02-08 13:41:44 max_albert: On second thought, it shouldn't be too hard.
2013-02-08 13:41:55 mb8g11: on bitbucket.org: user marvinhg, you know the pw?
2013-02-08 13:42:00 mb8g11: just tried and it works
2013-02-08 13:42:02 max_albert: Let's just finish the configuration first and check that it works, and then I'll look into it.
2013-02-08 13:42:03 fangohr: The username jenkins locally should be absolutely fine.
2013-02-08 13:42:20 mb8g11: yes
2013-02-08 13:42:34 max_albert: Ah, you mean we should just copy marvinhg's ssh keys from summer into jenkins' home directory on aleph0?
2013-02-08 13:42:43 mb8g11: yes, and his .hgrc
2013-02-08 13:42:50 max_albert: Ah, I see.
2013-02-08 13:43:04 max_albert: Are his ssh keys on summer password-protected?
2013-02-08 13:43:20 fangohr: of course not (I would guess).
2013-02-08 13:43:29 fangohr: if I understadn the question correctly.
2013-02-08 13:43:33 max_albert: And if so, how does the bitbucket authentication work? (Do we manually say ssh-add in the beginning?)
2013-02-08 13:43:42 max_albert: Hans, I think you do. :)
2013-02-08 13:43:50 max_albert: I would have guessed not either, just double-checking.
2013-02-08 13:44:14 fangohr: You can upload allowed ssh keys to bitbucket -- I would have thought this is what we did for marvinhg?
2013-02-08 13:44:49 max_albert: Yes, but usually you provide a password for the ssh keys, and you have to type this locally on the machine to unlock them.
2013-02-08 13:45:18 max_albert: Unless you want an automated user. Then you can omit the password, or issue 'ssh-add' once to store the identity while that user is logged in.
2013-02-08 13:45:42 fangohr: Hm, you know more than I do. (which is good). Can't comment.
2013-02-08 13:46:03 max_albert: Never mind, my guess is that there is no password and all is fine.
2013-02-08 13:46:11 max_albert: We'll find out anyway.
2013-02-08 13:46:14 fangohr: I agree.
2013-02-08 13:46:31 max_albert: Have you found out anything regarding the SMTP issue yet?
2013-02-08 13:46:38 fangohr: Am on the case ...
2013-02-08 13:47:06 max_albert: I presume that we need to install the right Ubuntu package and then it'll "just work" (TM).
2013-02-08 13:47:14 max_albert: Don't know which one, though, and thought one of you might know.
2013-02-08 13:48:08 fangohr: Partly right: we do need the right packages [and I think I have got those] but I don't know whether that machine is allowed to send email directly to the internet, or whether we need to request this from isolutions. So I am just trying to test this.
2013-02-08 13:48:25 max_albert: Ok, thanks!
2013-02-08 13:49:35 mb8g11: no password.
2013-02-08 13:50:37 max_albert: Great :)
2013-02-08 14:12:00 fangohr: Hm, still struggling with maildomain. Will keep you posted.
2013-02-08 14:12:08 max_albert: Ok, no worries.
2013-02-08 14:12:42 max_albert: The good news is: apart from the email notification we're pretty much up and running now. :)
2013-02-08 14:13:12 max_albert: There are still some failing tests, but the Jenkins setup should be essentially complete.
2013-02-08 14:13:24 max_albert: Thanks to Weiwei for helping with this!
2013-02-08 14:13:31 fangohr: Wohoo! Very good. Did you copy the config files from summer?
2013-02-08 14:13:41 max_albert: You can have a look yourself at http://aleph0.kk.soton.ac.uk:8080/
2013-02-08 14:14:02 max_albert: No, we basically set up a new job and simply copied all the configuration options.
2013-02-08 14:14:18 max_albert: This was quite easy. We simply had to install a few plugins.
2013-02-08 14:14:34 max_albert: We have written down all the steps, which I will commit to the finmag-jenkins repository soon.
2013-02-08 14:14:54 fangohr: Great.
2013-02-08 14:15:23 max_albert: I'll see if I can figure out which configuration files are the important ones, and will commit those too (just for reference).
2013-02-08 14:15:31 fangohr: We may want a little bit of password protection for this though, so we may have to create users on jenkins? This may also be required to map email notifications from commits to email addresses.
2013-02-08 14:15:54 max_albert: Ah, good point. Weiwei mentioned this as well.
2013-02-08 14:30:28 mb8g11: Did you remember the doc?
2013-02-08 14:31:04 max_albert: Which doc?
2013-02-08 14:34:48 mb8g11: linked from the jenkins workspace
2013-02-08 14:37:37 mb8g11: sorry, not workspace, dashboard
2013-02-08 14:43:01 fangohr: Email update: Still having problems to deliver email via smarthost smtp.soton.ac.uk.
2013-02-08 14:43:11 fangohr: The error message is that the sender email address/domain is incorrect.
2013-02-08 14:43:43 fangohr: That is true: it seems to be "<nobody@nowhere>"
2013-02-08 14:44:12 fangohr: I am trying to track this down, but have requested from isolutions that we should be allowed to send email from the machine. It can't do any harm -- if we are allowed already, that will also be useful information.
2013-02-08 14:54:05 max_albert: Thanks!
2013-02-08 14:54:48 max_albert: Btw, I just copied marvin's ssh keys from summer when it occurred to me that this probably won't make any difference because it is only used to check out the repository for building and testing, but jenkins won't make any commits.
2013-02-08 14:54:58 max_albert: Anyway, two ssh keys less to worry about. :)
2013-02-08 14:58:41 mb8g11: Max, you forgot the cron-job which commits the IRC logs on marvin's behalf.
2013-02-08 14:58:49 mb8g11: Well, that's not an issue for now.
2013-02-08 14:59:05 mb8g11: But it would be nice if you still copied the keys.
2013-02-08 14:59:18 mb8g11: Which you did.
2013-02-08 15:03:38 mb8g11: Could you rig the new jenkins to check out the dolfin-1.1.0 branch?
2013-02-08 15:04:23 mb8g11: Also, PETSC explodes in my face in examples/nmag_example_2/run_finmag.py, will have to investigate.
2013-02-08 15:10:29 max_albert: Marc-Antonio, isn't this cron-job separate from Jenkins?
2013-02-08 15:10:46 max_albert: The other things I did already (copied the keys, and Jenkins checks out the dolfin-1.1.0 branch).
2013-02-08 15:11:11 max_albert: I'm going to install nmag, oommf and magpar soon, too (which is needed for the tests).
2013-02-08 15:11:44 max_albert: I'll also install the latest netgen version if possible, to get rid of all the error messages (I hope this works - I tried it on summer once and it failed for some reason, but hopefully it works now).
2013-02-08 15:12:08 max_albert: I'll put the commands for Netgen into an installation script so that you have them, too, Marc-Antonio.
2013-02-08 15:12:33 mb8g11: The cronjob is separate from jenkins indeed, just didn't want you to delete the keys on aleph0 :(
2013-02-08 15:12:40 mb8g11: :)
2013-02-08 15:12:55 mb8g11: Good thinking with the branch.
2013-02-08 15:13:14 mb8g11: And thank you for the script;
2013-02-08 15:13:17 max_albert: Why would I delete the keys? (And which keys anyway - marvin's or the new ones I created?)
2013-02-08 15:13:38 mb8g11: Wait, why did you create new keys?
2013-02-08 15:13:59 max_albert: Because we needed a way for jenkins to check out the repository. And I hadn't thought of marvin's keys.
2013-02-08 15:14:09 mb8g11: Ah.
2013-02-08 15:17:56 fangohr: Hi folks, I got the email business so far that I do now get the following error message:
2013-02-08 15:17:59 fangohr:  fangohr@soton.ac.uk
2013-02-08 15:17:59 fangohr:     SMTP error from remote mail server after MAIL FROM:<fangohr@aleph0> SIZE=1407:
2013-02-08 15:17:59 fangohr:     host smtp.soton.ac.uk [152.78.54.16]: 530 5.7.1 Client was not authenticated
2013-02-08 15:18:28 fangohr: This does look to me like the delivery of our email to smtp.soton.ac.uk works okay, but the system refuses to accept.
2013-02-08 15:18:48 fangohr: If correct, then we need to wait for isolutions to allow for smtp delivery from that machine without authentication.
2013-02-08 15:19:08 fangohr: To check this is working or not, you can send an email using the 'mail' command, or using 'alpine'.
2013-02-08 15:19:19 fangohr: The interesting log file to watch is /var/log/exim4/mainlog
2013-02-08 15:19:31 fangohr: as we use exim4 for email delivery at the moment.
2013-02-08 15:20:04 fangohr: I had to change the /etc/hostname to include the fully qualified domain name to make this work. I found this a little odd, but seems to agree with messages on the internet.
2013-02-08 15:20:43 fangohr: It would be good to reboot at some point to check whethre this has broken anything else, and will still work after the reboot, although I am moderately confident.
2013-02-08 15:21:30 fangohr: So, when there is a convenient moment, please reboot aleph0 and let me know so I can have another check.
2013-02-08 15:21:45 fangohr: Other than that, we need to wait for isolutions I think (so not for Monday).
2013-02-08 15:21:52 max_albert: Good idea. Will do that in a minute (just want to copy some files first.)
2013-02-08 15:31:13 fangohr: Thanks Max. No change on the email delivery front, so that is okay. Will need to wait.
2013-02-08 15:31:36 max_albert: Ok. There is no rush I guess.
2013-02-08 15:32:02 fangohr: I need to leave early today and will be offline for a few hours -- hope all proceeds well and will read Dokosbot's commit of the irc chat later. Good luck :)
2013-02-08 15:32:14 max_albert: We can always try something really sneaky and tell Jenkins to issue an ssh command which sends the email from a different machine. ;-)
2013-02-08 15:32:35 fangohr: Yes, but not worth the effort I would say. Nice idea, though. :)
2013-02-08 15:32:55 max_albert: Ok, see you later. And thanks for your help! I'm sure all this will soon result in a hugely improved testing experience. :)
2013-02-08 15:33:08 fangohr: No doubt :)
2013-02-08 16:17:04 max_albert: Ok, I have pushed the step-by-step instructions for setting up Jenkins to the finmag-jenkins repository and will now install Netgen (and then oommf, nmag, magpar).
2013-02-08 16:17:18 max_albert: This should hopefully fix a bunch of tests that are failing at the moment.
2013-02-08 16:24:15 max_albert: Btw, does anybody know what the script finmag/bin/invoke-ci-build does and whether it is used at all?
2013-02-08 16:24:20 max_albert: Not important, just wondering...
2013-02-08 17:05:14 mb8g11: Did you have a look at the script in question?
2013-02-08 17:06:02 max_albert: You mean the invoke-ci-build script?
2013-02-08 17:06:07 mb8g11: Yes, I couldn't figure it out.
2013-02-08 17:06:27 max_albert: Yes. And it seems to me that it's not used.
2013-02-08 17:06:31 max_albert: But I wasn't sure.
2013-02-08 17:06:56 mb8g11: It seems to call an URL on mu.kk.soton.ac.uk. Which computer is that?
2013-02-08 17:07:30 max_albert: Hmm... I do have an account on that machine, but I don't know which one it is.
2013-02-08 17:08:07 max_albert: I think I got the account to do some administrative work related to Hans' teaching.
2013-02-08 17:08:17 max_albert: So maybe he used the machine for testing, but the script is unused now?
2013-02-08 17:08:45 max_albert: Oh, hg log says that it was actually Dmitri who created the script.
2013-02-08 17:09:07 max_albert: But this was last February. Maybe some testing on his side?
2013-02-08 17:28:55 mb8g11: Maybe. Does it get called from the jenkins server?
2013-02-08 17:29:30 max_albert: I don't think so. But Hans and/or Dmitri will know more.
2013-02-08 17:29:37 max_albert: I'll create a simple Tracker item for it. Not important, but easy to solve. :)
2013-02-08 17:29:41 mb8g11: There is no reference to it inside the finmag repository.
2013-02-08 17:29:47 mb8g11: Good idea.
2013-02-08 17:30:19 max_albert: Am nearly done installing the software on aleph0, by the way (only Netgen is missing).
2013-02-08 17:30:23 max_albert: How is the merging business going?
2013-02-08 17:31:18 mb8g11: Wondering why the build on aleph0 fails due to matplotlib.
2013-02-08 17:31:32 max_albert: Oh, that should be fixed.
2013-02-08 17:31:36 mb8g11: Also, there's this PETSC error which I hadn't noticed before.
2013-02-08 17:31:54 max_albert: It's due to the fact that matplotlib uses the TkAgg backend by default, which requires a running X server.
2013-02-08 17:32:11 mb8g11: http://aleph0.kk.soton.ac.uk:8080/job/finmag/26/testReport/examples.macrospin/test_macrospin/test_macrospin_alpha_0_00001/
2013-02-08 17:32:12 max_albert: On summer, this was changed to the 'Agg' backend in /etc/matplotlibrc.
2013-02-08 17:32:36 max_albert: I also changed this on aleph0.
2013-02-08 17:32:56 max_albert: Oh, that's a different error.
2013-02-08 17:33:48 mb8g11: That's the thing, a lot of things are broken, which is why I am reticent of merging.
2013-02-08 17:34:04 max_albert: Hmm, when I run that test locally it passes for me.
2013-02-08 17:34:31 max_albert: (Locally on aleph0, that is.)
2013-02-08 17:34:55 mb8g11: Same for me (my dolfin 1.1.0 machine)
2013-02-08 17:35:25 mb8g11: Does the jenkins user have the newest matplotlib, py.test and friends?
2013-02-08 17:35:34 max_albert: Just checking that...
2013-02-08 17:35:35 mb8g11: From pip, not ubuntu.
2013-02-08 17:37:45 max_albert: Well, matplotlib is version 1.1.1, whereas the latest released version is 1.2.0. But this is the system default, and the test works for me as user 'albert'.
2013-02-08 17:37:52 max_albert: I'll try running it as user jenkins, too.
2013-02-08 17:40:41 max_albert: Hmm, the test also passes when I run it as user jenkins.
2013-02-08 17:40:43 max_albert: Strange.
2013-02-08 17:41:03 mb8g11: (I will merge default into dolfin-1.1.0)
2013-02-08 17:41:41 mb8g11: Strange indeed.
2013-02-08 17:42:12 max_albert: I've just restarted Jenkins, and will update matplotlib to the latest version via pip. Maybe that'll help.
2013-02-08 17:45:17 mb8g11: Bummer, Weiwei basing his work on the dolfin-1.1.0 branch results in merge conflicts I have to resolve by hand.
2013-02-08 17:45:38 max_albert: Ugh...
2013-02-08 17:46:22 max_albert: That was actually my worry when I first saw "regular" commits on the dolfin-1.1.0 branch, but I had forgotten about it by now.
2013-02-08 17:46:30 max_albert: Hopefully there won't be too many conflicts!
2013-02-08 17:46:42 mb8g11: No, only 3.
2013-02-08 17:49:00 mb8g11: Weird that you can run it locally though. I wonder what jenkins does differently.
2013-02-08 18:04:08 mb8g11: Merged the changes from default into dolfin-1.1.0, should make it easier to merge the branch into default later.
2013-02-08 18:04:26 max_albert: Great! Good work.
2013-02-08 18:06:19 max_albert: I upgraded matplotlib to version 1.2.0 via pip. I think the test error is gone now.
2013-02-08 18:12:44 mb8g11: Good.
2013-02-08 18:17:02 mb8g11: Does the new jenkins build the doc? There used to be a link to the doc in the sidebar.
2013-02-08 18:17:30 max_albert: Yes it does, but only after a successful build (of which there has been none so far). ;-)
2013-02-08 18:17:56 mb8g11: Haha.
2013-02-08 18:18:45 max_albert: Ok, I also installed netgen. Fingers crossed that this will work with Jenkins (last time it didn't).
2013-02-08 18:18:49 max_albert: Will commit the installation script soon.
2013-02-08 18:19:15 mb8g11: An upgraded netgen would be a huge boon. Imagine how short the debugging output becomes ;)
2013-02-08 18:31:38 max_albert: Ok, the installation script for netgen is committed. Feel free to test it (it may still have a few rough edges).
2013-02-08 18:32:02 max_albert: I think I'll have to leave soon.
2013-02-08 18:32:13 max_albert: Wishing you all a good weekend if I'm not online later!
2013-02-08 18:32:19 max_albert: And thanks for the productive work today!
2013-02-08 18:32:40 ww1g11: Have a good weekend,; -)
2013-02-08 18:42:39 mb8g11: Bye Max!
2013-02-08 18:42:59 max_albert: (Still here, but only for a few minutes.)
2013-02-08 18:43:24 max_albert: Just had a quick look at the first few remaining failures. They seem to be due to the mesh changes again (e.g. Box vs. BoxMesh).
2013-02-08 18:43:56 mb8g11: Yes, we introduced new meshes in the meantime, no biggie.
2013-02-08 18:47:02 max_albert: Just fixing a few of them before disappearing.
2013-02-08 18:48:41 mb8g11: Cool.
2013-02-08 18:48:52 mb8g11: Thanks for the script, it seems to be building netgen okay.
2013-02-08 18:59:44 max_albert: Hmm, it seems that the new netgen is causing some problems again for jenkins. Will have to investigate this.
2013-02-08 18:59:57 max_albert: Need to leave now, though. I'll hopefully be able to take a look tomorrow.
2013-02-08 19:00:06 max_albert: Have a good weekend everyone!
2013-02-08 19:00:59 mb8g11: Have a good week-end yourself!
2013-02-08 19:01:01 mb8g11: Bye all!
2013-02-08 21:49:59 fangohr1: Hello â still people working out there?
2013-02-08 22:10:25 fangohr1: Just tried to run py.test on aleph0 with the dolfin-1.1 branch: 6 fails, and 200 (or so) passes. That's not bad.
2013-02-08 22:10:55 fangohr1: Fixed the first fail by installing python-progressbar :)
2013-02-08 22:21:00 mb8g11: no more errors?
2013-02-08 22:21:19 mb8g11: Max must have fixed those.
2013-02-08 22:22:19 mb8g11: btw. typing this on my cell, over ssh on my office machine over vpn to the uni
2013-02-08 22:26:40 fangohr1: Maybe many errors where due to missing packages such as Nmag, OOMMF, Magpar?
2013-02-08 22:27:18 fangohr1: Cool; the ssh vpn business. Does that mean you start a text based IRC client on your machine via the path you describe? Anyway, not the right time to exploin I am sure ;-)
2013-02-08 22:32:25 mb8g11: maybe.
2013-02-08 22:33:48 mb8g11: mobile phone > vpn to uni > ssh to machine over ssh client > connect to screen session running IRC
2013-02-08 22:37:54 fangohr1: Connect to screen â that sounds intriguing. Maybe you can show me when we meet next time.
2013-02-08 22:44:21 mb8g11: of course. it's just a way to have independent terminal sessions you can connect to, and that don't die when you disconnect
2013-02-08 22:45:03 mb8g11: not the fancy Mac OS X screen sharing stuff :) still, very useful
2013-02-08 22:45:06 fangohr1: Oh right, something like 'vscreen' or so â have forgotten the name, but probably seen in the late 90s somewhere.
2013-02-08 22:45:14 fangohr1: Much more useful if all you need is ssh!
2013-02-08 22:45:20 mb8g11: 'screen'
2013-02-08 22:45:35 fangohr1: Just screen â that sounds about rigth now.
2013-02-08 22:45:44 mb8g11: haha yes.
2013-02-08 22:46:36 fangohr1: Is it just me, or do others like this as well:
2013-02-08 22:46:42 fangohr1: In [1]: import finmag
2013-02-08 22:46:44 fangohr1: [â¦]
2013-02-08 22:46:52 fangohr1: [2013-02-08 22:45:35] DEBUG:                Linux: Linux Mint 14 Nadia
2013-02-08 22:47:19 fangohr1: It just looks very 'mint'; to go with the flow.
2013-02-08 22:48:48 mb8g11: no hacker cred though ;)
2013-02-08 22:49:49 fangohr1: â¦ well â¦ some credit for daring to use an ever so slighty different distribution. I have made no effort at all so far to make finmag portable beyond Ubuntu.
2013-02-08 22:50:06 mb8g11: thx to weiwei we can now say finmag (doesn't) run on TWO linux distributions
2013-02-08 22:51:03 mb8g11: the 'doesn't' part will be fixed soon, then this is indeed cool
2013-02-08 22:51:33 mb8g11: never managed to compile dolfin on archlinux
2013-02-08 22:52:25 fangohr1: Did you try?
2013-02-08 22:53:02 mb8g11: once every few months, not 1.1.0 yet
2013-02-08 22:53:07 fangohr1: ;-)
2013-02-08 22:53:35 mb8g11: usually fail to compile trilinos
2013-02-08 22:54:24 mb8g11: why are you still working?
2013-02-08 22:54:51 fangohr1: Yes â sound like the Nmag story: our own code is usually easy to compile. The hard bits and pieces are the sophisticated but not widely widely spread libraries such as petsc, and trilinos.
2013-02-08 22:55:34 fangohr1: Lots to be done. Also, not working now, just chatting ;-). All this finmag stuff is only distraction to avoid the actual work I should be doing.
2013-02-08 22:57:24 mb8g11: good to know even you procrastinate from time to time ;)
2013-02-08 22:58:55 fangohr1: err â¦ yes.
2013-02-08 23:00:07 mb8g11: haha. anyways, have a good night!
2013-02-08 23:01:37 fangohr1: Same to you.
2013-02-09 00:55:13 fangohr1: Good night folks.
2013-02-09 15:11:04 mb8g11: Hi all.
2013-02-09 22:39:55 fangohr1: Good Evening.
2013-02-11 08:31:12 mb8g11: Good morning!
2013-02-11 09:19:56 fangohr-adium: Good Morning!
2013-02-11 09:20:02 max_albert: Good morning!
2013-02-11 09:20:08 fangohr-adium: Great news the progress regarding 1.1. Well done all!
2013-02-11 09:26:31 max_albert: You mean the immensely successful build history on aleph0, with 63 failed builds? ;-)
2013-02-11 09:26:43 fangohr: No :)
2013-02-11 09:26:56 fangohr: I haven't seen that yet, but now that you mention it ...
2013-02-11 09:27:15 fangohr: I am just running the py.test on aleph0 after fetching the latest.
2013-02-11 09:27:33 fangohr: Netgen keeps popping up windows. Have you seen that before?
2013-02-11 09:27:49 max_albert: Oh, that should be gone again!?
2013-02-11 09:27:57 fangohr: I think I need to click on 'quit' to continue, although nothing is displayed.
2013-02-11 09:28:03 max_albert: Hmm...
2013-02-11 09:28:03 fangohr: i.e. no geometry visible.
2013-02-11 09:28:34 max_albert: I had added a helper function which reports the Netgen version, but removed that again after realising that calling netgen with the -v or --version options still opens a GUI.
2013-02-11 09:28:44 max_albert: (I was sure I had tested that before though...)
2013-02-11 09:28:59 max_albert: Maybe there is some remainder left somewhere, or I committed the fix to the wrong branch.
2013-02-11 09:29:03 fangohr: Is it posible that you don't see that anymore because our meshes arecashed once generated? Or latest changes not pushed?
2013-02-11 09:29:05 max_albert: Let me have a quick look.
2013-02-11 09:29:07 fangohr: Yeah.
2013-02-11 09:29:13 fangohr: No rush -- I should actually be doing something else ;-)
2013-02-11 09:29:19 fangohr: but couldn't resist...
2013-02-11 09:30:20 fangohr: Maybe 63 build failures in a row is not ideal, but looking at the plot of the number of tests that pass, this is pretty good!
2013-02-11 09:30:36 max_albert: Yeah, we're pretty close to a clean build again.
2013-02-11 09:31:01 max_albert: Although there are a few points worth investigating I think, because some of the tests seem(ed) to behave weirdly.
2013-02-11 09:31:51 fangohr: Yes, can you take a note which ones these are?
2013-02-11 09:32:35 max_albert: Essentially these ones I think: http://aleph0.kk.soton.ac.uk:8080/job/finmag/60/testReport/
2013-02-11 09:32:48 max_albert: Although I haven't looked at *all* of them.
2013-02-11 09:33:39 max_albert: Regarding the Netgen issue: indeed I can't see my latest fix in the history.
2013-02-11 09:34:10 max_albert: This is really strange because this already happened yesterday, when I was sure I had committed (and pushed) it but had to do it a second time because I couldn't find it.
2013-02-11 09:34:17 max_albert: Now I need to do it a third time?!?! Weird...
2013-02-11 09:36:07 max_albert: Just pushed the change. Can you try again and see if it works now?
2013-02-11 09:36:19 fangohr: Yes.
2013-02-11 09:36:25 max_albert: Thanks.
2013-02-11 09:37:29 fangohr: I think it is gone (only done one test that had the GUI showing before).
2013-02-11 09:37:39 max_albert: Ok, good to hear.
2013-02-11 09:37:40 fangohr: Will do them all now.
2013-02-11 09:37:54 fangohr: I also had a problem starting Nmag (will post details here in a moment).
2013-02-11 09:38:09 max_albert: Ok, that would be good to know about.
2013-02-11 09:38:45 fangohr: Some of the nmag tests failed. I am not sure the following is the cause, but I might as well document what I know.
2013-02-11 09:38:51 fangohr: When calling 'nsim', I get the following:
2013-02-11 09:38:54 fangohr: ^[[Afangohr@aleph0 ~ $ nsim
2013-02-11 09:38:54 fangohr:        nsim:2013-02-11 09:32:01,304   setup.py  471    INFO Nsim 0.2.1
2013-02-11 09:38:54 fangohr:        nsim:2013-02-11 09:32:01,304   setup.py  472    INFO Runid is 'interactive-session'
2013-02-11 09:38:54 fangohr:        nsim:2013-02-11 09:32:01,304   setup.py  473    INFO Using 1 CPUs
2013-02-11 09:38:54 fangohr: WARNING: Configuration file ipythonrc not found. Ignoring request.
2013-02-11 09:38:55 fangohr: ------------------------------------------------------------
2013-02-11 09:38:57 fangohr: Traceback (most recent call last):
2013-02-11 09:39:01 fangohr:   File "/usr/local/software/nmag-0.2.1/nmag-0.2.1/lib/python2.7/site-packages/IPython/ConfigLoader.py", line 66, in load
2013-02-11 09:39:04 fangohr:     fname = filefind(fname,incpath)
2013-02-11 09:39:06 fangohr:   File "/usr/local/software/nmag-0.2.1/nmag-0.2.1/lib/python2.7/site-packages/IPython/genutils.py", line 555, in filefind
2013-02-11 09:39:09 fangohr:     ' not found in current or supplied directories:' + `alt_dirs`
2013-02-11 09:39:11 fangohr: IOError: File'ipythonrc' not found in current or supplied directories:u'/home/fangohr/.ipython'
2013-02-11 09:39:13 fangohr: WARNING: Problems loading configuration file 'ipythonrc'
2013-02-11 09:39:15 fangohr: Starting with default -bare bones- configuration.
2013-02-11 09:39:17 fangohr: In [1]:
2013-02-11 09:39:37 fangohr: The key here seems to be that ipython cannot find its config file and is unhappy about that. I am guessing that the IPython we bundled with Nmag is old, and thus expets a different config file.
2013-02-11 09:40:11 max_albert: But does nmag not work because of that?
2013-02-11 09:40:17 max_albert: Or is it just a warning?
2013-02-11 09:40:32 fangohr: A way to 'fix' that is that create that old ipython config file. This can be done by starting the old IPython. And here is the key information: it is located in /usr/local/software/nmag-0.2.1/nmag-0.2.1/bin as executable 'ipython'.
2013-02-11 09:41:06 fangohr: This may not be the problem, but it is certainly irritating ;-). So I just wanted to share where the binary files are that are shipped with Nmag (because they are not in /usr/bin, etc).
2013-02-11 09:41:27 max_albert: I just tried callin 'nsim' and I don't get that error message...
2013-02-11 09:41:32 fangohr: I am just running the tests again, and this change does not seem to have fixed the failures (although code still going). Will keep you posted.
2013-02-11 09:42:19 max_albert: Just as a note, I installed nmag system-wide on aleph0 (so that it would be available to all users). However, I noticed that on summer it was installed locally in Jenkins' home directory. And I did see issues with wrong permissions when nmag is installed via 'sudo'. So perhaps this is related (although it may not be).
2013-02-11 09:42:51 max_albert: Also, if you start nsim a second time, do you still get the error?
2013-02-11 10:02:13 fangohr: Yes, the error didn't go away. Not quite sure why: as you seem to be guessing, these init files should be created automatically. Never mind.
2013-02-11 10:08:14 fangohr: Yes, the local installation could relate to that. I'll keep you posted with any news.
2013-02-11 10:08:52 fangohr: Hi Dmitri :)
2013-02-11 10:09:00 max_albert: Do you think I should remove the global nmag installation again? This may make the error go away, but would require everyone to install nmag themselves.
2013-02-11 10:09:16 D_Chernyshenko_: Good morning
2013-02-11 10:10:06 fangohr: Max: I am just installing nmag locally -- if that fixes it, I suggest to remove the global one. Not very elegant, but disk space is not an issue, and calling our nmag installations script is trivial. So we might as well install locally if that makes it better.
2013-02-11 10:10:33 max_albert: Ok, I agree.
2013-02-11 11:21:02 mb8g11: Does anyone know how to effectively control the maximum mesh size using gmsh?
2013-02-11 11:22:23 mb8g11: It doesn't seem to care about Mesh.CharacteristicLengthMax in the geofile.
2013-02-11 11:23:03 ww1g11: seems point size is the most import one
2013-02-11 11:25:32 mb8g11: Thanks, will play with that. Seems that CharacteristicLengthMax specifies something other than maximum edge length.
2013-02-11 11:27:43 fangohr: No idea, sorry.
2013-02-11 11:28:14 ww1g11: looks like the mesh become coarse if you only CharacteristicLengthMax quite large and mesh sizes are not uniformly distributed
2013-02-11 11:33:01 fangohr: Off topic: seems to be snowing.
2013-02-11 11:35:31 ww1g11: yeah,  heavy snow
2013-02-12 09:21:26 mb8g11: Good morning!
2013-02-12 09:33:34 D_Chernyshenko_: Morning
2013-02-12 09:47:05 fangohr-adium: Morning folks.
2013-02-12 09:47:10 max_albert: Good morning.
2013-02-12 10:38:23 fangohr-adium: Max, did you start to put any information in the finmag-jenkins repository? I am asking as I would want to jot down a few notes on email setup, and don't know whether to start a new repository or not.
2013-02-12 10:40:01 max_albert: Yes, I basically put a set of step-by-step instructions there on how to set up a working Jenkins environment from scratch. These are the (slightly brushed up) notes that Weiwei and I took when we set it up on aleph0.
2013-02-12 10:40:23 fangohr-adium: Great stuff. Is this on bitbucket already?
2013-02-12 10:40:32 max_albert: Yes.
2013-02-12 10:40:52 max_albert: https://bitbucket.org/fangohr/finmag-jenkins
2013-02-12 10:41:00 fangohr-adium: Thank you.
2013-02-12 10:41:48 max_albert: I also wanted to commit the config.xml file to this repository, but would rather do that when the installation is completely working and all tests pass.
2013-02-12 10:42:01 fangohr-adium: Sure.
2013-02-12 10:51:27 max_albert: Interesting. I just checked the situation on aleph0 again and saw that one of Weiwei's latest commits (https://bitbucket.org/fangohr/finmag/commits/dc4ae5132569/) fixed one of the 3 failing tests on aleph0.
2013-02-12 10:52:05 max_albert: The test in question is in src/finmag/tests/comparison/demag/test_demag_field.py
2013-02-12 10:52:29 max_albert: And the output of the failed test is here: http://aleph0.kk.soton.ac.uk:8080/job/finmag/65/testReport/src.finmag.tests.comparison.demag/test_demag_field/test_using_magpar/
2013-02-12 10:52:56 max_albert: However, the only change that Weiwei did (AFAICS) was a cosmetic change in the output (use %g as the formatting string instead of %f).
2013-02-12 10:53:30 max_albert: And I can't see how that could be broken before since neither the test file nor src/finmag/util/magpar.py (where the change happened) have been touched in ages.
2013-02-12 10:53:38 max_albert: Weird...
2013-02-12 10:54:01 max_albert: But anyway, if it fixed a test... ;-)
2013-02-12 10:54:24 max_albert: So we're only two failures away from a stable build (modulo the skipped/disabled tests of course).
2013-02-12 12:46:24 max_albert: Anybody interested in lunch in a bit?
2013-02-12 13:34:14 fangohr: No lunch for me, sorry.
2013-02-12 13:55:00 fangohr-adium: Hi all, just to say that email delivery from aleph0.kk.soton.ac.uk works now.
2013-02-12 13:59:35 fangohr-adium: Max, Weiwei, have just looked at your documentation for setting up jenkins: very well done. With this, we have quite some confidence that we can do it again, if necessary. Let's keep extending this as we make further changes (such as adding email notification, say).
2013-02-12 14:19:41 max_albert: Thanks, Hans!
2013-02-12 14:21:01 max_albert: I saw that you also updated the notes with info about setting up email notifications.
2013-02-12 14:21:10 max_albert: (Haven't read them yet though.)
2013-02-12 14:21:15 max_albert: Does this work now?
2013-02-12 14:21:35 fangohr-adium: Yes, should all work now.
2013-02-12 14:21:59 max_albert: Awesome! What was the problem? (Sorry, it's probably written in your explanations... Will read them first.)
2013-02-12 14:22:55 max_albert: Ok, just read it.
2013-02-12 14:23:19 max_albert: So iSolutions did have to allow sending email for that machine? That's interesting.
2013-02-12 14:23:26 fangohr-adium: Yes.
2013-02-12 14:23:46 fangohr-adium: In the old days, any unix machine could send email. But that opens the door to lots of spam if only one of them is broken into.
2013-02-12 14:24:09 max_albert: Right. Makes sense that they want to be able to control it.
2013-02-12 14:54:24 max_albert: Hi Hans! Just FYI email notifications indeed work now on aleph0. The emails are currently sent to my account (I set this up for testing, but will change it to you once everything works, or straight away if you prefer).
2013-02-12 14:54:45 max_albert: One small thing: the sender is still being reported as "address not configured yet [nobody@nowhere]". Do you know where to change this?
2013-02-12 16:44:30 mb8g11: max_albert: The change Weiwei did (replacing %f with %g in util/magpar.py) was not a cosmetic one. The function the change happened in compares finmag results with magpar results.
2013-02-12 16:45:15 mb8g11: The degrees of freedom are ordered differently in magpar and finmag. The code compares the coordinates to find the corresponding degrees of freedom.
2013-02-12 16:45:51 mb8g11: Due to the fact that the data is read from a file and weird rounding issues exist the comparison is made string-based.
2013-02-12 16:46:46 mb8g11: (of the coordinates, mind you)
2013-02-12 16:47:08 max_albert: Oh, I see. Thanks for the explanation!
2013-02-12 16:47:20 max_albert: However, isn't string-based comparison even more dangerous/prone to changes?
2013-02-12 16:47:31 max_albert: Would numpy.allclose() (with appropriate tolerances) be able to do the job?
2013-02-12 16:48:00 max_albert: Also, when did this test actually break? It seemed to me that none of the relevant files have been touched in a long time.
2013-02-12 16:48:09 mb8g11: It broke on the new machine.
2013-02-12 16:48:15 mb8g11: Or something to that effect.
2013-02-12 16:48:35 mb8g11: I had some breakage on my own machine last time I upgraded Ubuntu,
2013-02-12 16:49:03 max_albert: Oh, so the comparison was actually so strict that small changes (e.g. due to running it on a different machine) could break it?
2013-02-12 16:49:10 mb8g11: It's not the data that is compared by string, just the algorithm that tries to find which node belongs to which.
2013-02-12 16:50:19 mb8g11: Imagine a very fine mesh, expressed in meters (so coordinates of 1e-9 and smaller)... and now magpar round the coordinates and stores them in a file with limited precision.
2013-02-12 16:51:07 max_albert: Ok. And then what exactly is compared?
2013-02-12 16:51:37 mb8g11: Coordinates of the mesh when read back from magpar against coordinates of the same mesh given to us by finmag.
2013-02-12 16:51:48 mb8g11: To find out which degree of freedom corresponds to which vertex.
2013-02-12 16:54:06 max_albert: Aha!
2013-02-12 16:54:59 max_albert: Might be good to add some info to this effect to the docstring of "compare_field_directly()" in src/finmag/util/magpar.py.
2013-02-12 16:55:42 max_albert: From the naming of the function I would not have guessed that it does what you described above.
2013-02-12 16:56:31 mb8g11: It's only part of what it does.
2013-02-12 16:57:26 mb8g11: It gets coordinates and values for magpar, coordinates and values for finmag and compares the two. So the naming is okay. It's just there is a lot of work involved to be able to compare that data.
2013-02-12 16:58:33 mb8g11: Namely, sorting the data by coordinates.
2013-02-12 16:59:10 max_albert: Ah, ok. Maybe still worth putting that down as comments in that function (otherwise people like me who don't take the time to understand the code in detail will likely get confused again ;-)).
2013-02-12 16:59:29 max_albert: I'll try to do that based on your explanations (until you are very keen to do it yourself).
2013-02-12 16:59:30 mb8g11: Will do right now.
2013-02-12 16:59:36 max_albert: s/until/unless/
2013-02-12 16:59:41 max_albert: Oh, thanks!
2013-02-12 17:00:23 max_albert: I'd have to read the code in detail to be able to tell, but do you think string comparison is still the right way to go?
2013-02-12 17:00:37 max_albert: Are all the strings produced by magpar (and thus can be expected to be the same)?
2013-02-12 17:01:00 max_albert: Or is the comparison between strings produced by Magpar and Finmag, respectively?
2013-02-12 17:05:41 mb8g11: (pushed)
2013-02-12 17:05:49 max_albert: Thanks!
2013-02-12 17:09:00 mb8g11: We get coordinates and values back from magpar, and coordinates and values from finmag. We want to compare the values - but we do not know which value in the results array of magpar corresponds to which entry in finmags results.
2013-02-12 17:09:22 mb8g11: So we turn to the coordinates.
2013-02-12 17:09:53 mb8g11: But sadly, magpar has somehow mangled the coordinates by rounding them and/or saving them to file with limited precision
2013-02-12 17:11:00 mb8g11: The codes solution: Build a dictionary of coordinates to results. The keys of this dictionary is then simply "xyz" truncated by string operation.
2013-02-12 17:11:16 max_albert: Ok, got it. Sorry if I'm a bit slow today... Might have been in the office for too long. ;-)
2013-02-12 17:12:04 mb8g11: It's a solution prone to occasional breakage but it was much less effort to implement than something which looks for the "closest" point
2013-02-12 17:13:10 mb8g11: I think Weiwei wrote it originally. Stumbled upon it, had the same reaction as you. Decided to re-do it the correct way. After a few hours I just decided to let it be the way it is and just refactor a little.
2013-02-12 17:13:28 mb8g11: The whole file, that is ;)
2013-02-12 17:13:50 max_albert: Yeah, I can believe that. It's not a bad solution at all. I even wonder why it would break if the precision of the printed strings is limited to the precision we need/want to accept.
2013-02-12 17:14:30 mb8g11: Because the precision we need, the precision of the strings and the precision we get from magpar are very close to each other :-/
2013-02-12 17:14:49 max_albert: :-)
2013-02-12 17:15:37 max_albert: Ok, I need to go. Thanks again for the explanations and have a good evening everyone!
2013-02-12 17:15:44 mb8g11: Bye Max!
2013-02-13 08:33:23 mb8g11: Good morning!
2013-02-13 08:33:28 max_albert: Good morning!
2013-02-13 08:38:02 mb8g11: How is it going?
2013-02-13 08:39:02 max_albert: Not bad, thanks! Trying to get into a routine of coming to the office a bit earlier. Which is nice because it's very quiet and you feel you can get a bit done before everybody else turns up. :)
2013-02-13 08:39:19 max_albert: How are things in Hamburg?
2013-02-13 08:42:50 mb8g11: Hehe.
2013-02-13 08:43:06 mb8g11: Things are fine, it's starting to snow a little.
2013-02-13 08:44:09 max_albert: No skiing possible in the streets, though, I guess... Ice-skating maybe? Or at least building snowmen?
2013-02-13 08:59:58 max_albert: Tea time! :-)
2013-02-13 09:39:32 mb8g11: Not yet.
2013-02-13 13:45:55 mb8g11: What are you currently working on, Max?
2013-02-13 13:48:18 max_albert: Looking into a simulation which Peter Metaxas (from Australia) sent us (it's a Mumax2 script, though, not Finmag).
2013-02-13 13:49:06 max_albert: It attempts to compute the normal modes of a nanodisk via a Fourier transform of m_x(t).
2013-02-13 13:49:26 max_albert: I'd like to run that with varying parameters to see how that changes things, and am using that as an excuse to get acquainted with Sumatra.
2013-02-13 13:49:41 max_albert: Why are you interested?
2013-02-13 13:57:59 mb8g11: for fun.
2013-02-13 14:07:36 max_albert: :-)
2013-02-13 14:07:46 max_albert: How about you?
2013-02-13 14:20:20 mb8g11: nothing much, post-processing data to create dispersion curves corresponding to the nmag dispersion example
2013-02-13 14:20:41 mb8g11: But decided to use an ipython notebook ^^
2013-02-13 14:20:52 max_albert: ;-)
2013-02-13 14:20:59 max_albert: How is that working for you?
2013-02-13 14:23:01 mb8g11: It's ideal for that task, when the data exists already and you work on the steps to achieve the end-result iteratively.
2013-02-13 14:26:38 mb8g11: And I prefer the UI to ipython (even though you can embed images with ipython as well)
2013-02-13 14:26:53 mb8g11: Overall, it's cool, thanks for introducing it to us.
2013-02-13 14:29:27 mb8g11: And the tab-to-doc is reaaaally nice.
2013-02-14 08:09:15 mb8g11: Good morning!
2013-02-14 12:41:53 fangohr: Greetings.
2013-02-14 12:42:18 fangohr: What is 'tab-to-doc'?
2013-02-14 12:48:19 mb8g11: I don't know how to call it: When you hit tab in an ipython notebook and the docstring for the function/method the cursor is on appears.
2013-02-14 13:01:12 fangohr: I see -- I thought the help string would be displayed after you type '(' -- this is correct. And then you can use 'tab' to change how the help is displayed. Useful indeed. Thanks.
2013-02-14 15:14:08 mb8g11: Wasn't precise enough: Indeed meant "inside the paranthesis".
2013-02-14 15:14:57 mb8g11: Didn't know I could hit tab once more to see more of the doc. Nice, thanks.
2013-02-15 10:16:07 fangohr-adium: Morning all.
2013-02-15 10:19:39 max_albert: Good morning Hans.
2013-02-15 10:49:28 fangohr-adium: Hi folks â the oxford gang has arrived. Do come over, and bring a cup of tea or coffee or what you like. We have biscuits.
2013-02-15 10:51:37 max_albert: Awesome, we'll be over in a minute.
2013-02-18 21:51:54 mb8g11: https://trac.soton.ac.uk/linuxdesktops/
2013-02-18 21:51:59 mb8g11: Includes a printing guide...
2013-02-19 08:46:43 fangohr: Good Morning.
2013-02-19 08:46:53 fangohr: Very nice link, Marc-Antonio.
2013-02-20 10:50:58 mb8g11: Hi all. Anybody there?
2013-02-20 10:51:21 D_Chernyshenko: Hi
2013-02-20 10:52:02 mb8g11: Hi Dmitri.
2013-02-20 11:49:27 fangohr-adium: Hi all.
2013-02-20 11:49:51 fangohr-adium: Just spend all morning since 9:00 discussing student marks. Delightful. ;-)
2013-02-20 11:50:05 fangohr-adium: Weiwei, can we stick to 12:15, please.
2013-02-20 11:50:50 ww1g11: sure, ;-)
2013-02-20 11:51:33 mb8g11: Discussing student marks... as in justifying? Dreadful.
2013-02-20 11:52:40 fangohr: Nothing wrong with the content - just the duration was undesirable.
2013-02-20 12:14:27 mb8g11: I see.
2013-02-20 14:39:36 mb8g11: Dmitri, are you connect via telnet? ;)
2013-02-20 20:41:36 mb8g11: Good night.
2013-02-21 09:19:55 max_albert: Good morning,
2013-02-21 09:37:31 fangohr-adium: Hey, good morning :)
2013-02-21 13:49:08 fangohr: Hi Max, Marijan, (Weiwei),
2013-02-21 13:49:22 mb4e10: Hi
2013-02-21 13:49:31 fangohr: for our meeting at 14:00 regarding normal modes, would it make sense if I came to your area? We could then look at the stuff that you have been working on more easily.
2013-02-21 13:50:04 mb4e10: sure
2013-02-21 13:50:52 fangohr: Okay, I'll come over for 14:00 then.
2013-02-21 15:40:18 mb8g11: Just an addendum to the tutorial example with the fake magnetisation data: There are two vertical lines in the Fourier transform plot.
2013-02-21 15:41:04 mb8g11: That's the same issue than in the example before: No way to distinguish the two, since the two input functions are not orthogonal.
2013-02-21 15:41:33 mb8g11: But they correspond in fact to only one wavelength.
2013-02-21 15:43:13 mb8g11: In the example before, I could eliminate one, but not here.
2013-02-22 09:47:49 mb4e10: Good morning all. Is it possible to change gyromagnetic ratio gamma in finmag?
2013-02-22 09:52:41 fangohr-adium: It must be possible. Why would you want to do this?
2013-02-22 09:53:34 mb4e10: In Greg's standard model, gamma is specified. I am not sure if this is important.
2013-02-22 09:56:40 fangohr-adium: I'd hope we use the same value as he cites. Probably in the LLG C++ code.
2013-02-22 09:59:33 mb4e10: ok, I'll try to change that.
2013-02-22 16:21:45 fangohr-adium: Hi, have you done the octopus merge yet? Is that what we are building now?
2013-02-22 17:14:55 mb8g11_: Can you install https://wiki.jenkins-ci.org/display/JENKINS/SLOCCount+Plugin ?
2013-02-22 17:16:18 mb8g11_: And maybe https://wiki.jenkins-ci.org/display/JENKINS/AnsiColor+Plugin
2013-02-22 17:18:19 fangohr-adium: Wohooo â fast tests has passed :)
2013-02-22 17:18:24 fangohr-adium: We start to be very much in business now.
2013-02-22 17:18:53 fangohr-adium: Good work Max, MA.
2013-02-22 17:19:26 mb8g11_: Max did most of the work, including the merge.
2013-02-22 17:19:56 fangohr-adium: Okay: Good work, Max.
2013-02-22 17:19:57 fangohr-adium: ;)
2013-02-22 17:23:37 mb8g11_: Installed them myself, jenkins will restart, sorry.
2013-02-22 20:09:09 mb8g11_: There's a new tab on the Jenkins Dashboard on aleph0 called "FinMag Pipeline". It shows the dependencies of the jobs we have defined.
2013-02-22 20:09:53 mb8g11_: Summary: finmag_fast_tests will poll bitbucket every few minutes. If finmag_fast_tests builds, then it trigger finmag_slow_tests and finmag_reproduce_ipython_notebooks.
2013-02-22 20:10:11 mb8g11_: If finmag_slow_tests builds that triggers finmag_binary_build and finmag_sphinx_documentation.
2013-02-25 09:12:50 fangohr-adium: Good Morning ,Marijan and Mar
2013-02-25 09:12:54 fangohr-adium: vinbot.
2013-02-25 09:25:49 max_albert: Good morning.
2013-02-25 09:32:43 fangohr-adium: Good Morning, Max.
2013-02-25 09:32:55 max_albert: Hello!
2013-02-25 09:36:46 fangohr-adium: Hi Max, many thanks for your continued efforts to make the testing work.
2013-02-25 09:36:53 fangohr-adium: This Nmag test seems a real beast.
2013-02-25 09:37:16 max_albert: Yes, indeed.
2013-02-25 09:37:24 max_albert: I still have no idea whatsoever what could be causing it.
2013-02-25 09:37:46 max_albert: It drove me and Marc-Antonio nearly mad on Friday. ;-)
2013-02-25 09:37:50 fangohr-adium: Err, yes.
2013-02-25 09:38:18 fangohr-adium: Have we got any other nmag tests working?
2013-02-25 09:39:02 max_albert: Good question. I don't know offhand, but I guess that quite a few of the regular py.tests should be using it. Fortunately, all of those pass now.
2013-02-25 09:41:19 fangohr-adium: So maybe we can check what is different with them? Or take one of those and modify it to do what we want with this one?
2013-02-25 09:41:30 fangohr-adium: Or we could give in and just produce the nmag output and store it in a file, and compare against it.
2013-02-25 09:42:37 max_albert: Yes, that's true. Although it's really unsettling that something just doesn't seem to work, and there is no way to even get any debugging output.
2013-02-25 09:42:51 fangohr-adium: I agree.
2013-02-25 09:43:39 fangohr-adium: Or could we run the nmag commands and redirect all output (stderr and stdout) into files, and then analyise those? That would at least give us more post-runtime debug capability.
2013-02-25 09:44:48 max_albert: Yes, I tried that. It does indeed produce *some* output (as opposed to none when we use the Python subprocess module, even with stderr redirected to stdout). But it is very short and doesn't give any indication of what might have been going wrong.
2013-02-25 09:45:35 max_albert: I'll double check that at some point, though, because all the debugging back and forth may have led to some errors, too.
2013-02-25 09:47:58 fangohr-adium: What we don't understand is how the jenkins runtime environment differst from running the same code as jenkins from the prompt, correct? If we got this sorted (although I don't know how), we would be in a much better position to test.
2013-02-25 09:49:28 max_albert: I agree. I also observed differences in the environment variables a while ago (which also led to subtle and very hard to debug errors).
2013-02-25 09:49:33 max_albert: E.g., Jenkins doesn't seem to source /etc/profile or ~/.bash_profile by default.
2013-02-25 09:50:02 max_albert: So I wouldn't be surprised if this nmag error also has something to do with differences in the test runtime environment.
2013-02-25 09:50:24 max_albert: I'm actually just running the doc build as user Jenkins to see if that works (I think I tried before and it did, but just to be sure).
2013-02-25 09:51:17 max_albert: On a different note, have you heard anything from Pete yet?
2013-02-25 09:53:50 fangohr-adium: Yes, he is in town. I expect him in the next 20 minutes or so. I'll let you know when he is here.
2013-02-25 09:54:08 fangohr-adium: Can you entertain him 11:00 to 12:00? Could get him seated in your area, etc.
2013-02-25 09:54:47 max_albert: Ok, great. I was just wondering since I hadn't heard anything and he is usually very good with being in touch... ;-)
2013-02-25 09:54:57 max_albert: Yes, am happy to entertain him.
2013-02-25 12:03:45 fangohr-adium: Max, am running slightly late. Will come and fetch you.
2013-02-25 12:07:00 mb8g11_: Any news about netgen 5.0 on aleph0?
2013-02-26 09:23:45 fangohr-adium: Good Morning.
2013-02-26 09:23:49 max_albert: Good morning.
2013-02-26 09:23:55 fangohr-adium: That was quick ;-)
2013-02-26 09:24:01 fangohr-adium: Has Pete arrived already?
2013-02-26 09:24:04 max_albert: ;-)
2013-02-26 09:24:08 max_albert: Nope.
2013-02-26 09:24:32 fangohr-adium: Let me know when he does, and I'll come over for a morning coffee//chat. (Have a meeting at 10:30.)
2013-02-26 09:24:34 max_albert: But he was a bit later yesterday, too. And he wanted to go to Student Services, too.
2013-02-26 09:24:42 max_albert: Ok, will do.
2013-02-26 09:36:18 max_albert: Hi Hans,Pete just arrived.
2013-02-26 09:36:28 fangohr-adium: Good stuff.
2013-02-26 09:36:33 fangohr-adium: I'll be over in 10 minutes.
2013-02-26 11:18:44 mb8g11: Hi all.
2013-02-26 12:13:56 fangohr-adium: Anybody up for lunch?
2013-02-26 12:14:32 fangohr-adium: I'll come over.
2013-02-26 12:16:17 max_albert: Sure, I'm in.
2013-02-26 12:16:35 max_albert: Pete says he is too.
2013-02-27 09:01:08 mb8g11: Good morning!
2013-02-27 09:01:15 fangohr-adium: Good Morning all.
2013-02-27 09:04:42 max_albert: Good morning.
2013-02-27 09:08:12 fangohr-adium: Hi Max, Marc-Antonio, Marijan (?), have you got a preference for where we meet today 10:00 to 11:30? If you have results on your screens, it may be easier if I come over to your desks. Is that right?
2013-02-27 09:08:49 mb8g11: I was just going to compile a few slides, but that's fine as well.
2013-02-27 09:08:53 max_albert: Possibly yes.
2013-02-27 09:09:39 fangohr-adium: Okay, I'll come over. The only thing we must not do during the meeting is to try to edit code and run it again â that will be eating time while most people do nothing. I can monitor that, though ;)
2013-02-27 15:03:14 fangohr-adium: Hi all, could somebody let Dmitri know that his mailbox is full; -) My email to him is not coming through...
2013-02-27 15:35:13 fangohr-adium: Marc-Antonio, are you out there? Could you let Dmitri know that I have put the text we worked on on eta:/tmp/draft.org, please?
2013-02-27 15:36:01 fangohr-adium: Hi Dmitri, I'll just repeat my last message so MA does not need to tell you:
2013-02-27 15:36:18 fangohr-adium: I have put the text we worked on on eta:/tmp/draft.org. (and your inbox seems full) ;-)
2013-02-27 15:37:49 D_Chernyshenko: Thanks, Max has told me now too. I'm trying to sort out the inbox; somehow the act of deleting messages from the Inbox made it overflow...
2013-02-27 15:38:51 mb8g11: Have you configured it to mark items as deleted, or move them to the trash?
2013-02-27 15:39:17 fangohr-adium: I don't want to appear as biased, but it is a MS exchange server. Anything could happen.
2013-02-27 15:39:48 mb8g11: Chuckles go around in the office..
2013-02-27 15:40:36 D_Chernyshenko: I'm not exactly sure. The web interface could not sort messages by size, so what I did was delete messages from Inbox using Thunderbird, and then from the Deleted folder using the web interface.
2013-02-27 15:40:41 D_Chernyshenko: Clearly that was too complicated
2013-02-27 15:41:04 fangohr-adium: ;-)
2013-02-27 15:41:15 mb8g11: For future reference: print demag.demag.laplace_solver.parameters.to_dict() to read the demag parameters/tolerances. And demag.demag.laplace_solver.parameters["absolute_tolerance"] = X.
2013-02-27 15:41:45 max_albert: Marc-Antonio: is this in Finmag or Nmag?
2013-02-27 15:42:24 mb8g11: finmag. Have looked into the Simulation object from nmag, but couldn't find the relevant info. Just how you can set it (keyword argument ksp_tolerances).
2013-02-27 15:42:43 max_albert: Did you dig into the source code, too?
2013-02-27 15:43:07 max_albert: Maybe there actually are no defaults in Nmag, but it just uses PETSc's defaults which you can override from Nmag?
2013-02-27 15:43:14 max_albert: Pure guesswork here though. Hans may know more.
2013-02-27 15:43:29 mb8g11: Maybe. For now, checking if changing them has any effect at all.
2013-02-27 15:43:35 mb8g11: (in finmag that is)
2013-02-27 16:15:16 max_albert: Dmitri: I followed the guide on this page to set up my printer: https://www.southampton.ac.uk/isolutions/services/printing_on_managed_mfd/how_do_i.php
2013-02-27 16:15:34 max_albert: It used to be called "How to add an MFD print queue on a non-University Linux Ubuntu machine" but it now refers to a RedHat machine...
2013-02-27 18:27:44 mb8g11: Spin polarisation P = (x-y)/(x+y), where x and y are the fractions of spin up/down electrons.
2013-02-27 18:27:58 max_albert: Thanks! :)
2013-02-27 18:29:41 mb8g11: My pleasure.
2013-02-27 18:30:09 mb8g11: To be honest, x+y=1, so the formula is more complicated than it needs to be ;-)
2013-02-27 18:30:26 max_albert: Fair point. :-)
2013-02-28 09:53:40 fangohr-adium: Good Morning.
2013-02-28 09:54:30 fangohr-adium: I suggest we have gather at 10:00 today in my office to listen to the stuff that Weiwei has been up to. Bring tea and coffee, I have got biscuits.
2013-02-28 09:57:49 fangohr-adium: Does that work for you, Weiwei, or would it be better to be at your computer?
2013-02-28 09:58:25 mb4e10: Good morning, no problem
2013-02-28 09:58:36 ww1g11: both are okay
2013-02-28 10:00:03 fangohr-adium: Okay, let's do it here, then (i.e. my office).
2013-02-28 10:00:14 ww1g11: okay
2013-02-28 10:03:10 mb8g11: Good morning guys. Just wanted to say I upset my stomach and won't be able to join you for the meeting.
2013-02-28 12:31:52 fangohr-adium: I will head for lunch with Pete at 13:00 if anybody wants to join.
2013-02-28 12:54:06 ww1g11: I'm in
2013-02-28 13:01:38 fangohr-adium: Okay, great.
2013-02-28 13:01:50 fangohr-adium: I'll come and pick you up. (Now)
2013-02-28 13:04:52 fangohr-adium: Actulaly, give me 5 more minutes (sorry).
2013-02-28 13:13:55 fangohr-adium: Okay, now.
2013-02-28 13:13:56 fangohr-adium: Really.
2013-02-28 15:04:41 max_albert: Hi all! (And Marc-Antonio in particular.)
2013-02-28 15:04:46 max_albert: I saw that there are tests for the Slonczewski spin torque in the Finmag code base.
2013-02-28 15:04:51 max_albert: Are they actually run at all, and do they work?
2013-02-28 15:05:01 max_albert: I'm not implying that they don't, but I ran one of the scripts last night and it took quite a long time to finish (~3 hours, although this was with other jobs running alongside).
2013-02-28 15:05:06 max_albert: So I was curious what the status is.
2013-02-28 15:05:25 fangohr-adium: (I think MA is not online any more).
2013-02-28 15:05:53 max_albert: Yes, I know. But I think he can read previous messages whenever he logs back on.
2013-03-01 09:52:46 mb8g11: Hi all (from the office).
2013-03-01 11:49:43 fangohr-adium: Greetings.
2013-03-01 11:49:56 max_albert: Hello Hans.
2013-03-01 11:49:57 mb8g11: fangohr-adium, Max told me there is a talk at 12:00?
2013-03-01 11:50:02 fangohr-adium: Will I see you at 12:00 for Dr Hovorka's brief presentation in the boardroom?
2013-03-01 11:50:04 fangohr-adium: Yes.
2013-03-01 11:50:13 fangohr-adium: I thought I had sent an email around regarding this.
2013-03-01 11:50:20 max_albert: Yep, planning to come.
2013-03-01 11:50:21 fangohr-adium: Maybe it didn't get out of my outbox.
2013-03-01 11:50:25 fangohr-adium: Good, thanks.
2013-03-01 11:51:05 mb4e10: yes
2013-03-01 11:51:21 mb8g11: Yes.
2013-03-01 11:52:06 mb8g11: I wasn't in the recipients.
2013-03-01 14:34:01 ww1g11: I have some weird hysteresis loops, any one want to see and give suggestion on them?
2013-03-01 17:11:07 fangohr-adium: MA, sorry, my mistake.
2013-03-01 17:11:33 fangohr-adium: Weiwei, I only saw your message now â I always like to to see weird hysteresis loops; maybe we can do that next week.
2013-03-01 17:12:33 fangohr-adium: All, I have put a Chicken Salat Sandwhich into the fridge (in the door) just outside my office. This is still closed in a plastic box and spare from the interview today. Feel free to get it and eat it if anyone is hungry; otherwise it just goes off over the weekend.
2013-03-01 17:16:07 fangohr-adium: Over and out.
2013-03-01 17:25:18 max_albert: Hi Hans! You probably won't read this before next week, but I just discussed the strange hysteresis loops with Weiwei and we're a bit at a loss to what's going on.
2013-03-01 17:26:29 max_albert: But as you said we can discuss it next week. (I think Weiwei is going to commit a couple of small scripts that exhibit the problem to the sandbox so we can take it from there.)
2013-03-01 17:43:21 mb8g11: Hi Weiwei, just writing this down because you took the time to explain it to me: You are re-doing the hysteresis loop example from the nmag manual. When you use the FK method for the demag, the results agree with nmag and across the two differents approaches you used.
2013-03-01 17:44:04 mb8g11: The two approaches are: 1) Use a simulation object and relax it several times with new fields. 2) Use a new simulation object for every field.
2013-03-01 17:44:43 mb8g11: When you use the Treecode method, the results don't agree with nmag anymore and they don't agree across the two approaches.
2013-03-01 17:45:01 mb8g11: Did I get this right so far?
2013-03-01 17:48:29 ww1g11: Not exactly, it seems that treecode also can give a reasonable result using the second approach
2013-03-01 17:49:39 max_albert: But you only see a noticeable difference between the two methods when using the Treecode method, whereas the FK method always seems to be ok in both cases?
2013-03-01 17:50:22 ww1g11: yes, FK always works
2013-03-01 17:57:23 mb8g11: If my intuition is right, the following test might uncover the root of the bug: Create simulation objects A and B. Check the treecode demag fields are the same. Let simulation run A run for some time, then use its magnetisation to create a new simulation object C. Check if treecode demag fields of A and C agree.
2013-03-01 17:57:36 mb8g11: If they don't you have your bug, if they do, you are doing something wrong in your scripts.
2013-03-01 17:58:32 max_albert: I like that suggestion. It's clear you have been a bug hunter for some time. :)
2013-03-01 17:58:53 mb8g11: Haha.
2013-03-01 18:00:03 ww1g11: Good suggestion
2013-03-02 07:26:08 fangohr1: Hi Weiwei, MA, Max, thanks for reporting of the odd hysteresis loop â doing it via IRC may be quite effective as (i) we archive it and (ii) everybody can chip in ideas, and (iii) I see what is working [and not working] although I am not in your open plan area.
2013-03-02 07:26:45 fangohr1: Keep us posted, Weiwei with any insights, further problems etc.
2013-03-02 07:28:00 fangohr1: (A problem of comparing the demag fields is that we cannot expect full agreement of course - there will be numerical noise. However, it is certainly something we should try! Plotting the magnitude of the difference vector [or so] may or may not show something.)
2013-03-05 09:14:50 fangohr-adium: Good Morning, folks.
2013-03-05 09:15:56 max_albert: Good morning, Hans.
2013-03-05 09:18:23 mb4e10: Good morning
2013-03-05 09:38:35 fangohr: Good morning, Dmitri.
2013-03-05 09:47:53 D_Chernyshenko_: Good morning.
2013-03-05 13:31:49 fangohr: Hi folks, there are sandwhichs
2013-03-05 13:32:21 fangohr: sandwiches and other things to eat outside my office if you are interested.
2013-03-06 08:58:49 mb8g11: Good morning!
2013-03-06 08:59:02 max_albert: Good morning!
2013-03-06 09:02:18 mb8g11: Any news from the Slonczewski?
2013-03-06 09:02:57 max_albert: Not yet, I'm afraid. Didn't have time to look into it any more yesterday, but will do so soon.
2013-03-06 09:08:44 mb8g11: Still, it was a good change.
2013-03-06 09:28:43 fangohr-adium: Good Morning all.
2013-03-06 09:33:36 mb8g11: Morning!
2013-03-06 09:34:07 fangohr-adium: MA, will you come over for our meeting?
2013-03-06 09:36:34 mb8g11: Can we skype?
2013-03-06 09:36:39 fangohr-adium: Sure.
2013-03-06 09:37:08 fangohr-adium: Just starting up Skype ...
2013-03-06 09:37:18 mb8g11: Reboot.
2013-03-06 09:38:41 fangohr-adium: ;-)
2013-03-06 09:52:09 mb8g11: It just won't connect.
2013-03-06 09:55:50 fangohr-adium: Never mind. We can talk on the phone briefly if you like? Just give me a call on 02380598345
2013-03-06 09:58:01 mb8g11: Perfect.
2013-03-06 10:00:54 fangohr-adium: Max, Marijan, can you give MA and me 10 minutes, so that I see in 10 minutes in my office?
2013-03-06 10:01:14 max_albert: Yes, sure.
2013-03-06 10:01:15 mb4e10: no problem
2013-03-06 10:11:33 fangohr-adium: Max, Marijan, ready for you when you are.
2013-03-06 13:16:09 mb8g11: Found the bug which caused the stripes on my images.
2013-03-06 13:16:26 max_albert: Nice! What was it?
2013-03-06 13:18:43 mb8g11: I can't really tell what's wrong, just the symptoms: I have m_y for every point in time in an array with dimensions (nb_times, nb_points). Let's call this array m_y_t.
2013-03-06 13:19:23 mb8g11: I want to substract the initial magnetisation from this array so that only the variation of the magnetisation over time remains, since I don't care for the absolute values.
2013-03-06 13:19:31 mb8g11: So I do: m_y_t -= m_y_t[0]
2013-03-06 13:20:12 mb8g11: For a reason I don't understand, this only substracts m_y_t[0] for roughly half of the array, but lets the remaing half untouched.
2013-03-06 13:20:30 mb8g11: Doing delta_m_y_t = m_y_t - m_y_t[0] works, and the stripes disappear.
2013-03-06 13:20:54 max_albert: That's really weird!!
2013-03-06 13:21:06 mb8g11: Ah, should have mentioned: The stripes are in fact what the initial magnetisation looks like (m_y fluctuates a little over the length of the cylinder).
2013-03-06 13:23:10 mb8g11: I'll try to narrow it down. Honestly, I have a hard time believing it's a numpy bug considering some stupid mistakes I have made in the last year ;-)
2013-03-06 13:27:14 D_Chernyshenko_: Hi Hans, do you have time for our meeting at 2pm (or later) rather than 1:30? For some reason I thought it was scheduled at 2pm and mis-timed my lunch
2013-03-06 13:28:08 mb4e10: Hans says no sorry.
2013-03-06 13:28:26 D_Chernyshenko_: Ouch
2013-03-06 13:28:33 D_Chernyshenko_: Well I'll run
2013-03-06 13:34:51 max_albert: Hi Hans! Weiwei is back in the office and we're ready to register for the workshop any time.
2013-03-06 13:34:55 max_albert: Could you please let us know when you have written the email to the relevant person so that we can go there and register? (What's his name again?)
2013-03-06 13:35:13 fangohr-adium: Just done â CCed to you.
2013-03-06 13:35:19 max_albert: Awesome, thank you!
2013-03-06 13:54:22 mb8g11: I can reproduce the bug from scratch (a few lines of code) in an ipython notebook. Checking a script now.
2013-03-06 13:54:37 max_albert: That would be interesting to see.
2013-03-06 13:55:45 mb8g11: Will commit to finmag/sandbox then, give me a few minutes to put a few comments in.
2013-03-06 13:55:55 max_albert: Sure, no rush.
2013-03-06 14:17:33 mb8g11: Have a visualisation ready, trying to find the minimal failing code.
2013-03-06 14:34:20 mb8g11: Pushed.
2013-03-06 14:39:08 mb8g11: Pushed a second script which fails on the two machines I tried it on - will ask on numpy mailing list.
2013-03-06 14:53:03 max_albert: Hi Marc-Antonio!
2013-03-06 14:53:13 max_albert: I just tried the script that you pushed.
2013-03-06 14:53:35 max_albert: I haven't looked into this in detail, but I have a hunch it may be due to the way meshgrid works.
2013-03-06 14:54:05 max_albert: Sorry, ignore that.
2013-03-06 14:54:27 max_albert: Thought I had read something on the screen that wasn't actually there. :)
2013-03-06 14:54:48 mb8g11: 14:49 < mb8g11> Hi everybody. I found something which looks a bug in numpy to me, built a minimal example to show it and reproduced it on two machines. Has anybody a few minutes to check it out  and tell me what is wrong? http://pastebin.com/cWdSdYXW
2013-03-06 14:54:52 mb8g11: 14:51 < seberg> mb8g11, its unfortunat, but not a bug
2013-03-06 14:54:55 mb8g11: 14:52 < seberg> (though there are half plans that it should be warned about it I think, at least I think it should be, but its a bit annoying)
2013-03-06 14:54:58 mb8g11: 14:52 < seberg> mb8g11, the basic problem is, numpy operations are in-place, and they are ill defined if this in-place stuff may read itself
2013-03-06 14:55:01 mb8g11: 14:52 < seberg> there is also buffering involved (or there can be at least)
2013-03-06 14:55:03 mb8g11: 14:52 < mb8g11> I guess that at some point during the computation Z[0] is overwritten and becomes zero?
2013-03-06 14:55:06 mb8g11: 14:53 < seberg> yes
2013-03-06 14:55:09 mb8g11: 14:53 < seberg> Z[0] is part of Z
2013-03-06 14:55:11 mb8g11: 14:53 < seberg> since you change Z, you change Z[0]
2013-03-06 14:55:14 mb8g11: 14:53 < seberg> and how that happens is *not* predictable (generally, there are some exceptions, but I am not even sure when exactly you can know it)
2013-03-06 14:55:17 mb8g11: 14:54 < mb8g11> Too bad, still, helpful information, thank you!
2013-03-06 14:55:19 mb8g11: 14:54 < seberg> that said, numpy could try to check if the out array shares memory with the inputs in a non-trivial manner and give a warning, and I think everyone would agree if that is  implemented...
2013-03-06 14:55:23 mb8g11: (from scipy IRC channel where I asked my question)
2013-03-06 14:56:21 max_albert: Ah, that makes sense. That's actually what I thought might be the reason (although as I said I interpreted the output totally wrongly ;-)).
2013-03-06 14:56:24 max_albert: Tricky one.
2013-03-06 15:01:29 mb8g11: Absolutely. Not the first person to walk into that trap: https://github.com/numpy/numpy/issues/1683
2013-03-06 15:09:23 mb8g11: Haha, just saw that you fixed a typo in the numpy fft docs.
2013-03-06 15:09:28 mb8g11: @max_albert.
2013-03-06 15:09:31 max_albert: :)
2013-03-07 08:42:52 mb8g11: Good morning.
2013-03-07 08:42:57 max_albert: Good morning.
2013-03-07 09:09:34 max_albert: Hi all!
2013-03-07 09:09:42 max_albert: Following a link on Wikipedia I stumbled upon these course notes by David Morin (from Harvard): http://www.people.fas.harvard.edu/~djmorin/waves/
2013-03-07 09:10:06 max_albert: He has stuff on normal modes, Fourier analysis, dispersion of waves and other things.
2013-03-07 09:10:21 max_albert: I haven't looked at them in detail yet, but they look good and potentially useful.
2013-03-07 09:10:33 max_albert: Just thought I'd mention them.
2013-03-07 09:28:32 fangohr-adium: Thanks.
2013-03-07 09:35:55 fangohr-adium: Max, Marijan, shall we go and reserve the rooms? I would suggest I reserve the single room place, and you do the other one?
2013-03-07 09:42:37 mb4e10: No problem. There is just one thing we need to check about breakfast. On booking site it is stated that the breakfast is included, but on Portland Arms website they say that breakfast is not included. I sent them an email yesterday just to check what is the right information and I am currently waiting for them to reply.
2013-03-07 09:43:40 mb4e10: In Waterman breakfast is included 100%.
2013-03-07 09:47:21 fangohr-adium: I sorted out parking; it's basically very likely to be fine.
2013-03-07 09:48:48 max_albert: Would it make sense to book the Portland Arms anyway, even if breakfast is not included? Or is there another hotel nearby that has a similar price and definitely does breakfast (in case they don't)?
2013-03-07 09:49:22 max_albert: We can also give them a call to ask about breakfast  and confirm the booking straight away if we are happy with it.
2013-03-07 09:49:30 mb8g11: I'm in Hamburg now, mind if I join the meeting by Skype? I would reboot now to have some time to get it working.
2013-03-07 09:49:57 mb4e10: There are other hotels, but they are much more expensive.
2013-03-07 09:50:50 mb4e10: I will try to find something before 12 and if I do not find, we will book Portland Arms.
2013-03-07 09:51:35 max_albert: I wonder how expensive the breakfast would be. Maybe it's not worth looking the hassle looking for other options
2013-03-07 09:51:50 max_albert: [Sorry, pressed enter too soon. :)]
2013-03-07 09:52:26 max_albert: Meant to say: maybe it's not worth the hassle looking for other options if the Portland Arms would work out cheaper anyway, even if we have to pay separately for breakfast.
2013-03-07 09:53:19 fangohr-adium: I agree. Let's just do the bookings now, and pay extra for breakfast if required.
2013-03-07 09:53:31 fangohr-adium: are your 4 beds still available Marijan? I'll just check the single room ....
2013-03-07 09:54:40 mb4e10: Yes, they are avaliable.
2013-03-07 09:56:08 fangohr-adium: The single room is there as well.
2013-03-07 09:56:09 fangohr-adium: Let's do it.
2013-03-07 09:56:11 mb4e10: Ok, we will book Potland arms then
2013-03-07 09:56:30 fangohr-adium: Yes, please. I'll do the Waterman.
2013-03-07 09:57:18 max_albert: Hans, is it better to book all four rooms on one name, or shall we split the booking between Marijan and myself (one double room each)?
2013-03-07 09:57:24 max_albert: does
2013-03-07 09:57:33 max_albert: [sorry, stupid enter key ;-)]
2013-03-07 09:57:41 max_albert: Does it make any difference for claiming back the money?
2013-03-07 09:57:59 fangohr-adium: Splitting into two bookings is maybe slightly easier to deal with in terms of claiming back the money, but I don't expect this to be a problem.
2013-03-07 10:00:11 fangohr-adium: I have got the Waterman reserved.
2013-03-07 10:00:28 max_albert: Oh, another quick question: there is a chance that I can only come to Cambridge on the 18th (in the morning).
2013-03-07 10:00:40 max_albert: Would this make a difference for the booking?
2013-03-07 10:00:54 max_albert: Or shall we just reserve the two rooms anyway?
2013-03-07 10:01:30 fangohr-adium: Just reserve the two rooms anyway.
2013-03-07 10:01:49 max_albert: Ok. And we pay with our own credit cards for now and then claim it back later, right?
2013-03-07 10:01:58 fangohr-adium: Yes.
2013-03-07 10:02:03 fangohr-adium: (Have just used mine.)
2013-03-07 10:02:06 max_albert: Ok, so we don't need to use the Faculty credit card. Good. :)
2013-03-07 10:02:13 fangohr-adium: Yes - complicated world.
2013-03-07 10:04:03 max_albert: Do you have an idea what time we would be arriving (roughly)? They ask this in the booking form.
2013-03-07 10:05:56 mb4e10: One room booked
2013-03-07 10:06:18 fangohr-adium: Maybe between 18:00 and 20:00? If we leave 16:00, it should take about 3 hours, maybe a little more with traffic and a break, and brings us there in time for pub dinner or so.
2013-03-07 10:06:24 fangohr-adium: Maybe ~19:00?
2013-03-07 10:07:03 max_albert: Thanks! We've used that. Second room booked, too.
2013-03-07 10:07:11 mb4e10: Yes, I put 19.00
2013-03-07 10:07:24 fangohr-adium: All good, thanks for your help.
2013-03-07 10:08:05 fangohr-adium: Do you want to come over for the group meeting?
2013-03-07 10:11:14 mb8g11: Do you get my skype messages? I have the weird feeling Skype is lying to me yet again.
2013-03-07 10:33:12 fangohr-adium: http://www.southampton.ac.uk/~fangohr/blog/physical-quantities-numerical-value-with-units-in-python.html
2013-03-07 11:55:37 max_albert: Hi Hans, I'm trying to install the latest nmag version (in order to re-run the nmag script in the currently failing Slonczewski test).
2013-03-07 11:55:59 max_albert: Can I just use the one in the Bitbucket repository nmag-src (https://bitbucket.org/fangohr/nmag-src)?
2013-03-07 11:56:13 max_albert: Or do I need to clone nmag-meta and check it out from there somehow?
2013-03-07 11:56:42 fangohr-adium: Yes, I think so if you get it to work. The nmag-meta will do the installation for you much more automatically.
2013-03-07 11:58:00 max_albert: Ah,  I see. Just clone it and had a quick look inside. It's basically just a collection of scripts to do a convenient automatic compilation, right?
2013-03-07 11:58:09 fangohr-adium: Yes.
2013-03-07 11:58:24 max_albert: Thanks! I'll give the nmag-src one a go then.
2013-03-07 11:59:05 fangohr-adium: Okay ;-)
2013-03-07 11:59:41 max_albert: Have you actually run the nmag-meta scripts before?
2013-03-07 12:00:48 max_albert: Just looking at them it seems that there is a small bug because 'compile-nmag.sh' seems to expect the source code to be in a different directory than the one it is cloned into by 'clone-hgs.sh'.
2013-03-07 12:01:25 fangohr-adium: I think you may need to call the script from a level higher up? I.e. something like bin/clone-hg.sh or so?
2013-03-07 12:01:45 mb8g11_: Just a heads-up: I will make a new dolfin-1.0.0 branch from default. Merge the dolfin-1.1.0 into default. Close dolfin-1.1.0
2013-03-07 12:01:57 max_albert: The script actually assumes that you're inside the meta/ directory (otherwise it will stop).
2013-03-07 12:02:22 fangohr-adium: Hm, yes.
2013-03-07 12:02:46 mb8g11_: See you later.
2013-03-07 12:03:15 fangohr-adium: Will just try to run the nmag-meta stuff on osiris.
2013-03-07 12:03:28 fangohr-adium: Installing pytables and ocaml ...
2013-03-07 12:04:01 max_albert: @Marc-Antonio: Sounds good.
2013-03-07 12:04:57 fangohr-adium: Max, the script has cloned repsoitories okay, is now compiling.
2013-03-07 12:05:09 fangohr-adium: (in /home/fangohr/hg/nmag-meta2)
2013-03-07 12:05:12 fangohr-adium: Will keep you posted.
2013-03-07 12:05:34 max_albert: Hmm, ok. Maybe I just misread the script. Thanks for trying it out!
2013-03-07 12:09:13 fangohr-adium: Max, all run through. Some of the automatic tests have failed, but seems to work overall (and be quick).
2013-03-07 12:09:33 max_albert: Ok, thanks a lot! I may actually try it myself (was afraid that it would take ages).
2013-03-07 12:10:07 max_albert: By the way, do we know which version of nmag is used by Jenkins on summer? In particular, is it the regular nmag-0.2.1 from the website, or is it the one compiled by nmag-meta?
2013-03-07 12:11:04 max_albert: I'm wondering if the problems we see on aleph0 could be related to the wrong nmag version... (Unlikely, but worth making sure that's not the issue.)
2013-03-07 12:12:42 fangohr-adium: Hi Max, it is quick (I think) because it uses the system Python installation rather than compiling Python from scratch etc.
2013-03-07 12:13:06 fangohr-adium: The version you download from the web should be sufficient for all that we do, other than Slonzewski torque I think.
2013-03-07 12:15:02 max_albert: Ok, thanks!
2013-03-07 12:19:07 max_albert: Hi Marc-Antonio! I'm about to try fixing the failing Slonczewski test (and the fix for the Cython failure in the binary distribution that you suggested). I may commit something soon-ish, so please give me a shout if you'd like to do the merge so that I refrain from pushing during that time.
2013-03-07 12:22:39 max_albert: Hi Hans, would you mind giving me read access to the nmag-www repository, too? My nmag-meta compilation fails because it can't clone the repository. No big deal (and no rush) because I can run nmag without it, but if you don't mind then it would be nice to try and do a complete meta-installation. ;-)
2013-03-07 12:24:48 fangohr-adium: Hi Max, no problem, is done.
2013-03-07 12:24:54 max_albert: Thanks!
2013-03-07 12:30:33 max_albert: @Marc-Antonio: Whoops, typed too early. I just realised you have done the merge already. Now I need to figure out which branch to push to. :)
2013-03-07 12:34:39 mb8g11: There are only two of them left: "default" for dolfin-1.1.0 and "dolfin-1.0.0" for that boring old stuff
2013-03-07 12:35:31 mb8g11: Had to merge a few files by hand, I hope I didn't make too many errors.
2013-03-07 12:35:41 max_albert: Yes, but I'd like to apply the Slonczewski fix to the dolfin-1.0.0 branch, too (so that the test suite passes cleanly), but also merge it into the new default branch.
2013-03-07 12:35:47 max_albert: Shouldn't be a problem, though.
2013-03-07 12:36:00 max_albert: But will look funny in hgview. :)
2013-03-07 12:36:30 mb8g11: If you think that's funny then you're a masochist.
2013-03-07 12:36:46 fangohr-adium: Gogogo :)
2013-03-07 12:38:09 mb8g11: What did the masochist say to the sadist? ... "Hit me!". What did the sadist reply? ... "No."
2013-03-07 12:38:37 max_albert: Damnit, I get an hdf5 error ("HDF5 library version mismatched error") when using the new nmag-meta version of nmeshimport...
2013-03-07 12:38:59 max_albert: It says: "The HDF5 header files used to compile this application do not match the version used by the HDF5 library to which this application is linked."
2013-03-07 12:39:08 max_albert: How can that be, since I just compiled it?
2013-03-07 12:39:31 fangohr-adium: Hm. Maybe the pytables you use is not compatible with the hdf5 that is installed?
2013-03-07 12:39:43 fangohr-adium: Now it starts being really confused, of course.
2013-03-07 12:39:51 fangohr-adium: Is this from the nmag-meta installation?
2013-03-07 12:40:09 fangohr-adium: Have you got another nmag-from-big-tarball-installation on the system?
2013-03-07 12:40:21 max_albert: Yes to both questions.
2013-03-07 12:40:32 max_albert: But the other nmeshimport throws the same error.
2013-03-07 12:40:34 fangohr-adium: The nmag from tarball brings its own hdf5, while the nmag-meta installation will try to use the system pytables.
2013-03-07 12:41:06 fangohr-adium: Can you move the tarball installation to a different place for now (just rename the folders) so that it cannot be picked up by accident? just a wild guess at this stage ...
2013-03-07 12:42:08 max_albert: Hmm, I guess it's probably related to the fact that I have a custom-compiled version of libhdf5 lying around. Will investigate...
2013-03-07 12:42:57 fangohr-adium: Yes, and I would have thought that the nmag-from-big-tarball would have bnrought that where as the nmag -meta (I think) would try to use the system's hdf5.
2013-03-07 12:44:29 max_albert: That's what I would have thought, too.
2013-03-07 12:45:03 max_albert: Oh, actually I think I only have the nmag-core-0.2.1 installation lying around. So that wouldn't come with its own pytables, hence the error.
2013-03-07 12:46:18 mb8g11: Who updated the branch on Summer?
2013-03-07 12:46:31 max_albert: I did. Is that wrong?
2013-03-07 12:47:19 mb8g11: no, cool.
2013-03-07 12:47:43 max_albert: I thought it would make sense to have Summer test the dolfin-1.0.0 branch for now, until I know that everything is fixed. Then we can leave it alone, or disable it, or switch it to dolfin-1.1.0 as well.
2013-03-07 12:47:52 max_albert: We also need to update the branches on aleph0 (haven't done that yet).
2013-03-07 12:48:07 mb8g11: Indeed, good thinking, was going to do the same but you beat me to it.
2013-03-07 12:48:23 max_albert: Do you want to change the branches on aleph0?
2013-03-07 12:48:28 mb8g11: Yes.
2013-03-07 12:48:34 max_albert: Great, thanks!
2013-03-07 12:49:48 max_albert: Hans, if I'd like to recompile the nmag-meta installation, can I just run do-all.sh again? Or do I need to do delete it and check out a fresh clone?
2013-03-07 12:51:43 fangohr-adium: you may have to go into meta/src and run make clean or make mrproper or so in there. Do all will call python configure.py and 'make' in src. I don't think anything else is compiled.
2013-03-07 12:51:54 fangohr-adium: Deleting it and running again is safest, of course.
2013-03-07 12:52:06 max_albert: Awesome, thanks. In fact, since it's quick I think I'll delete it anyway.
2013-03-07 13:01:21 fangohr-adium: Can anybody tell me the specs of Weiwei's or Marijan's machine (they are the same hardware I think). I am interested in number of corse (8?) and RAM, please.
2013-03-07 13:02:57 max_albert: Hi Marc-Antonio! Have seen the test failures on aleph0 after your merge? Looks like a few bugs have crept in during merging (e.g. in the console output I saw something about OrientedBoundaryMesh, which is obsolete/removed).
2013-03-07 13:05:06 ww1g11: Oh, our machines have 8 core and 16G memory
2013-03-07 13:11:03 mb8g11: Oh no :-/
2013-03-07 13:11:29 mb8g11: Maybe that's the new FK Demag? Let me check.
2013-03-07 13:15:52 max_albert: Whooooooo!!!!!! The binary build passes! :-)
2013-03-07 13:16:28 max_albert: I updated Cython to the latest version on aleph0 (which is 0.18, whereas previously it was 0.16), and this version can deal with the duplicate-name issue that Marc-Antonio described.
2013-03-07 13:16:52 max_albert: (Had to do it via "pip install -U cython" because it's not int the Ubuntu repository yet, but that should be fine.)
2013-03-07 13:17:00 mb8g11: Very nice. So the binary builds? I presume the tests that fail in the other jobs affect it as well...
2013-03-07 13:18:07 max_albert: Hmm, that's a very good point. Well, the binary already built before, the failure was due to a failing test. But now all the tests pass (which shouldn't happen as you just pointed out), so I wonder what's wrong...
2013-03-07 13:19:32 max_albert: I like that the job runs very quickly, though (5 min 31 sec). So that's a very worthwhile addition to our test suite.
2013-03-07 13:20:18 mb8g11: Nice.
2013-03-07 13:22:23 mb8g11: Any reason why you disabled the quiet period?
2013-03-07 13:22:44 max_albert: Yes, because it didn't do what you said it did. :)
2013-03-07 13:22:56 mb8g11: What did it do?
2013-03-07 13:23:46 max_albert: AFAIU, it simply waits for the specified time and then does the build, but I don't think it skips any builds (they just get accumulated and run a bit later).
2013-03-07 13:24:19 max_albert: Only 95% sure this is correct, though, so maybe worth double-checking.
2013-03-07 13:25:04 max_albert: How very strange: there are two tests which fail during the execution of "finmag_fast_tests". However, those two tests are also run when the binary distribution is build, and there they pass without problems!
2013-03-07 13:25:09 mb8g11: It won't wait x hours and then build several times.
2013-03-07 13:26:00 mb8g11: It will build at most once every x seconds, where x is the quiet period. Once it actually starts building, it will take the newest version from source control.
2013-03-07 13:26:59 max_albert: Ok, I just googled it and this seems to be correct (I'm sure the description which I read on the Jenkins homepage [or somewhere else] was different, though).
2013-03-07 13:27:01 mb8g11: Additionaly, in our setup, it only gets triggered at all when the slow tests pass.
2013-03-07 13:27:02 max_albert: But anyway, feel free to re-activate the quiet period.
2013-03-07 13:27:13 max_albert: If it really works that way then it's a good thing to have.
2013-03-07 13:27:21 mb8g11: :)
2013-03-07 13:27:34 max_albert: Apologies for changing it!
2013-03-07 13:28:14 mb8g11: Your opinion is as good as mine, glad I could convince you in this case.
2013-03-07 13:29:44 mb8g11: I think the binary build doesn't run the tests. Should we at least make the small ones part of its job?
2013-03-07 13:29:58 max_albert: It does run them. You can see it in the output.
2013-03-07 13:30:07 max_albert: For example: http://aleph0.kk.soton.ac.uk:8080/job/finmag_binary_build/36/console
2013-03-07 13:30:09 mb8g11: Just checked, must have missed them.
2013-03-07 13:30:58 max_albert: In particular the two ones that fail for the fast tests ("finmag/tests/slonczewski/validation/test_validation.py" and "finmag/tests/comparison/anisotropy/test_anis_nmag.py") pass.
2013-03-07 13:31:24 max_albert: But I'm very surprised that everything runs so fast. Are we testing the slow tests at all?
2013-03-07 13:31:25 mb8g11: Ah yes.
2013-03-07 13:31:47 max_albert: I remember that you rearranged the test targets in the Makefile recently. Maybe this skips the slow tests by default?
2013-03-07 13:32:55 mb8g11: It does.
2013-03-07 13:33:45 mb8g11: In theory, when the binary is built, the fast and slow tests pass beforehand. We run the fast ones again with the binary, just to make sure no obvious mistakes were made.
2013-03-07 13:34:46 max_albert: Yes. That's reasonable I guess.
2013-03-07 13:35:18 max_albert: Do we have a Makefile target to run *all* tests at the moment (fast, slow, native, etc.)?
2013-03-07 13:38:03 mb8g11: Not sure, but I think not. Would be trivial to add though: just call py.test without further arguments.
2013-03-07 13:38:14 max_albert: True. :)
2013-03-07 13:38:52 max_albert: I wonder what the difference in running the fast tests from the Jenkins job and via the binary distribution is. Why do those two tests pass in one case but not the other?!?!?
2013-03-07 13:39:09 mb8g11: Very good and important question.
2013-03-07 13:39:34 mb8g11: Quick one, do you know how to export a nmesh.h5 file to vk?
2013-03-07 13:39:38 mb8g11: *vtk?
2013-03-07 13:39:54 max_albert: It's probably for the same reason why we can run the tests locally from our accounts (or even from the jenkins account).
2013-03-07 13:40:14 max_albert: Hmm, not sure. Does nmeshpp provide an option?
2013-03-07 13:40:33 max_albert: Oh yes, it's in the nmag manual:
2013-03-07 13:40:35 max_albert: nmeshpp --vtk ellipsoid.nmesh.h5 mesh.vtk
2013-03-07 13:41:24 mb8g11: What? Where!?
2013-03-07 13:41:53 max_albert: I found it in the section "Example: Simple hysteresis loop".
2013-03-07 13:42:32 mb8g11: My saviour, thank you. I've been reading this thing for 15 minutes...
2013-03-07 13:42:42 max_albert: :)
2013-03-07 13:43:01 max_albert: Oh, sorry. For you it should be:   :-)
2013-03-07 13:43:05 max_albert: ;-)
2013-03-07 13:44:00 mb8g11: Haha, thanks. And now I see it with nmeshpp -h as well, which I checked before as well. My mother used to say there is not more blind than the one who doesn't want to see ;-)
2013-03-07 13:50:33 max_albert: I just realised that the merge graph in hgview looks very weird. It shows that you branched 'dolfin-1.0.0' from 'default' (which is correct) but then it seems as if you simply merged it back into the same branch, whereas the branch dolfin-1.1.0 seems to have been left untouched (and is now just closed).
2013-03-07 13:50:50 max_albert: Is this what actually happend, or is mercurial/hgview just confused again?
2013-03-07 13:51:46 max_albert: Never mind, "hg view" (as opposed to "hgview") seems to show a slightly more detailed picture, so all seems to be fine.
2013-03-07 13:52:50 max_albert: Actually, I think I just missed a tiny cross-branch in hgview. Guess I should take a break to give my head a chance to stop spinning...
2013-03-07 13:53:26 fangohr-adium: Nice metro-like graphs also visible at https://bitbucket.org/fangohr/finmag/commits/all on the left ...
2013-03-07 14:09:53 mb8g11: ACTION just got a heart-attack.
2013-03-07 14:10:08 mb8g11: Max... stop scaring me.
2013-03-07 14:10:26 max_albert: Why? What did I do?
2013-03-07 14:10:38 max_albert: Oh, was this due to my wrong explanations above? Sorry!!!
2013-03-07 14:11:20 mb8g11: Apology accepted.
2013-03-07 14:12:10 max_albert: Next time I'll wait and double-check before writing.
2013-03-07 14:12:12 max_albert: I keep doing that (not thinking properly before asking on IRC), should stop it.
2013-03-07 14:13:53 mb8g11: Usually, you don't have to worry about that - it helps thinking. But this one got to me ;-)
2013-03-07 14:14:14 mb8g11: Do we have to update marvin?
2013-03-07 14:14:25 max_albert: Well, I thought I had corrected my mistake straight away... ;-)
2013-03-07 14:14:34 max_albert: Good question. Probably yes.
2013-03-07 14:19:09 max_albert: hans,
2013-03-07 14:19:53 max_albert: is there a way to do an installation which includes all dependencies (such as petsc, pytables, etc.) using the latest nmag code (e.g. from nmag-meta)?
2013-03-07 14:21:58 max_albert: I'm asking because the latest Ubuntu doesn't have petsc-3.1 any more (which is a dependency of nmag).
2013-03-07 14:28:52 max_albert: Never mind, I think I have found a way around the hdf5 error I saw earlier.
2013-03-07 14:43:54 max_albert: Ok, here is an intermediate progress report regarding the Slonczewski test fixture:
2013-03-07 14:44:24 max_albert: I manged to finally run nmag on the script "finmag/src/finmag/tests/slonczewski/validation/run_nmag5.py", which should produce the reference data.
2013-03-07 14:45:10 max_albert: As far as I understand, the file 'averages_nmag5.txt' is produced from the output file of that run ('run_nmag5_dat.ndt') using the command 'ncol run_nmag5_dat.ndt time m_Py_0 m_Py_1 m_Py_2'.
2013-03-07 14:45:12 max_albert: Is this correct?
2013-03-07 14:47:13 max_albert: I tried to compare the original data in 'averages_nmag5.txt' with the result of my new run using np.allclose().
2013-03-07 14:49:25 max_albert: That looks ok-ish (using rtol=0 and atol=1e-5 it reports that the arrays coincide, which is as good as we can expect it I guess).
2013-03-07 14:53:00 fangohr: Max: yes, quite likely that averages_nmag5.txt is produced as you write.
2013-03-07 14:53:30 fangohr: Agreement down to 1e-5: good, but might be better. Are we using the same mesh?
2013-03-07 14:56:05 max_albert: Kind of... The script had to re-create the mesh from the .geo file (using netgen and nmeshimport) because the file film.nmesh.h5 didn't exist in the hg repository.
2013-03-07 14:56:31 fangohr: But we could use the same mesh that netgen has created in both nmag and finmag?
2013-03-07 14:58:31 max_albert: Probably yes (although I'd have to check how the finmag script produces its mesh). However, the comparison I wrote above was not between nmag and finmag output. Rather, it was between the "old" (= committed to hg and thus saved) nmag output that Marc-Antonio produced a while ago and my "new" nmag output (but using the exact same script) which I produced just to check that everything works ok.
2013-03-07 14:58:42 max_albert: I haven't adapted any of the scripts or tests yet.
2013-03-07 14:59:37 fangohr: So the comparison Nmag vs  Nmag is down to 1e-5, but may be using different meshes (if we used a different version of netgen, say)?
2013-03-07 15:00:39 max_albert: Yes, that's a fair summary. In fact, I just checked and I'm using netgen-5.0.0, so we are quite likely using different netgen versions.
2013-03-07 15:00:54 max_albert: I'll try to run it with the older netgen now, to see if we get better agreement.
2013-03-07 15:01:03 fangohr: Okay, thanks.
2013-03-07 15:01:18 fangohr: I know that Matteo did some of these tests without demag to be able to better compare with OOMMF.
2013-03-07 15:01:41 max_albert: Thanks for pointing out that the netgen version could cause some differences.
2013-03-07 15:01:50 fangohr: In fact, we could set up a test problem that has no demag and no exchange, and just the torque from the spin-torque term. This should give rather excellent agreement between nmag and finmag, indpendent of the mesh.
2013-03-07 15:02:43 max_albert: True.
2013-03-07 15:02:48 max_albert: Not sure if I'll try to tackle that today, though. :)
2013-03-07 15:03:10 fangohr: Understood - this might take some time, but in principle this should give very nice agreement ;-)
2013-03-07 15:03:26 fangohr: Could do the same thing with OOMMF, of course; no need to stick to Nmag.
2013-03-07 15:11:01 max_albert: Marc-Antonio, I just saw your latest fix: https://bitbucket.org/fangohr/finmag/commits/ac358f24db53/
2013-03-07 15:11:16 max_albert: It looks good, but do you know why it suddenly started to fail when it used to work?
2013-03-07 15:14:41 max_albert: Hi Hans, I just re-generated the file (using the old netgen version) and tested against the old version, but I don't think we get much higher agreement.
2013-03-07 15:14:42 max_albert: But I hope 1e-5 is ok (since we are comparing the unit magnetisation, i.e. values of order 1).
2013-03-07 15:15:02 max_albert: So I think I'll adapt the test to see if I can fix it.
2013-03-07 15:16:40 fangohr: Adapt the test for now, but take a note to double check this before we publish ;-). If you have only spin-torque, we are looking at a ODE of the type dm_i/dt = f(m_i,J,P) where this m_i does not depend on any other magnetisation vectors, nor any spatial derivatives. We have seen in comparison with dmdt calculations for OOMMf that we get accuracy of the order of 1e-12 for that.
2013-03-07 15:16:57 fangohr: The error you observe could well be due to differences in how Nmag computes exchange and demag. So chances are everything is okay.
2013-03-07 15:17:08 fangohr: [but we have a way to check better, later at some point.]
2013-03-07 15:17:44 max_albert: But since we are comparing nmag against nmag, why would the exchange and demag computation matter at all?
2013-03-07 15:17:58 max_albert: I agree that it would be good to implement the test you suggest though.
2013-03-07 15:18:39 fangohr: Err right, good point. Was thinking finmag vs nmag.
2013-03-07 15:19:29 max_albert: But to be honest, for today I've had enough of fixing tests etc (once this one is done). Would like to get some "real" work done at some point. :)
2013-03-07 15:20:31 fangohr: Agreed. Thanks for pushing things forward.
2013-03-07 15:24:34 max_albert: Sorry, that sounded a bit strong, didn't mean it that way. (But it's true that software issues do eat up quite a bit of time...)
2013-03-07 15:30:17 max_albert: @Marc-Antonio: Actually, thinking again about your latest fix (mentioned above), I'm not sure that atol=0 should ever be a problem.
2013-03-07 15:30:27 max_albert: It just means that we are doing a relative-only comparison; see the formula at http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html
2013-03-07 15:30:30 max_albert: And this is exactly what we want for small numbers.
2013-03-07 15:31:07 max_albert: So if np.allclose() with atol=0, rtol=1e-2 fails (as it did for the test before your commit) then this means that the values differ quite a bit.
2013-03-07 15:31:56 max_albert: And if it works with atol=1e-4, rtol=1e-4 (as it does after your commit) then this simply means that all the values we compare are smaller than 1e-4.
2013-03-07 15:32:19 max_albert: So my guess is that your commit actually just hides the symptoms of the failure, but isn't actually a true fix.
2013-03-07 15:32:24 max_albert: Or am I overlooking something?
2013-03-07 15:33:44 max_albert: I added a pivotal tracker item for this (#41095107) a while ago, because it's an easy but dangerous trap to fall into.
2013-03-07 15:36:00 max_albert: Hmm, ok, I have to partially revert my judgement (one more instance of "think before writing").
2013-03-07 15:37:48 max_albert: In the test we are comparing normalised magnetisation values, for which some of the coordinates may be close to zero (say on the order of 1e-12 or even smaller).
2013-03-07 15:38:17 max_albert: Thus using a coordinate-wise relative comparison obviously isn't the right thing to do.
2013-03-07 15:39:03 max_albert: Rather, the best thing to do is probably to subtract one m-array from the other and compute the norm of the difference vectors. These norms should then be very small.
2013-03-07 15:39:20 max_albert: This way we avoid the coordinate-wise comparison, which is error prone.
2013-03-07 15:39:33 max_albert: But your fix should be ok as well I guess.
2013-03-07 15:52:20 max_albert: Damnit, I think the installation of sundials-2.3.0 from nmag-meta has broken my finmag build... :-(
2013-03-07 15:54:08 max_albert: Does anybody know if there is any way to check which library (and which include) files are visible to the compiler/linker?
2013-03-07 15:54:42 max_albert: Something like 'which ...', but for libraries and/or include files?
2013-03-07 15:54:52 max_albert: (Other than checking all the directories in the PATH manually for files that match?)
2013-03-07 15:56:07 fangohr: Hi Max, regarding the sundials installation from nmag: I think you can remove that from /usr/local or whereever it has put it -- finmag is probably picking up the header files? Those are not needed for nmag anymore once it is compiled. So if you leave the .so files in place, and remove the headers, this might fix it.
2013-03-07 15:56:30 fangohr: You know about ldd or lld (can never remember) to see which libraries would be linked dynamically?
2013-03-07 15:57:32 max_albert: I already removed all the sundials files I could find in /usr/local (via 'find /usr/local -iname "*sundials*"  --  or is there a better way?), but the problem remains.
2013-03-07 15:58:14 fangohr: You may need to run 'make clean' in the finmag directory?
2013-03-07 15:58:32 max_albert: Yep, did that too (multiple times...). :-S
2013-03-07 15:58:54 max_albert: Ah, yes, ldd is a good idea. However, I think I'd need an executable for it to work, whereas I'd simply like to check which version of sundials (say) would be found by the linker.
2013-03-07 15:58:54 fangohr: ;s)
2013-03-07 15:59:21 fangohr: Is any LD_LIBRARY_PATH set?
2013-03-07 15:59:56 fangohr: What is the error message finmag reports (so you link it to the sundials install?)
2013-03-07 16:00:20 max_albert: Yes, LD_LIBRARY_PATH points to some directories where I put local installations.
2013-03-07 16:00:34 max_albert: There also used to be a version of sundials there, but I tried to remove that and it still doesn't work.
2013-03-07 16:00:52 max_albert: The error message is actually a failed compilation, not a failed linking.
2013-03-07 16:01:10 max_albert: But it's the same root cause I guess (wrong sundials version) because the interface of some functions seems to be wrong.
2013-03-07 16:01:25 max_albert: Are we relying on sundials 2.4 or 2.5 at the moment?
2013-03-07 16:02:13 fangohr: I see 2.4.0-5 reported when importing finmag on osiris.
2013-03-07 16:05:49 max_albert: Thanks.
2013-03-07 16:06:05 max_albert: Did you install sundials-2.3.0 as well when you installed nmag-meta?
2013-03-07 16:06:20 fangohr: AAAAAAHHHHH Maybe.
2013-03-07 16:06:28 fangohr: Hang on.
2013-03-07 16:07:23 fangohr: Yes.
2013-03-07 16:07:26 fangohr: Into /usr/local
2013-03-07 16:07:37 max_albert: And building finmag still works for you?
2013-03-07 16:07:48 max_albert: Or maybe you shouldn't try. :-)
2013-03-07 16:07:57 fangohr: I didn't say that ... I just started something that was build before ;-)
2013-03-07 16:07:59 fangohr: Exactly.
2013-03-07 16:08:04 fangohr: I suppose I might as well.
2013-03-07 16:08:25 max_albert: I just saw that sundials seems to come with an "uninstall" target. Will try that out.
2013-03-07 16:09:29 max_albert: Phew, that seems to have worked!
2013-03-07 16:09:42 max_albert: In more detail:
2013-03-07 16:09:50 max_albert: cd nmag-meta/meta/build-sundials/sundials-2.3.0 && sudo make uninstall
2013-03-07 16:10:06 fangohr: I confirm that my finmag is also unhappy to build ...
2013-03-07 16:10:07 max_albert: This uninsalled sundials-2.3.0 from /usr/local/
2013-03-07 16:10:15 max_albert: uninsalled -> uninstalled
2013-03-07 16:10:21 max_albert: And now I can build finmag again.
2013-03-07 16:10:39 max_albert: Blimey... That gave me a bit of a headache.
2013-03-07 16:17:32 fangohr: Err, yes. Working again here, too. Phew.
2013-03-07 16:17:41 fangohr: At least we have it documented now (thanks Marvin_Bot)
2013-03-07 16:56:34 max_albert: Here is a question for the Mercurial experts:
2013-03-07 16:57:37 max_albert: I managed to fix the test (plus a bug which I had introduced recently) and applied the relevant changes to the dolfin-1.0.0 branch.
2013-03-07 16:57:46 max_albert: Then I switched to the 'default' branch and merged those fixes.
2013-03-07 16:58:24 max_albert: Now I tried to push the changes to bitbucket, but I get the following error:
2013-03-07 16:58:47 max_albert: "abort: push creates new remote head ecea6222d010! (did you forget to merge? use push -f to force)"
2013-03-07 16:59:11 max_albert: However, "hg branches" tells me that I'm on the default branch. So why would it create a new head?
2013-03-07 17:00:11 max_albert: (Btw,  "ecea6222d010" is my latest commit in which I merged the fixes from dolfin-1.0.0 into default.)
2013-03-07 17:13:00 ww1g11: Hi all, I wonder if it's necessary to write a helper function to read the vtk files or it's already done in finmag?
2013-03-07 17:13:22 max_albert: Hi Weiwei, what do you mean by "read"?
2013-03-07 17:13:51 ww1g11: such as deal with the magnetisation data from the vtk files
2013-03-07 17:14:07 max_albert: So you'd like to save the magnetisation to a vtk file and then read the values back in?
2013-03-07 17:14:29 ww1g11: not really, but it seems that finmag support this
2013-03-07 17:14:56 max_albert: Hmmm, reading data back from vtk files is not recommended.
2013-03-07 17:15:18 max_albert: Vtk is intended for visualisation purposes
2013-03-07 17:15:29 max_albert: How is it possible to do this with Finmag at the moment?
2013-03-07 17:16:17 ww1g11: sorry, I mean the scheduler system support save vtk
2013-03-07 17:16:54 ww1g11: okay, I will save the magnetisation to  npy files
2013-03-07 17:17:36 max_albert: Yes, that's the recommended way at the moment if you'd like to post-process data (until we have better support using hdf5).
2013-03-07 17:18:16 ww1g11: got it, thanks,
2013-03-07 17:18:27 max_albert: For details also see this PivotalTracker story: http://www.pivotaltracker.com/story/show/37588409
2013-03-07 17:27:16 max_albert: Ok, just for the record: I found the cause for the mercurial error as well (was an old, dangling commit that I hadn't pushed yet).
2013-03-07 17:30:11 ww1g11: I already deleted the original repo and cloned a new one which works
2013-03-07 18:15:21 max_albert: Marc-Antonio, you lost one of my tests during your merge!!! How dare you. :-P
2013-03-07 18:19:49 max_albert: Actually, you lost two: test_set_stt and test_mesh_info (both in src/finmag/sim/sim_test.py). Just adding them back in...
2013-03-07 19:28:37 mb8g11: Sorry.
2013-03-08 00:57:18 fangohr1: Good evening. It seems rather busy here. I can only hope that most people are not actually online.
2013-03-08 00:57:53 fangohr1: Thanks for making the binary build pass the tests. That's very nice (and was due to an upgrade of Cython if I understand correctly).
2013-03-08 01:40:04 fangohr1: Over and out.
2013-03-08 09:20:56 fangohr-adium: Good Morning, all.
2013-03-08 09:22:58 fangohr-adium: Nice merge paths on https://bitbucket.org/fangohr/finmag/commits/all at the moment.
2013-03-08 13:19:03 fangohr-adium: Looks like Max is bisecting. I like it.
2013-03-08 13:19:27 fangohr-adium: [Just emerged from the viva of one of Kees de Groot PhD students â he passed :)]
2013-03-08 13:20:13 max_albert: Hi Hans! Yes, I think I may have found the root of errors that have caused us all this headache. Will do one final check and then I can confirm (or we're back to square zero).
2013-03-08 13:20:21 max_albert: And glad to hear the student passed. :)
2013-03-08 13:22:20 max_albert: Regarding the binary build: you are right, the problem was fixed by upgrading Cython to version 0.18.
2013-03-08 13:23:25 max_albert: However, we had a situation where a couple of tests failed in finmag_fast_tests but the same tests passed when using the binary distribution. This is a bit odd, and I'm not sure if it is reason for concern or whether we can ignore this.
2013-03-08 13:39:54 max_albert: Yay!! We have a working documentation build! :-)
2013-03-08 13:46:34 mb8g11: final viva?
2013-03-08 13:47:12 mb8g11: Sooo.... did you find the reason? I'm really looking forward to hearing an explanation.
2013-03-08 13:47:42 max_albert: I don't really have an explanation yet.
2013-03-08 13:48:13 max_albert: But what caused the problem was that the environment variable USER was not set during Jenkins runs.
2013-03-08 13:48:33 max_albert: There is a configuration option in Jenkins to set environment variables during builds.
2013-03-08 13:49:02 max_albert: I added the setting "USER=jenkins" there, and now it works.
2013-03-08 13:49:20 max_albert: But I have not the faintest idea why nsim failed completely silently when that variable wasn't set...
2013-03-08 13:50:31 fangohr-adium: Maybe it was looking for the home direcotry of the user at some point for some config files?
2013-03-08 13:50:57 fangohr-adium: I know that cronjobs can be a bit sensitive to this: for some reason HOME is not defined, but USER is, or something along those lines.
2013-03-08 13:52:05 max_albert: But why would it not produce an error then? The weird thing is that when we called nsim using the subprocess module, we captured all the output (stdout and stderr), but there was *no output whatsever* from the call, and the exit status was 0.
2013-03-08 13:52:46 mb8g11: So do we have the USER set on summer?
2013-03-08 13:52:59 max_albert: That's a really good question. Let me check...
2013-03-08 13:53:24 fangohr-adium: [I am guessing ]:
2013-03-08 13:53:26 fangohr-adium: Yes
2013-03-08 13:54:55 max_albert: Hmm, I can't find any setting that would set the USER variable...
2013-03-08 13:55:01 max_albert: So I presume: no.
2013-03-08 13:55:19 fangohr-adium: [Guessed wrong then.]
2013-03-08 13:55:28 mb8g11: Too bad.
2013-03-08 13:55:43 max_albert: Why "too bad"?
2013-03-08 13:56:31 mb8g11: If it works on summer and doesn't on aleph0, and you say this is due to the USER environment variable but USER is not set on summer, then your explanation is likely wrong, isn't it?
2013-03-08 13:56:47 mb8g11: :-(
2013-03-08 13:57:14 max_albert: It might be set implicitly. (I may actually check that soon.)
2013-03-08 13:57:23 mb8g11: True. Good idea.
2013-03-08 13:58:25 max_albert: But I'm pretty sure it's the reason. I manually injected this variable into the subprocess that called nsim, and when I did that it worked, and when I didn't do it then it failed.
2013-03-08 13:59:27 max_albert: Also, I have now removed that manual environment injection and set the USER=jenkins variable in the Jenkins configuration, and now it also works. (And that's the only change I did, so I'm pretty certain that's the reason.)
2013-03-08 13:59:37 max_albert: But I still have no explanation for it.
2013-03-08 14:00:28 mb8g11: Still manages to convince me. Nice, good job figuring it out - stumped me for sure.
2013-03-08 14:01:26 max_albert: Ok, here is the final proof:
2013-03-08 14:01:52 max_albert: Type the following in your bash:
2013-03-08 14:01:58 max_albert: unset USER
2013-03-08 14:02:21 max_albert: cd /path/to/your/finmag/examples/exchange_demag
2013-03-08 14:02:31 max_albert: nsim --clean simple_1D_nmag.py
2013-03-08 14:02:56 mb8g11: Wow!
2013-03-08 14:03:06 mb8g11: Fails silently.
2013-03-08 14:03:07 max_albert: This will 'run' nsim but produce no output whatsoever, but the exit status is 0.
2013-03-08 14:03:18 max_albert: No: succeeds silently. ;-)
2013-03-08 14:03:38 mb8g11: Really? Didn't look like it does anything.
2013-03-08 14:03:53 max_albert: Well, the exit status is 0, and that means "success". :-P
2013-03-08 14:04:01 mb8g11: Haha, okay.
2013-03-08 14:04:41 max_albert: Incidentally, this is exactly what the unix command "true" does:
2013-03-08 14:04:50 max_albert: "do nothing, successfully" (from its manpage)
2013-03-08 14:30:18 mb8g11: I see. ^^
2013-03-08 14:55:03 max_albert: Bloody hell, Netgen is such a poorly written piece of software when it comes to dealing with wrong input and reporting errors etc.
2013-03-08 16:23:13 mb8g11: Hahahaha. Tell us!
2013-03-08 16:23:16 mb8g11: What's the deal?
2013-03-08 17:04:47 fangohr-adium: [Coming back]: Great stuff, well done Max. Looking at http://aleph0.kk.soton.ac.uk:8080, we now have everything building as we had on summer, plus the binary build (successful), and all based on dolfin 1.1. Very good.
2013-03-08 17:04:58 fangohr-adium: So I guess we should all upgrade to dolfin 1.1 if not done yet?
2013-03-08 17:05:07 fangohr-adium: [Over and out for now.]
2013-03-11 09:22:47 fangohr-adium: Good morning, all.
2013-03-11 09:49:22 max_albert: Good morning.
2013-03-11 10:06:44 fangohr-adium: Hi all, have you seen the pipeline feature display from jenkins (at http://aleph0.kk.soton.ac.uk:8080/view/Pipeline/)?
2013-03-11 10:07:25 max_albert: Yes, I think this is what Marc-Antonio introduced / played around with recently.
2013-03-11 10:07:42 fangohr-adium: I see. Very nice â good idea.
2013-03-11 13:32:06 max_albert: Just for general information, I backported one bug fix to the dolfin-1.0.0 branch so that the test suite now also passes on summer.
2013-03-11 13:32:10 max_albert: This means that we can leave the dolfin-1.0.0 branch completely alone now (but keep it for archiving/reference or if we ever hit a bug in later dolfin versions that forces us to go back to a version of Finmag that works with dolfin-1.0).
2013-03-11 13:32:42 max_albert: So I guess Hans is right that all further development should happen on the "default" branch (which corresponds to dolfin-1.1.0 at the moment).
2013-03-11 13:34:06 mb8g11: The pipeline is a jenkins plugin. Required next to no setup.
2013-03-11 13:55:51 max_albert: Hi all, is anybody using the latest Finmag code on Ubuntu 12.04 by any chance?
2013-03-11 13:56:13 max_albert: I get a compiler error which is probably related to an older version of the boost libraries (or the compiler).
2013-03-11 13:57:21 max_albert: Was wondering if I need to upgrade my system, or if we want to support 12.04 (since it's a more stable LTS release). But in the latter case I don't know offhand how to fix the error.
2013-03-11 13:58:00 max_albert: (It's related to the random number generator in the LLB code: "src/llb/mt19937.h:12:7: error: mt19937 in namespace boost::random does not name a type")
2013-03-11 14:12:36 max_albert: No opinions?
2013-03-11 14:12:50 max_albert: Looks like I can't use Finmag at all on my system at the moment due to this error.
2013-03-11 14:13:59 max_albert: Would it be possible to replace the random number generator with another one?
2013-03-11 14:14:01 max_albert: (One of the comments in this post suggests that this solution: http://stackoverflow.com/questions/8599238/random-number-generation-in-c-first-number-not-very-random)
2013-03-11 14:14:10 max_albert: Or should I upgrade my system?
2013-03-11 14:17:20 D_Chernyshenko_: Hi Max I missed the first half of the question, random numbers?
2013-03-11 14:18:07 max_albert: Yes. I have been using dolfin-1.0 on my computer so far but just upgraded to dolfin-1.1.
2013-03-11 14:18:26 max_albert: However, now I can't compile Finmag any more.
2013-03-11 14:19:14 D_Chernyshenko_: What's the error message?
2013-03-11 14:19:39 max_albert: http://pastebin.com/6EiakmRH
2013-03-11 14:20:23 max_albert: I only did very little Googling, but it seems that it's related to an old version of either boost or gcc.
2013-03-11 14:20:32 D_Chernyshenko_: Ah, this looks like Weiwei's work on the RNG
2013-03-11 14:20:36 D_Chernyshenko_: Yes this is an old version of boost
2013-03-11 14:20:43 D_Chernyshenko_: That doesn't have boost::random?
2013-03-11 14:20:50 ww1g11: Hi Max, I will replace it to the old code if it's the library version problem
2013-03-11 14:20:55 D_Chernyshenko_: Or maybe it's not installed (unlikely but worth checking)
2013-03-11 14:21:39 D_Chernyshenko_: Weiwei, did you manage to have a look at dSFMT though? Is it too much work to integrate it?
2013-03-11 14:22:23 max_albert: Good point, Dmitri. I didn't know there is a separate Ubuntu package for libbost-random. It wasn't installed, but I get the same error now that I have installed it.
2013-03-11 14:22:24 ww1g11: No, I haven't, but we also have a independent version of mt19973
2013-03-11 14:23:07 max_albert: Hi Weiwei, thanks for offering to replace it. Is there an easy way to do that?
2013-03-11 14:23:13 D_Chernyshenko_: Ah, that could do it then
2013-03-11 14:23:48 D_Chernyshenko_: I could see if I could adapt my dSFMT code eventually, but this might take a while (probably not this week)
2013-03-11 14:24:07 D_Chernyshenko_: What about libboost-random-dev?
2013-03-11 14:24:14 D_Chernyshenko_: libboost-random is probalby just the runtime
2013-03-11 14:24:34 max_albert: Dmitri: yep, installed that. Still fails, though. :-S
2013-03-11 14:24:55 max_albert: Weiwei: I don't want to force you using an inferior version of the random number generator just because I'm using an older system.
2013-03-11 14:25:04 ww1g11: It would be nice to port  dsFMT to finmag since it's fast
2013-03-11 14:25:26 max_albert: But other people (e.g. the Oxford folks?) may do that too, so perhaps it's worth keeping a bit of backwards compatibility.
2013-03-11 14:25:38 D_Chernyshenko_: Version 1.47.0
2013-03-11 14:25:38 D_Chernyshenko_: July 11th, 2011 22:19 GMT
2013-03-11 14:25:38 D_Chernyshenko_: New Libraries: Chrono, Geometry, Phoenix and Ratio. Updated Libraries: Accumulators, Asio, Config, DateTime, Dynamic Bitset, Foreach, Function, Function Types, Graph, Iostreams, Iterator, Lexical Cast, Logic, Math, Meta State Machine, MultiIndex, Proto, Random, Range, Spirit, Tokenizer, Utility, Uuid, Wave
2013-03-11 14:25:39 ww1g11: I haven't test the speed so it's hard to say which is fast
2013-03-11 14:25:46 D_Chernyshenko_: Boost.Random was added in 1.47
2013-03-11 14:26:58 max_albert: Hmm, that's strange. I could install libboost-random-dev, and when I check the version (using dpkg -s) it reports 1.48.0.2, but it seems that my boost version is actually 1.46 because that's what dolfin/fenics depends on.
2013-03-11 14:27:14 D_Chernyshenko_: Yeah, dSFMT actually has no external dependencies and we can package it with the source code, so it should be backwards compatible
2013-03-11 14:27:18 D_Chernyshenko_: That is weird indeed
2013-03-11 17:02:25 max_albert: Happy side note: we have all sunshine for our core test suite on aleph0. :-)
2013-03-11 17:19:51 fangohr-adium: :)
2013-03-11 17:22:36 mb8g11: Cool.
2013-03-11 17:24:42 max_albert: Hans, did you have time to follow the discussion above about the compilation issue by any chance? If so, do you have any opinion on it?
2013-03-11 17:25:07 max_albert: In particular, do you think it's worth keeping the Finmag code compatible with Ubuntu 12.04 or not?
2013-03-11 23:50:15 fangohr: Good evening folks. Looks busy.
2013-03-12 09:45:07 fangohr1: Good morning.
2013-03-12 09:46:03 mb4e10: Good morning
2013-03-12 09:59:45 mb8g11: Good morning!
2013-03-12 11:29:22 mb8g11: Building the example for Cambridge and thus looking at subdomains. I think I know how to implement the Airbox method efficiently now.
2013-03-12 11:48:25 mb4e10: Weiwei and I are going to the seminar now. If anyone else is interested, come and join us.
2013-03-12 11:49:04 fangohr: Great. I am stuck in a meeting, but do let me know what the speaker is on about. You could even ask if they would send you the slides by email.
2013-03-12 13:39:29 mb8g11: Max, ready whenever you are.
2013-03-12 13:58:07 max_albert: Hi Hans, we are trying to register for the HMM and are also looking into flights.
2013-03-12 13:58:21 max_albert: Just so we know, do we have to book the flights via Amity travel, or can we look for the cheapest flights ourselves and then claim the money back?
2013-03-12 13:58:51 max_albert: Also, when registering for the conference, do we need to use the Faculty credit card again (as we did for the FEniCS workshop)?
2013-03-13 09:50:45 fangohr_: Hi Marijan. Did you just have a short power cut as well?
2013-03-13 09:51:12 mb4e10: Hi Hans. Yes... second time this morning.
2013-03-13 09:51:38 mb4e10: It looks like it happened during night as well.
2013-03-13 09:52:29 fangohr_: Hm, odd.
2013-03-13 15:25:44 mb8g11_: Hi.
2013-03-14 12:05:53 fangohr-adium1: Greetings.
2013-03-14 12:24:22 mb4e10: Greetings
2013-03-14 12:55:43 max_albert: Greetings.
2013-03-15 09:53:26 fangohr-adium1: Good Morning folks.
2013-03-15 09:53:34 max_albert: Good morning.
2013-03-15 09:59:30 mb4e10: good morning
2013-03-15 10:00:26 fangohr_: I suppose I should now upgrade dolfin to dolfin 1.1 on my 12.04 Ubuntu. Does anybody know the right sequence of commands off-hand?
2013-03-15 10:00:41 fangohr_: I'll get some biscuits out to attract you all to come over here now.
2013-03-15 10:00:51 max_albert: It should be enough to say something like "apt-get install dolfin-bin" or something along those lines.
2013-03-15 13:47:18 fangohr_: Hi all, I just had a quick look at the hdf5 situation in Nmag, and will give some pointers here.
2013-03-15 13:48:04 fangohr_: There is a baseclass defined in nmag-meta/src/interface/nfem/hdf5.py, and there is a derived class that does the actual work in the same directory, in the file hdf5_v02.py
2013-03-15 13:52:10 fangohr_: Correction: [sorry was writing as I looked at this] What I described above was the incomplete attempt to create these classes, and tidy code up.
2013-03-15 13:52:32 fangohr_: The brutal truth is a collection of functions in the file hdf5_v01.py (same directory), that does all the work.
2013-03-15 13:55:39 fangohr_: Code that is used to read from the h5 file is, for example, in the script 'nmagpp' and 'nmagprobe' (nmagprobe contains the efficient probing of a time-series of magnetisation fields as I discussed with Max and Marc-Antonio on the way to lunch).
2013-03-15 13:56:24 max_albert: Thanks for these pointers, Hans!
2013-03-15 13:57:41 max_albert: So what do you think would be the best way forward in terms of saving to HDF5? I suspect nmag does not support writing/reading data in parallel, right? Would it thus make sense to try and use dolfin's own storage mechanisms if possible?
2013-03-15 13:58:43 max_albert: I'll have a look at what dolfin already supports, and how easy it would be extend it to allow e.g. having an optional argument to provide the group name inside the hdf5 file where the data should be stored.
2013-03-15 13:59:04 max_albert: Also whether it already allows saving the time steps together with field data.
2013-03-15 14:00:10 fangohr_: Addition: the code that writes the data to the h5 file in Nmag is in nmag-meta/src/interface/nmag/nmag5.py, for example in the _save_fields method. (Just to complete the documentation of this.)
2013-03-15 14:01:21 fangohr_: The nmag code uses pytables to do this, which is meant to sit on top of h5. I am not 100% sure whether it is fully compatible, but I expect it should be, or it should be able to use it so. You have shown this morning that pytables is a pleasure to use, so I amvery much in favour of that (if only for reading).
2013-03-15 14:02:15 fangohr_: I don't know whether this supports parallel writes, but I would prefer to use dolfin functions to write the data to exploit as much as possible from what is provided through dolfin. In an ideal world, this would create standard h5 files that we can post process with pytables.
2013-03-15 14:02:48 max_albert: I agree about pytables and that it would be nice to use it. Especially for our own post-processing that should be the way to go.
2013-03-15 14:03:32 fangohr_: One feature that pytables introduces (over the hdf5 writing we have seen from dolfin so far) is that of the tables, which are particularly suited for time series.
2013-03-15 14:03:45 max_albert: True.
2013-03-15 14:04:13 max_albert: However, for writing and reading the data into our internal Finmag data structures (which are mostly dolfin functions), what worries me a bit is stuff like the reodering of dofs (and potentially other things that we are not aware of), which might force us to understand and reimplement some of the dolfin logic in our own code.
2013-03-15 14:04:38 fangohr_: Good point.
2013-03-15 14:04:42 max_albert: So it seems if we could use dolfin as much as possible that would be ideal.
2013-03-15 14:04:46 fangohr_: Agreed.
2013-03-15 14:05:18 max_albert: I'm imagining that all we deal with in our own code would be dolfin functions, which we can probe or play around with.
2013-03-15 14:06:03 max_albert: Whenever it comes to saving or reading, we would use dolfin which "magically" does its own stuff to write the function, and later read it back into another function which we can then deal with again.
2013-03-15 14:06:21 max_albert: So we'd never have to think about dolfin-related problems when it comes to saving and reading data.
2013-03-15 14:06:41 max_albert: This is in an ideal world, of course. And it assumes that dolfin provides (or will provide) all the functionality we need.
2013-03-15 14:07:11 fangohr_: Yes, that sounds about right. The question is wether they are sufficiently interested in supporting time-series data so that we can do that as you outline, only with dofin functions.
2013-03-15 14:07:38 fangohr_: I also think we want to be able to read the saved data and make sense of it without dolfin: if only to create custom vtk files that contain multiple fields.
2013-03-15 14:07:42 max_albert: Precisely. And I'm not 100% sure they are, but it would be good to try pushing them a little.
2013-03-15 14:08:05 fangohr_: So we really need to understand what they do with their degrees of  freedoms, and how this information isstored. There is no magic to it, we just need to know what their plan is.
2013-03-15 14:08:21 max_albert: Agreed.
2013-03-15 14:09:25 fangohr_: If we were looking for some fun entertainment, I suppose we could play around a little with parallel saving: for example, we could try to write to a h5 file from dolfin in a parallel run, and see what we get: is it just one h5 file that looks right that two processes have written to? Does it have etxra data saved regarding (mesh) nodes and processes? Or we just ask them in 2 days. ;-)
2013-03-15 14:10:53 max_albert: Yes, I wanted to try parallel saving, too. Will do that in a minute. :)
2013-03-15 14:12:18 max_albert: Getting back to your last point, even if we understand what's going on with the dofs and could in principle implement our own saving mechanism, it still wouldn't make sense to roll out our own code if theirs is already 80% there.
2013-03-15 14:12:27 max_albert: Plus, they may decide to change things again in the future.
2013-03-15 14:14:22 fangohr_: I am hoping that we can exploit their hdf5 reading and writing, and that this is compatible with pytables to give us nice time series and convenience, and that we can understand how the degrees of freedom or sorted (or looked up), but don't have to do anything with that information.
2013-03-15 14:14:31 fangohr_: [Optimistic, I know.]
2013-03-15 14:14:51 max_albert: That's a good summary of my hopes, too. :)
2013-03-15 14:17:11 fangohr_: Okay, just trying to upgrade osiris to dolfin1.1. Will keep you posted.
2013-03-15 14:28:33 max_albert: Hans, you said that it's possible to get the process ID inside the python script when running in parallel. Do you remember how?
2013-03-15 14:38:24 max_albert: Following up on what you said earlier, I just tried to save a mesh in parallel and read it back in.
2013-03-15 14:38:57 max_albert: When saving the mesh (using the HDF5File approach I showed earlier during the meeting) I get a warning like this on every processor:
2013-03-15 14:39:05 max_albert: Process 4: *** Warning: Writing globally indexed mesh - not suitable for visualisation
2013-03-15 14:39:46 max_albert: Does this mean that each process is actually writing the whole mesh? Not sure.
2013-03-15 14:40:52 fangohr_: Can you see anything when you use h5dump?
2013-03-15 14:41:12 max_albert: Yes, the output from h5dump looks identical.
2013-03-15 14:41:44 max_albert: However, it seems like reading the file back in isn't reliable (or I'm doing something wrong).
2013-03-15 14:42:40 max_albert: When I read the mesh in serial, the mesh cells seem to be reordered sometimes. I guess that's to be expected, if multiple processes previously wrote it concurrently.
2013-03-15 14:44:14 max_albert: However, reading the mesh in parallel seems to corrupt the mesh (at least my checks whether mesh.coordinates() and mesh.cells() coincide with the original mesh report False).
2013-03-15 14:44:32 max_albert: (Even when I sort the lists before comparing.)
2013-03-15 14:44:38 fangohr_: Can you readthe mesh in parallel when you write serially?
2013-03-15 14:45:03 max_albert: Good question. Can try that now.
2013-03-15 14:45:42 max_albert: Looks like that works indeed. Interesting.
2013-03-15 14:46:19 max_albert: Btw, do you remember how to get the process ID inside the python script?
2013-03-15 14:47:14 fangohr_: No.
2013-03-15 14:47:22 max_albert: Ok. No worries. :)
2013-03-15 15:11:02 max_albert: For the record (to answer my own question): one can use the mpi4py module to do this.
2013-03-15 15:11:04 max_albert: Example:
2013-03-15 15:11:13 max_albert: from mpi4py import MPI
2013-03-15 15:11:16 max_albert: comm = MPI.COMM_WORLD
2013-03-15 15:11:19 max_albert: rank = comm.Get_rank()
2013-03-15 15:14:49 fangohr_: Weiwei, I have a problem getting Magpar to work on Mint. Could you have a look whether the error means anything to you?
2013-03-15 15:20:56 ww1g11: Yes, please paste the error message or I can install magpar in my machine to see what happens
2013-03-15 15:26:30 fangohr_: Weiwei, I have put the error in the to-discuss folder on Dropbox.
2013-03-15 15:32:17 ww1g11: I don't know why no writedataavs.o file, I am running the script to see whether it works for this machine
2013-03-15 15:35:41 fangohr_: Okay. My best guess is that some package is missing, so I hope you run into the same mistake ;-)
2013-03-15 15:42:10 ww1g11: It works in my machine, ;-), may be you can check whether writedataavs.o exists?
2013-03-15 15:44:10 fangohr_: No, it doesn't. I guess something goes wrong earlier.
2013-03-15 15:44:32 ww1g11:  writedataavs.c?
2013-03-15 15:47:24 fangohr_: I'll update the OS, and start the process again; just making sure to start from good ground. Will keep you posted; thanks.
2013-03-15 16:33:14 fangohr_: Update: osiris is upgraded to dolfin1.1, and all tests pass.
2013-03-15 16:33:33 max_albert: Awesome. Congratulations! :)
2013-03-15 16:33:41 fangohr_: Aww, thanks.
2013-03-15 16:33:43 fangohr_: It wasn't that hard.
2013-03-15 16:33:55 max_albert: I may also have a slightly better understanding of the dofmap thingy.
2013-03-15 16:33:59 fangohr_: More embarressed it took me two hours (amongst other things) to get this sorted.
2013-03-15 16:34:07 max_albert: ;-)
2013-03-15 16:34:30 fangohr_: I have a version control question: I have three heads (and can't use my preferred 'fetch' extension because of that); see output below:
2013-03-15 16:35:01 fangohr_: Okay, I can't paste the ouput, but there are three:
2013-03-15 16:35:22 fangohr_: dolfin-1.0.0
2013-03-15 16:35:28 fangohr_: the default tip
2013-03-15 16:35:33 fangohr_: and marvin's branch
2013-03-15 16:35:42 fangohr_: This seems wrong, doesn't it?
2013-03-15 16:35:50 fangohr_: No need to sort now, but just wanted to record this.
2013-03-15 16:35:50 max_albert: No, that's ok.
2013-03-15 16:36:29 max_albert: The marvin branch is one that was created when Marvin was confused by the two different branches for dolfin-1.0 and dolfin-1.1
2013-03-15 16:36:38 max_albert: It's the one that some of the IRC logs got committed to.
2013-03-15 16:37:12 max_albert: Marc-Antonio kept it active a while ago for some reason (probably to avoid problems caused by our lack of understanding of branches).
2013-03-15 16:37:39 max_albert: But I think all the logs have been copied, and things have been stable for a while, so I guess we can close it now.
2013-03-15 16:38:18 max_albert: I don't know the magic command for that though. :)
2013-03-15 16:43:22 fangohr_: Marc-Antonio, could you close that branch now (when you have landed, or a bit later ...)? Ta.
2013-03-15 17:08:20 fangohr_: Weiwei, the magpar compilation just worked. So all is well.
2013-03-15 17:12:44 ww1g11: Great, Hans
2013-03-15 18:33:52 max_albert: Hi Hans and Marc-Antonio, I just tried to close the old Marvin branch. Hope it worked...
2013-03-17 15:05:29 fangohr-adium1: Greetings.
2013-03-17 15:16:04 fangohr-adium1: Max: I reckon your merge looks alright. Thanks.
2013-03-17 15:21:39 fangohr-adium1: Hello, looks like Marijan and Dmitri have arri
2013-03-17 15:21:40 fangohr-adium1: ved?
2013-03-17 15:21:47 D_Chernyshenko: Yep we're here
2013-03-17 15:22:11 mb4e10: we are here
2013-03-17 15:22:28 fangohr-adium1: Okay, I'll come over in 5 minutes and then we can go?
2013-03-18 06:57:55 fangohr: Good Morning.
2013-03-20 07:45:13 mb8g11: Hi guys. I hope you had a splendid time in Cambridge. Looking forward to hearing about it.
2013-03-20 07:45:59 mb8g11: I'm going to the library now to get some reading done, but I may be online this afternoon.
2013-03-20 10:20:43 D_Chernyshenko_: Hi Hans, I will be a bit late (10:45), I only woke up 10 minutes ago, was too tired yesterday
2013-03-20 10:50:44 fangohr-adium: Hi Dmitri, no problem. Am in my office.
2013-03-20 13:34:22 fangohr_: Hi Marc-Antonio, yes, visit to Cambride and the fenics workshop was very interesting I would say. Don't know what the others think.
2013-03-20 13:34:33 fangohr_: If nothing else, at least we now know many of the key people in person.
2013-03-20 15:24:53 mb8g11: Hi.
2013-03-20 15:28:12 fangohr_: Hi :)
2013-03-20 15:28:27 fangohr_: Have replied to your earlier question earlier ;-) (when you were offline I think).
2013-03-20 15:30:12 fangohr_: Weiwei, I have question on periodic boundary conditions in OOMMF: am I correct to think that the demag tensor for periodic boundary conditions is computed so that contributions from more and more image cells are added [starting with the image cells nearby, then adding more and more with growing distance to the primary cell], until numerically the effect of these far-away image cells is so small that it does not (or not significantly) change the demag field
2013-03-20 15:30:12 fangohr_:  in the primary cell?
2013-03-20 15:33:19 ww1g11_: Yes, that's the basic idea and actually an asymptotic expression is used to represent the interaction far away
2013-03-20 15:34:53 fangohr_: Thank you. (And Dmitri knows all about the need for the asymptotic expression ...)
2013-03-20 16:42:26 max_albert: Hi Marc-Antonio!
2013-03-20 16:42:34 max_albert: We were just discussing the HMM conference in Italy. Have you booked your ticket yet? Otherwise we may book it together soon.
2013-03-20 16:44:12 max_albert: We discussed it in Cambridge a couple of days ago and it seems we would all be leaving on Thursday evening so that we can go see the Etna on Thursday morning (either with the guided tour, or on our own).
2013-03-20 16:44:51 max_albert: Would you do the same? Once we know we can write to AmityTravel and book the tickets.
2013-03-20 18:32:23 mb8g11: Yes, I'd like to do the same.
2013-03-20 18:32:47 mb8g11: I have registered to the conference, but haven't booked any flights or accomodation.
2013-03-20 18:33:17 max_albert: Great. Then we can do that together. I'll ask Marijan whether he can send the flights he looked up to AmityTravel.
2013-03-20 18:33:33 mb8g11: Cool. What do I need to do/
2013-03-20 18:33:47 max_albert: Nothing at the moment I think.
2013-03-20 18:34:03 max_albert: Oh, we may need your cost code because AmityTravel will want to know that.
2013-03-20 18:35:30 max_albert: Do you know it?
2013-03-20 18:51:24 mb8g11: Even if I have one, I don't think I can use it for this conference I'm afraid. However, I can do debit/credit card over the phone if they call me, or wire transfer.
2013-03-20 18:52:43 max_albert: Oh, that's a shame. Are you sure? If that's true it may even be cheaper for you to book the flight directly (because the travel agency may add a surcharge).
2013-03-20 18:55:30 mb8g11: Yes. However, there's the convenience and the guarantee to have the same flight and seats like you guys.
2013-03-20 18:55:53 mb8g11: Don't want to have to sit on my own ;)
2013-03-21 09:21:48 fangohr-adium: Good Morning.
2013-03-21 09:22:17 mb4e10: good morning
2013-03-21 09:22:27 max_albert: Good morning.
2013-03-21 09:27:51 fangohr-adium: Max, if you want to sit in on my meeting with Marijan (because of the normal mode overlap), you are very welcome.
2013-03-21 09:28:03 max_albert: Thank you.
2013-03-21 11:04:41 mb8g11: Good idea on the create_integrator method in the Simulation class.
2013-03-21 11:30:14 fangohr-adium:  Hi MA, are you ready for a meeting?
2013-03-21 11:30:37 mb8g11: Yes, I am on Skype.
2013-03-21 11:30:53 fangohr-adium: Okay, will go online now.
2013-03-21 11:31:07 mb8g11: It says you are already.
2013-03-21 21:31:16 mb8g11: Nighty night.
2013-03-22 09:48:55 mb8g11: Does anyone know what PC.rtol, PC.atol do in the ksp_tolerances argument in the nmag Simulation class consstructor? I've seen their usage a couple of times, but no internals that explicitly make use of them.
2013-03-22 09:52:23 max_albert: I don't know, sorry. Maybe Dmitri or Hans have an idea.
2013-03-22 09:55:45 mb8g11: My guess it's for a PETSc preconditioner.
2013-03-22 09:56:02 max_albert: Yes, that makes sense.
2013-03-22 17:12:38 max_albert: Hi Marc-Antonio, are you there by any chance?
2013-03-27 09:51:09 fangohr-adium1: Hello Marvin_Bot; good to see you again.
2013-03-27 09:53:00 fangohr-adium1: finmag-dg0: We have discussed at various points with various people that it might be interesting to run finite element micromagnetics with basis functions that are constant throughout a cell, i.e. discontinous galerkin elements of order 0. This would be a little bit like the finite difference approach (fields constant in each cell) but with irregular cell shapes.
2013-03-27 09:55:47 fangohr-adium1: Why the extra repository? Weiwei has started some work on this and changed the time integration to be based on DG0 cells but computes the effective field with CG1 on the nodes (and then interpolates backwards and forwards). I have started to change effective field computation to use DG0 instead of CG1 (but not touched the time integration). I have not completed the job: my version fails to compile a  form. Also, I have changed the hard coded 'CG1
2013-03-27 10:02:57 fangohr-adium1: What do we expect from DG0? We expect an increase of degrees of freedom (as there are more tetrahedra than nodes in an unstructured mesh); so in some sense that should make things worse. However, there may be other positive effects (maybe stiffness matrices are less stiff) that we can't understand now, and this may come in handy for particular problems.
2013-03-27 11:44:28 fangohr: Marc-Antonio, are you still there? I am thinking about adding finmag emails to the repository using something like Marvin Bot. In principle this shouldn't be hard. We need to
2013-03-27 11:44:37 fangohr: (i) have an email account for Marvin_Bot
2013-03-27 11:44:44 fangohr: (ii) subscribe that email account to finmag-team
2013-03-27 11:44:56 fangohr: (iii) use fetchmail or getmail to regularly fetch email from that account and
2013-03-27 11:45:11 fangohr: (iv) append it to a text file in the repository (in the same way as we append IRC messages to a text file in the repository) and
2013-03-27 11:45:15 fangohr: (v) commit nightly.
2013-03-27 11:45:56 fangohr: Regarding implementation: (v) is done already for the irc, so we could just re-use that account on summer.kk.
2013-03-27 11:46:23 fangohr: Regarding (i): have we got an email account for marvin already? [I suppose we could create one on gmail if required.]
2013-03-27 11:50:01 mb8g11: I am.
2013-03-27 11:51:11 mb8g11: Well, there is the one on bisotti.de, but an independent one on gmail will be better. And we could move marvin's bitbucket account to the new e-mail address.
2013-03-27 11:52:59 mb8g11: But there is software that exists for this purpose, like Hypermail.
2013-03-27 11:56:27 mb8g11: Hypermail + Swish-e (or other) = Indexed and searchable HTML archive of mailing list.
2013-03-27 11:56:55 mb8g11: Using open-source software.
2013-03-27 11:57:43 mb8g11: It basically transforms a mailbox to HMTL.
2013-03-27 11:58:14 mb8g11: I would prefer this to raw copying of mails to a text-file, since the latter doesn't respect intertwined threads.
2013-03-27 12:06:15 mb8g11: There's no way we could get an e-mail address for Marvin from isolutions, is thee?
2013-03-27 13:39:46 fangohr: Hi Marc-Antonio, thanks for the input. How about storing the mailbox file in the repository, and doing the conversion to html when we need it?
2013-03-27 13:40:07 fangohr: Don't think isolutions can give us an account for Marvin. But is anything wrong with a gmail account?
2013-03-27 13:57:03 mb8g11: Not at all.
2013-03-27 13:57:12 mb8g11: *Nothing
2013-03-27 13:58:10 mb8g11: We can do that - I presume this is because it gives us an additional layer of backup? Or is this because one may want to grep through it?
2013-03-27 14:16:10 fangohr: Yes, 'grep' indeed, or just load the file in an editor and search for the keywords. There is even a tool called 'mgrep' or 'mailgrep' which works on an mbox file and will display those mails out of it that contain the term you grep for.
2013-03-27 14:16:52 fangohr: I accept the thread-argument, but if we can create that dynamically, it seems more elegant than to put all the html tags and overheads into the repository. Not a big deal in any case.
2013-03-27 14:27:50 mb8g11: Will you create the e-mail account? I'll happily set up the mailbox on aleph0 then.
2013-03-27 15:46:48 fangohr: Hi MA, the email account is marvinbotfinmag@gmail.com.
2013-03-27 15:53:05 fangohr: I have also subscribed MarvinBot to the mailing list now.
2013-03-27 16:28:45 fangohr: Marc-Antonio, if you could do (iii) and (iv) from the list above, and (v) is done already due to the IRC logging, then we should be done (I have dealt with (i) and (ii)). Thanks for your help with this.
2013-03-27 18:13:10 mb8g11_: I like the Marvin's avatar :)
2013-03-27 18:21:07 mb8g11_: Will start by setting up fetchmail and procmail on aleph0.
2013-03-28 09:10:50 mb8g11_: Marvin on aleph0 now successfully retrieves e-mail.
2013-03-28 09:11:30 mb8g11_: E-Mails from finmag-team go in a special folder.
2013-03-28 09:29:50 fangohr-adium: Nice, thank you.
2013-03-28 10:34:17 fangohr-adium: If anybody is in Southampton, it's Danish time now.
2013-03-28 13:46:40 D_Chernyshenko: Hi Weiwei, do you know if the school office have prepared the letter of enrolment yet?
2013-03-28 13:47:02 D_Chernyshenko: I think these days they send out an email once they're done
2013-03-28 15:43:50 fangohr: Good afternoon.
2013-03-28 16:45:30 ww1g11: Yes, they will email us once the letters are ready to collect
2013-03-28 17:16:53 fangohr: I am off for Easter now. Have a good break, folks.
2013-03-28 17:17:16 ww1g11: Have a good break!
2013-04-03 08:39:22 [1]mb8g11: Good morning
2013-04-03 15:45:32 mb8g11: Hi Max, are you working on the normal modes ipython notebook right now? Going through it and might edit it a little.
2013-04-04 09:27:38 fangohr-adium1: Good Morning.
2013-04-04 12:16:20 ww1g11: Hi, it seems new finmag doesn't work? failed to compile bem.cc, does finmag work for dolfin1.1 or dolfin1.2, I just doubt I broke the dolfin package
2013-04-05 09:48:51 fangohr-adium1: Hi Weiwei, not sure what you mean exactly. What breaks, and does it still run on Jenkins?
2013-04-05 11:36:49 ww1g11: There is no PeriodicBC class anymore in dolfin 1.2, which was moved into functionspace and can be used with option constrained_domain=pbc when construct a functionspace
2013-04-05 11:37:16 fangohr-adium1: Hm, interesting. Will this work for us??
2013-04-05 11:37:46 ww1g11: I guess it does, but we need to change the interface slightly
2013-04-05 17:16:31 fangohr-adium1: Hi all, I am off to Italy tomorrow morning. Back on Thursday in the office, probably won't have email until then.
2013-04-08 13:36:55 mb8g11: Re-installing fenics, will have a look at the test right afterwards.
2013-04-08 13:38:53 cilix: Cool, thanks. I think I have fixed the immediate error (see commit https://bitbucket.org/fangohr/finmag/commits/c32806ca3a4186b3d587a05f786f1e052789eb2c), but it would be good if you could have a look at how the parameters are set in that test and whether they have any effect at all.
2013-04-08 14:10:46 mb8g11: Upgraded to Ubuntu 12.10 from Ubuntu 12.04. Scipy would run into the issue 'ImportError: scipy/linalg/clapack.so: undefined symbol: clapack_sgesv'.
2013-04-08 14:11:49 mb8g11: Turns out it stopped using the libblas and liblapack from atlas-base which exports all the needed symbols.
2013-04-08 14:13:27 mb8g11: Fix: 'sudo update-alternatives --config libblas.so.3' and 'sudo update-alternatives --config liblapack.so.3' to use the libraries in '/usr/lib/atlas-base/atlas/'.
2013-04-08 14:42:54 mb8g11: @cilix: The code does what you expect.
2013-04-08 14:43:29 cilix: You mean the code in the demag example for the documentation?
2013-04-08 14:44:31 cilix: Hmm, I thought the parameters were renamed in FKDemag. Or does the parent Demag class still accept the old ones?
2013-04-08 14:50:31 mb8g11: I was tricked by the code. For whatever reason, our Demag class (which wraps our implementations) maintains its own set of parameters for some reason.
2013-04-08 14:50:38 mb8g11: Am investigatin.
2013-04-09 16:58:26 mb8g11_: Jenkins is stuck on the build documentation job.
2013-04-11 09:02:07 fangohr-adium1: Good morning, folks.
2013-04-11 11:38:08 cilix: Good morning, Hans.
2013-04-11 11:38:12 cilix: Welcome back! :)
2013-04-11 12:53:10 fangohr-adium1: Hi Max. Very impressive commit activity in my inbox â good stuff.
2013-04-11 12:55:49 fangohr-adium1: Hi Marc-Antonio, was just saying: Very impressive commit activity in my inbox â good stuff.
2013-04-11 12:59:12 cilix: Mostly Marc-Antonios work (nice cleanup of the Demag classes).
2013-04-11 12:59:14 cilix: Fortunately we managed to get the builds 'green' just before your return. ;-)
2013-04-11 12:59:42 fangohr-adium1: Yes, cool. Was actually just looking at the aleph0 overview.
2013-04-11 13:00:22 fangohr-adium1: The Ipython notebook tests are all broken apart from one â I guess some of these are those that had passed already, but are now invalid due to the changes â maybe just log messages?
2013-04-11 13:02:17 fangohr-adium1: I also like the additional slave node for a different OS. All very exciting. Maybe MA can give us a summary of what he has done tomorrow?
2013-04-11 13:03:14 cilix: Yes, I need to look into the ipython notebook stuff when I find the time.
2013-04-11 13:03:31 cilix: It should be an easy-ish task in principle to get the tests up and running, but it may take a while to sort out the details, that's why I haven't done it yet.
2013-04-11 13:03:38 fangohr-adium1: Yes, but it should not be just your problem.
2013-04-11 13:04:01 fangohr-adium1: I am hoping that it will be easier with the iython notebooks once they have all passed, as we then know what are genuine problems, and what is minor stuff.
2013-04-11 13:04:19 cilix: Agreed.
2013-04-11 13:04:25 fangohr-adium1: Maybe we need another demonstration / training unit tomorrow (group meeting) how to run these tests, and updated them accordingly.
2013-04-11 13:05:41 cilix: The main technical difficulty with the tests at the moment is that the testing script (which is essentially the version downloaded from the web) cannot just ignore lines in the output.
2013-04-11 13:06:15 cilix: Shouldn't be hard at all to implement this, but it's a stumbling block before we can seriously adopt the ipython notebook testing.
2013-04-11 13:06:59 cilix: There may be ways around this, but my feeling is that they would require a great deal of care on our side, so I'd rather have a proper solution (especially if it looks reasonably easy to do).
2013-04-11 13:07:08 mb8g11: Hi Hans
2013-04-11 13:07:14 mb8g11: thanks.
2013-04-11 13:08:43 mb8g11: I have nothing to do with the slave node at all - but would be courious to hear about it. Max, that was you wasn't it?
2013-04-11 13:08:52 cilix: Yep.
2013-04-11 13:08:59 fangohr-adium1: Yes, sorry, it was Max. Mixed the two things up in one paragraph ;-)
2013-04-11 13:14:05 cilix: So how was Italy? Was it a "business" trip?
2013-04-11 13:16:07 cilix: And I hope you had a nice Easter "holiday", too!
2013-04-11 13:17:03 fangohr-adium1: No, not business ;-), Went to a place close to Livorno for a few days (tuscany). A nice break ;-), thank you.
2013-04-11 13:17:43 cilix: Awesome, looks nice! :-) Glad you managed to get some time off.
2013-04-11 13:24:20 mb8g11: And you escaped Southampton's weather...
2013-04-11 13:38:59 fangohr-adium1: Yes, if only for a few days.
2013-04-11 19:08:33 D_Chernyshenko: Hey guys, did we ever receive the flight tickets to HMM? The last emails I have are about sending the charge codes for the purchase order....
2013-04-11 19:10:09 cilix: Did you send the charge code to Jackie Allen? She said she can only proceed if she has all the charge codes (at least from the ones who are funded by FEE, i.e. from Weiwei, you and me). Maybe we should follow up with her.
2013-04-11 19:10:36 cilix: But I think in principle the tickets are booked (my guess is that the travel agency paid for it and is waiting to be refunded by FEE).
2013-04-11 19:10:53 cilix: Maybe we can ask Jackie tomorrow morning before or after the group meeting.
2013-04-11 19:11:43 D_Chernyshenko: I did send the charge code, that was on the 26th of March. No reply since...
2013-04-11 19:12:23 cilix: Hmm, so did I, and I think Weiwei also sent her his. So we should indeed follow that up (although there may have been some delay due to the Easter break).
2013-04-11 19:16:22 mb8g11: And I called to give my debit card information the 27th of March
2013-04-11 19:16:52 cilix: mb8g11: you gave it to Amity Travel directly, I suppose?
2013-04-11 19:39:36 mb8g11: Yes, to Caroll on the phone.
2013-04-12 10:29:37 fangohr-adium1: Good morning, just to confirm that I am back in the office now, ready for our meeting at 10:30.
2013-04-12 10:31:40 cilix: We're coming over
2013-04-12 10:32:10 fangohr-adium1: Thanks, tha.
2013-04-12 10:32:14 fangohr-adium1: (ta)
2013-04-12 15:48:33 fangohr_: Woohoo, upgraded to dolfin 1.2.
2013-04-12 15:48:47 fangohr_: 246 tests passed, 3 skipped, 1xfailed. That's okay, I suppose?
2013-04-12 15:48:47 cilix: Nice :-)
2013-04-12 16:27:06 fangohr_: Weiwei, are you there?
2013-04-12 16:44:58 ww1g11: Yes
2013-04-12 16:45:25 ww1g11: sorry not watching irc
2013-04-12 16:45:32 fangohr_: No problem.
2013-04-12 16:45:52 fangohr_: I was gonna ask you some questions regarding the FMR paper, and the discussion of the modes, and your work on the demag tensor in there.
2013-04-12 16:46:06 fangohr_: Can we discuss this Monday morning at 10am, maybe?
2013-04-12 16:46:27 ww1g11: Yes, good idea
2013-04-12 16:46:48 ww1g11: and I can prepare some data then
2013-04-12 16:46:49 fangohr_: In preparation for that, could you check out the repository and read through the relevant sections? Feel free to actually change things to correct/improve them -- a lot is not quite accurate in there yet.
2013-04-12 16:46:54 fangohr_: Yes, that's great, too.
2013-04-12 16:47:09 fangohr_: Wait with checking out the repository for a little - I am just working on it.
2013-04-12 16:47:31 ww1g11: okay, will do it later
2013-04-12 16:59:09 D_Chernyshenko: By the way Weiwei, avoid the Italian consulate if you can for the visa. They're quite awful so the intermediary companies will probably do a better job
2013-04-12 17:00:03 ww1g11: but it seems I have to apply it in person, ;-)
2013-04-12 17:00:20 D_Chernyshenko: Looks like I missed your previous message due to the relog
2013-04-12 17:00:38 ww1g11: but it seems I have to apply it in person, ;-)
2013-04-12 17:00:49 D_Chernyshenko: But yeah you have to apply in person even via the intermediary
2013-04-12 17:01:08 D_Chernyshenko: However at least they can send you you passport back, don't think the consulate does that
2013-04-12 17:01:38 ww1g11: yes, I guess they want to see the applicant
2013-04-12 17:01:44 D_Chernyshenko: Also, they sent me back for "more documents" along with 3 other people who were there. None of the 4 of us actually managed to submit the documents
2013-04-12 17:01:54 D_Chernyshenko: Including a guy who was there for the second time and was quite pissed off...
2013-04-12 17:02:11 D_Chernyshenko: It was really just like Monty Python
2013-04-12 17:02:12 ww1g11: ... it's terrible
2013-04-12 17:02:15 D_Chernyshenko: Yeah
2013-04-12 17:02:41 D_Chernyshenko: So I'll go via some of the companies now
2013-04-12 17:02:52 D_Chernyshenko: *via one of the companies
2013-04-12 17:03:02 ww1g11: okay, I will careful for the documentation
2013-04-12 17:03:27 D_Chernyshenko: Also apparently we need the "tourist" visa and not the "business visa", at least according to the lady who send me packing
2013-04-12 17:03:39 fangohr_: Hi Dmitri, sorry to hear that.
2013-04-12 17:03:44 D_Chernyshenko: Yeah it's quite annoying
2013-04-12 17:04:08 D_Chernyshenko: She was however unable to define who actually is supposed to apply for a business visa so I'm still not 100% sure there
2013-04-12 17:04:46 ww1g11: the  documents for  "business visa" is simpler than that for the tourist
2013-04-12 17:05:15 D_Chernyshenko: Yeah, for the tourist visa one of the required things is the ticket which we don't have yet somehow
2013-04-12 17:05:22 D_Chernyshenko: 2 weeks after asking Amity Travel...
2013-04-12 17:05:55 ww1g11: maybe we can print the ticket information for the visa?
2013-04-12 17:06:41 D_Chernyshenko: We can, once we get the ticket...
2013-04-12 17:07:31 ww1g11: I always thought we already got the ticket ...
2013-04-12 17:10:52 fangohr_: Hi Dmitri, you got an email with the ticket confirmation and e-ticket numbers etc. That's probably all you get, although Max etal wanted to ask Amity. You may be able to print something like a ticket via the Al Italia website (with the e-ticket number or so).
2013-04-12 17:14:57 D_Chernyshenko: Hmm, I can't find the email with the ticket confirmation/any numbers. I will look what I can get via the Al Italia website...
2013-04-12 17:15:16 fangohr_: Max had it -- probably forwarded from Marijan or so.
2013-04-12 17:15:34 fangohr_: Over and out for now.
2013-04-12 17:16:37 cilix: Hi Dmitri, I'll forward the email to you again.
2013-04-12 17:17:04 cilix: Hans said in the meeting this morning that this is probably all we need (and get) for the flight.
2013-04-12 17:17:33 cilix: Regarding busincess vs. tourist visa, I think when I went to the MMM in Atlanta a few years back I also applied for a tourist visa because it was much less hassle.
2013-04-12 17:23:32 cilix: Not sure what the rules/guidelines for Italy are, though, and if they are any different from America.
2013-04-12 17:25:45 D_Chernyshenko: Yeah I went to the website for the intermediary company and they have different rules/different list of documents than the consulate. Also they say "applicants traveling for a conference should provide documents according to the tourist checklist "
2013-04-12 17:25:53 D_Chernyshenko: So it seems to be a rule specific to conferences only
2013-04-12 17:26:15 cilix: Ok.
2013-04-12 17:26:23 cilix: Just forwarded you the email with the tickets again.
2013-04-12 17:30:36 D_Chernyshenko: Thanks. Hopefully this is enough. The visa website asks for "proof of payment" which this isn't, but I'm not sure if there was any traceable payment for this ticket yet at all anywhere. so the rule makes no sense
2013-04-12 17:31:21 D_Chernyshenko: Considering Amity probably are on credit with the airline and the University is on credit with Amity the money might not even chagne hands until 1-2 months later...
2013-04-12 17:32:04 cilix: True, although you can probably get a confirmation from Amity Travel that they purchased the tickets (which they will hopefully give you in reply to your email earlier).
2013-04-12 17:41:48 D_Chernyshenko: Okay Carol has just sent me their invoice to the University as well, this should be enough
2013-04-12 17:44:09 D_Chernyshenko: Yeah, the invoice is due to be paid by May 15th (after our flight)
2013-04-12 17:44:11 D_Chernyshenko: As expected...
2013-04-15 11:48:59 mb8g11: Who is up for lunch at 12:15?
2013-04-15 16:39:35 D_Chernyshenko: Hey Max, were you able to get NX client/server working on Ubuntu 12.10?
2013-04-15 16:40:12 max_albert: Hi Dmitri! I didnt' try it on Ubunut 12.10 as I'm still running 12.04, but it works there.
2013-04-15 16:40:34 D_Chernyshenko: Ah right, just to warn you it seems incompatible with 12.10, I'm still trying to figure out a way
2013-04-15 16:40:51 max_albert: (I should say that I haven't used it extensively, and I saw some glitches when I used the wrong resolutions, but when it works it's very useful.)
2013-04-15 16:41:00 max_albert: Ah, thanks for the heads-up!
2013-04-15 17:24:53 D_Chernyshenko: Do we get email notifications from the new Jenkins? Just realised my build notifications folder is empty...
2013-04-15 17:27:29 max_albert: Yes, they are enabled. However, recently there was a glitch which resulted in people needing to sign up again, so maybe that's why you're not getting any notifications at the moment.
2013-04-15 17:27:59 max_albert: Jenkins does automatically extract email addresses from commits, but they are usually mangled so maybe that's also a reason.
2013-04-15 17:28:17 max_albert: I just fixed the your email address there, maybe that already helps.
2013-04-15 17:28:29 max_albert: Otherwise just sign up again and that should hopefully resolve things.
2013-04-15 17:28:50 D_Chernyshenko: That's right, I still need to do it. I think the messages are not being filtered by my filter which is why the folder is not empty. And they weren't on the last 2-3 screens of emails because of the requireed re-signup
2013-04-15 17:28:58 D_Chernyshenko: *why the folder is empty
2013-04-15 17:29:31 D_Chernyshenko: Anyway, actually I wanted to ask how you set up email transport (assuming that was you)?
2013-04-15 17:29:54 max_albert: What do you mean by email "transport"?
2013-04-15 17:30:00 D_Chernyshenko: Trying to set up email delivery from my workstation (mu) again after the Ubuntu upgrade
2013-04-15 17:30:28 D_Chernyshenko: As in, being able to send Unix mail from the computer Jenkins is running on? Or are you using some different way of delivering mail?
2013-04-15 17:30:54 max_albert: You mean setting up sendmail or whatever it is that's doing the low-level magic? I think it was Hans who did that.
2013-04-15 17:31:02 D_Chernyshenko: Ah, okay
2013-04-15 17:31:08 D_Chernyshenko: Yeah, that's what I meant
2013-04-15 17:31:22 D_Chernyshenko: Thanks!
2013-04-15 17:31:56 max_albert: I just saw that he added some notes to the finmag-jenkins repository about setting up email. Do you have access to that?
2013-04-15 17:32:15 max_albert: If not, I can send you the relevant part via email.
2013-04-15 17:32:39 max_albert: It's bullet point No. 17 in the file "steps_for_setting_up_jenkins_from_scratch.txt"
2013-04-15 17:33:32 D_Chernyshenko: Yeah, I have access to that, looking at it now.
2013-04-15 17:36:29 D_Chernyshenko: Yeah, that's the way Hans sets it up, I was hoping that if it was you or Marc-Antonio, maybe you found out a better way. The problem is that iSolutions had to add the machine sending mail (aleph0) to the list of machines allowed to send mail without authentication
2013-04-15 17:37:43 D_Chernyshenko: Don't think it's a good idea to have that for a workstation so I had a workaround... Anyway, thanks for clearing it up
2013-04-15 17:37:50 max_albert: Ah, I see.
2013-04-15 17:39:20 max_albert: Actually, I guess there should be a way around it. I'm having a script which sends me notifications about library books that need to be returned, and it uses the 'mailx' command to send me the email. But to be honest, I have no idea any more what I needed to do (if anything) to get it to work, so I can't help you there. :(
2013-04-15 17:41:18 D_Chernyshenko: Well, my workaround was to set up mail delivery via a SSH tunnel to eta (which can send mail due to having that permission from iSolutions). I.e. every time the computer sends mail it will log in to eta and send it there.
2013-04-15 20:30:58 D_Chernyshenko: Hmm, is there any particular reason why in finmag/init.py we import "from finmag.sim.sim import Simulation, sim_with"
2013-04-15 20:31:02 D_Chernyshenko: Those don't seem to be used
2013-04-15 20:31:55 max_albert: I guess this imports these names into the "finmag" namespace. Otherwise we wouldn't be able to say "from finmag import sim_with" in our simulation scripts.
2013-04-15 20:37:34 D_Chernyshenko: That's right. A side effect is that Simulation (and everything that it requires) is loaded whenever any module in finmag.* is imported, I got round that by commenting out the import temporarily
2013-04-15 20:37:50 D_Chernyshenko: Debugging a nasty segfault and was trying to run finmag in valgrind
2013-04-15 20:38:15 D_Chernyshenko: It used to work in 12.10 at some point, but now I'm getting errors
2013-04-15 20:38:33 max_albert: Whoa! Segfault? Wondering what you are working on... Need to leave now, but would be interested to hear about it tomorrow!
2013-04-15 20:38:39 max_albert: Have a good evening everyone!
2013-04-15 20:38:43 D_Chernyshenko: Have a good evening
2013-04-16 09:04:01 fangohr-adium1: Good Morning.
2013-04-16 09:28:03 mb8g11: Good morning.
2013-04-17 08:21:42 max_albert: Good morning.
2013-04-17 09:26:13 fangohr-adium1: Good Morning.
2013-04-17 10:56:57 mb8g11: Max, are name attributes on interaction objects now a must? I implemented a system (just last week) that would look up a name attribute, but would default to use the interaction class-name. I see that you removed that part of the code.
2013-04-17 11:39:23 max_albert: Hi Marc-Antonio. Yes, the name attributes are now required for all interactions.
2013-04-17 11:39:27 max_albert: But if no name is provided by the user, they always default to the interaction class name.
2013-04-17 11:39:37 max_albert: So I haven't removed the functionality of your code, I have simply extended it to all interactions (and made it a bit more generic).
2013-04-17 11:49:26 fangohr: Hi folks, great idea to push ahead with the names, thank you.
2013-04-17 11:50:14 fangohr: Marc-Antonio (just spelling it out because of the many 'MA' we have ... ;-)), can you look into adding the finmag-mailing list emails into the repository? You said that probably this is all done apart from committing/pushing?
2013-04-17 11:50:27 fangohr: Completely orthogonal: anybody up for volleyball at 12:00?
2013-04-17 11:50:37 max_albert: Yes! (Volleyball, that is...)
2013-04-17 11:50:53 max_albert: Regarding the interaction names, I have already noticed how this makes dealing with different interactions much easier.
2013-04-17 11:53:29 fangohr-adium: Nice.
2013-04-17 12:26:36 mb8g11: Just asked because I coudln't tell from a glance at the code. Very nice!
2013-04-17 12:26:51 mb8g11: Hans, will do now.
2013-04-17 12:30:03 mb8g11: Can confirm it's already saving finmag-team e-mails in a separate folder.
2013-04-17 13:31:29 mb8g11: Hi Marvin_Bot. Glad to see you found a new home.
2013-04-17 13:42:38 fangohr: Hello Marvin_Bot 2.
2013-04-17 13:43:22 mb8g11: The idea being that Marvin on aleph0 will commit the e-mails and IRC logs every night.
2013-04-17 13:43:55 fangohr: Okay. o we are moving all our infrastructure for finmag from summer.kk to aleph0, correct?
2013-04-17 13:44:04 fangohr: So it seems we are moving ...
2013-04-17 13:44:14 fangohr: [issues typing ... [sigh]] ;-)
2013-04-17 13:44:27 fangohr: Can anybody think of any functionality left on summer that we rely on?
2013-04-17 13:44:41 fangohr: Repositories are on bitbucket, jenkins and marvin bot are both on aleph0.
2013-04-17 13:44:52 fangohr: [There may be other non-finmag repositories on summer.]
2013-04-17 13:45:15 max_albert: I can't think of any.
2013-04-17 13:45:53 mb8g11: Me neither.
2013-04-17 13:47:57 fangohr: Okay, thank you.
2013-04-17 13:48:36 fangohr: We'll certainly keep in running for now. I have at least one other use case on there, but may well use the machine for something else in the future. So my assumption is that we don't need it for finmag anymore, unless anybody tells me otherwise (now or later).
2013-04-17 14:34:37 mb8g11: Okay, the mails in finmag-team are now being committed to the finmag repository. While I was setting everything up and moved Marvin_Bot to aleph0, I also gathered all his scripts and configuration in a mercurial repository on bitbucket.
2013-04-17 14:36:15 max_albert: Nice! Which repository is this? I was also thinking that now that the builds are all configured and working well (apart from the ipython notebooks tests), it would be good to commit the configuration files for Jenkins in a repository. This would probably be finmag-jenkins, so does it make sense to gather Marvin's configuration files in there as well?
2013-04-17 14:39:50 mb8g11: Will grant all of you access, it-s mb8g11/Marvin
2013-04-17 14:40:10 mb8g11: Maybe not, Jenkins is Jenkins, and Marvin is just the IRC/logging stuff.
2013-04-17 14:40:51 mb8g11: Then again, a repository containing *all* the configuration files of the infrastructure around finmag might be nice as well. Hans, what's your opinion?
2013-04-17 14:41:17 max_albert: True. I was just thinking that both repositories belong to the category "development infrastructure" and are (and probably will remain) quite small, so perhaps it's better to make all the configuration easier to find by bundling it in a single repository.
2013-04-17 14:41:22 max_albert: Yes, exactly.
2013-04-17 14:41:38 max_albert: Of course, this should be named differently (not finmag-jenkins). ;-)
2013-04-17 14:43:51 mb8g11: (Access granted)
2013-04-17 14:43:59 max_albert: Just saw the email. Thanks!
2013-04-17 14:59:39 fangohr: Should we have one repository with all the config files, or multiple ones? I don't know -- both have advantages and disadvantages. What is the latest on hg-subrepositories? Maybe we can put a meta-repository together that includes all the others as subdirectories, so that one just checks out the meta-one, and this contains the others? Or the meta one can contain a script to pull all the others (The latter option is how the nmag-meta repository works, for th
2013-04-17 14:59:40 fangohr: ose that know it.)
2013-04-17 15:48:08 mb8g11: Would anyone use a web-interface to read the finmag-team interface?
2013-04-17 15:48:15 mb8g11: *mails
2013-04-17 15:55:23 fangohr: Thanks, MA. Have tried the 'mutt -f finmag' trick, and that works. Ta.
2013-04-17 16:00:34 fangohr: What do you mean with web-interface? You mean something that looks neater than mutt?
2013-04-17 16:03:23 mb8g11: http://aleph0.kk.soton.ac.uk:8008/html/ ;-)
2013-04-17 16:06:02 fangohr: Ah, very impressive. How is this run?
2013-04-17 16:07:04 mb8g11: Generated statically by a program called hypermail. Would need to tell it to update the html in regular intervals and maybe intergrate a search.
2013-04-17 16:26:56 mb8g11: http://www.hypermail-project.org/
2013-04-17 16:42:57 mb8g11: The HTML should now stay up-to-date as mails come in.
2013-04-18 09:09:05 fangohr: Good morning.
2013-04-18 09:09:38 fangohr: MA, thanks for the info and setting up the hypermail thing. We should note that anybody in Southampton can read those emails, or anybody with the possibility to create a VPN connection. Probably fine, but worth bearing in mind.
2013-04-18 09:11:15 fangohr: While we are talking tools and infrastructure: I am tempted to re-surrect the cherrypy thing to be able to display the IRC chat of today conveniently. The simplehttp server is nice to display the whole chat, but the typical use case is that I was not logged in to IRC and want to see what has happened so far today. Or I may not even have an IRC client but would like to follow what is being discussed (and could then use a browser and have the page auto-refres
2013-04-18 09:11:15 fangohr: hed).
2013-04-18 11:05:14 mb8g11: Hi.
2013-04-18 11:06:57 mb8g11: Sounds useful, do we still have the scripts you wrote somewhere? In version control maybe.
2013-04-18 12:23:01 fangohr: Hi, yes, the files are available in finmag/logbooks/irc-logging-diff-serve
2013-04-18 12:23:30 fangohr: You need to 'update' (or downdate) to revision 1979 (46c3bde083d4) to see them.
2013-04-18 12:23:41 fangohr: If you could re-activate them, that would be nice, otherwise I do it later.
2013-04-18 13:01:10 mb8g11: So our group meeting is today at 14:00?
2013-04-18 13:03:38 D_Chernyshenko: I believe so, I'm not around though
2013-04-18 13:23:54 fangohr: Yes, correct. ;-)
2013-04-18 13:48:44 mb8g11: Can I join in by skype?
2013-04-18 13:49:37 fangohr-adium: Should be alright. I'll dig out a computer.
2013-04-18 13:50:47 mb8g11: Thx. (or Ta, is that the same thing?)
2013-04-18 13:52:00 fangohr-adium: Similar meaning, different words I think. You should ask a Brit â of course we haven't got one.
2013-04-18 13:53:18 mb8g11: Hehe.
2013-04-18 14:01:42 mb8g11: Online.
2013-04-18 14:02:26 max_albert: We'll be over in a minute
2013-04-18 14:07:51 mb8g11: Ok.
2013-04-18 21:06:51 mb8g11_: Dolfin Blueprint, Evaluation of the gradient of a function https://blueprints.launchpad.net/dolfin/+spec/gradient-evaluation-for-functions
2013-04-18 21:07:19 mb8g11_: This will be useful for us in a few places where we are either using the 'magpar method' or would have to do a projection.
2013-04-22 10:03:30 mb4e10: MA, are you there?
2013-04-22 10:05:00 mb4e10: Carol from Amity just asked me what are our nationalities.
2013-04-22 10:05:26 mb4e10: Max and I think you have a German passport but we are not sure.
2013-04-22 10:16:05 mb4e10: If someone else knows for sure, please tell me. I sent her you have a German passport. If not, send her an email at carol.munro@amitytravel.co.uk or call her 01489589958
2013-04-24 08:53:02 fangohr-adium: Good Morning.
2013-04-24 10:27:11 ww1g11: good morning, Hans, do you think it's necessary to build a deb package for finmag?
2013-04-24 13:14:53 fangohr-adium: Hi Weiwei, a (binary) debian package would be very cool, I'd think.
2013-04-24 13:22:45 max_albert: Hi Weiwei, for comparing the software versions, take a look at Marc-Antonio's commit 24d2aa6ab26c from 4. April 2013 (commit message: "conditional skipping of tests with PeriodicBC for dolfin versions >= 1.2.0")
2013-04-24 13:24:34 max_albert: He uses the function distutils.version.StrictVersion (which I didn't know about but which looks like it might be helpful).
2013-04-24 13:27:31 ww1g11: thanks Max, it's very useful
2013-04-24 13:28:26 ww1g11: Hans, I am looking for how to build a deb for ubuntu, not sure it's easy or not to build the package
2013-04-24 13:30:00 max_albert: Hans, one question that came up earlier when Weiwei and I discussed this:
2013-04-24 13:30:18 max_albert: Currently we do a strict comparison of the versions in the binary package. If they differ than we throw an error.
2013-04-24 13:30:40 max_albert: For example, "Ubuntu 12.04.1 LTS" and "Ubuntu 12.04.2 LTS" would be considered as different systems.
2013-04-24 13:31:33 max_albert: Apparently this is a problem because we are building the binary version on Ubuntu 12.04.1, but the Oxford guys are using 12.04.2, so the version which Weiwei sent to them aborts on startup.
2013-04-24 13:32:02 fangohr-adium: I see. The history behind this was the different versions of sundials: if we build against one of them, it will only run with the same version. As sundials has no function (!) to report its version, we have no way to check this. So the work-around was to require that the ubuntu version is the same. I suppose we could relax this assuming that the sundials version didn't change between 12.04.1 and 12.04.2.
2013-04-24 13:32:28 fangohr-adium: Building a debian package would relieve us from having to check this as the package itself would make sure we have the right sundials version installed (I think).
2013-04-24 13:32:34 max_albert: We were thinking that for the time being it may be best to be less strict in the comparison (i.e. only compare 12.04 vs. 12.10, for example).
2013-04-24 13:32:42 fangohr-adium: Yes, agreed.
2013-04-24 13:32:50 max_albert: We should still print a warning, however.
2013-04-24 13:33:06 fangohr-adium: Okay.
2013-04-24 13:34:08 max_albert: If we see that there are incompatibilities even between 12.04.1 and 12.04.2 then we can adopt a policy such as always running the latest version of Ubuntu for our binary builds and ask our users to upgrade to the latest version of their release (e.g. 12.04 or 12.10).
2013-04-24 13:34:57 fangohr-adium: Sounds good.
2013-04-24 16:35:46 fangohr-adium: Hi Weiwei, ready for you now. Sorry for the delay.
2013-04-24 16:36:02 ww1g11: No problem at all
2013-04-25 09:32:01 fangohr-adium: Good Morning.
2013-04-25 09:32:13 mb4e10: Good morning
2013-04-26 10:01:57 fangohr: Good morning all.
2013-04-26 10:53:16 cilix: Good morning Hans!
2013-04-26 10:53:20 cilix: I'm very sorry I didn't turn up to the group meeting just now.
2013-04-26 10:53:26 cilix: I've been happily sitting at my desk but for some reason had completely forgotton about it (even though I had an entry in my diary).
2013-04-26 10:53:30 cilix: Was only reminded now when Weiwei and Marijan came back...
2013-04-26 10:53:48 cilix: Sincere apologies!
2013-04-26 17:17:26 fangohr-adium: Max, no worries at all.
2013-04-27 17:50:48 D_Chernyshenko_: Does anyone know how to access the position vector r=(x,y,z) in a Dolfin form? Can't figure this one out at all...
2013-04-27 17:52:16 D_Chernyshenko_: Hmm, V.cell().x seems to work
2013-04-29 09:18:26 fangohr-adium: Good Morning, all.
2013-04-29 17:18:07 fangohr1: Over and out for today.
2013-04-30 09:24:00 fangohr-adium: Good Morning.
2013-04-30 10:37:16 mb4e10: Good morning
2013-05-02 08:59:50 fangohr-adium1: Good morning, and happy Thursday everybody.
2013-05-02 09:00:16 max_albert: Good morning Hans.
2013-05-02 09:00:27 max_albert: Thanks! :) Any particular reason for the good mood?
2013-05-02 09:01:12 fangohr-adium1: No.
2013-05-02 09:01:13 fangohr-adium1: :)
2013-05-02 09:01:36 max_albert: Even better! :)
2013-05-02 09:01:38 fangohr-adium1: Other than an early start, and some work with numbers ahead ;-)
2013-05-02 09:02:08 max_albert: You mean something else than marking, writing grants, etc.? ;-)
2013-05-02 09:02:38 fangohr-adium1: Yes, that kind of thing. Some *real* work.
2013-05-02 09:03:03 max_albert: Awesome. Hope it's gonna work out well!
2013-05-03 10:01:48 max_albert: Hi Hans, is it ok if I join you guys a few minutes later? Need to quickly write an urgent email. Sorry!
2013-05-03 10:02:09 fangohr-adium1: Sure, no worries.
2013-05-07 09:17:51 fangohr-adium1: Good Morning. A very sunny day, after quite a few sunny days. Not sure I can take all these photons, after not having seen many of them in the last 6 months â¦ ;-)
2013-05-07 13:25:38 mb8g11: Hi all!
2013-05-07 13:25:53 fangohr-adium1: Hi ;) Are you back?
2013-05-07 13:41:38 max_albert: Hi Hans, do you know if there is an example script for Nmag with Slonczewski spin torque available somewhere (maybe on the wiki)?
2013-05-07 13:41:42 max_albert: There is one in Matteo's report, but it can't be copied & pasted out of the pdf because the spacing is all messed up. :-S
2013-05-07 14:11:02 mb8g11: In finmag's src/finmag/tests/slonczewski. The nmag script are essentially those of the nmag-meta repository and Matteo's report.
2013-05-07 14:18:16 fangohr-adium1: Thanks, MA.
2013-05-07 14:18:53 max_albert: Thanks!
2013-05-07 14:34:03 mb8g11: ww1g11: My dropbox account mail@marc-antonio.de.
2013-05-07 14:34:55 max_albert: Hans, I just saw your email about the energy calculation in Finmag (in relation to Luzanne's report). Does this still need investigating?
2013-05-07 14:51:12 fangohr-adium1: Yes - although maybe we should think of a different problem and work out the demag energy (basically creating a suitable regression test).
2013-05-07 14:52:03 fangohr-adium1: I could imagine having two disconnected cubes, one with M pointing up, and one with M pointing down. Then compute the energy (and maybe compare with corresponding simulation in OOMMF). Then repeat for both cubes pointing up. The latter should give a higher energy.
2013-05-07 14:52:04 mb8g11: How old is Luzanne's finmag version? I found a bug in the Demag energy 1/2 months ago and fixed it in the new Demag class. Wrote a test for it as well.
2013-05-07 14:52:27 mb8g11: Don't know if this is related at all and the computation maybe still wrong.
2013-05-07 14:52:35 fangohr-adium1: We could also make the cubes quite small and far apart â then we have essentially magnetic dipoles interacting and use an anylitical equation to check against.
2013-05-07 14:53:13 max_albert: mb8g11: Good point. It's still the rather old original version which we gave to Jef and Luzanne in the beginning.
2013-05-07 14:54:02 fangohr-adium1: Might be good to have a test along the lines outlined above anyway. I quite like the second version of interacting dipoles.
2013-05-07 14:54:24 max_albert: Do you remember what the bug was (or how it showed up)?
2013-05-07 14:55:43 mb8g11: It showed up when I compared my code with the old one and used the homogeneously magnetised sphere to see who was right ;-)
2013-05-07 14:55:54 mb8g11: So I can't really say what was the issue.
2013-05-07 14:56:14 max_albert: But what was the error (i.e. what was wrong)?
2013-05-07 14:56:28 mb8g11: The total energy.
2013-05-07 14:58:25 mb8g11: I should have tried to fix the old code and document the error, but I didn't because the old code was meant to be deleted sometime anyways. Sorry this is now biting us :-/
2013-05-07 14:58:44 mb8g11: (assuming we are still seeing the same error)
2013-05-07 14:59:31 max_albert: I don't think it's biting us. :) Good to know something was fixed. ;-) And we should have a test like the one suggested by Hans anyway I guess.
2013-05-07 15:00:17 mb8g11: Yes.
2013-05-07 15:00:26 ww1g11: I think we need to distinguish whether it comes from the mesh discretisation, so we can compute the energy for pattern up-up, up-down, down-up and down-down
2013-05-07 15:01:10 ww1g11: because oommf show the energy gap for two vertices are fairly small
2013-05-07 15:12:25 max_albert: Related to my previous question: do we have a working installation of nmag5 lying around somewhere?
2013-05-07 15:12:44 max_albert: I can't get it to work on my computer (I seem to have the older version 0.2.1 which is available on the website, and I get an error when trying to compile it from the nmag-meta repository).
2013-05-07 15:13:58 fangohr-adium1: I think in my home directory on osiris â not sure you can use that. Somewhere in hg/nmag-meta â you are welcome to try it.
2013-05-07 15:16:19 max_albert: Thanks. I have found it but can't seem to get it to work ("error while loading shared libraries"). I'll try to compile it again later.
2013-05-07 15:16:21 max_albert: I wonder if we have it installed on aleph0? Surely it seems to be needed for the tests if there is a Slonczewski test that compares Finmag against Nmag?
2013-05-07 15:17:54 mb8g11: Some of our tests run nmag, most use stored nmag results. But it will be installed on aleph0 for sure.
2013-05-08 09:11:55 fangohr-adium: Good Morning.
2013-05-08 09:58:14 max_albert: Good morning.
2013-05-08 10:00:26 max_albert: All of a sudden we have build failures on aleph0 due to some Sundials. Has anything changed recently?
2013-05-08 10:01:17 max_albert: I get the impression that it's trying to compile the Finmag code for Sundials 2.4, whereas aleph0 has Sundials 2.5 installed.
2013-05-08 10:01:30 max_albert: I may be completely wrong though.
2013-05-09 14:26:45 mb8g11_: Restarted Marvin_Bot (DokosBot). For future reference, on aleph0: "sudo start dokosbot".
2013-05-09 16:08:48 max_albert: Hi Hans, thanks for the information on the taxi. We'll ask Alicia to book it then.
2013-05-09 16:09:45 max_albert: Regarding the Sundials issue, I now actually don't think it's the version number, since all the sundials-related packages on aleph0 have version 2.5.0-1.
2013-05-09 16:10:11 max_albert: I really have no clue offhand what could be causing the error. Does anyone else have any ideas?
2013-05-09 16:11:02 max_albert: Also, the binary build is broken, but for a different reason. I thought it had to do with one of my recent commits to the finmag-dist repository, but even with an earlier version I get the same error. :-(
2013-05-09 16:11:38 max_albert: The error appears when the script calls 'make bundle', and the error message is: "tar: .: file changed as we read it"
2013-05-09 16:12:02 max_albert: This doesn't ring any bell at all with me.
2013-05-10 09:10:29 fangohr-adium1: Morning folks. Can you send me your flight numbers and departure times (or just the whole schedule)? I can kick the taxi booking off with that.
2013-05-10 09:10:51 fangohr-adium1: Regarding the build failure: it sounds like there are two processes working on the files: one trying to tar it, the other one modifying (compiling?) files.
2013-05-10 09:14:07 mb4e10: Good morning. Our departure flight is AZ201 London (LHR Terminal 4) to Rome at 6.45. Inbound flight is AZ210 Rome to London (Heathrow Terminal 4), arrival time 23.05.
2013-05-10 09:15:20 mb4e10: Dates are Sunday 12 May and Thursday 16 May.
2013-05-10 09:19:10 fangohr-adium1: Thanks, Marijan.
2013-05-10 09:19:35 fangohr-adium1: I also understand that we need the Taxi for Marijan, Marc-Antonio, Max and Weiwei, but not Dmitri?
2013-05-10 09:21:50 mb4e10: As long as I know, its for four of us (no Dmitri).
2013-05-10 09:22:14 mb4e10: I will ask Max.
2013-05-10 10:20:32 mb8g11: Is easyjet the company where you don't get a seat assigned to you?
2013-05-10 11:09:56 mb8g11: http://www.gotaormina.com/en/how_to_arrive/public_transport.html
2013-05-17 10:44:24 fangohr-adium: Good Morning DokosBot.
2013-05-17 13:50:22 fangohr-adium: Hello. Could somebody test whether they can login to osiris.sesnet.soton.ac.uk, please?
2013-05-17 14:11:45 mb4e10: I can.
2013-05-17 14:11:56 fangohr-adium: Great, thank you.
2013-05-17 14:12:56 mb4e10: however there is some warning.
2013-05-17 14:12:59 mb4e10: groups: cannot find name for group ID 1003
2013-05-17 14:13:19 fangohr-adium: Ah, good point. Hang on ...
2013-05-17 14:14:26 fangohr-adium: Could you log out, and log in again, please? Is the warning still there?
2013-05-17 14:14:53 mb4e10: Problem solved.
2013-05-17 14:15:07 fangohr-adium: Thank you.
2013-05-20 09:14:52 fangohr-adium: Good Morning, Max and DokosBot.
2013-05-20 17:23:34 fangohr-adium: Good news: Dmitri's fixes for the new Numpy version work: finmag compiles happily on Ubuntu 13.04.
2013-05-20 17:23:48 fangohr-adium: I have also checked compilation of Magpar on 13.04, and it seems to work.
2013-05-20 17:24:09 fangohr-adium: (Same for Nmag - no changes to our build script for that, either.)
2013-05-20 17:24:23 fangohr-adium: So you should all be able to use osiris again â any missing packages, do let me know.
2013-05-21 11:21:43 mb8g11_: So in theory, an upgrade to 13.04 should "just work"?
2013-05-21 11:28:39 D_Chernyshenko_: Yeah it should. If it works for you I might try it too :)
2013-05-21 12:40:13 mb8g11_: haha
2013-05-21 13:46:53 fangohr-adium: It worked for me. Try it out on osiris if you like.
2013-05-21 17:52:55 ww1g11: Hi all, it seems that finmag are failed to be built in aleph0 due to the sundials problem, but the sundials version is the same as that in my machine which works, any idea?
2013-05-21 18:07:22 max_albert: Hi Weiwei! Yes, unfortunately this has been going on for a while. I had a very brief look but couldn't work it out and then left it due to the HMM etc.
2013-05-22 08:56:06 fangohr-adium: Good Morning.
2013-05-22 09:21:19 mb8g11_: Good morning!
2013-05-23 09:59:51 mb8g11: Good morning.
2013-05-23 10:00:02 D_Chernyshenko: Morning
2013-05-23 10:00:27 mb8g11: Dmitri, can you say something again?
2013-05-23 10:00:32 D_Chernyshenko: Something
2013-05-23 10:00:56 mb8g11: The keys on your keyboard weren't pressed... So I assume you're not invisible, but at home?
2013-05-23 10:01:09 mb8g11: *conclude
2013-05-23 10:01:16 D_Chernyshenko: Excellent deduction
2013-05-23 10:01:29 mb8g11: Thanks.
2013-05-23 13:53:25 fangohr-adium: Greetings.
2013-05-23 14:10:39 mb4e10: Greetings
2013-05-24 09:50:01 fangohr-adium: Good Morning.
2013-05-24 09:50:08 fangohr-adium: A quick reminder for the group meeting today at 10am.
2013-05-24 09:50:26 fangohr-adium: I have got dark chocolate Kitkats if that changes anything for anybody.
2013-05-24 09:56:06 D_Chernyshenko: I'll be 5-10 mins late, was reading emails and didn't watch the time, sorry!
2013-05-24 09:56:30 fangohr-adium: Okay.
2013-05-24 09:59:07 fangohr-adium: Why don't we start 10 past 10 in earnest, but people are welcome to drop in before, make teas and coffee etc.
2013-05-24 12:19:43 fangohr-adium: Hi again. I am just trying to build the binary installation on osiris to see whether it works there. I have a question regarding the Makefile that contains the 'bundle' target that jenkins tries to execute: is this only on aleph0 or in some repository as well?
2013-05-24 12:24:11 max_albert:  Hi Hans, I'm not sure I understand your question correctly, but the "bundle" target is actually in src/Makefile, not in the toplevel Makefile.
2013-05-24 12:24:29 fangohr-adium: Ah, thanks. I think that is the information I was after.
2013-05-24 12:34:33 fangohr-adium: Okay, â I had forgotten how this works: we also need to use the finmag-dist repository for the process, but a lot of it takes place in the normal finmag repository. I'll keep looking.
2013-05-24 12:35:35 fangohr-adium: Weiwei, we have a oommf.sh installation file in finmag/install/oommf.sh. This seems not to work on Osiris 13.04. Could you try to run this and have a look what's wrong? Either I have not installed the right packages yet, or the packages are to recent, or I have made a silly mistake. Please advise.
2013-05-24 12:36:07 fangohr-adium: I also wonder whether we should download a more recent version of OOMMF - but no strong feelings about this.
2013-05-24 12:36:11 fangohr-adium: (if there is one).
2013-05-24 13:20:53 fangohr-adium: Oh, okay so the 'python dist-wrapper.py' which sits in the finmag-dist repository, actually calls src/Makefile in the finmag repository. I'll wait for Weiwei to look into the OOMMF problem, then I can investigate further at this end (i.e. I am not looking at aleph0 at all for now).
2013-05-27 11:05:27 mb8g11: Hi all.
2013-05-28 09:52:36 fangohr-adium: Good Morning, all.
2013-05-28 10:07:14 mb8g11: Hi Hans
2013-05-28 11:04:36 fangohr-adium: Hi - is Dmitri there? I have question for him (with Alex) in my office.
2013-05-28 11:05:58 ww1g11: No, he is not here
2013-05-28 11:06:16 fangohr-adium: Thanks, will catch up later with him then.
2013-05-28 11:12:14 fangohr-adium: Marijan, do you have the technical report/summary of trying the sync pulse for the standard problem somewhere? Could you point me to it, or put it into Dropbox or so? Would be useful for the discussion with Alex at the moment.
2013-05-28 11:13:10 mb4e10: There is a summary in monthly report
2013-05-28 11:13:14 mb4e10: for march
2013-05-28 11:14:39 mb4e10: page 8
2013-05-28 11:21:09 mb8g11: Has anybody computed the normal modes on other geometries than cuboids? Wondering if what I'm doing will 'just work'.
2013-05-28 11:23:13 mb4e10: I think Max did for disc
2013-05-28 11:25:53 mb8g11: Perfect, will ask him.
2013-05-28 11:26:00 mb8g11: Thanks.
2013-05-28 12:27:35 fangohr-adium: Hi Dmitri, Alex is around for another 40 minutes or so, if you want to discuss your results with him, this would be a nice opportunity. He is currently talking to Marijan. I'll describe next what is the 'interesting' thing we see, where I would like your and Marijan's views on:
2013-05-28 12:28:50 fangohr-adium: The frequency spectrum computed with Dmitri's code gives very little prominence to the modes around 7GHz, although the code clearly detects them. The explanation that Alex and I came up with this morning is that the overlap of our excitation signal with those modes must be big, and thus we get to see them in the FMR data from the dynamic simulations.
2013-05-28 12:30:47 fangohr-adium: The right thing to compare Dmitri's results against should be the frequency spectrum data based on spatially resolved measurements, as this will be most inclusive for the modes. However, the frequency spectrum obtained from spatially averaged simulations matches Dmitri's curve much better. I would argue that this just happens to be so, but is co-incidence. Dmitri, would you agree?
2013-05-28 12:31:40 D_Chernyshenko_: Oh, my frequency spectrum *is* the spatially averaged one
2013-05-28 12:31:46 fangohr-adium: Finally, Marijan has done some experiments with a sync excitation pulse (in time, or also in space?). I would hope that the resonance curve we get from that should be very close to Dmitri's curve, but I didn't have time/data to look at this. Something to explore further.
2013-05-28 12:32:02 fangohr-adium: Dmitri, that's interesting and would explain it. Can you produce the other one as well?
2013-05-28 12:32:57 D_Chernyshenko_: What is the other one? I will be in the office in ~10 min, we can discuss it there if it's easier
2013-05-28 12:33:34 D_Chernyshenko_: I used the formula (1) from the paper to compute the spectrum
2013-05-28 12:45:31 mb4e10: Alex is in our office waiting for you
2013-05-28 12:48:06 mb4e10: I think this mode is big because of the pertubation. I think the pertubation of external field can be imagined as a Heaviside (step function). The Fourier transform of Heaviside contains the delta impulse, which might be close to the mode that Alex see.
2013-05-29 08:13:19 mb8g11: Good morning!
2013-05-29 12:26:47 D_Chernyshenko__: Hi Hans, an update on the FMR paper - yesterday we worked out what the 2 different methods for computing the spectrum are, so I can compute the 2nd (alternative) one as well
2013-05-29 15:33:24 fangohr-adium: Hi Dmitri, didn't see your message before.
2013-05-29 15:34:06 fangohr-adium: From what Marijan told me, you basically worked out that the two methods should give the same result (which you have computed already), only that we have taken the magnitude before summer complex numbers, and thus got different results â is that about right?
2013-05-29 15:36:39 D_Chernyshenko__: Sort of, with formula (1) I was computing the Fourier transform of the spatially averaged magnetisation
2013-05-29 15:37:33 D_Chernyshenko__: The other way is to compute the Fourier transform at each point in space, take the absolute value there (to compute the magnitude of the oscillation), and then average spatially
2013-05-29 15:38:27 D_Chernyshenko__: I.e., the spatially averaged magnitude of all oscillations != magnitude of the spatially averaged oscillation
2013-05-29 15:39:05 D_Chernyshenko__: It's not entirely clear which way is the right one but Marijan says most paper use the "spatially averaged magnitude of oscillations" method
2013-05-29 15:39:12 D_Chernyshenko__: *most papers
2013-05-29 15:40:48 D_Chernyshenko__: Also, this choice isnt specific to the eigenvalue method, just a question of how to compute the spectrum from M(r, t)
2013-05-29 15:42:11 mb4e10: In this paper equations 1 and 2: http://jap.aip.org/resource/1/japiau/v97/i10/p10J901_s1
2013-05-29 15:43:11 mb4e10: here they sum the power, so they do not look for the average
2013-05-29 15:46:30 mb4e10: The problem arose because we used equations from Greg's report. They are correct but give the same result.
2013-05-29 15:47:26 mb4e10: I use the method from the McMichael paper
2013-05-29 15:47:47 fangohr-adium: Interesting, thanks. Did Alex get this, so that he can update the paper accordingly? (Not sure whethre we have a view which of the options to follow in the paper.)
2013-05-29 15:49:48 mb4e10: I think he understood. I think the most logical procedure is in McMichael paper. Every mesh cell has its own power frequency spectrum and the sum of all them gives the overall power spectrum.
2013-05-29 15:50:20 mb4e10: since the power can be summed and gives total power
2013-05-29 15:50:43 D_Chernyshenko__: Yeah, we probably don't need to discuss this in detail in the paper, as long as we provide the equation we use. And yeah I agree the method from the McMichael paper ("average power spectrum") is the more appropriate one probably
2013-05-29 17:18:05 fangohr-adium: Okay. I am happy to go with McMichaels equation: this means that order of averaging and Fouriertransform should not change the spectrum, correct?
2013-05-30 09:51:03 fangohr-adium: Thanks, Weiwei, that OOMMF installation now works out of the box on Ubuntu 13.04 (using finmag/install/oommf.sh).
2013-05-30 10:04:50 mb8g11: Is Max in the office?
2013-05-30 10:05:36 mb4e10: No
2013-05-30 10:06:11 mb4e10: I think he sprinkled his ankle
2013-05-30 10:20:05 mb8g11: I know, thought he may be better. Thx.
2013-05-30 11:40:49 mb4e10: Can anyone tell me the command to copy from osiris on my computer?
2013-05-31 09:20:13 fangohr-adium: Marijan, you are probably asking for something like 'scp osiris.sesnet.soton.ac.uk:path-to-file-starting-from-home .' to be run from your machine. We can chat about ths briefly at 10am.
2013-05-31 09:27:08 mb8g11: Hi all.
2013-05-31 09:32:43 mb4e10: Hi all. Thats what I was asking.
2013-05-31 09:32:48 mb4e10: Thanks Hans
2013-05-31 10:07:55 mb8g11: I'm online on Skype if I may join
2013-05-31 10:09:08 fangohr-adium: Yes, you may. Hang on.
2013-05-31 16:45:55 fangohr-adium: Hi all. Is anybody registered for the Software Carpentry workshop on Monday and Tuesday?
2013-05-31 16:46:09 mb4e10: I am.
2013-05-31 17:10:49 fangohr-adium: Okay, I expect to see you there ;)
2013-05-31 17:11:02 fangohr-adium: it's building 85, right? I think that is the new building with wood on the outside.
2013-05-31 17:11:33 mb4e10: I do not know, I have not seen any information about this.
2013-05-31 17:12:53 mb4e10: 85 is the Life sciences building, behind the ecs building 32 on university road.
2013-05-31 17:20:10 fangohr-adium: Hm, maybe drop an email to Robin Wilson (from DTC) to let him know that you don't know where to go. Others may not know either.
2013-05-31 17:20:39 mb4e10: Ok, thanks
2013-05-31 17:21:06 fangohr-adium: Over and out for today.
2013-06-03 08:52:44 fangohr-adium: Good Morning, all. I'll be attending the Software Carpentry workshop (and be in small meetings during the breaks), so will not read much here during the next 2 days. However, email should work as always if there are any queries, news, etc.
2013-06-03 13:18:10 ww1g11: A funny error for the anisotropy test, I just wondering how it could happen: test_anis_nmag.py:12: in test_against_nmag
2013-06-03 13:18:11 ww1g11: >       assert m_ref.shape == m_computed.shape
2013-06-03 13:18:11 ww1g11: E       assert (1538, 3) == (1537, 3)
2013-06-03 13:18:11 ww1g11: E         At index 0 diff: 1538 != 1537
2013-06-03 13:34:59 fangohr-adium: Interesting. The meshes seem to be different by one. Miscounting due to use of arange(0,x,dx) somewhere in the mesh creation? What meshes are used?
2013-06-03 18:07:41 ww1g11: good point, thanks, the test past after I downgraded the netgen to 4.9.13
2013-06-04 09:18:48 fangohr: Max, regarding your question in your last commit (re-use of docstrings), here is the only 'solution' I can think of:
2013-06-04 09:18:51 fangohr: def f1():
2013-06-04 09:18:51 fangohr:     """This is my generic docstring, which I would like to reuse."""
2013-06-04 09:18:51 fangohr:     pass
2013-06-04 09:18:51 fangohr: def f2():
2013-06-04 09:18:51 fangohr:     pass
2013-06-04 09:18:53 fangohr: f2.__doc__ = f1.__doc__
2013-06-04 11:02:08 fangohr: Hi MA, are you around? We are all in a training course in 85/2207; I guess you can come along if you like, although you probably know most of the stuff already. Next item is on testing â but aimed at beginners, starting at 11:00.
2013-06-04 11:02:52 fangohr: Dmitri, are you around or online? Various people (Marc-Antonio?) would like to use your code; ideally get it ready for tomorrow when we have summer students starting.
2013-06-04 11:03:06 fangohr: Also, Max would like to compile and use it.
2013-06-04 11:04:55 mb8g11: Hi all.
2013-06-04 11:05:05 mb8g11: At the software carpentry workshop again?
2013-06-04 11:16:12 fangohr: Yes.
2013-06-04 13:59:53 mb8g11: I am logged into eta.
2013-06-04 14:02:38 mb8g11: As a side note, a comment of Garth Wells: "The whole DOLFIN/numpy interface in parallel needs to be carefully planned out at some point."
2013-06-04 14:02:44 mb8g11: https://bitbucket.org/fenics-project/dolfin/pull-request/32/fix-issue-in-genericvector__getitem__/diff#comment-286813
2013-06-04 14:02:59 fangohr-adium: Hi Dmitri, I am just trying to give MA access to your simlib code so he can get it ready for tomorrow morning ;-).
2013-06-04 14:03:09 fangohr-adium: MA, the repository is sitting on eta.kk.soton.ac.uk in /home/hg/chern/simlib
2013-06-04 14:03:13 fangohr-adium: Can you clone from there?
2013-06-04 14:03:34 fangohr-adium: I need to disappear now, will check email every now and then.
2013-06-04 14:04:24 D_Chernyshenko__: That's fine, I can help with the setup if needed
2013-06-04 14:04:37 mb8g11: I can clone.
2013-06-04 14:04:40 mb8g11: Thanks.
2013-06-04 14:04:40 fangohr-adium: Excellent; many thanks.
2013-06-04 14:04:47 fangohr-adium: Okay, MA â good luck ;-)
2013-06-04 14:04:57 mb8g11: Thx ^^
2013-06-04 14:05:19 fangohr-adium: You will need the Intel Math Kernel Library for Linux (64 bit), knows as Intel MKL. This should be free to use for PhD students, but I am not familiar with how you obtain it, etc.
2013-06-04 14:05:23 fangohr-adium: Over and out for now.
2013-06-04 14:05:31 mb8g11: Bye.
2013-06-04 14:12:43 mb8g11: I found the website for the free download of Intel C++ Studio XE for Linux for students.
2013-06-04 14:13:28 D_Chernyshenko__: I am looking through the license again and it seems that graduate students aren't actually included in the noncommercial license
2013-06-04 14:13:55 D_Chernyshenko__: They changed the wording a second time and now it's pretty clear phd students are excluded
2013-06-04 14:14:05 mb8g11: link?
2013-06-04 14:14:19 D_Chernyshenko__: http://software.intel.com/en-us/non-commercial-software-development
2013-06-04 14:14:29 D_Chernyshenko__: For the license, 1 sec
2013-06-04 14:14:35 mb8g11: That's the website I am on right now :)
2013-06-04 14:14:45 D_Chernyshenko__: You need the MKL link though
2013-06-04 14:14:50 D_Chernyshenko__: You don't need the full suite
2013-06-04 14:14:58 D_Chernyshenko__: Under performance libraries
2013-06-04 14:15:14 mb8g11: I realised this - found the suite first, before finding the full list for non-commercial dev work
2013-06-04 14:15:56 mb8g11: I was here: http://software.intel.com/en-us/intel-education-offerings#pid-2460-93
2013-06-04 14:16:10 D_Chernyshenko__: http://software.intel.com/sites/products/documentation/EULA/Intel_SW_Dev_Products_EULA.pdf
2013-06-04 14:16:30 D_Chernyshenko__: the license, there is a section for the non-commercial use license
2013-06-04 14:17:30 mb8g11: C. iii.
2013-06-04 14:19:29 mb8g11: That's open to interpretation...
2013-06-04 14:20:03 D_Chernyshenko__: Yeah true
2013-06-04 14:20:52 D_Chernyshenko__: We aren't compensated for developing software, the scholarship is about studying
2013-06-04 14:21:00 D_Chernyshenko__: The wording is strange
2013-06-04 14:36:43 mb8g11: Intel uses big buttons on their website. But only the text is actually a hyperlink. I'm surprised, and then again, I'm not.
2013-06-04 15:53:19 mb8g11: I compiled the MKL and tried compiling Simlib. Needed to install valgrind and libeigen3-dev. However, I get this error:
2013-06-04 15:54:52 mb8g11: http://pastebin.com/xyHAvuD6
2013-06-04 15:55:44 D_Chernyshenko__: Blargh, that's the Ubuntu 13.04 problem that I fixed in finmag but not simlib yet
2013-06-04 15:56:06 mb8g11: A warning (promoted to error) about deprecated numpy libraries. I tried #defining NPY_NO_DEPRECRATED_API NPY_1_7_API_VERSION, which makes it obvious some API have indeed changed.
2013-06-04 15:56:31 D_Chernyshenko__: Yeah, the fix wasn't easy, I need to copy the fix from finmag here
2013-06-04 15:56:36 D_Chernyshenko__: There is no easy workaround
2013-06-04 15:56:38 mb8g11: Can you point me to the commit(s) in finmag? I might as well try to mimicry them for simlib.
2013-06-04 15:56:56 D_Chernyshenko__: Hmm, why not
2013-06-04 15:58:31 D_Chernyshenko__: Ok its changeset
2013-06-04 15:58:32 D_Chernyshenko__: 9209f7a1e424
2013-06-04 15:58:40 D_Chernyshenko__: "Attempting to fix compilation for numpy 1.7"
2013-06-04 16:01:18 mb8g11: Cool, let me see what I can do.
2013-06-04 16:02:50 D_Chernyshenko__: I've just made a patch out of the finmag changes and applied it to simlib with no problems
2013-06-04 16:02:57 D_Chernyshenko__: Let me see if it compiles on 12.10 and I will just commit it
2013-06-04 16:02:59 D_Chernyshenko__: That might just work...
2013-06-04 16:03:56 D_Chernyshenko__: Okay, do a hg pull
2013-06-04 16:04:00 D_Chernyshenko__: It compiles and I pushed the changes
2013-06-04 16:06:40 mb8g11: You diffed, patched, compiled and pushed faster than I could copy and paste ;-)
2013-06-04 16:07:05 D_Chernyshenko__: I even had to google how to make a patch out of a commit :)
2013-06-04 16:07:13 D_Chernyshenko__: It was hg diff --change REV
2013-06-04 16:07:18 mb8g11: Good to know.
2013-06-04 16:07:21 mb8g11: http://pastebin.com/xQKyE09m
2013-06-04 16:07:24 D_Chernyshenko__: Was really handy
2013-06-04 16:07:57 D_Chernyshenko__: Is that with the new code?
2013-06-04 16:08:06 mb8g11: Yes.
2013-06-04 16:08:35 mb8g11: Only fails on a single file now, which seems to be np_array.cc itself
2013-06-04 16:09:10 D_Chernyshenko__: Oh, the patch didn't apply to np_array.cc at all
2013-06-04 16:09:12 D_Chernyshenko__: Weird.
2013-06-04 16:09:20 D_Chernyshenko__: So the magic command didn't work that well
2013-06-04 16:09:52 mb8g11: Is the directory structure *exactly* the same? Let me check. I noticed it's very similar though... what a coincide ;-)
2013-06-04 16:09:57 mb8g11: *coincidence
2013-06-04 16:10:04 D_Chernyshenko__: Nope, it's different< i had to edit
2013-06-04 16:10:05 D_Chernyshenko__: But
2013-06-04 16:10:40 D_Chernyshenko__: Put "#define NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" before #include <numpy/arrayobject.h> in np_array.cc
2013-06-04 16:10:53 D_Chernyshenko__: That seems the only change thats required in np_array.cc
2013-06-04 16:12:29 D_Chernyshenko__: I pushed the change to np_array.cc too
2013-06-04 16:13:41 D_Chernyshenko__: Are you going to be working with simlib code? I can add your email to the list for commit notifications
2013-06-04 16:13:56 mb8g11: Yes, please.
2013-06-04 16:16:58 mb8g11: Making progress, but not quite there. Would fail with the same error on dipoles/py_dipoles_module.cc, which is why I added the #define there (I could add it in module_includes.h instead). Now it complains about missing members on the PyArrayObject.
2013-06-04 16:17:43 D_Chernyshenko__: Which machine is that on? Do I have an account? Might be easier for me to ssh into it and edit the file there
2013-06-04 16:17:54 D_Chernyshenko__: or well
2013-06-04 16:18:24 mb8g11: It's my machine, let me create an account for you.
2013-06-04 16:20:11 D_Chernyshenko__: There are incompatible changes in the numpy API which is why all of this is so hard
2013-06-04 16:20:22 D_Chernyshenko__: No easy workaround at all
2013-06-04 16:25:15 mb8g11: I see.
2013-06-04 16:32:10 D_Chernyshenko__: Ok, it compiles now. Try to pull the latest changes and compile
2013-06-04 16:36:23 mb8g11: I can confirm compilation :-) Thank you!
2013-06-04 16:45:06 D_Chernyshenko__: Great!
2013-06-05 09:32:00 fangohr-adium: Good Morning.
2013-06-05 09:32:09 mb4e10: Good morning
2013-06-05 10:37:37 mb8g11_: Good morning.
2013-06-05 10:41:51 mb8g11_: Just tried to add some text to the hackpad, works beautifully.
2013-06-05 11:05:42 fangohr: Nice.
2013-06-05 11:05:51 fangohr: We should get Beckie onto IRC.
2013-06-05 11:06:26 mb8g11_: Yes. She is backing up her files and will upgrade her Ubuntu. First thing we do afterwards is log her in into our channel.
2013-06-05 11:06:35 fangohr: Very good.
2013-06-05 11:18:07 fangohr: The Hackpad â which seems fun to use â is free for public pads. For private pads (what we are trialling for Beckie's project now) there is a charge if we have more than 5 people signed up to a pad.
2013-06-05 11:18:12 fangohr: Or at least this is how I read it:
2013-06-05 11:18:13 fangohr: 	â¦	Private sites are free for 30 days or up to 5 users (whichever happens last)
2013-06-05 11:18:13 fangohr: 		After that private sites are $2/member/month
2013-06-05 11:18:23 fangohr: Source: https://hackpad.com/Hackpad-FAQ-tq56fI63mz3
2013-06-05 11:18:41 fangohr: So as long as we have 5 or fewer users per pad, it should be free. I think.
2013-06-05 11:46:02 mb8g11: So you, Becky and I + Simon and Murali? We will use IRC to communicate with Dmitri.
2013-06-05 13:12:46 fangohr: Marc-Antonio, yes, I'd say so.
2013-06-05 18:47:00 mb8g11: Dmitri, just wanted to say we managed to get your code to compile and the test suite to run without errors :)
2013-06-05 18:47:00 D_Chernyshenko: Ah excellent
2013-06-05 18:47:00 D_Chernyshenko: I will be around tomorrow afternoon. Still a bit ill but I stopped coughing, so hopefully its safe to be at the office now
2013-06-05 18:48:00 mb8g11: After installing all the packages we needed, we just needed to tweak the PYTHONPATH set in the Makefile and the location of oommf.
2013-06-05 18:48:00 D_Chernyshenko: Ah right, the oommf location
2013-06-05 18:48:00 D_Chernyshenko: I guess I need to adjust it so that it works the same way we have it in finmag
2013-06-05 18:49:00 max_albert: Hi Dmitri, sorry to hear you are ill! Hope you'll be better very soon!
2013-06-05 18:49:00 D_Chernyshenko: We've done a lot of improvements to the Makefile in finmag but I haven't backported them to simlib 
2013-06-05 18:49:00 max_albert: I also managed to compile your code (nearly without problems) and actually just ran your sample normal mode computation. :)
2013-06-05 18:49:00 max_albert: Just needed a couple of tweaks.
2013-06-05 18:50:00 D_Chernyshenko: Ah great
2013-06-05 18:50:00 max_albert: Now I just need to understand how to interpret the results. ;-)
2013-06-05 18:50:00 max_albert: The eigenvalues should in theory correspond to the normal mode frequencies, right?
2013-06-05 18:51:00 D_Chernyshenko: For the simulation with discs, I forgot to say but the code doesn't support non-rectangular regions. Adding support for regions via something like a spatiallly varyimg Ms would be easy, but I think oommf also does some corrections to demag for non-rectangular regions
2013-06-05 18:51:00 D_Chernyshenko: Yes they should be, with proper units
2013-06-05 18:52:00 D_Chernyshenko: I think my code adjusts the units so that eigenvalues = frequencies in GHz
2013-06-05 18:52:00 D_Chernyshenko: (real part of eigenvalues)
2013-06-05 18:53:00 max_albert: Ok. That sounds good. Which information is contained in the imaginary part?
2013-06-05 18:53:00 D_Chernyshenko: The imaginary part determines the decay rate of the normal mode
2013-06-05 18:53:00 max_albert: Ah, of course.
2013-06-05 18:54:00 max_albert: Regarding your other comment, I was actually wondering whether non-rectangular regions would be supported. So it sounds like that would need some tweaking.
2013-06-05 18:54:00 D_Chernyshenko: The ansatz solution is v exp(i omega t/[unit correction])
2013-06-05 18:54:00 max_albert: Is a spatially varying value of Ms already possible?
2013-06-05 18:54:00 D_Chernyshenko: Nope, but it would be very straightforward
2013-06-05 18:55:00 max_albert: Ok, I'll take a look.
2013-06-05 18:55:00 D_Chernyshenko: Probably easier than trying to run a 700nm simulation in finmag
2013-06-05 18:55:00 max_albert: Yes, definitely. :)
2013-06-05 18:55:00 D_Chernyshenko: Another option for you would be to use oommf and the dynamical method
2013-06-05 18:57:00 max_albert: Yes. Although I tried the dynamical method with some smaller disks in Finmag yesterday and it wasn't straightforward to find a good excitation that would excite the modes so that I could plot them.
2013-06-05 18:57:00 max_albert: But I didn't spend much time on it.
2013-06-05 18:57:00 max_albert: Btw, if I want to plot the mode shapes with "your" method, these should be encoded in  the eigenvectors, right?
2013-06-05 18:58:00 D_Chernyshenko: Yeah, are you trying to compute the damped or non-damped eigenmodes? Non-damped would be easier so you can start with those
2013-06-05 18:59:00 max_albert: Yes, non-damped would be fine for now I guess. I presume this is what your code does? I haven't looked at how to compute non-damped modes yet.
2013-06-05 18:59:00 D_Chernyshenko: The computed eigenvalues are normal modes in the "W" coordinate system in the space of 2d vectors perpendicular to m0
2013-06-05 18:59:00 D_Chernyshenko: The computed eigenvalues are normal modes in the "W" coordinate system in the space of 2d vectors perpendicular to m0
2013-06-05 19:00:00 D_Chernyshenko: So to get the normal modes in the ordinary R3 coordinate system, W needs to be multiplied by the Q matrix I think (or Q_inv)
2013-06-05 19:00:00 D_Chernyshenko: You can see how I'm doing it in the normal modes simulation
2013-06-05 19:00:00 D_Chernyshenko: (using the mf_mult function to multiply by Q at each mesh site)
2013-06-05 19:01:00 max_albert: Oh yeah, I remember that d'Aquino did a coordinate transformation. That makes sense, I'll take a look.
2013-06-05 19:01:00 max_albert: Thanks for your help!
2013-06-05 19:01:00 max_albert: Need to head off now but hope to be in the office tomorrow.
2013-06-05 19:01:00 max_albert: Have a good evening, everyone!
2013-06-05 19:01:00 D_Chernyshenko: Okay
2013-06-05 19:01:00 D_Chernyshenko: Have a good evening too
2013-06-05 19:02:00 max_albert: And get better soon! ;-)
2013-06-05 19:04:00 mb8g11: Good evening, don't worry about having to come in tomorrow Dmitri (at least not for me and Becky). We will have a look at the examples included in your code and try to come up with something simple on our own.
2013-06-06 08:47:00 fangohr: Good Morning.
2013-06-06 09:14:00 max_albert1: Test
2013-06-06 09:39:00 max_albert1: Good morning! Can anybody read this? Trying to set up an IRC client on my laptop, but not sure it's working.
2013-06-06 10:02:00 Beckie: Good Morning! Yes Max, it's working :)
2013-06-06 10:56:00 fangohr: Max, testing, one, two, one, two. Seems to work :)
2013-06-06 10:57:00 mb8g11_: Hi!
2013-06-06 11:17:15 max_albert1: Awesome, thanks.
2013-06-06 13:07:55 fangohr: Weiwei, etal, is our debian package for 13.04?
2013-06-06 13:08:48 ww1g11__: no, it only for 12.10 and it seems still doesn't work properly
2013-06-06 13:11:41 ww1g11__: but we can change it to 13.04 easily once I got it work
2013-06-06 13:13:48 Beckie: http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=05268979
2013-06-06 13:31:24 max_albert1: Hi Weiwei! How do you test the debian package? Is it worth setting up a virtual machine with a clean Ubuntu installation for this? (Otherwise it may be difficult to check e.g. that all dependencies are resolved correctly etc.)
2013-06-06 13:32:27 ww1g11__: I only test it in my machine, I clean the finmag path, it looks like promising
2013-06-06 13:32:42 ww1g11__: [2013-06-06 13:29:58] ERROR: thefile=/usr/lib/python2.7/dist-packages/finmag/util/versions.so
2013-06-06 13:33:16 ww1g11__: /usr/lib/python2.7/dist-packages/finmag/util/versions.so in finmag.util.versions.running_binary_distribution (finmag/util/versions.c:3011)()
2013-06-06 13:33:17 ww1g11__: RuntimeError: This is impossible.
2013-06-06 13:33:37 ww1g11__: oh it seems that this error is expected
2013-06-06 13:34:54 ww1g11__: I guess we need to generate some key files for finmag otherwise it should complain this
2013-06-06 13:36:37 fangohr: Hi Weiwei, yes, you need to create a license file, although I would hope that the error message is more explicit about this. The right file to create license is in finmag-dist. Maybe Marc-Antonio knows the proceduce (generate license request file first, then create license from that request file), or ask again and I'll explain/come over.
2013-06-06 13:37:56 fangohr: Max, having a (virtual?) machine to run the debian package test would be a good idea if we can arrange this somewhere. The main cost of doing this is the RAM for the virtual machine. Although I'd expect that if the machine is unused, the memory footprint is very small and most of it can be swapped out to disk if necessary.
2013-06-06 13:38:43 max_albert1: The procedure for creating a license file should hopefully be explained well enough in the README file (in the finmag-dist repository). If not, let me know or feel free to edit it yourself. :)
2013-06-06 13:38:52 ww1g11__: I realised this because yesterday I ever comment this line to debug the complier error, but the question is can we change the location of license file, I mean, in user's home directory
2013-06-06 13:40:06 fangohr: The code that is looking for the license will look in various places (first local directory, then user home) I think, so this should work the same independent of whether you have the binary distribution or the debian package. It should (!) just work, if the right file is there.
2013-06-06 13:40:59 max_albert1: Hans, I hadn't actually thought of running a test for installing the debian package, although this is a great idea if we can get it to work. I was more thinking of temporarily having a VM for debugging the debian package until it works.
2013-06-06 13:55:14 fangohr: Max, that's also a good idea and the right way to go. Weiwei, I use 'virtual box' often for this kind of testing. Best to save a snapshot just after installing linux and running aptitude ugrade etc, so that you can go back to that state again and again to test new versions of the dpkg.
2013-06-06 13:56:20 max_albert1: VirtualBox is already installed on aleph0. I wanted to set up a clean Ubuntu installation for testing the debian package but haven't gotton round to it. Feel free to do that, Weiwei, if you have the time.
2013-06-06 13:57:41 ww1g11__: yeah, I will try once it works at this machine
2013-06-06 13:58:01 mb8g11: D_Chernyshenko, the code in tests/fd/stdprob2/stdprob2.py references a VtkMeshfield. Where does this come from? It is not imported.
2013-06-06 13:59:04 D_Chernyshenko: That is some very old attempt at a test for standard problem #2, and it doesn't work
2013-06-06 13:59:31 ww1g11__: actually, this is a running bug
2013-06-06 13:59:45 D_Chernyshenko: I dunno about VtkMeshfield though, why do you need stdprob2.py?
2013-06-06 13:59:49 D_Chernyshenko: I probably should just delete it
2013-06-06 14:00:05 D_Chernyshenko: Oh, is that in finmag?
2013-06-06 14:00:30 mb8g11: No no, simlib. Just digging into the code. We want to find out how to export to VTK, if this is implemented.
2013-06-06 14:00:44 D_Chernyshenko: It is, let me see
2013-06-06 14:02:32 D_Chernyshenko: Okay, this is defined in src/simlib/fd/paraview_plot.py and the method is called save_vector_field
2013-06-06 14:03:35 D_Chernyshenko: If you want to adjust it I guess you can just copy the recipe, it's fairly simple
2013-06-06 14:04:43 D_Chernyshenko: Unfortunately that file imports lxml and paraview even though it's not used in the method itself (only used for the xml export which doesn't work for some reason)
2013-06-06 14:04:50 D_Chernyshenko: *xdmf export
2013-06-06 14:06:48 mb8g11: Thank you!
2013-06-06 14:25:55 max_albert1: How do you restart him again?
2013-06-06 14:27:54 mb8g11: Log into aleph0, "sudo start dokosbot"
2013-06-06 14:28:42 max_albert1: Neat! :)
2013-06-06 14:35:43 mb8g11: Our mailing list: http://aleph0.kk.soton.ac.uk:8008/html/
2013-06-06 14:36:45 max_albert1: Even neater! :) I had forgotten that we keep an archive of those.
2013-06-06 14:38:02 mb8g11: At some point Marvin got a gmail adress. He is subscribed to our mailing list and downloads them to a mbox in his home directory.
2013-06-06 14:38:17 mb8g11: From time to time, I run the command to update the html ;-) Will automate that now.
2013-06-06 14:38:50 max_albert1: He is a clever fellow, our Marvin. Brain the size of a planet.
2013-06-06 14:40:16 mb8g11: What is it with IRC and ping timeouts these days?
2013-06-06 14:44:33 mb8g11: Haha, he is. He will also update the HTML every night.
2013-06-06 14:44:43 mb8g11: He's such a fast learner ;-)
2013-06-06 14:45:26 fangohr: â¦ and where are the chats of the last 24 hours or so hosted?
2013-06-06 14:55:33 fangohr: Hi Max, I think I have just discovered that sumatra is based on Django? (By trying to open http://aleph0.kk.soton.ac.uk:8000). Interesting - I should have guessed that Django (or Ruby) might be involved.
2013-06-06 15:08:11 mb8g11: The logs of the last 24 hours? Why, they are where they always are O:)
2013-06-06 15:09:53 mb8g11: Oh wait.
2013-06-06 15:11:10 mb8g11: I copied the chat of the time Dokos was down into the logfile by hand to be able to make this remark, but that's not what you meant.
2013-06-06 15:12:13 fangohr: No ;-)  -  I meant the cherrypy-based dynamic webpage creation that internally would run a 'tail -n 50' or so to create the page content. If that makes any sense to you.
2013-06-06 15:12:36 mb8g11: Yes, the one you asked me to re-enable. Checking what's wrong.
2013-06-06 15:14:05 mb8g11: Aah. Port 8080 is not free anymore, since that is where Jenkins runs. Fixing it.
2013-06-06 15:17:13 max_albert1: Hi Hans, yes Sumatra is based on Django. The web interface for viewing simulation records is actually not bad (could be improved, but it's very nice to quickly navigate through results). The error message you saw is probably related to some hacks which I added to my local sumatra repository which changed something in the configuration or so. I should actually terminate that server.
2013-06-06 15:20:14 MarkV: I'm having a strange error when importing finmag in python (on 12.10) any clues?:
2013-06-06 15:20:20 MarkV: /home/mark/Desktop/treecode_bem.py in init finmag.energies.demag.treecode_bem (finmag/energies/demag/treecode_bem.c:4626)()
2013-06-06 15:20:24 MarkV: /home/mark/Desktop/numpy.pxd in init treecode_bem (treecode_bem_lib.c:5325)()
2013-06-06 15:20:26 MarkV: ValueError: numpy.dtype has the wrong size, try recompiling
2013-06-06 15:21:31 fangohr: This is one for Weiwei; maybe.
2013-06-06 15:22:54 MarkV: Weiwei can import it correctly on his machine, though mine seems to disagree.
2013-06-06 15:41:34 mb8g11: Have to take Marvin offline for a sec.
2013-06-06 15:43:31 mb8g11: Welcome back.
2013-06-06 15:47:26 mb8g11: Okay, http://aleph0.kk.soton.ac.uk:8008/ The file finmag-irc-today.log will only show today's discussion.
2013-06-06 16:55:31 fangohr: Marijan, Beckie, very impressive progress.
2013-06-06 23:47:28 fangohr: One more comment on Marvin_Bot: he has disappeared repeatedly in the recent past: this could be just a network connection going down somewhere in building 25 or so, or the process stopping. When this happened in the past and I logged onto the machine (summer.kk at the time), I noticed that the process had actually died. If this is still the case, we could use something like the 'monit' deamon to check for the existence of the process, and
2013-06-07 09:08:49 fangohr: Good Morning.
2013-06-07 09:09:19 Beckie: I disagree. I'm going to get very wet ver soon :-S
2013-06-07 09:10:51 Beckie: (so it's not a good morning!)
2013-06-07 09:20:28 fangohr: Arr, yes, I did already get wet racing on my scooter through highfield. So my outlook is now positive. It is meant (!) to get nice later in the day though ...
2013-06-07 10:39:54 fangohr-adium1: Hi Dmitri, do you mind if Marc-Antonio and Max push improvements to simlib to the repository, or would you rather review/discuss those first? (If you are reading this.)
2013-06-07 11:42:27 mb8g11: ipython notebook http://ipython.org/notebook.html
2013-06-07 11:44:27 MarkV: Finmag imports with no errors (from the deb file), am looking for an example to run.
2013-06-07 11:52:27 fangohr: Whoohoo.
2013-06-07 11:52:51 fangohr: If somebody (??) can give you the ipython notebooks for finmag, you have plenty of examples in there.
2013-06-07 11:52:56 fangohr: Have you got a license file already?
2013-06-07 11:54:26 fangohr: Here is a quick one to check:
2013-06-07 11:54:28 fangohr: import finmag
2013-06-07 11:54:37 fangohr: s = finmag.example.barmini()
2013-06-07 11:55:05 fangohr: s.run_until(1e-6)
2013-06-07 12:03:15 fangohr-adium1: From the deb-file?? Didn't even see that. Even better.
2013-06-07 12:13:05 MarkV: Yes, the examples work, am now looking at the ipython notebook tutorials :).
2013-06-07 12:13:29 fangohr: Very good; all sorted then ;-)
2013-06-07 12:15:14 fangohr: Weiwei, the installation on Mark's machine is using your debian package and you have built this on osiris?
2013-06-07 12:15:50 ww1g11__: yes, it the one built on osiris
2013-06-07 12:15:51 fangohr: What have we done with the license file? Did you create one for Mark and gave that to him, or is it included in the debian package (I'd prefer the former).
2013-06-07 12:16:27 ww1g11__: I create it for Mark separately
2013-06-07 12:16:33 fangohr: Good.
2013-06-07 12:17:09 fangohr: Could you create a binary debian file on a 12.10 Ubuntu system (but not mint as this may not work) and try to install this (with Marijan) on the macihne for Matt? It should (!) just work...maybe?
2013-06-07 12:19:09 ww1g11__: yeah, maybe we can create a virtual machine to build the deb package automatically in Jenkins ?
2013-06-07 12:19:23 ww1g11__: just like the ubuntu 12.04
2013-06-07 12:19:34 max_albert: Yes, that should be possible.
2013-06-07 12:20:23 max_albert: I saw that there is a command called 'VBoxManage'. It  looks that this can be used to control a virtual machine form the command line or from within a script.
2013-06-07 12:20:40 max_albert: See: http://www.virtualbox.org/manual/ch08.html
2013-06-07 12:21:11 max_albert: With this it should be possible to create a slave process within a VM which can be called from Jenkins.
2013-06-07 12:21:44 max_albert: So we may be able to create different VMs with different operating systems, but run them all on aleph0 and so keep the entire test environment on a single machine.
2013-06-07 12:21:52 max_albert: Not sure if this is desirable, but it's kinda neat. :)
2013-06-07 12:27:32 ww1g11__: yeah, we can try this later.
2013-06-07 12:28:49 mb8g11: I have set up an Ubuntu 13.04 installation in VirtualBox on aleph0.
2013-06-07 12:41:54 fangohr-adium1: Max, that sounds very neat.
2013-06-07 12:42:40 max_albert: Geekgasm!! :-)
2013-06-07 12:43:02 max_albert: I think I have finally found a way to solve the annoying problem that the Paraview visualizations wouldn't work in notebooks or via ssh.
2013-06-07 12:43:14 fangohr-adium1: Weiwei, can you test the 12.10 binary now (build it manually if required): Marijan needs to set up the machine for Matt today as Matt will come in Monday morning, and Marijan will be in York.
2013-06-07 12:43:24 fangohr-adium1: Glad to see you are happy, Max :)
2013-06-07 12:43:44 max_albert: ;-)
2013-06-07 12:44:28 ww1g11__: sure, I only need to find a ubuntu 12.10, or I can install it using the virtual machine
2013-06-07 12:44:57 max_albert: The process which renders the scene via Paraview now uses a display in a virtual framebuffer so no X server is required. So now plotting via Paraview should work in any context, in particular from within IPython notebooks etc.
2013-06-07 12:45:33 fangohr: Weiwei, great, thank you.
2013-06-07 12:45:44 fangohr: Nice, Max.
2013-06-07 12:46:35 max_albert: And also from within screen sessions (which stopped me from visualising anything earlier this week whilst working via ssh during the workshop).
2013-06-07 12:47:44 max_albert: Just as a note, it requires xvfb to be installed, so if anybody wants to use the paraview visualization then they now need to install the corresponding Ubuntu package.
2013-06-07 12:47:50 max_albert: I'm pPlanning to change it so that
2013-06-07 12:48:35 max_albert: Sorry! Meant to say that I'm planning to change it so that it tries the normal rendering first and only falls back to Xvfb if an error occurs, but I think that'll require more time and testing so I'm leaving it for now.
2013-06-07 14:03:23 mb8g11: That's pretty cool Max.
2013-06-07 14:13:04 fangohr-adium1: Weiwei, I was delayed a little. Can you come over in 10 minutes, please? I'll ping again when I am ready.
2013-06-07 14:13:27 ww1g11__: no problem
2013-06-07 14:17:48 mb8g11: simlib core dumps...
2013-06-07 14:18:02 D_Chernyshenko: Oh dear
2013-06-07 14:18:06 mb8g11: Haha.
2013-06-07 14:18:19 mb8g11: Installing python debugging symbols, let's what it is.
2013-06-07 14:18:25 mb8g11: +see
2013-06-07 14:18:44 D_Chernyshenko: Hmm, I had problems running finmag under the debug version of python
2013-06-07 14:19:00 D_Chernyshenko: Maybe simlib can work though
2013-06-07 14:31:45 fangohr: Weiwei, I am ready now.
2013-06-07 15:06:44 mb8g11: Okay, I've narrowed it down. Calling native.newell_N_digits with x >= 10^11 will raise "../../src/const_pi.c:90: MPFR assertion failed: (__builtin_constant_p (1) && (mpfr_ulong) (1) == 0 ? (mpfr_sgn) (S) : mpfr_cmp_ui_2exp ((S), (1), 0)) < 0" on line 847 in demag_tensor.cc. Is there anything you know about this? No worries, I don't need simlib urgently.
2013-06-07 15:08:21 mb8g11: The crash occurs when I run src/simlib/fd/tests/demag_tensor_tests.py on my machine.
2013-06-07 15:08:48 D_Chernyshenko: I think I had this before
2013-06-07 15:09:49 D_Chernyshenko: Does it only happen when you run the test, or when you run your code as well
2013-06-07 15:10:02 D_Chernyshenko: This is a really annoying bug in MPFR
2013-06-07 15:10:29 mb8g11: I can reproduce it on its own.
2013-06-07 15:11:37 D_Chernyshenko: I mean, does it prevent you from using simlib
2013-06-07 15:11:59 D_Chernyshenko: The bug is in the high-precision calculation of PI which is not needed for normal operation, only when I'm testing my demag tensor stuff
2013-06-07 15:12:37 D_Chernyshenko: I will look into how to disable it, I never found a workaround for that bug, apart from fiddling with the # of digits until the problem went away
2013-06-07 15:13:03 D_Chernyshenko: Just need to organise the code so that pi is not calculated during normal operation
2013-06-07 15:13:04 mb8g11: I see. I can use simlib fine, just wanted to let you know.
2013-06-07 15:13:20 D_Chernyshenko: Yeah that bug was really annoying and I wasted a lot of time on it
2013-06-07 15:13:34 mb8g11: What happens?
2013-06-07 15:13:48 D_Chernyshenko: Well its that assertion during the calculation of pi
2013-06-07 15:14:29 D_Chernyshenko: And I could never find why it happend
2013-06-07 15:15:00 D_Chernyshenko: Couldn't find anything on google, but it looks like there are some "safe" values of precision where it doesn't occur
2013-06-07 15:15:07 D_Chernyshenko: But looks like that is machine-dependent, too
2013-06-07 15:15:28 D_Chernyshenko: Didn't you say that all simlib tests passed on your machine? Or was that Max
2013-06-07 15:16:22 mb8g11: All the tests passed on Beckies machine, where we installed simlib first.
2013-06-07 15:16:55 mb8g11: I thought it may be good to have it on my computer too, where I stumbled upon this.
2013-06-07 15:17:12 mb8g11: Sounds like a really elusive bug.
2013-06-07 15:17:39 D_Chernyshenko: Anyway, MPFR is the GNU high-precision floating point library. It seems that the bug happens when pi is computed to a requested number of digits. I don't see any way to influence it (apart from changing precision)
2013-06-07 15:18:02 D_Chernyshenko: Since the computation of pi should "just work", it's just a constant.
2013-06-07 15:18:51 D_Chernyshenko: However, since high-precision computation is not needed for normal simulations, we can make it so that the relevant code isn't run, unless we're running demag tensor tests.
2013-06-07 15:19:53 mb8g11: Yo.
2013-06-07 15:31:12 mb8g11: Thx for the explanation :)
2013-06-07 16:53:45 fangohr: Beckie, well done finding the material parameters. Can you add the journal reference (name, volume, page number and year) to the hack pad? Will be useful later when you have forgotten which paper this was ;-)
2013-06-07 16:54:58 Beckie: will do!
2013-06-07 17:11:56 fangohr: Don't work too long - over and out from here.
2013-06-07 18:25:50 mb8g11: Okay, okay, if you insist ;-) Bye!
2013-06-10 09:28:07 fangohr-adium1: Cood Morning.
2013-06-10 09:28:46 fangohr-adium1: Hm,meant to be Good morning. 'G' and 'C' are actually next to each other on my keyboard.
2013-06-10 09:29:13 fangohr-adium1: Mark, are you in already? Could you come over at 10am to meet Matt Corcoran who will also work on Skyrmions over the summer?
2013-06-10 09:32:30 MarkV: Morning
2013-06-10 09:32:45 MarkV: I am in, though I was planning to have a code review at 1000 with some of the DTC
2013-06-10 09:33:10 MarkV: Would it be possible to meet a bit later on?
2013-06-10 09:37:35 MarkV: Would 1100 be acceptable?
2013-06-10 09:37:46 fangohr-adium1: He will see me at 10am, and I'll give him a quick introduction. I have meetings most of the remaining day, but of course he can (and will) catch up with you separately later. I thought it might be slightly more convenient for you to see what he knows, but if you have scheduled something already, please do go ahead with them.
2013-06-10 09:38:22 fangohr-adium1: If you want to pop by now briefly, I can give you a brief summary?
2013-06-10 09:38:37 MarkV: Sure, coming
2013-06-10 12:24:19 MattSoton_: msg
2013-06-10 14:14:04 fangohr-adium1: Hi Matt, well done.
2013-06-12 10:17:29 fangohr: Good Morning, MA, Max.
2013-06-12 10:17:34 fangohr: And Marvin, of course.
2013-06-12 10:17:43 max_albert: Good morning.
2013-06-12 10:17:49 mb8g11: Hi Hans.
2013-06-12 10:30:50 Matt_mc8g08: Morning
2013-06-13 09:58:20 fangohr: Good Morning.
2013-06-13 10:11:04 Beckie: Morning!
2013-06-13 11:25:42 Beckie: D_Chernyshenko in simlib is it possible to have a cuboidal mesh structure rather than cubes? As in, can I have a finer mesh structure in a particular direction?
2013-06-13 11:27:02 D_Chernyshenko: Yes, when you create the Mesh object you specify the cell size in each direction, they don't have to be equal
2013-06-13 11:27:28 Beckie: cheers
2013-06-13 11:28:25 D_Chernyshenko: You can create the Mesh using the parameters for cell size + number of cells in each direction, or the size of the whole region + number of cells in each direction
2013-06-13 13:28:05 mb8g11: http://imgur.com/LjvoM6F :-( That's mine.
2013-06-13 13:28:39 fangohr: Oh no! What happened?
2013-06-13 13:30:18 mb8g11: Didn't you get my emails?
2013-06-13 13:30:37 mb8g11: Basically I didn't properly secure the window when opening it, it turned around and shattered.
2013-06-13 13:31:16 fangohr: Nope, didn't get any email from you.
2013-06-13 13:31:17 fangohr: Oops.
2013-06-13 13:31:40 mb8g11: (sent them from my mobile phone - good to know, thanks, because the agency is waiting for a picture)
2013-06-13 13:31:50 mb8g11: A glazier will be here at 0200
2013-06-13 13:33:40 mb8g11: Ah, sent them to your gmail account on accident.
2013-06-13 13:34:01 fangohr: Okay. So you'll miss out on the meeting; never mind.
2013-06-13 13:34:29 fangohr: Yes, emails arrived in gmail account - just didn't check there.
2013-06-13 13:34:37 fangohr: Where is the flat?
2013-06-13 13:34:53 mb8g11: I know, bummer. Was looking forward to Beckie's, Matt's and Mark's presentations.
2013-06-13 13:35:09 mb8g11: Glenwood Ave in Bassett.
2013-06-13 13:38:56 mb8g11: Why? Catastrophy Tourism in mind? ;-)
2013-06-13 13:39:43 fangohr: No, just curious. I was living in Bencraft Court for a year. Not to mention my 5 years in St Mary's. So was just curious where this fitted in.
2013-06-13 13:42:27 mb8g11: Bencraft Court, is that the one further away?
2013-06-13 13:43:25 mb8g11: Ah, no.
2013-06-13 13:44:41 mb8g11: Basically, I'm just north of the Glen Eyre complex.
2013-06-13 13:45:30 mb8g11: You may remember dropping me off there after our dinner with Anil.
2013-06-14 09:15:54 fangohr-adium1: Good Morning, Max.
2013-06-14 09:49:04 max_albert: Good morning, Hans.
2013-06-14 12:01:40 Matt_mc8g08: Morning
2013-06-26 12:25:04 mb8g11: Should be back in a minute.
2013-06-26 12:25:27 mb8g11: Again, nothing in the logs that would me why it left.
2013-06-26 15:37:50 fangohr-adium: Hi all. Just to remind us of our weekly meeting tomorrow at 10am. Maybe Beckie, Mark and Matt can tell us what they have been up to in the last week, and everybody else can relax (???) from having done their MMM abstracts.
2013-06-26 15:40:17 mb8g11: Will join by skype.
2013-06-26 15:58:45 mb8g11: To those who have submitted their abstracts: How did include the references? Square brackets or am I missing something?
2013-06-26 15:59:52 mb4e10: I used square brackets
2013-06-26 16:00:11 mb8g11: Cool, thanks.
2013-06-26 16:03:02 mb8g11: And mixed case is probably title case? (where you capitalize all the words except articles, prepositions and erm.. conjuctions?)
2013-06-26 16:03:41 mb4e10: It is stated that titles are not mixed-case.
2013-06-26 16:04:03 mb4e10: I used only first capital letter.
2013-06-26 16:04:18 mb8g11: from the form: "Enter the title in mixed case. Do not put the title in quotes."
2013-06-26 16:06:05 mb4e10: sorry, my mistake. I thought not everything in upper or lower-case.
2013-06-26 16:06:51 mb4e10: there is a book of abstracts in Dropbox/Group for examples
2013-06-26 16:09:48 mb8g11: Many thanks! Yeah, some capitalize only the first word, some use title case.
2013-06-26 17:19:49 fangohr-adium: Hi MMM-submitters. Will check email again after 20:00 or so if there are any last minute issues.
2013-06-26 17:21:23 D_Chernyshenko_: Hi Hans, I'm still working on my 2 abstracts, will email them to you so that you could a final look/recommendation
2013-06-27 10:01:27 fangohr-adium: Greetings. Group Meetings in 3 (as they say, meaning presumably 3 minutes).
2013-06-27 10:01:38 fangohr-adium: [I have got some biscuits, so bring a cup of tea or so.]
2013-06-27 10:06:21 mb8g11: Am online on Skype.
2013-06-27 12:51:28 mb4e10: Hi Hans, Weiwei and I have been looking for you. There is a SCCS student conference in August and we have to attend it. It looks like we also have to submit some abstract for that. Could we submit the same abstract as for MMM?
2013-06-27 14:36:50 fangohr-adium: Hi Marijan, Weiwei, sorry for the delay. Yes, you can use the same abstract. Assuming you can get a poster/talk together for the conference in time. Otherwise use an older abstract for something where you ahve material already.
2013-06-27 14:37:09 fangohr-adium: Remembre that the SCCS is very broad and not specific for magnetism, or even materials, or engineering.
2013-06-27 14:37:25 mb4e10: Ok, thank you.
2013-06-27 15:11:05 fangohr-adium: By the way, there is a selection of sandwiches outside my office.
2013-06-28 09:48:16 mb8g11: ww1g11, in your report, you rotate a mesh by twiddling with the coordinates. Did you know about the 'rotate' method of mesh? I know this is only tangentially related to the main problem you explore, but could fix the particular issue you are seing.
2013-06-28 10:03:44 mb8g11: Okay, I just tried it myself, 'mesh.rotate(pi/4, 2, Point(0, 0, 0))' works.
2013-06-28 10:06:34 mb8g11: As you would expect, rotating the mesh doesn't change the results. (that's section 2 2) in your report)
2013-06-28 13:08:33 ww1g11: Hi Marc-Antonio, sorry that just noticed this information, great finding, but it seems that we should use degree say mesh.rotate(45, 2, Point(0, 0, 0))
2013-06-28 13:11:15 ww1g11: and after rotation the solution indeed changed
2013-06-28 13:17:58 ww1g11: okay, my mistake, we should rotate from the mesh center, say mesh.rotate(45, 2, Point(0.5, 0.5, 0))
2013-06-28 14:18:15 mb8g11: Indeed :)
2013-07-01 11:38:49 fangohr-adium: Greetings, all.
2013-07-01 11:51:04 MarkV: Hello
2013-07-02 08:53:26 mb8g11: Good morning!
2013-07-02 12:08:34 DChernyshenko: Hans, should I just email Jess the Mercurial repository for iridus/lyceum cluster status scripts?
2013-07-02 12:49:15 fangohr-adium: Hi Dmitri, yes, great idea.
2013-07-02 12:49:37 fangohr-adium: She may also be interested in the historic data we have, please send that to her as well.
2013-07-02 14:36:41 max_albert: Hi Dmitri! Just out of curiosity, what kinds of scripts are these?
2013-07-02 14:37:56 DChernyshenko: These are some scripts that collect data on node utilisation on iridis/lyceum and put it into a Google Chart on http://cmg.soton.ac.uk/status/iridis/iridis.html
2013-07-02 14:38:04 DChernyshenko: Did you want to have a look at those?
2013-07-02 14:38:50 max_albert: Oh, cool! Did you write these? No need to take a look at the moment, I was just curious. :)
2013-07-02 14:39:24 max_albert: Btw, is there any news on when Iridis4 will be completely usable? Not that I need it at the moment, just wondering.
2013-07-02 14:39:30 DChernyshenko: I wrote some bits a while ago, also Hans (and Richard Boardman?) worked on those
2013-07-02 14:40:26 DChernyshenko: I haven't heard anything, this morning I received an email from Iridis people (related to those scripts..) and it seems like they're still working on it
2013-07-03 08:32:37 mb8g11: Good morning.
2013-07-03 08:34:08 Beckie: morning!
2013-07-03 09:07:46 fangohr-adium1: Good Morning, too.
2013-07-03 12:40:12 mb8g11: Higher damping at the edges of a film not only suppresses the reflection of spinwaves, but results in faster simulations. Were you aware of this, Hans?
2013-07-03 12:40:25 mb8g11: (not that the explanation is particularly difficult)
2013-07-03 13:21:08 max_albert: mb8g11: How much faster are we talking?
2013-07-04 07:35:06 Beckie: morning all
2013-07-04 08:42:49 mb8g11: Beckie, that's early!
2013-07-04 08:58:52 Beckie: I'm a keen bean this morning!
2013-07-04 09:16:43 max_albert: Good morning everyone
* Matt_mc8g08 has quit (Quit: Leaving)
* DChernyshenko (~DChernysh@host-89-240-165-244.as13285.net) has joined #finmag
* DChernyshenko has quit (Quit: Leaving)
* ww1g11_ (~ww1g11@ip-097-138.net-097.dhcp.soton.ac.uk) has joined #finmag
* ww1g11 has quit (*.net *.split)
* D_Chernyshenko_ (~chern@mu.kk.soton.ac.uk) has joined #finmag
* D_Chernyshenko has quit (Ping timeout: 264 seconds)
* Beckie_ (~Beckie@omicron.ses.soton.ac.uk) has joined #finmag
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
* Beckie has quit (*.net *.split)
* Marvin_Bot has quit (*.net *.split)
* fangohr-adium1 has quit (*.net *.split)
* mb8g11 has quit (*.net *.split)
* mb8g11 (~mb8g11@ip-097-069.net-097.dhcp.soton.ac.uk) has joined #finmag
<Beckie_> Morning all
* MarkV (~mark@dhcp-162-96.wireless.soton.ac.uk) has joined #finmag
* MarkV has quit (Quit: leaving)
* mb4e10 has quit (Remote host closed the connection)
* mb4e10 (~mb4e10@ip-097-084.net-097.dhcp.soton.ac.uk) has joined #finmag
* MarkV (~mark@dhcp-202-020.wireless.soton.ac.uk) has joined #finmag
* D_Chernyshenko_ has quit (*.net *.split)
* mb4e10 has quit (*.net *.split)
* MarkV has quit (*.net *.split)
* fangohr-adium has quit (*.net *.split)
* Beckie_ has quit (*.net *.split)
* ww1g11_ has quit (*.net *.split)
* Beckie_ (~Beckie@omicron.ses.soton.ac.uk) has joined #finmag
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
* MarkV (~mark@dhcp-202-020.wireless.soton.ac.uk) has joined #finmag
* ww1g11_ (~ww1g11@ip-097-138.net-097.dhcp.soton.ac.uk) has joined #finmag
* DChernyshenko (~chern@host-78-147-176-211.as13285.net) has joined #finmag
* D_Chernyshenko_ (~chern@mu.kk.soton.ac.uk) has joined #finmag
* mb4e10 (~mb4e10@ip-097-084.net-097.dhcp.soton.ac.uk) has joined #finmag
<MarkV> \quit
* MarkV has quit (Quit: leaving)
* fangohr-adium has quit (Quit: Leaving.)
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
* fangohr-adium has quit (Quit: Leaving.)
-tomaw- [Global notice] Quick services restart incoming...
* mb4e10 has quit (Remote host closed the connection)
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
* DChernyshenko has quit (Quit: Ex-Chat)
<Beckie_> Morning everyone
<max_albert> Good morning Beckie! You seem to get keener by the week. :-)
<fangohr-adium> Err, yes. Good Morning, too.
<fangohr-adium> Max, I thought you are on holiday??? ;-)
<max_albert> Hans: Nope, that was about next week, not this week. (But it's still not 100% certain.)
* MarkV (~mark@dhcp-163-9.wireless.soton.ac.uk) has joined #finmag
* fangohr-adium has quit (Quit: Leaving.)
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
<fangohr-adium> Hi, if you like milk for tea/coffee, do and get two of the pint-sized milk bottles that are in the fridge outside my office and take it to your kitchen for sharing — too much here, and presumably not enough at your side in the kitchen.
<max_albert> Thanks Hans!
<MarkV> Thanks
<max_albert> Quick design question! I just wanted to write a test and did something like this:
<max_albert> h = sim.llg.effective_field.compute()
<max_albert> sim.run_until(1e-10)
<max_albert> and was surprised to see that the value of h had changed to the value at time t=1e-10 after the run_until() command! (Actually, it took me quite a while to hunt this down!)
<max_albert> The reason is that the method EffectiveField.compute() returns the value 'self.H_eff', which is a "reference" (in C lingo) to an internal variable that gets updated, and thus such updates are visible to the outside world.
<max_albert> I was tempted to change this to "return self.H_eff.copy()", but I think that the compute() method is called quite often internally, so always creating a copy would be bad for performance reasons.
<max_albert> The cleanest approach may be to have a method 'sim.compute_effective_field()', which returns a copy of the vector, and leave EffectiveField.compute() as it is (plus maybe add a warning in its docstring), even though this may potentially be dangerous. But one could argue that it's sufficiently low-level so that dangerous things are allowed to happen when using it.
<max_albert> Any opinions?
* fangohr-adium has quit (Quit: Leaving.)
* DChernyshenko (~DChernysh@host-78-147-179-215.as13285.net) has joined #finmag
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
<fangohr-adium> I would suggest to add a note to the docstring that this returns a reference (to a numpy vector of dolfin field?) and not a copy. If somebody wants a copy, they need to call sim.llg.effective_field.compute()[:] (if it isa numpy array), say, or call the copy method themselves.
<fangohr-adium> Might be worth discussing with a particular example next time we meet, but I think as you say: this is so low-level that 'bad things' can happen if you want them to. We are looking at a compromise between performance and safety. And am happy to err on the performance side here (but if anybody has other views, please shout).
<max_albert> Ok, thanks for your opinion. I do agree with what you said, but the current state of things leaves a slightly uneasy feeling since I seem to remember that we do directly access sim.llg.effective_field even from high-level functions in various places in our code (or in the tests?).
<max_albert> I think the issue is mainly that calling a compute() function feels as though it should return something that doesn't change without you noticing. Maybe it would be an option to remove the compute() method and simply let code access the EffectiveField.H_eff attribute of  directly. That would make it clearer that it can change at any time.
<max_albert> So we could have a method EffectiveField.update(t) which updates the internal value to the given time step, and then one would simply access EffectiveField.H_eff directly.
<max_albert> Thinking about it, this is probably the cleanest approach. I may do that later (but have added a PivotalTracker issue in the meantime so I won't forget.)
<fangohr-adium> Yes, I considered that change. We could leave the name 'compute' and do not need to change to 'update' if we just stop returning the field. or create an additional method 'update' and leave 'compute' in place.
<max_albert> Yep, the latter is what I just committed.
<fangohr-adium> By making this change, one would need a second line to get access to the updated field, but as this is a reference one only needs to do it once. 
<fangohr-adium> It may be more re-assuring to use H=compute() everytime one wants H as this way it is clear that H is affected by the compute() call. 
<fangohr-adium> (sorry to throw in a new point here.)
<fangohr-adium> Another random addition to the brain storming: Returning a reference to an object is of course very pythonic so probably okay.
* fangohr-adium has quit (Quit: Leaving.)
<max_albert> Not sure I understood the comment starting with "It may be more re-assuring" to be honest.
<max_albert> Also, I tend to disagree on returning a reference being Pythonic. Or at least I'm strongly against doing it in a light-hearted way.
<max_albert> In general I think it is safest to always assume that returned objects have a fixed value and can't simply change at will.
<max_albert> If something else is needed in certain places it should be a careful decision and be documented clearly (and be also be represented in the way a function is named).
* MarkV has quit (Quit: leaving)
* MarkV (~mark@dhcp-163-9.wireless.soton.ac.uk) has joined #finmag
<mb8g11> Interesting find, Max. When I wrote this I definitely thought this would give the field value, not a 'reference'.
<max_albert> So did I :)
<max_albert> There is something else I stumbled upon, which is related to time updates of interactions that depend on time (such as TimeZeeman). But I'm still in the process of debugging it.
<max_albert> I think the problem is the following:
<max_albert> I have a simulation with a time-dependent external field, e.g.  h_ext = TimeZeeman(...)
<max_albert> I want its value to be updated automatically as the simulation progresses, so I do something like this:
<max_albert>     sim.add(h_ext, with_time_update=h_ext.update)
<max_albert> (In fact, the 'with_time_update' argument should be extracted automatically, but this is not happening at the moment so I'm providing it explicitly.)
<max_albert> Now when I say:
<max_albert>     sim.run_until(1e-12)
<max_albert> this will run the simulation until the given time and update the field accordingly.
<max_albert> However, since the time integrator usually integrates a tiny bit beyond the specified time, h_ext will at the end have a value corresponding to the slightly later time (1e-12 + epsilon).
<max_albert> This is not what should happen, right? You would expect the value of h_ext to reflect the value at exactly time 1e-12, wouldn't you?
* MarkV has quit (Ping timeout: 276 seconds)
* DChernyshenko has quit (Quit: Leaving)
* MarkV (~mark@dhcp-103-189.wireless.soton.ac.uk) has joined #finmag
* DChernyshenko (~DChernysh@host-78-147-179-215.as13285.net) has joined #finmag
* MarkV has quit (Ping timeout: 268 seconds)
<max_albert> Ok, turns out this is easy to fix (although it was somewhat hard to explicitly track down). Not the prettiest of fixes, though; it feels as though the fix should actually be made somewhere else, but I presume this would require us to do quite a bit of refactoring.
* DChernyshenko has quit (Quit: Leaving)
<mb8g11> Good morning!
<mb8g11> The value of m after integration should be the one for exactly 1e-12. h_ext.compute_field() should give you the field for this. 
* DChernyshenko (~DChernysh@host-2-98-200-210.as13285.net) has joined #finmag
<max_albert> Good morning, too!
<max_albert> Well, the problem was that when I had an instance of the TimeZeeman class (say, H_ext) and added it to the simulation via "sim.add(H_ext, with_time_update=H_ext.update)" then this function would be called internally by the time integrator whenever it was needed. But the last time it would be called would be at a time step slightly later than t=1e-12, whereas sim.t would be exactly 1e-12 (and as you say the value of m would also be at exactly tha
<max_albert> t time). So H_ext.compute_field() would return a value for a time step that was different from the actual simulation time.
<max_albert> (Just re-read that and with "this function" I meant H_ext.update() in the first sentence above.)
<max_albert> This issue was also a problem for writing to .ndt files because the written field values would not be the ones for the requested time steps.
<max_albert> I committed a fix for this last night but not sure it's the most elegant one. Maybe you have a better idea?
<max_albert> On a different note, I haven't seen any commits by Marvin lately. Is he down by any chance? And how can I check that?
* fangohr-adium (~Adium@iota.kk.soton.ac.uk) has joined #finmag
<fangohr-adium> Hi all, just joining IRC again — seems DokosBot has disappeared again. I don't think he likes us.
<max_albert> Yes, looks like no IRC logs have been committed in the past few days.
* Marvin_Bot (~Marvin_Bo@aleph0.kk.soton.ac.uk) has joined #finmag
2013-07-09 12:43:50 max_albert: I just restarted him. For the record: the command which Marc-Antonio told me is "sudo start dokosbot" (to be executed on aleph0.kk.soton.ac.uk).
2013-07-09 12:44:22 fangohr-adium: I have a record until yesterday 12:35 which I could add manually to the right file. Has anybody else got the notes from yesterday 12:35 (just after midday) to now?
2013-07-09 12:45:51 max_albert: I have them in my XChat window, but I don't know how to add them to that file in a nicely formatted way (copy & paste doesn't seem to work).
2013-07-09 12:45:57 max_albert: Does XChat automatically log them somewhere?
2013-07-09 12:46:29 fangohr-adium: No idea. I can't provide the nice format either, but at least there is some content ;-)
2013-07-09 12:46:37 fangohr-adium: Done it before, nobody noticed.
2013-07-09 12:46:52 max_albert: :-)
2013-07-09 12:47:27 fangohr-adium: Don't worry if we can't copy and paste the last 24 hours or so. That is, unless, you have typed something important ;-)
2013-07-09 12:50:00 max_albert: Well, I did in fact comment/ask about some issues related to my last few commits yesterday. I think I understand the issue enough now to be confident that the fixes work, but it may be worth having the thought process and explanations documented for later reference.
2013-07-09 12:50:50 fangohr-adium: Weiwei, Beckie, Marc-Antonio, maybe we can copy and paste Max' comments out of your IRC client?
2013-07-09 12:51:34 DChernyshenko: My IRC client is logged on 24/7 so I could extract the logs from it as well
2013-07-09 12:53:05 max_albert: I just noticed that XChat keeps a scrollback of the most recent lines in the file ~/.xchat2/scrollback/FreeNode/#finmag.txt, but there are some early lines missing and the colour codes mess up the formatting.
2013-07-09 12:53:31 max_albert: I can in fact copy & paste the conversation, but the dates are missing. But that should be enough if nobody else has a better record.
2013-07-09 12:53:46 fangohr-adium: That's fine Max, don't worry about the dates.
2013-07-09 12:54:16 max_albert: Do we need to be careful when editing the logfile by hand? Will there be conflicts with Marvin's automatic commits?
2013-07-09 12:54:43 fangohr-adium: The relevant file is in finmag/logbooks/finmag-irc.log
2013-07-09 12:55:31 fangohr-adium: The 'safest' way (in order not to confuse automatic merges and push from DokosBot) would be to add it to the file on aleph0 into which the logging takes place.
2013-07-09 12:57:42 fangohr-adium: In theory, we might lose a new message typed on IRC if you edit the logfile while this is appended, and then save.
2013-07-09 12:57:51 fangohr-adium: Can you take it from here?
2013-07-09 12:57:59 max_albert: Yes, thanks for the hints!
2013-07-09 12:58:13 max_albert: I presume the correct file is "/home/marvin/finmag/logbooks/finmag-irc.log" on aleph0?
2013-07-09 13:10:07 fangohr-adium: I think so.
2013-07-09 13:10:18 fangohr-adium: If you see it updating with these messages, then it is the right one.
2013-07-09 13:10:32 max_albert: Yes, it is updating.
2013-07-09 13:13:35 max_albert: Have you encountered problems with the file encoding before? When I try to save the file after adding the changes, it complains about the encoding (because sometimes special characters appear), and when I save it in an encoding that can deal with this I get a rather big diff (which includes older messages).
2013-07-09 13:13:40 max_albert: But I presume this isn't a problem?
2013-07-09 13:33:12 DChernyshenko: Max, did you use gedit for editing the file? gedit is pretty bad at preserving the encodings
2013-07-09 13:33:28 max_albert: Nope, I tried it both with vim and emacs.
2013-07-09 13:33:55 DChernyshenko: Ah, that's weird. I used vi before to fix this issue, and it worked
2013-07-09 13:39:04 DChernyshenko: Did you find a solution?
2013-07-09 13:39:12 DChernyshenko: Or did you just commit
2013-07-09 13:39:49 max_albert: No, I haven't tried again. The file is still in the old state.
2013-07-09 13:40:47 max_albert: But I may just add the changes and commit them even if it changes the encoding. (Unless you have a better idea.)
2013-07-09 13:41:30 DChernyshenko: Nope, I was hoping you would find a way :)
2013-07-09 13:42:09 DChernyshenko: But I think it's OK, the only issue is the ugly diff, but there is little point in diffing those IRC logs...
2013-07-09 13:45:57 max_albert: Yup, I guess you are right. I just committed the change. Hope everything worked.
2013-07-09 15:09:38 fangohr-adium: Thanks.
2013-07-09 15:09:48 fangohr-adium: Have just learned that Marijan and Weiwei are in Warwick until Thursday night.
2013-07-09 15:09:58 fangohr-adium: Just so everybody knows why they are not here.
2013-07-10 13:55:29 max_albert: Hi all, it just occurred to me that we still haven't had a commit of the IRC logfiles last night, even though Marvin_Bot is back in the chat. Is there anything else I should have done apart from restarting him?
2013-07-10 15:03:19 fangohr-adium: Hm, no. I suspect a merge problem. Have a meeting now, but will try to look into this later.
2013-07-10 15:08:05 cilix: I think you were right. I tried to resolve it, we'll see whether it works.
2013-07-10 15:30:40 fangohr-adium: Okay, will wait until midnight to see whether it works now :) Thank you.
2013-07-15 09:46:55 fangohr-adium: Good Morning. Another summerly warm day in Southampton ...
2013-07-16 11:13:42 fangohr-adium: Greetings all.
2013-07-17 09:29:04 fangohr-adium: Good Morning Marvin_Bot et al.
2013-07-18 10:03:31 DChernyshenko: Hey guys, I'll be slightly late for the group meeting
2013-07-18 10:03:57 fangohr-adium: Hi Dmitri, okay.
2013-07-18 11:32:33 fangohr-adium: Matt, Weiwey, Marijan, I think one of you has left a backpack in my office. Feel free to pick up; I am around.
2013-07-19 09:42:50 fangohr-adium: By there is plenty of milk in the fridge at my office — take some for your fridge if you like.
2013-07-19 10:47:51 fangohr-adium: Am out for the rest of the day; back on Monday.
2013-07-22 14:26:36 fangohr-adium: Hello DokosBot, I have just restarted you.
2013-07-22 14:43:08 fangohr-adium: Marc-Antonio, are you there? Do you want to meet up tomorrow, say? Just in case you have any new results we could discuss - I had another meeting with somebody else planned, but that is now postponed.
2013-07-23 09:46:47 max_albert: Good morning, all.
2013-07-23 09:47:02 fangohr-adium: Good Morning!
2013-07-23 09:47:08 fangohr-adium: Back in town? :)
2013-07-23 09:47:15 max_albert: Yes :)
2013-07-23 09:47:18 fangohr-adium: Nice.
2013-07-23 09:47:24 max_albert: Yes :)
2013-07-23 09:50:27 max_albert: Marijan, I just read your message from yesterday. Do you have a sample script that exhibits the bug (ideally fast to run)? From what you write it sounds like you are running many relaxations in the same script and the logger can't cope with that for some reason (maybe because it tries to write all the logging output to different files). But it would be much easier to debug with some actual code at hand.
2013-07-23 09:53:24 fangohr-adium: Hi Max, had a chat with Marijan yesterday: my guess was that we are not clossing the simulation specific logger files, and that he is creating many simulation objects in one file (as you suggest above I think). I suggested to try to delete the simulation object once he is done with it, which should close the logger files for loggers associated with that simulation I was hoping. Marjan, if this is still an issue, than a sample file would of course
2013-07-23 09:56:44 max_albert: Yes, that sounds like what I would have suspected. Not sure if the logger files are (reliably!) closed automatically, though, when a Simulation object is 'deleted', since the destruction of the object is ultimately due to the garbage collection, and there are many subtleties involved with that (as I had to find out painfully a while ago). But let's hope that this solved Marijan's issue.
2013-07-23 09:59:31 fangohr-adium: Agree - I think the garbage collection should(!) work here, but I am not 100% sure that the logger module works as we hope it does - it does keep state of created loggers that can be accessed from different python files through the logging module.
2013-07-23 10:02:29 max_albert: Well, the trouble is that even if an object is 'deleted' (which really just means removing the binding from the namespace) there is no guarantee that it will get garbage collected - although it's likely
2013-07-23 10:02:40 max_albert: if there are many other objects floating around in memory.
2013-07-23 10:03:09 max_albert: However, even if it is garbage collected I'm not sure the loggers get cleaned up automatically. Would have to look into the logger module to check that.
2013-07-23 10:03:13 fangohr-adium: Yes, although we are looking at 1000 files we need to exceed, and the simulations run slowly, so I hope that GC should work any.
2013-07-23 10:04:14 fangohr-adium: We have a function 'logging_status_str()" in src/finmag/util/helpers which Marijan could try to run in between simulations: if I remember correctly, this should show all loggers defined in the logging module. We should be able to see how that list grows and shrinks in Marijan's for loop.
2013-07-23 10:04:58 max_albert: Ah, that's interesting. I didn't know about that function.
2013-07-23 10:07:37 max_albert: I just gave it a try interactively, but even after deleting one simulation object and explicitly calling the garbage collection through 'gc.collect()' the logger is still hanging around. :(
2013-07-23 10:08:26 fangohr-adium: I suppose the question is: do we get a second logger if you create a second simulation object. (And does this survive as well.)
2013-07-23 10:09:58 max_albert: Yes, we do get a second logger. And yes, none of the loggers is deleted.
2013-07-23 10:11:28 max_albert: The trouble is that Python doesn't really have a concept of 'destructors' as C++ does, for example. So it'll be difficult to make sure that loggers are deleted once a simulation object is not needed any more. We could add a helper function which explicitly closes a logger, thought - just to be able to deal with this situation manually if it arises.
2013-07-23 10:14:49 fangohr-adium: Does it not have destructors? I thought we can define a __del__ method (or similar name) for a class which is called when the object is destroyed? That would be the right place to add code to manually close the relevant loggers.
2013-07-23 10:21:41 max_albert: Hah, that's exactly what I thought when I tried to use the __del__ method for a similar purpose a while ago. It's not true, though, and I saw it happen that __del__ never got called - even if the Python interpreter was quit!
2013-07-23 10:22:11 max_albert: See here for example (e.g. the first answer, which also links to the documentation of __del__): http://stackoverflow.com/questions/6104535/i-dont-understand-this-python-del-behaviour
2013-07-23 10:25:04 max_albert: Interestingly, reading the answers again they also mention the 'with' statement, which we *might* be able to use to our advantage in this situation (although I can't think offhand how to best do it). However, I think the easiest and clearest solution here would be to provide a way to explicitly disable/close the logger.
2013-07-23 10:32:24 fangohr-adium: Okay :) I follow your path then ;-). Will look into this later. Maybe we do what you suggest and create a method to explicitely delete logger instances which Marijan has to call manually here.
2013-07-23 10:33:10 fangohr-adium: (Got a meeting now, and also struggle to compile OOMMF on osiris. It shouldn't be that hard, should it …?) I'll come over later this morning for a chat - also need to talk to Weiwei.
2013-07-23 10:40:22 max_albert: Quick follow-up: this is a very enlightening blog post about garbage collection (also linked to in the comments to the above-mentioned StackOverflow question): http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx
2013-07-23 10:41:03 max_albert: I particularly like his way of explaning it: "Garbage collection is simulating a computer with an infinite amount of memory. The rest is mechanism."
2013-07-23 10:42:21 fangohr-adium: Seems that we could do something like
2013-07-23 10:42:36 fangohr-adium: with Simulation() as s:
2013-07-23 10:42:41 fangohr-adium:     do stuff with simulation
2013-07-23 10:43:07 fangohr-adium: and when this block is left, the 'with' statement will call s.__exit__() in which we can delete the loggers. The remaining question is how to delete the loggers.
2013-07-23 10:44:26 max_albert: Exactly. And we would have to implement the context manager. (This probably needs to have a name which is different from the Simulation class itself).
2013-07-23 10:50:08 max_albert: Hmm, it seems that deleting loggers is actually not recommended (or even possible), according to this thread: http://grokbase.com/t/python/python-list/11bw1zxwnd/proper-way-to-delete-kill-a-logger
2013-07-23 10:50:46 max_albert: It seems to be possible to remove handlers from a logger (which is probably what we want to do IIUC), but not sure what The Right Way (TM) of doing it is.
2013-07-23 11:50:54 fangohr-adium: The problem arises as the bash(?) complains about too many open files. These are the handlers of the loggers. So removing those would solve this particular problem. I am happy to go with this in the absence of better knowledge.
2013-07-23 12:02:15 max_albert: Yep, I think it's the easiest solution for the moment. I'm just debugging this using a script which Marijan sent me. Hopefully won't take too long to come up with a good workaround.
2013-07-23 12:04:08 mb4e10: Hans, have you just added the Butenko thesis in Dropbox folder. Is it just a merge of two parts or with some changes?
2013-07-23 12:04:24 fangohr-adium: It is just the merge of the two files into one.
2013-07-23 12:04:26 fangohr-adium: Can you print this double-sided?
2013-07-23 12:04:37 fangohr-adium: I seem to have lost ability to print double sided for now.
2013-07-23 12:05:01 mb4e10: I can't print double side.
2013-07-23 12:05:28 mb4e10: I never could.
2013-07-23 12:05:34 fangohr-adium: Okay, thanks.
2013-07-23 13:54:13 max_albert: Just to follow up on the logging issue: I just pushed a change which should hopefully allow to work around the problem.
2013-07-23 13:54:47 max_albert: It's not an automatic solution since it requires the user to manually call 'sim.close_logfile()' if an old simulation object is not needed any more (e.g. at the end of each iteration of Marijan's loop).
2013-07-23 13:57:11 max_albert: The solution with the context manager would be a bit more elegant, and it should be easy to add as well that if we wish (but I'm not planning to do it right now).
2013-07-23 14:22:41 fangohr: Max, I am so impressed you have written tests for the log failure!
2013-07-23 14:23:31 fangohr: (if they don't fail on aleph0, we could use 'ulimits' to reduce the number of open files while we run the tests (something like "ulimits -n 20", but I am not 100% sure where this needs to go within the testing code, the pytest calls etc.)
2013-07-23 14:24:25 max_albert: Well, I needed a minimal example to reproduce the bug anyway, so turning it into a regression test wasn't much more work.
2013-07-23 14:26:00 max_albert: Very nice suggestion!
2013-07-23 15:30:06 max_albert: Great! The test works now and runs much faster, too. Thanks for the suggestion, Hans!
2013-07-23 15:30:52 fangohr: Thanks for fixing the code, and writing the test!
2013-07-23 15:32:09 mb4e10: Thanks Max.
2013-07-23 15:32:25 max_albert: No worries.
2013-07-23 16:55:14 fangohr-adium: Over and out for today.
2013-07-23 16:55:22 max_albert: Bye!
2013-07-23 16:59:07 fangohr: One more thing for Mac-Users: if you follow the instructions on this site (http://www.southampton.ac.uk/isolutions/services/auto_configure_eduroam_printing_and_vpn/index.php) to install a printer driver on your Mac, you can set it up to print double sided - have just done that and it works.
2013-07-23 16:59:30 mb4e10: Great.
2013-07-24 09:26:41 mb4e10: My simulation has not crashed during night. Well done Max!
2013-07-24 09:30:56 fangohr1: Well done indeed, Max.
2013-07-24 09:31:20 fangohr1: Marijan, I suppose you should say your 'simulationS' — as you have probably run quite a few during the night??
2013-07-24 10:41:27 mb4e10: Yes, Simulationsssssssssss :)
2013-07-24 13:44:32 mb8g11: Max, how did you make the plots you just added to dropbox?
2013-07-24 14:17:43 max_albert: mb8g11:  with maplotlib :-P
2013-07-24 14:21:06 max_albert: Basically, I used the annotation facilities (AnnotationBbox in this case) - I'm just trying to find the exact demo which I copied it from.
2013-07-24 14:57:16 max_albert: Ah, finally! Here is the demo I meant: http://matplotlib.org/examples/pylab_examples/demo_annotation_box.html
2013-07-26 13:15:06 fangohr-adium: Hi all, plenty of danish pastries and muffins in the boardroom ready for collection. You may want to get one now to eat later during the group meeting??
2013-07-26 15:07:07 fangohr-adium: Group meeting, anybody?
2013-07-26 15:07:20 max_albert: We'll be over in a minute.
2013-07-26 16:40:23 max_albert: Hi all, this is the "Light Table" editor/IDE which I mentioned in the group meeting (watch the video on the kickstarter page for a nice introduction of its concepts): http://www.kickstarter.com/projects/306316578/light-table
2013-07-26 16:40:42 max_albert: And this is the website: http://www.chris-granger.com/lighttable/
2013-07-26 16:41:50 max_albert: (Or this: http://www.lighttable.com/)
2013-07-26 16:42:11 max_albert: Disclaimer: I haven't tried it. It looks like a neat idea, but not sure how good/useful it is in practice.
2013-08-07 09:47:30 fangohr-adium: Greetings all, I am in the office working through email and admin - but if you have any questions, do come along. (I'll come over at some point as well.)
2013-08-07 09:47:50 fangohr-adium: I suggested to meet with everybody on Friday, I may have to move this to Thursday (tomorrow). Will email later if so.
2013-08-08 10:04:46 fangohr-adium: Good Morning, anybody up for a group meeting? Mark has brought something to eat ;-)
2013-08-08 10:06:06 max_albert: Yes!
2013-08-08 14:15:16 max_albert: Strange... Something is wrong with our slow tests on aleph0.
2013-08-08 14:15:21 max_albert: The past six runs all started hanging at some point inside the standard problem 4.
2013-08-08 14:16:02 max_albert: No idea why... (Running them 'locally' outside of Jenkins seems to work fine.)
2013-08-09 16:36:02 max_albert: For those of you using Hackpad and trying to export the material, I just discovered that there is a "Print" button hidden at the bottom of each pad. This formats the contents in a nicely printable way and you can then export the result to pdf (say) from your browser.
2013-08-09 16:36:18 max_albert: The only downside is that sometimes images are cropped at the edges if they are too big. :-/
2013-08-14 09:07:07 fangohr-adium: Good Morning. I understand that most people are going to the complexity conference later today - safe trip, and enjoy the meeting if you can.
2013-08-14 10:01:03 mb4e10: Thanks
